[{"title":"OpenLDAP å¿«é€Ÿè½åœ°å®è·µ-è¿›é˜¶","path":"/2020/openldap-high-ranking.html","content":"å¤‡ä»½ä¸æ¢å¤ ä¸»è¦ä»‹ç»å¦‚ä½•å¤‡ä»½ OpenLDAP çš„é…ç½®ç›®å½•å’Œæ•°æ®ç›®å½•ï¼Œå¹¶å°†å…¶æ¢å¤åˆ°å¦ä¸€ä¸ª OpenLDAP æœåŠ¡ä¸­ OpenLDAP çš„å¤‡ä»½OpenLDAP çš„å¤‡ä»½å¯ä»¥é€šè¿‡æœåŠ¡ç«¯çš„ slapcat å‘½ä»¤æˆ–å®¢æˆ·ç«¯çš„ ldapsearch å‘½ä»¤ä¸¤ç§æ–¹å¼è¿›è¡Œã€‚ä¸‹é¢å±•ç¤ºäº†å¦‚ä½•åœ¨ OpenLDAP æœåŠ¡ç«¯ä½¿ç”¨ slapcat å¯¹é…ç½®ç›®å½•å’Œæ•°æ®ç›®å½•è¿›è¡Œå¯¼å‡ºã€‚ slapcat -n 0 -l ./config.`date &#x27;+%Y-%m-%d&#x27;`.ldifslapcat -n 2 -l ./data.`date &#x27;+%Y-%m-%d&#x27;`.ldif å…¶ä¸­ï¼Œ-n è¡¨ç¤ºè¦å¯¼å‡ºçš„ OpenLDAP æ•°æ®åº“ç¼–å· OpenLDAP çš„æ¢å¤åœ¨å¼€å§‹æ¢å¤ä¹‹å‰ï¼Œéœ€è¦å…ˆæš‚åœ OpenLDAP æœåŠ¡systemctl stop slapdOpenLDAP é…ç½®ç›®å½•ä¸€èˆ¬ä½äº /etc/openldap/slapd.dï¼Œæˆ‘ä»¬éœ€è¦å…ˆå°†åŸæœ‰é…ç½®åˆ é™¤ï¼Œç„¶åä½¿ç”¨ slapadd å¯¼å…¥æ–°çš„é…ç½®rm -rf &#x2F;etc&#x2F;openldap&#x2F;slapd.d&#x2F;*slapadd -n 0 -F &#x2F;etc&#x2F;openldap&#x2F;slapd.d -l .&#x2F;config.2019-01-04.ldifchown -R ldap:ldap &#x2F;etc&#x2F;openldap&#x2F;slapd.d2020-04-20 OpenLDAP æ•°æ®ç›®å½•ä¸€èˆ¬ä½äº /var/lib/ldapï¼ŒåŒæ ·çš„æˆ‘ä»¬éœ€è¦å…ˆå°†åŸæœ‰æ•°æ®åˆ é™¤ï¼Œç„¶åä½¿ç”¨ slapadd å¯¼å…¥æ–°çš„æ•°æ®rm -rf &#x2F;var&#x2F;lib&#x2F;ldap&#x2F;*slapadd -n 2 -F &#x2F;etc&#x2F;openldap&#x2F;slapd.d -l .&#x2F;data.2019-01-04.ldifchown -R ldap:ldap &#x2F;var&#x2F;lib&#x2F;ldapæœ€åï¼Œé‡å¯ OpenLDAP æœåŠ¡å³å¯systemctl start slapd æ·»åŠ  memberof æ”¯æŒ å¦‚æœä½¿ç”¨ LDAP ä»…ä»…ä½œä¸ºç”¨æˆ·ç»Ÿä¸€ç™»å½•ä¸­å¿ƒï¼Œåˆ™å‚è€ƒå®‰è£…æ–‡æ¡£å³å¯ï¼›å¦‚æœ ldap è¦ä¸ç¬¬ä¸‰æ–¹è½¯ä»¶ç»“åˆï¼Œä¾‹å¦‚ confluenceã€gitlab ç­‰ç»“åˆï¼Œåˆ™éœ€è¦å¼€å¯ memberof æ”¯æŒ å¼€å¯ memberof æ”¯æŒã€‚ vim 1-load-memberof.ldifå†…å®¹å¦‚ä¸‹ï¼šdn: cn=module,cn=configobjectClass: olcModuleListcn: module olcModuleLoad: memberof.laolcModulepath: /usr/lib64/openldap#ldapåº“è·¯å¾„ä¸æ“ä½œç³»ç»Ÿç‰ˆæœ¬æ˜¯ç›¸å…³çš„ï¼Œæ­¤å¤„æ˜¯64ä½æ“ä½œç³»ç»Ÿã€‚ æ–°å¢ç”¨æˆ·æ”¯æŒ memberof é…ç½®ã€‚ vim 2-use-memberof.ldifdn: olcOverlay=memberof,olcDatabase=&#123;2&#125;hdb,cn=configobjectClass: olcConfigobjectClass: olcMemberOfobjectClass: olcOverlayConfigobjectClass: topolcOverlay: memberof å¯¼å…¥ç›¸å…³é…ç½®ã€‚ ldapadd -Y EXTERNAL -H ldapi:/// -f 1-chrootpw.ldifldapadd -Y EXTERNAL -H ldapi:/// -f 2-chdomain.ldifldapadd -Y EXTERNAL -H ldapi:/// -f 3-load-memberof.ldifldapadd -Y EXTERNAL -H ldapi:/// -f 4-use-memberof.ldif æŸ¥çœ‹å½“å‰ dn ä¸‹åŒ…å« cn&#x3D;config é…ç½®åˆ—è¡¨ã€‚ ldapsearch -Q -LLL -Y EXTERNAL -H ldapi:/// -b cn=config dn æŸ¥çœ‹ç”¨æˆ·çš„ memberof ä¿¡æ¯ã€‚ ldapsearch -LL -Y EXTERNAL -H ldapi:/// &quot;(uid=xxxxxx)&quot; -b dc=xxx,dc=com dn memberof å¼€å¯æ—¥å¿—æŸ¥çœ‹ç°åœ¨çš„æ—¥å¿—é…ç½®[root@slave3] ~cat &#x2F;etc&#x2F;openldap&#x2F;slapd.d&#x2F;cn=config.ldif |grep olcLogLevelstateå¿…é¡»å…ˆåˆ›å»ºæ—¥å¿—æ–‡ä»¶ï¼Œå¹¶è°ƒæ•´æƒé™ï¼Œå†ä¿®æ”¹ rsyslog.confmkdir -p &#x2F;var&#x2F;log&#x2F;slapdtouch &#x2F;var&#x2F;log&#x2F;slapd&#x2F;slapd.logchown ldap:ldap &#x2F;var&#x2F;log&#x2F;slapd&#x2F;echo â€œlocal4.* &#x2F;var&#x2F;log&#x2F;slapd&#x2F;slapd.logâ€ &gt;&gt; &#x2F;etc&#x2F;rsyslog.confé‡å¯ä½¿å…¶ç”Ÿæ•ˆsystemctl restart rsyslogä¿®æ”¹æ•°æ•°æ®åº“é…ç½®æ–‡ä»¶[root@test1] ~$ cat log.ldifdn: cn&#x3D;configchangetype: modifyadd: olcLogLevelolcLogLevel: 32[root@test1] ~$ ldapmodify -Y EXTERNAL -H ldapi:&#x2F;&#x2F;&#x2F; -f log.ldifæœ€å¥½è¿›è¡Œæ—¥å¿—åˆ‡å‰²é…ç½®ï¼Œé˜²æ­¢æ–‡ä»¶è¿‡å¤§ï¼Œä¸ä¾¿æ’æŸ¥æ•…éšœvi /etc/logrotate.d/ldap&#x2F;var&#x2F;log&#x2F;slapd&#x2F;slapd.log{ daily # æ¯å¤©è½®è¯¢ä¸€æ¬¡ rotate 5 # ä¿å­˜5ä¸ªå†å²æ—¥å¿—æ–‡ä»¶ï¼Œè¶…è¿‡çš„åˆ é™¤ size 100M copytruncate # å¤åˆ¶æºæ—¥å¿—å†…å®¹åï¼Œæ¸…ç©ºæ–‡ä»¶ï¼Œè€Œä¸æ˜¯åˆ›å»ºæ–°æ–‡ä»¶ dateext # åˆ‡å‰²æ–‡ä»¶æ—¶ï¼Œæ–‡ä»¶åå¸¦æœ‰æ—¥æœŸ missingok # å¦‚æœæŒ‡å®šçš„ç›®å½•ä¸å­˜åœ¨ï¼Œä¼šæŠ¥é”™ï¼Œæ­¤é€‰é¡¹ç”¨æ¥æŠ‘åˆ¶æŠ¥é”™} å¦‚æœä½ æ˜¯ä½¿ç”¨æ—§ç‰ˆä¿®æ”¹é…ç½®æ–‡ä»¶çš„æ–¹å¼ï¼Œå¦‚ä¸‹å¯ç”¨æ—¥å¿—åŠŸèƒ½ ä¿®æ”¹ slapd.conf[root@backup2] &#x2F;etc&#x2F;openldap$ vim slapd.conf#æœ«å°¾æ·»åŠ ä¸€è¡Œloglevel -1ä¿®æ”¹ rsyslog.confï¼Œå¹¶é‡å¯[root@backup2] &#x2F;etc&#x2F;openldap$ vim &#x2F;etc&#x2F;rsyslog.conf#æœ«å°¾æ·»åŠ å¦‚ä¸‹ä¸€è¡Œï¼šlocal4.* &#x2F;var&#x2F;log&#x2F;slapd.log[root@backup2] &#x2F;etc&#x2F;openldap$ systemctl restart rsyslogç”Ÿæˆé…ç½®[root@backup2] &#x2F;etc&#x2F;openldap$ rm -rf &#x2F;etc&#x2F;openldap&#x2F;slapd.d&#x2F;*[root@backup2] &#x2F;etc&#x2F;openldap$ slaptest -f &#x2F;etc&#x2F;openldap&#x2F;slapd.conf -F &#x2F;etc&#x2F;openldap&#x2F;slapd.d&#x2F;[root@backup2] &#x2F;etc&#x2F;openldap$ systemctl start slapd.service123 æ¥æŸ¥çœ‹æ—¥å¿—é€šè¿‡ tailf /var/log/slapd.log æ¥æŸ¥çœ‹æ—¥å¿—","tags":["OpenLDAP"],"categories":["æŠ˜è…¾ä¸æ­¢"]},{"title":"Kubernetes æ§åˆ¶å™¨çš„è¿›åŒ–ä¹‹æ—…","path":"/2020/kubernetes-operator.html","content":"æˆ‘æ˜¯ä¸€å † Kubernetes æ§åˆ¶å™¨ã€‚ ä½ å¯èƒ½ä¼šç–‘æƒ‘ä¸ºä»€ä¹ˆæ˜¯ä¸€å †ï¼Œå› ä¸ºæˆ‘ä¸æ˜¯ä¸€ä¸ªäººï¼Œæˆ‘åªæ˜¯ä¼—å¤šæ§åˆ¶å™¨ä¸­çš„ä¸€å‘˜ï¼Œä½ ä¹Ÿå¯ä»¥æŠŠæˆ‘çœ‹æˆæ˜¯ä¼—å¤šæ§åˆ¶å™¨çš„é›†åˆã€‚æˆ‘çš„èŒè´£å°±æ˜¯ç›‘æ§é›†ç¾¤å†…èµ„æºçš„å®é™…çŠ¶æ€ï¼Œä¸€æ—¦å‘ç°å…¶ä¸æœŸæœ›çš„çŠ¶æ€ä¸ç›¸ç¬¦ï¼Œå°±é‡‡å–è¡ŒåŠ¨ä½¿å…¶ç¬¦åˆæœŸæœ›çŠ¶æ€ã€‚ æƒ³å½“åˆï¼ŒKubernetes è€å¤§å“¥åˆ›é€ æˆ‘æ—¶ï¼Œåªæ˜¯æ‰“ç®—è®©æˆ‘ç”¨æ§åˆ¶å¾ªç¯ç®€å•ç»´æŠ¤ä¸‹èµ„æºçš„çŠ¶æ€ã€‚ä½†æˆ‘åæ¥çš„å‘å±•ï¼Œè¿œè¿œè¶…å‡ºäº†ä»–çš„æƒ³è±¡ã€‚ 1. æ§åˆ¶å¾ªç¯æ‰€è°“æ§åˆ¶å¾ªç¯å°±æ˜¯ä¸€ä¸ªç”¨æ¥è°ƒèŠ‚ç³»ç»ŸçŠ¶æ€çš„å‘¨æœŸæ€§æ“ä½œï¼Œåœ¨ Kubernetes ä¸­ä¹Ÿå«è°ƒè°å¾ªç¯ï¼ˆReconcile Loopï¼‰ã€‚æˆ‘çš„æ‰‹ä¸‹æ§åˆ¶ç€å¾ˆå¤šç§ä¸åŒç±»å‹çš„èµ„æºï¼Œæ¯”å¦‚ Podï¼ŒDeploymentï¼ŒService ç­‰ç­‰ã€‚å°±æ‹¿ Deployment æ¥è¯´å§ï¼Œæˆ‘çš„æ§åˆ¶å¾ªç¯ä¸»è¦åˆ†ä¸ºä¸‰æ­¥ï¼š ä» API Server ä¸­è·å–åˆ°æ‰€æœ‰å±äºè¯¥ Deployment çš„ Podï¼Œç„¶åç»Ÿè®¡ä¸€ä¸‹å®ƒä»¬çš„æ•°é‡ï¼Œå³å®ƒä»¬çš„å®é™…çŠ¶æ€ã€‚ æ£€æŸ¥ Deployment çš„ Replicas å­—æ®µï¼Œçœ‹çœ‹æœŸæœ›çŠ¶æ€æ˜¯å¤šå°‘ä¸ª Podã€‚ å°†è¿™ä¸¤ä¸ªçŠ¶æ€åšæ¯”è¾ƒï¼Œå¦‚æœæœŸæœ›çŠ¶æ€çš„ Pod æ•°é‡æ¯”å®é™…çŠ¶æ€å¤šï¼Œå°±åˆ›å»ºæ–° Podï¼Œå¤šå‡ ä¸ªå°±åˆ›å»ºå‡ ä¸ªæ–°çš„ï¼›å¦‚æœæœŸæœ›çŠ¶æ€çš„ Pod æ•°é‡æ¯”å®é™…çŠ¶æ€å°‘ï¼Œå°±åˆ é™¤æ—§ Podï¼Œå°‘å‡ ä¸ªå°±åˆ é™¤å‡ ä¸ªæ—§çš„ã€‚ ç„¶è€Œå¥½æ™¯ä¸é•¿ï¼Œæˆ‘æ”¶åˆ°äº† Kubernetes æŒé—¨äººï¼ˆçœ‹å¤§é—¨çš„ï¼‰ API Server çš„æŠ±æ€¨ï¼šâ€œä½ è®¿é—®æˆ‘çš„æ¬¡æ•°å¤ªé¢‘ç¹äº†ï¼Œéå¸¸æ¶ˆè€—æˆ‘çš„èµ„æºï¼Œæˆ‘è¿ä¸Šå•æ‰€çš„æ—¶é—´éƒ½æ²¡æœ‰äº†ï¼â€ æˆ‘ä»”ç»†ä¸€æƒ³ï¼Œå½“å‰çš„æ§åˆ¶å¾ªç¯æ¨¡å¼ç¡®å®æœ‰è¿™ä¸ªç¼ºé™· â€”â€” è®¿é—® API Server çš„æ¬¡æ•°å¤ªé¢‘ç¹äº†ï¼Œå®¹æ˜“è¢«è€å¤§åæ„Ÿã€‚ æ‰€ä»¥æˆ‘å†³å®šï¼Œæ‰¾ä¸€ä¸ªå°å¼Ÿã€‚ 2. Informerè¿™æ¬¡æˆ‘æ‹›çš„å°å¼Ÿå« Informerï¼Œå®ƒåˆ†æ‹…ä¸€éƒ¨åˆ†æˆ‘çš„ä»»åŠ¡ï¼Œå…·ä½“çš„åšæ³•æ˜¯è¿™æ ·çš„ï¼šç”± Informer ä»£æ›¿æˆ‘å»è®¿é—® API Serverï¼Œè€Œæˆ‘ä¸ç®¡æ˜¯æŸ¥çŠ¶æ€è¿˜æ˜¯å¯¹èµ„æºè¿›è¡Œä¼¸ç¼©éƒ½å’Œ Informer è¿›è¡Œäº¤æ¥ã€‚è€Œä¸” Informer ä¸éœ€è¦æ¯æ¬¡éƒ½å»è®¿é—® API Serverï¼Œå®ƒåªè¦åœ¨åˆå§‹åŒ–çš„æ—¶å€™é€šè¿‡ LIST API è·å–æ‰€æœ‰èµ„æºçš„æœ€æ–°çŠ¶æ€ï¼Œç„¶åå†é€šè¿‡ WATCH API å»ç›‘å¬è¿™äº›èµ„æºçŠ¶æ€çš„å˜åŒ–ï¼Œæ•´ä¸ªè¿‡ç¨‹è¢«ç§°ä½œ ListAndWatchã€‚ è€Œ Informer ä¹Ÿä¸å‚»ï¼Œå®ƒä¹Ÿæœ‰ä¸€ä¸ªåŠ©æ‰‹å« Reflectorï¼Œä¸Šé¢æ‰€è¯´çš„ ListAndWatch äº‹å®ä¸Šæ˜¯ç”± Reflector ä¸€æ‰‹æ“åŠçš„ã€‚ è¿™ä¸€æ¬¡ï¼ŒAPI Server çš„å‹åŠ›å¤§å¤§å‡è½»äº†ï¼Œå› ä¸º Reflector å¤§éƒ¨åˆ†æ—¶é—´éƒ½åœ¨ WATCHï¼Œå¹¶æ²¡æœ‰é€šè¿‡ LIST è·å–æ‰€æœ‰çŠ¶æ€ï¼Œè¿™ä½¿ API Server çš„å‹åŠ›å¤§å¤§å‡å°‘ã€‚æˆ‘æƒ³è¿™æ¬¡æŒé—¨äººåº”è¯¥ä¸ä¼šå†æ‰¹è¯„æˆ‘äº†å§ã€‚ ç„¶è€Œæ²¡è¿‡å‡ å¤©ï¼ŒæŒé—¨äººåˆæ‰¾æˆ‘è°ˆè¯äº†ï¼šâ€œä½ çš„æ‰‹ä¸‹æ¯æ¬¡æ¥ WATCH æˆ‘ï¼Œéƒ½è¦ WATCH æ‰€æœ‰å…„å¼Ÿçš„çŠ¶æ€ï¼Œä¾ç„¶å¾ˆæ¶ˆè€—æˆ‘çš„èµ„æºå•Šï¼æˆ‘å°±çº³é—·äº†ï¼Œä½ ä¸€æ¬¡æè¿™ä¹ˆå¤šå…„å¼Ÿï¼Œä½ è™å•Šï¼Ÿâ€ æˆ‘ä¸€æƒ³æœ‰é“ç†å•Šï¼Œæ²¡å¿…è¦æ¯æ¬¡éƒ½ WATCH æ‰€æœ‰å…„å¼Ÿçš„çŠ¶æ€ï¼Œäºæ˜¯å‘Šè¯‰ Informerï¼šâ€œä»¥åå†å» API Server é‚£é‡Œ WATCH çŠ¶æ€çš„æ—¶å€™ï¼ŒåªæŸ¥ WATCH ç‰¹å®šèµ„æºçš„çŠ¶æ€ï¼Œä¸è¦ä¸€è‚¡è„‘å„¿å…¨ WATCHã€‚â€œ Informer å†æŠŠè¿™ä¸ªå†³ç­–å‘Šè¯‰ Reflectorï¼Œäº‹æƒ…å°±è¿™ä¹ˆæ„‰å¿«åœ°å†³å®šäº†ã€‚ æœ¬ä»¥ä¸ºè¿™æ¬¡æˆ‘ä¼šå¾—åˆ°æŒé—¨äººçš„å¤¸å¥–ï¼Œå¯æ²¡è¿‡å‡ å¤©å®‰ç¨³æ—¥å­ï¼Œå®ƒåˆæ¥æ‰¾æˆ‘è¯‰è‹¦äº†ï¼šâ€œå…„å¼Ÿï¼Œè™½ç„¶ä½ å‡è½»äº†æˆ‘çš„ç²¾ç¥å‹åŠ›ï¼Œä½†æˆ‘çš„è´¢åŠ›æœ‰é™å•Šï¼Œå¦‚æœæ¯ä¸ªæ§åˆ¶å™¨éƒ½æ‹›ä¸€ä¸ªå°å¼Ÿï¼Œé‚£æˆ‘å¾—å¤šå‘å¤šå°‘äººçš„å·¥èµ„å•Šï¼Œä½ æƒ³æƒ³åŠæ³•ã€‚â€ 3. SharedInformerç»è¿‡å’Œå…¶ä»–æ§åˆ¶å™¨çš„è®¨è®ºï¼Œæˆ‘ä»¬å†³å®šè¿™ä¹ˆåšï¼šæ‰€æœ‰æ§åˆ¶å™¨è”åˆèµ·æ¥ä½œä¸ºä¸€ä¸ªæ•´ä½“æ¥åˆ†é… Informerï¼Œé’ˆå¯¹æ¯ä¸ªï¼ˆå—å¤šä¸ªæ§åˆ¶å™¨ç®¡ç†çš„ï¼‰èµ„æºæ‹›ä¸€ä¸ª Informer å°å¼Ÿï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º SharedInformerã€‚ä½ ä»¬å¯ä»¥ç†è§£ä¸ºå…±äº« Informerï¼Œå› ä¸ºæœ‰å¾ˆå¤šèµ„æºæ˜¯å—å¤šä¸ªæ§åˆ¶å™¨ç®¡ç†çš„ï¼Œæ¯”å¦‚ Pod åŒæ—¶å— Deployment å’Œ StatefulSet ç®¡ç†ã€‚è¿™æ ·å½“å¤šä¸ªæ§åˆ¶å™¨åŒæ—¶æƒ³æŸ¥ Pod çš„çŠ¶æ€æ—¶ï¼Œåªéœ€è¦è®¿é—®ä¸€ä¸ª Informer å°±è¡Œäº†ã€‚ ä½†è¿™åˆå¼•æ¥äº†æ–°çš„é—®é¢˜ï¼ŒSharedInformer æ— æ³•åŒæ—¶ç»™å¤šä¸ªæ§åˆ¶å™¨æä¾›ä¿¡æ¯ï¼Œè¿™å°±éœ€è¦æ¯ä¸ªæ§åˆ¶å™¨è‡ªå·±æ’é˜Ÿå’Œé‡è¯•ã€‚ ä¸ºäº†é…åˆæ§åˆ¶å™¨æ›´å¥½åœ°å®ç°æ’é˜Ÿå’Œé‡è¯•ï¼ŒSharedInformer æäº†ä¸€ä¸ª Delta FIFO Queueï¼ˆå¢é‡å…ˆè¿›å…ˆå‡ºé˜Ÿåˆ—ï¼‰ï¼Œæ¯å½“èµ„æºè¢«ä¿®æ”¹æ—¶ï¼Œå®ƒçš„åŠ©æ‰‹ Reflector å°±ä¼šæ”¶åˆ°äº‹ä»¶é€šçŸ¥ï¼Œå¹¶å°†å¯¹åº”çš„äº‹ä»¶æ”¾å…¥ Delta FIFO Queue ä¸­ã€‚ä¸æ­¤åŒæ—¶ï¼ŒSharedInformer ä¼šä¸æ–­ä» Delta FIFO Queue ä¸­è¯»å–äº‹ä»¶ï¼Œç„¶åæ›´æ–°æœ¬åœ°ç¼“å­˜çš„çŠ¶æ€ã€‚ è¿™è¿˜ä¸è¡Œï¼ŒSharedInformer é™¤äº†æ›´æ–°æœ¬åœ°ç¼“å­˜ä¹‹å¤–ï¼Œè¿˜è¦æƒ³åŠæ³•å°†æ•°æ®åŒæ­¥ç»™å„ä¸ªæ§åˆ¶å™¨ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå®ƒåˆæäº†ä¸ªå·¥ä½œé˜Ÿåˆ—ï¼ˆWorkqueueï¼‰ï¼Œä¸€æ—¦æœ‰èµ„æºè¢«æ·»åŠ ã€ä¿®æ”¹æˆ–åˆ é™¤ï¼Œå°±ä¼šå°†ç›¸åº”çš„äº‹ä»¶åŠ å…¥åˆ°å·¥ä½œé˜Ÿåˆ—ä¸­ã€‚æ‰€æœ‰çš„æ§åˆ¶å™¨æ’é˜Ÿè¿›è¡Œè¯»å–ï¼Œä¸€æ—¦æŸä¸ªæ§åˆ¶å™¨å‘ç°è¿™ä¸ªäº‹ä»¶ä¸è‡ªå·±ç›¸å…³ï¼Œå°±æ‰§è¡Œç›¸åº”çš„æ“ä½œã€‚å¦‚æœæ“ä½œå¤±è´¥ï¼Œå°±å°†è¯¥äº‹ä»¶æ”¾å›é˜Ÿåˆ—ï¼Œç­‰ä¸‹æ¬¡æ’åˆ°è‡ªå·±å†è¯•ä¸€æ¬¡ã€‚å¦‚æœæ“ä½œæˆåŠŸï¼Œå°±å°†è¯¥äº‹ä»¶ä»é˜Ÿåˆ—ä¸­åˆ é™¤ã€‚ ç°åœ¨è¿™ä¸ªå·¥ä½œæ¨¡å¼å¾—åˆ°äº†å¤§å®¶çš„ä¸€è‡´å¥½è¯„ã€‚è™½ç„¶å•ä¸ª SharedInformer çš„å·¥ä½œé‡å¢åŠ äº†ï¼Œä½† Informer çš„æ•°é‡å¤§å¤§å‡å°‘äº†ï¼Œè€å¤§å¯ä»¥æŠŠçœä¸‹æ¥çš„èµ„é‡‘æ‹¿å‡ºä¸€å°éƒ¨åˆ†ç»™ SharedInformer æ¶¨å·¥èµ„å•Šï¼Œè¿™æ ·å¤§å®¶éƒ½å¾ˆå¼€å¿ƒã€‚ 4. CRDå…¨æ°‘ Kubernetes æ—¶ä»£åˆ°äº†ã€‚ éšç€å®¹å™¨åŠå…¶ç¼–æ’æŠ€æœ¯çš„æ™®åŠï¼Œä½¿ç”¨ Kubernetes çš„ç”¨æˆ·å¤§é‡å¢é•¿ï¼Œç”¨æˆ·å·²ç»ä¸æ»¡è¶³ Kubernetes è‡ªå¸¦çš„é‚£äº›èµ„æºï¼ˆPodï¼ŒNodeï¼ŒServiceï¼‰äº†ï¼Œå¤§å®¶éƒ½å¸Œæœ›èƒ½æ ¹æ®å…·ä½“çš„ä¸šåŠ¡åˆ›å»ºç‰¹å®šçš„èµ„æºï¼Œå¹¶ä¸”å¯¹è¿™äº›èµ„æºçš„çŠ¶æ€ç»´æŠ¤è¿˜è¦éµå¾ªä¸Šé¢æ‰€è¯´çš„é‚£ä¸€å¥—æ§åˆ¶å¾ªç¯æœºåˆ¶ã€‚ å¹¸å¥½æœ€è¿‘æŒé—¨äººåšäº†ä¸€æ¬¡å‡çº§ï¼Œæ–°å¢äº†ä¸€ä¸ªæ’ä»¶å« CRDï¼ˆCustom Resource Definitionï¼‰ï¼Œåˆ›å»ºä¸€ä¸ªå…¨æ–°çš„èµ„æºå®ä¾‹ï¼Œåªéœ€è¦ç»è¿‡ä»¥ä¸‹ä¸¤æ­¥ï¼š åˆ›å»ºä¸€ä¸ª CRD èµ„æºï¼ˆæ²¡é”™ï¼ŒCRD ä¹Ÿæ˜¯ä¸€ç§èµ„æºç±»å‹ï¼‰ï¼Œå…¶ä¸­å®šä¹‰â€ è‡ªå®šä¹‰èµ„æº â€œçš„ API ç»„ã€API ç‰ˆæœ¬å’Œèµ„æºç±»å‹ã€‚è¿™æ ·å°±ä¼šå‘ API Server æ³¨å†Œè¯¥èµ„æºç±»å‹çš„ APIã€‚ æŒ‡å®šä¸Šé¢å®šä¹‰çš„ API ç»„ å’Œ API ç‰ˆæœ¬ï¼Œåˆ›å»ºè‡ªå®šä¹‰èµ„æºã€‚ å½“ç„¶ï¼Œä¸­é—´è¿˜è¦åŠ å…¥ä¸€äº›ä»£ç è®© Kubernetes è®¤è¯†è‡ªå®šä¹‰èµ„æºçš„å„ç§å‚æ•°ã€‚ åˆ°è¿™ä¸€æ­¥å°±åŸºæœ¬ä¸Šå®Œæˆäº†è‡ªå®šä¹‰èµ„æºçš„åˆ›å»ºï¼Œä½† Kubernetes å¹¶ä¸çŸ¥é“è¯¥èµ„æºæ‰€å¯¹åº”çš„ä¸šåŠ¡é€»è¾‘ï¼Œæ¯”å¦‚ä½ çš„è‡ªå®šä¹‰èµ„æºæ˜¯å®¿ä¸»æœºï¼Œé‚£ä¹ˆå¯¹åº”çš„ä¸šåŠ¡é€»è¾‘å°±æ˜¯åˆ›å»ºä¸€å°çœŸæ­£çš„å®¿ä¸»æœºå‡ºæ¥ã€‚é‚£ä¹ˆæ€æ ·å®ç°å®ƒçš„ä¸šåŠ¡é€»è¾‘å‘¢ï¼Ÿ 5. è‡ªå®šä¹‰æ§åˆ¶å™¨Controller Manager è§å¤šè¯†å¹¿ï¼Œè¯´ï¼šâ€ è¿™é‡Œçš„æ¯ä¸ªæ§åˆ¶å™¨éƒ½æ˜¯æˆ‘çš„ä¸€éƒ¨åˆ†ï¼Œå½“åˆåˆ›é€ ä½ ä»¬æ˜¯å› ä¸ºä½ ä»¬éƒ½å±äºé€šç”¨çš„æ§åˆ¶å™¨ï¼Œå¤§å®¶éƒ½èƒ½ç”¨å¾—ä¸Šã€‚è€Œè‡ªå®šä¹‰èµ„æºéœ€è¦æ ¹æ®å…·ä½“çš„ä¸šåŠ¡æ¥å®ç°ï¼Œæˆ‘ä»¬ä¸å¯èƒ½çŸ¥é“æ¯ä¸ªç”¨æˆ·çš„å…·ä½“ä¸šåŠ¡æ˜¯å•¥ï¼Œè‡ªå·±ä¸€æ‹è„‘è¢‹æƒ³å‡ºæ¥çš„è‡ªå®šä¹‰èµ„æºï¼Œç”¨æˆ·ä¹Ÿä¸ä¸€å®šç”¨å¾—ä¸Šã€‚æˆ‘ä»¬å¯ä»¥è®©ç”¨æˆ·è‡ªå·±ç¼–å†™è‡ªå®šä¹‰æ§åˆ¶å™¨ï¼Œä½ ä»¬æŠŠä¹‹å‰ä½¿ç”¨çš„æ§åˆ¶å¾ªç¯å’Œ Informer è¿™äº›ç¼–ç æ¨¡å¼æ€»ç»“ä¸€ä¸‹ï¼Œç„¶åæä¾›ç»™ç”¨æˆ·ï¼Œè®©ä»–ä»¬æŒ‰ç…§åŒæ ·çš„æ–¹æ³•ç¼–å†™è‡ªå·±çš„æ§åˆ¶å™¨ã€‚â€œ Deployment æ§åˆ¶å™¨ä¸€æƒŠï¼Œè¦æŠŠè‡ªå·±çš„ç§˜å¯†å‘Šè¯‰åˆ«äººï¼Ÿé‚£åˆ«äººæŠŠè‡ªå·±å–ä»£äº†å’‹åŠï¼Ÿèµ¶å¿™é—®é“ï¼šâ€ é‚£å°†æ¥æˆ‘å²‚ä¸æ˜¯å¾ˆå±é™©ï¼Œæ²¡æœ‰å­˜åœ¨çš„ä½™åœ°äº†ï¼Ÿâ€œ Controller Manager èµ¶å¿™è§£é‡Šé“ï¼šâ€ ä¸ç”¨æ‹…å¿ƒï¼Œè™½ç„¶ç”¨æˆ·å¯ä»¥ç¼–å†™è‡ªå®šä¹‰æ§åˆ¶å™¨ï¼Œä½†æ— è®ºä»–ä»¬ç©å‡ºä»€ä¹ˆèŠ±æ ·ï¼Œåªè¦ä»–ä»¬çš„ä¸šåŠ¡è·‘åœ¨ Kubernetes å¹³å°ä¸Šï¼Œå°±å…ä¸äº†è¦è·‘å®¹å™¨ï¼Œæœ€åè¿˜æ˜¯ä¼šæ¥æ±‚ä½ ä»¬å¸®å¿™çš„ï¼Œä½ è¦çŸ¥é“ï¼Œæ§åˆ¶å™¨æ˜¯å¯ä»¥å±‚å±‚é€’è¿›çš„ï¼Œä»–ä»¬åªä¸è¿‡æ˜¯åœ¨ä½ å¤–é¢å¥—äº†ä¸€å±‚ï¼Œæœ€åè¿˜æ˜¯è¦å›åˆ°ä½ è¿™é‡Œï¼Œè¯·æ±‚ä½ å¸®å¿™æ§åˆ¶ Podã€‚â€œ è¿™ä¸‹å¤§å®¶éƒ½ä¸æ…Œäº†ï¼Œå†³å®šå°±æŠŠè‡ªå®šä¹‰æ§åˆ¶å™¨è¿™ä»¶äº‹æƒ…äº¤ç»™ç”¨æˆ·è‡ªå·±å»å¤„ç†ï¼Œå°†é€‰æ‹©æƒç•™ç»™ç”¨æˆ·ã€‚ 6. Operatorç”¨æˆ·è‡ªä»è·å¾—äº†ç¼–å†™è‡ªå®šä¹‰æ§åˆ¶å™¨çš„æƒåŠ›ä¹‹åï¼Œéå¸¸å¼€å¿ƒï¼Œæœ‰çš„ç”¨æˆ·ï¼ˆCoreOSï¼‰ä¸ºäº†æ–¹ä¾¿å¤§å®¶æ§åˆ¶æœ‰çŠ¶æ€åº”ç”¨ï¼Œå¼€å‘å‡ºäº†ä¸€ç§ç‰¹å®šçš„æ§åˆ¶å™¨æ¨¡å‹å« Operatorï¼Œå¹¶å¼€å§‹åœ¨ç¤¾åŒºå†…æ¨å¹¿ï¼Œå¾—åˆ°äº†å¤§å®¶çš„ä¸€è‡´å¥½è¯„ã€‚ä¸å¯å¦è®¤ï¼ŒOperator è¿™ç§æ¨¡å¼æ˜¯å¾ˆèªæ˜çš„ï¼Œå®ƒæŠŠéœ€è¦ç‰¹å®šé¢†åŸŸçŸ¥è¯†çš„åº”ç”¨å•ç‹¬å†™ä¸€ä¸ª Operator æ§åˆ¶å™¨ï¼Œå°†è¿™ç§åº”ç”¨ç‰¹å®šçš„æ“ä½œçŸ¥è¯†ç¼–å†™åˆ°è½¯ä»¶ä¸­ï¼Œä½¿å…¶å¯ä»¥åˆ©ç”¨ Kubernetes å¼ºå¤§çš„æŠ½è±¡èƒ½åŠ›ï¼Œè¾¾åˆ°æ­£ç¡®è¿è¡Œå’Œç®¡ç†åº”ç”¨çš„ç›®çš„ã€‚ ä»¥ ETCD Operator ä¸ºä¾‹ï¼Œå‡å¦‚ä½ æƒ³æ‰‹åŠ¨æ‰©å±•ä¸€ä¸ª ETCD é›†ç¾¤ï¼Œä¸€èˆ¬çš„åšæ³•æ˜¯ï¼š ä½¿ç”¨ ETCD ç®¡ç†å·¥å…·æ·»åŠ ä¸€ä¸ªæ–°æˆå‘˜ã€‚ ä¸ºè¿™ä¸ªæˆå‘˜æ‰€åœ¨çš„èŠ‚ç‚¹ç”Ÿæˆå¯¹åº”çš„å¯åŠ¨å‚æ•°ï¼Œå¹¶å¯åŠ¨å®ƒã€‚ è€Œ ETCD Operator å°†è¿™äº›ç‰¹å®šäº etcd çš„æ“ä½œæ‰‹æ³•ç¼–å†™åˆ°äº†å®ƒçš„æ§åˆ¶å¾ªç¯ä¸­ï¼Œä½ åªéœ€è¦é€šè¿‡ä¿®æ”¹è‡ªå®šä¹‰èµ„æºå£°æ˜é›†ç¾¤æœŸæœ›çš„æˆå‘˜æ•°é‡ï¼Œå‰©ä¸‹çš„äº‹æƒ…äº¤ç»™ Operator å°±å¥½äº†ã€‚ æœ¬ä»¥ä¸ºè¿™æ˜¯ä¸€ä¸ªçš†å¤§æ¬¢å–œçš„æ–¹æ¡ˆï¼Œä½†æ²¡è¿‡å¤šä¹…ï¼Œå°±æœ‰å¼€å‘ Operator çš„å°å“¥æ¥æŠ±æ€¨äº†ï¼šâ€ æˆ‘ä»¬æœ‰å¾ˆå¤šå¼€å‘çš„å°ä¼™ä¼´éƒ½æ˜¯ä¸æ‡‚è¿ç»´é‚£ä¸€å¥—çš„ï¼Œä»€ä¹ˆé«˜å¯ç”¨ã€å®¹ç¾æ ¹æœ¬ä¸æ‡‚å•Šï¼Œç°åœ¨è®©æˆ‘ä»¬å°†è¿ç»´çš„æ“ä½œçŸ¥è¯†ç¼–å†™åˆ°è½¯ä»¶ä¸­ï¼Œè‡£å¦¾åšä¸åˆ°å•Šã€‚ã€‚â€œ è¿™ç¡®å®æ˜¯ä¸ªé—®é¢˜ï¼Œè¿™æ ·ä¸€æ¥å°±æŠŠå¼€å‘å’Œè¿ç»´çš„å·¥ä½œéƒ½å¡åˆ°äº†å¼€å‘æ‰‹é‡Œï¼Œæ—¢æ‡‚å¼€å‘åˆæ‡‚è¿ç»´çš„å¯ä¸å¤šå•Šï¼Œä¸ºäº†ç…§é¡¾å¤§å®¶ï¼Œè¿˜å¾—ç»§ç»­æƒ³åŠæ³•æŠŠå¼€å‘å’Œè¿ç»´çš„å·¥ä½œæ‹†åˆ†å¼€æ¥ã€‚ 7. OAMè¿™æ—¶å€™é˜¿é‡Œå’Œå¾®è½¯å‘åŠ›äº†ï¼Œä»–ä»¬è”åˆå‘å¸ƒäº†ä¸€ä¸ªå¼€æ”¾åº”ç”¨æ¨¡å‹ï¼Œå« Open Application Model ï¼ˆOAMï¼‰ã€‚è¿™ä¸ªæ¨¡å‹å°±æ˜¯ä¸ºäº†è§£å†³ä¸Šé¢æåˆ°çš„é—®é¢˜ï¼Œå°†å¼€å‘å’Œè¿ç»´çš„èŒè´£è§£è€¦ï¼Œä¸åŒçš„è§’è‰²å±¥è¡Œä¸åŒçš„èŒè´£ï¼Œå¹¶å½¢æˆä¸€ä¸ªç»Ÿä¸€çš„è§„èŒƒï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š è¿™ä¸ªè§„èŒƒå‘Šè¯‰æˆ‘ä»¬ï¼š å¼€å‘äººå‘˜è´Ÿè´£æè¿°ç»„ä»¶çš„åŠŸèƒ½ï¼Œå¦‚ä½•é…ç½®ç»„ä»¶ï¼Œä»¥åŠè¿è¡Œéœ€è¦å¤šå°‘èµ„æº è¿ç»´äººå‘˜è´Ÿè´£å°†ç›¸å…³ç»„ä»¶ç»„åˆæˆä¸€ä¸ªåº”ç”¨ï¼Œå¹¶é…ç½®è¿è¡Œæ—¶å‚æ•°å’Œè¿ç»´æ”¯æ’‘èƒ½åŠ›ï¼Œæ¯”å¦‚æ˜¯å¦éœ€è¦ç›‘æ§ï¼Œæ˜¯å¦éœ€è¦å¼¹æ€§ä¼¸ç¼©ã€‚ åŸºç¡€è®¾æ–½å·¥ç¨‹å¸ˆè´Ÿè´£å»ºç«‹å’Œç»´æŠ¤åº”ç”¨çš„è¿è¡Œæ—¶ç¯å¢ƒï¼ˆå¦‚åº•å±‚ç³»ç»Ÿï¼‰ã€‚ å…¶ä¸­æ¯ä¸€ä¸ªå›¢é˜Ÿè´Ÿè´£çš„äº‹æƒ…éƒ½ç”¨å¯¹åº”çš„ CRD æ¥é…ç½®ã€‚ è¿™æ ·ä¸€æ¥ï¼Œå¼€å‘å’Œè¿ç»´äººå‘˜çš„èŒè´£å°±è¢«åŒºåˆ†å¼€æ¥äº†ï¼Œç®€åŒ–äº†åº”ç”¨çš„ç»„åˆå’Œè¿ç»´ã€‚å®ƒå°†åº”ç”¨çš„é…ç½®å’Œè¿ç»´ç‰¹å¾ï¼ˆå¦‚è‡ªåŠ¨ä¼¸ç¼©ã€æµé‡ç›‘æ§ï¼‰è¿›è¡Œè§£è€¦ï¼Œç„¶åé€šè¿‡å»ºæ¨¡æ„æˆä¸€ä¸ªæ•´ä½“ï¼Œé¿å…äº† Operator è¿™ç§æ¨¡å‹å¸¦æ¥çš„å¤§é‡å†—ä½™ã€‚ è‡ªä»ç”¨ä¸Šäº†è¿™ä¸ªæ¨¡å‹ä¹‹åï¼Œè¿ç»´å’Œå¼€å‘å°å“¥è¡¨ç¤ºç°åœ¨ä»–ä»¬çš„å…³ç³»å¾ˆèæ´½ï¼Œæ²¡äº‹è¿˜èƒ½ä¸€èµ·å‡ºå»å–ä¸¤æ¯ã€‚ æ–‡ç« è½¬è‡ªKubernetesæ§åˆ¶å™¨çš„è¿›åŒ–ä¹‹æ—… https://fuckcloudnative.io/posts/controllers-confession/https://fuckcloudnative.io/posts/controllers-confession/","tags":["Cloud Navite","Kubernetes"],"categories":["æŠ€æœ¯åŠ æ²¹ç«™"]},{"title":"OpenLDAP å¿«é€Ÿè½åœ°å®è·µ-éƒ¨ç½²é…ç½®","path":"/2020/openldap-install-config.html","content":"ä¸‹è½½ä¾èµ–æœ¬æ–‡ä¸­ç›¸å…³æ“ä½œç³»ç»ŸåŠä¾èµ–åŒ…çš„ç‰ˆæœ¬å¦‚ä¸‹ï¼š centos-release-7-4.1708.el7.centos.x86_64 openldap-clients-2.4.44-5.el7.x86_64ï¼šåŒ…å«å®¢æˆ·ç«¯ç¨‹åºï¼Œç”¨æ¥è®¿é—®å’Œä¿®æ”¹ OpenLDAP ç›®å½• openldap-servers-2.4.44-5.el7.x86_64ï¼šåŒ…å«ä¸» LDAP æœåŠ¡å™¨ slapd å’ŒåŒæ­¥æœåŠ¡å™¨ slurpd æœåŠ¡å™¨ã€è¿ç§»è„šæœ¬å’Œç›¸å…³æ–‡ä»¶ å®‰è£…éƒ¨ç½²ç¬¬ä¸€æ­¥ï¼Œéœ€è¦åˆ‡æ¢åˆ° root è´¦å·æ¥å®‰è£… OpenLDAP ç›¸å…³ç¨‹åºåŒ…ï¼Œå¹¶å¯åŠ¨æœåŠ¡ï¼š $ yum install -y openldap-servers openldap-clients$ cp /usr/share/openldap-servers/DB_CONFIG.example /var/lib/ldap/DB_CONFIG$ chown ldap. /var/lib/ldap/DB_CONFIG$ systemctl enable slapd$ systemctl start slapd ç¬¬äºŒæ­¥ï¼Œæˆ‘ä»¬ä½¿ç”¨ slappasswd å‘½ä»¤æ¥ç”Ÿæˆä¸€ä¸ªå¯†ç ï¼Œå¹¶ä½¿ç”¨ LDIFï¼ˆLDAP æ•°æ®äº¤æ¢æ ¼å¼ï¼‰æ–‡ä»¶å°†å…¶å¯¼å…¥åˆ° LDAP ä¸­æ¥é…ç½®ç®¡ç†å‘˜å¯†ç ï¼š $ slappasswdNew password:Re-enter new password:&#123;SSHA&#125;KS/bFZ8KTmO56khHjJvM97l7zivH1MwG$ vim chrootpw.ldif# specify the password generated above for &quot;olcRootPW&quot; sectiondn: olcDatabase=&#123;0&#125;config,cn=configchangetype: modifyadd: olcRootPWolcRootPW: &#123;SSHA&#125;KS/bFZ8KTmO56khHjJvM97l7zivH1MwG$ ldapadd -Y EXTERNAL -H ldapi:/// -f chrootpw.ldif ç¬¬ä¸‰æ­¥ï¼Œæˆ‘ä»¬éœ€è¦å‘ LDAP ä¸­å¯¼å…¥ä¸€äº›åŸºæœ¬çš„ Schemaã€‚è¿™äº› Schema æ–‡ä»¶ä½äº /etc/openldap/schema/ ç›®å½•ä¸­ï¼Œå®šä¹‰äº†æˆ‘ä»¬ä»¥ååˆ›å»ºçš„æ¡ç›®å¯ä»¥ä½¿ç”¨å“ªäº›å±æ€§ï¼š $ ldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/schema/core.ldif$ ldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/schema/cosine.ldif$ ldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/schema/nis.ldif$ ldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/schema/inetorgperson.ldif ç¬¬å››æ­¥ï¼Œæˆ‘ä»¬éœ€è¦é…ç½® LDAP çš„é¡¶çº§åŸŸï¼ˆä»¥ dc=leeif,dc=me ä¸ºä¾‹ï¼‰åŠå…¶ç®¡ç†åŸŸï¼š $ slappasswdNew password:Re-enter new password:&#123;SSHA&#125;z/rsbmAjVtLlWeUB0xS5itLPI0VA1akD$ vim chdomain.ldif# replace to your own domain name for &quot;dc=***,dc=***&quot; section# specify the password generated above for &quot;olcRootPW&quot; sectiondn: olcDatabase=&#123;1&#125;monitor,cn=configchangetype: modifyreplace: olcAccessolcAccess: &#123;0&#125;to * by dn.base=&quot;gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth&quot; read by dn.base=&quot;cn=admin,dc=leeif,dc=me&quot; read by * nonedn: olcDatabase=&#123;2&#125;mdb,cn=configchangetype: modifyreplace: olcSuffixolcSuffix: dc=leeif,dc=medn: olcDatabase=&#123;2&#125;mdb,cn=configchangetype: modifyreplace: olcRootDNolcRootDN: cn=admin,dc=leeif,dc=medn: olcDatabase=&#123;2&#125;mdb,cn=configchangetype: modifyadd: olcRootPWolcRootPW: &#123;SSHA&#125;z/rsbmAjVtLlWeUB0xS5itLPI0VA1akDdn: olcDatabase=&#123;2&#125;mdb,cn=configchangetype: modifyadd: olcAccessolcAccess: &#123;0&#125;to attrs=userPassword,shadowLastChange by dn=&quot;cn=admin,dc=leeif,dc=me&quot; write by anonymous auth by self write by * noneolcAccess: &#123;1&#125;to dn.base=&quot;&quot; by * readolcAccess: &#123;2&#125;to * by dn=&quot;cn=admin,dc=leeif,dc=me&quot; write by * read$ ldapmodify -Y EXTERNAL -H ldapi:/// -f chdomain.ldif ç¬¬äº”æ­¥ï¼Œåœ¨ä¸Šè¿°åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬æ¥åˆ›å»ºä¸€ä¸ªå«åš leeif News Agency çš„ç»„ç»‡ï¼Œå¹¶åœ¨å…¶ä¸‹åˆ›å»ºä¸€ä¸ª Manager çš„ç»„ç»‡è§’è‰²ï¼ˆè¯¥è§’è‰²å†…çš„ç”¨æˆ·å…·æœ‰ç®¡ç†æ•´ä¸ª LDAP çš„æƒé™ï¼‰å’Œ People å’Œ Group ä¸¤ä¸ªç»„ç»‡å•å…ƒï¼š $ vim basedomain.ldif# replace to your own domain name for &quot;dc=***,dc=***&quot; sectiondn: dc=leeif,dc=meobjectClass: topobjectClass: dcObjectobjectclass: organizationo: leeif.IOdc: leeifdn: cn=admin,dc=leeif,dc=meobjectClass: organizationalRolecn: Managerdn: ou=people,dc=leeif,dc=meobjectClass: organizationalUnitou: peopledn: ou=group,dc=leeif,dc=meobjectClass: organizationalUnitou: group$ ldapadd -x -D cn=admin,dc=leeif,dc=me -W -f basedomain.ldif é€šè¿‡ä»¥ä¸Šçš„æ‰€æœ‰æ­¥éª¤ï¼Œæˆ‘ä»¬å°±è®¾ç½®å¥½äº†ä¸€ä¸ª LDAP ç›®å½•æ ‘ï¼šå…¶ä¸­åŸºå‡† dn dc=leeif,dc=me æ˜¯è¯¥æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œå…¶ä¸‹æœ‰ä¸€ä¸ªç®¡ç†åŸŸ cn=admin,dc=leeif,dc=me å’Œä¸¤ä¸ªç»„ç»‡å•å…ƒ ou=people,dc=leeif,dc=me åŠ ou=group,dc=leeif,dc=meã€‚ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥åˆ›å»ºä¸€ä¸ªå«ä½œ Ada Catherine çš„å‘˜å·¥å¹¶å°†å…¶åˆ†é…åˆ° Secretary ç»„æ¥éªŒè¯ä¸Šè¿°é…ç½®æ˜¯å¦ç”Ÿæ•ˆã€‚ $ slappasswdNew password:Re-enter new password:&#123;SSHA&#125;HTGqAd4p6fOOIVHm7VZYUSorWGfnrqAA$ vim ldapuser.ldif# create new# replace to your own domain name for &quot;dc=***,dc=***&quot; sectiondn: uid=ada,ou=people,dc=leeif,dc=meobjectClass: inetOrgPersonobjectClass: posixAccountobjectClass: shadowAccountuid: adacn: Ada Catherinesn: CatherineuserPassword: &#123;SSHA&#125;HTGqAd4p6fOOIVHm7VZYUSorWGfnrqAAloginShell: /bin/bashuidNumber: 1000gidNumber: 1000homeDirectory: /home/users/adadn: cn=Secretary,ou=group,dc=leeif,dc=meobjectClass: posixGroupcn: SecretarygidNumber: 1000memberUid: ada# ldapadd -x -D cn=admin,dc=leeif,dc=me -W -f ldapuser.ldifEnter LDAP Password:adding new entry &quot;uid=ada,ou=People,dc=leeif,dc=org&quot;adding new entry &quot;cn=Secretary,ou=Group,dc=leeif,dc=org&quot; æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ ldapsearch å‘½ä»¤æ¥æŸ¥çœ‹ LDAP ç›®å½•æœåŠ¡ä¸­çš„æ‰€æœ‰æ¡ç›®ä¿¡æ¯ï¼š $ ldapsearch -x -b &quot;dc=leeif,dc=me&quot; -H ldap://127.0.0.1# extended LDIF## LDAPv3# base &lt;dc=leeif,dc=me&gt; with scope subtree# filter: (objectclass=*)# requesting: ALL## leeif.orgdn: dc=leeif,dc=meobjectClass: topobjectClass: dcObjectobjectClass: organizationo: leeif News Agencydc: leeif... å¦‚æœè¦åˆ é™¤ä¸€ä¸ªæ¡ç›®ï¼Œå¯ä»¥æŒ‰ä¸‹é¢çš„å‘½ä»¤æ“ä½œï¼š $ ldapdelete -x -W -D &#x27;cn=admin,dc=leeif,dc=me&#x27; &quot;uid=ada,ou=People,dc=leeif,dc=me&quot; å¸¸ç”¨å‘½ä»¤è®°å½•(&amp;(&amp;(objectClass=inetOrgPerson)))mkdir /etc/yum.repos.d/backupmv /etc/yum.repos.d/* /etc/yum.repos.d/backup/curl -o /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repoyum -y install openldap-servers openldap-clients# yum reinstall --downloadonly --downloaddir=./openldap/ openldap-servers openldap-clientsmv slapd.d slapd.d.baksudo systemctl stop slapd &amp;&amp; sudo rm -rf slapd.d &amp;&amp; sudo mkdir slapd.dsudo slaptest -f /etc/openldap/slapd.conf -F /etc/openldap/slapd.dsudo chown -R ldap:ldap slapd.d &amp;&amp; sudo systemctl start slapdsystemctl stop slapd &amp;&amp; rm -rf slapd.d &amp;&amp; mkdir slapd.dslaptest -f /etc/openldap/slapd.conf -F /etc/openldap/slapd.dchown -R ldap:ldap slapd.d &amp;&amp; systemctl start slapdservice slapd stop &amp;&amp; rm -rf slapd.d &amp;&amp; mkdir slapd.dslaptest -f /etc/openldap/slapd.conf -F /etc/openldap/slapd.dchown -R ldap:ldap slapd.d &amp;&amp; service slapd startrm -rf /var/lib/ldap &amp;&amp; mkdir /var/lib/ldapcp /usr/share/openldap-servers/slapd.ldif /etc/openldap/cp /usr/share/openldap-servers/DB_CONFIG.example /var/lib/ldap/DB_CONFIGchown ldap. /var/lib/ldap/DB_CONFIGchown -R ldap:ldap slapd.d chown -R ldap:ldap /var/lib/ldap/*# æ–¹æ¡ˆä¸€vim /etc/openldap/slapd.ldif ##ä¿®æ”¹åçš„åˆå§‹åŒ–ldifæ–‡ä»¶slapadd -n 0 -F slapd.d -l slapd.ldif ##ç”Ÿæˆé…ç½®æ•°æ®åº“ä¿¡æ¯# æ–¹æ¡ˆäºŒvi /etc/openldap/slapd.confslaptest -f /etc/openldap/slapd.conf -F /etc/openldap/slapd.d# systemctl start slapd# systemctl enable slapd# systemctl status slapd slapd.conf æ–‡ä»¶é…ç½®pidfile /var/run/openldap/slapd.pidargsfile /var/run/openldap/slapd.argsinclude /etc/openldap/schema/core.schemainclude /etc/openldap/schema/collective.schemainclude /etc/openldap/schema/corba.schemainclude /etc/openldap/schema/cosine.schemainclude /etc/openldap/schema/duaconf.schemainclude /etc/openldap/schema/dyngroup.schemainclude /etc/openldap/schema/inetorgperson.schemainclude /etc/openldap/schema/java.schemainclude /etc/openldap/schema/misc.schemainclude /etc/openldap/schema/nis.schemainclude /etc/openldap/schema/openldap.schemainclude /etc/openldap/schema/pmi.schemainclude /etc/openldap/schema/ppolicy.schemamodulepath /usr/lib64/openldapmoduleload memberof.lamoduleload back_ldap.lamoduleload back_relay.lamoduleload pcache.lamoduleload ppolicy.lamoduleload syncprov.lamoduleload rwm.laloglevel 256# before any databaseoverlay rwmrwm-rewriteEngine onrwm-rewriteContext bindDN# rwm-rewriteRule &quot;(.+,)?dc=leeif,dc=me$&quot; &quot;$1dc=auth&quot; &quot;:@&quot;rwm-rewriteRule &quot;(^uid=.+,)(.+,)?dc=leeif,dc=me$&quot; &quot;$1dc=auth&quot; &quot;:@&quot;database configaccess to * by dn.base=&quot;gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth&quot; manage by * nonedatabase monitoraccess to dn.base=&quot;dc=ldapproxy,dc=com&quot; by ssf=256 group.exact=&quot;cn=admin,dc=ldapproxy,dc=com&quot; read by * nonedatabase hdbsuffix &quot;dc=ldapproxy,dc=com&quot;rootdn &quot;cn=admin,dc=ldapproxy,dc=com&quot;rootpw &#123;SSHA&#125;passworddirectory /var/lib/ldap# Database LDAP for OpenLDAP database ldapreadonly yessuffix &quot;dc=leeif,dc=me&quot;uri ldap://127.0.0.1:389idassert-bind bindmethod=simple binddn=&quot;cn=admin,dc=leeif,dc=me&quot; credentials=&quot;zto.com&quot; mode=none flags=non-prescriptiveidassert-authzFrom &quot;dn.exact:cn=admin,dc=ldapproxy,dc=com&quot;# Database LDAP for LDAP-Authdatabase ldapreadonly yessuffix &quot;dc=auth&quot;uri ldap://127.0.0.1:10389","tags":["OpenLDAP"],"categories":["æŠ˜è…¾ä¸æ­¢"]},{"title":"OpenLDAP å¿«é€Ÿè½åœ°å®è·µ-åŸºæœ¬ä»‹ç»","path":"/2020/openldap-getting-started.html","content":"åœºæ™¯éœ€æ±‚ éœ€æ±‚å½“å…¬å¸ä½“é‡è¾ƒå¤§ï¼Œå†…éƒ¨æœ‰å¤šä¸ªç³»ç»Ÿï¼Œå¦‚æœæ¯ä¸ªå¹³å°éƒ½éœ€è¦ç»´æŠ¤ä¸€ä¸ªç”¨æˆ·ç®¡ç†ä½“ç³»ï¼Œé‚£ä¹ˆå¦‚æœä¸€ä¸ªå‘˜å·¥æ‹¥æœ‰ N ä¸ªå¹³å°æƒé™ç¦»èŒåŠå¸¸è§„æƒé™å˜æ›´ï¼Œå¯¹äºçš„ç®¡ç†æ— ç–‘ä¹Ÿæ˜¯ä¸€ä¸ªæŒ‘æˆ˜ï¼Œä¹Ÿæ— æ³•åšåˆ°ç²¾ç»†åŒ–æƒé™ç®¡ç†ã€‚æ¯”å¦‚æ¯æ¬¡æ–°è¿›æˆ–ç¦»èŒä¸€ä½åŒäº‹ï¼Œæˆ‘ä»¬è¿™è¾¹ OPS è¿ç»´ç»„çš„å°ä¼™ä¼´ä»¬ï¼Œéƒ½è¦åœ¨æ¯ä¸ªç³»ç»Ÿä¸Šå»æ·»åŠ ç”¨æˆ·ï¼Œæå¾—å°ä¼™ä¼´ä»¬å¾ˆä¸çˆ½ã€‚ ç®€å•è¯´ä¸€ä¸‹ OPENLDAP å¯¹è¿ç»´ç®¡ç†çš„ä»·å€¼ï¼Œæ”¯æ’‘ä¼ä¸šæŠ€æœ¯å‘å±•æ¯”å¦‚ GITã€ ZABBIXã€ YAPIã€ JUMPSERVERã€ OA ç­‰å¤§å¤§å°å°ç³»ç»Ÿï¼Œä¹ƒè‡³ Windowsï¼ŒLinux ç³»ç»Ÿçš„è®¤è¯ç™»å½•ã€‚ é€šè¿‡ LDAP æŠ€æœ¯æˆ‘ä»¬å¯ä»¥å®ç°å¤šå¹³å°è´¦å·é›†ä¸­ç®¡ç†ï¼Œæƒé™çµæ´»æ§åˆ¶ï¼Œå¯†ç å¼ºåº¦åŠå…¶æœ‰æ•ˆæœŸçš„çº¦æŸï¼Œå°†ç”¨æˆ·ç®¡ç†ä¸å„ä¸ªå¹³å°è§£è€¦ï¼Œæœ€ç»ˆå®ç°ä¸€æ¬¡ä¿®æ”¹ N å¤„ç”Ÿæ•ˆã€‚ LDAP ç®€ä»‹LDAPï¼ˆè½»é‡çº§ç›®å½•è®¿é—®åè®®ï¼ŒLightweight Directory Access Protocol) æ˜¯å®ç°æä¾›è¢«ç§°ä¸ºç›®å½•æœåŠ¡çš„ä¿¡æ¯æœåŠ¡ã€‚ç›®å½•æœåŠ¡æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ•°æ®åº“ç³»ç»Ÿï¼Œå…¶ä¸“é—¨é’ˆå¯¹è¯»å–ï¼Œæµè§ˆå’Œæœç´¢æ“ä½œè¿›è¡Œäº†ç‰¹å®šçš„ä¼˜åŒ–ã€‚ç›®å½•ä¸€èˆ¬ç”¨æ¥åŒ…å«æè¿°æ€§çš„ï¼ŒåŸºäºå±æ€§çš„ä¿¡æ¯å¹¶æ”¯æŒç²¾ç»†å¤æ‚çš„è¿‡æ»¤èƒ½åŠ›ã€‚ç›®å½•ä¸€èˆ¬ä¸æ”¯æŒé€šç”¨æ•°æ®åº“é’ˆå¯¹å¤§é‡æ›´æ–°æ“ä½œæ“ä½œéœ€è¦çš„å¤æ‚çš„äº‹åŠ¡ç®¡ç†æˆ–å›å·ç­–ç•¥ã€‚è€Œç›®å½•æœåŠ¡çš„æ›´æ–°åˆ™ä¸€èˆ¬éƒ½éå¸¸ç®€å•ã€‚è¿™ç§ç›®å½•å¯ä»¥å­˜å‚¨åŒ…æ‹¬ä¸ªäººä¿¡æ¯ã€web é“¾ç»“ã€jpeg å›¾åƒç­‰å„ç§ä¿¡æ¯ã€‚ä¸ºäº†è®¿é—®å­˜å‚¨åœ¨ç›®å½•ä¸­çš„ä¿¡æ¯ï¼Œå°±éœ€è¦ä½¿ç”¨è¿è¡Œåœ¨ TCP&#x2F;IP ä¹‹ä¸Šçš„è®¿é—®åè®® â€”LDAPã€‚ LDAP ç›®å½•ä¸­çš„ä¿¡æ¯æ˜¯æ˜¯æŒ‰ç…§æ ‘å‹ç»“æ„ç»„ç»‡ï¼Œå…·ä½“ä¿¡æ¯å­˜å‚¨åœ¨æ¡ç›® (entry) çš„æ•°æ®ç»“æ„ä¸­ã€‚æ¡ç›®ç›¸å½“äºå…³ç³»æ•°æ®åº“ä¸­è¡¨çš„è®°å½•ï¼›æ¡ç›®æ˜¯å…·æœ‰åŒºåˆ«å DN ï¼ˆDistinguished Nameï¼‰çš„å±æ€§ï¼ˆAttributeï¼‰ï¼ŒDN æ˜¯ç”¨æ¥å¼•ç”¨æ¡ç›®çš„ï¼ŒDN ç›¸å½“äºå…³ç³»æ•°æ®åº“è¡¨ä¸­çš„å…³é”®å­—ï¼ˆPrimary Keyï¼‰ã€‚å±æ€§ç”±ç±»å‹ï¼ˆTypeï¼‰å’Œä¸€ä¸ªæˆ–å¤šä¸ªå€¼ï¼ˆValuesï¼‰ç»„æˆï¼Œç›¸å½“äºå…³ç³»æ•°æ®åº“ä¸­çš„å­—æ®µï¼ˆFieldï¼‰ç”±å­—æ®µåå’Œæ•°æ®ç±»å‹ç»„æˆï¼Œåªæ˜¯ä¸ºäº†æ–¹ä¾¿æ£€ç´¢çš„éœ€è¦ï¼ŒLDAP ä¸­çš„ Type å¯ä»¥æœ‰å¤šä¸ª Valueï¼Œè€Œä¸æ˜¯å…³ç³»æ•°æ®åº“ä¸­ä¸ºé™ä½æ•°æ®çš„å†—ä½™æ€§è¦æ±‚å®ç°çš„å„ä¸ªåŸŸå¿…é¡»æ˜¯ä¸ç›¸å…³çš„ã€‚LDAP ä¸­æ¡ç›®çš„ç»„ç»‡ä¸€èˆ¬æŒ‰ç…§åœ°ç†ä½ç½®å’Œç»„ç»‡å…³ç³»è¿›è¡Œç»„ç»‡ï¼Œéå¸¸çš„ç›´è§‚ã€‚LDAP æŠŠæ•°æ®å­˜æ”¾åœ¨æ–‡ä»¶ä¸­ï¼Œä¸ºæé«˜æ•ˆç‡å¯ä»¥ä½¿ç”¨åŸºäºç´¢å¼•çš„æ–‡ä»¶æ•°æ®åº“ï¼Œè€Œä¸æ˜¯å…³ç³»æ•°æ®åº“ã€‚ç±»å‹çš„ä¸€ä¸ªä¾‹å­å°±æ˜¯ mailï¼Œå…¶å€¼å°†æ˜¯ä¸€ä¸ªç”µå­é‚®ä»¶åœ°å€ã€‚ OpenLADP ç®€ä»‹LDAP å…·æœ‰ä¸¤ä¸ªæ ‡å‡†ï¼Œåˆ†åˆ«æ˜¯ X.500 å’Œ LDAPã€‚OpenLDAP æ˜¯åŸºäº X.500 æ ‡å‡†çš„ï¼Œè€Œä¸”å»é™¤äº† X.500 å¤æ‚çš„åŠŸèƒ½å¹¶ä¸”å¯ä»¥æ ¹æ®è‡ªæˆ‘éœ€æ±‚å®šåˆ¶é¢å¤–æ‰©å±•åŠŸèƒ½ï¼Œä½†ä¸ X.500 ä¹Ÿæœ‰ä¸åŒä¹‹å¤„ï¼Œä¾‹å¦‚ OpenLDAP æ”¯æŒ TCP&#x2F;IP åè®®ç­‰ã€‚ OpenLDAP å¯ä»¥ç›´æ¥è¿è¡Œåœ¨æ›´ç®€å•å’Œæ›´é€šç”¨çš„ TCP&#x2F;IP æˆ–å…¶ä»–å¯é çš„ä¼ è¾“åè®®å±‚ä¸Šï¼Œé¿å…äº†åœ¨ OSI ä¼šè¯å±‚å’Œè¡¨ç¤ºå±‚çš„å¼€é”€ï¼Œä½¿è¿æ¥çš„å»ºç«‹å’ŒåŒ…çš„å¤„ç†æ›´ç®€å•ã€æ›´å¿«ï¼Œå¯¹äºäº’è”ç½‘å’Œä¼ä¸šç½‘åº”ç”¨æ›´ç†æƒ³ã€‚ OpenLDAP ç›®å½•ä¸­çš„ä¿¡æ¯æ˜¯ä»¥æ ‘çŠ¶çš„å±‚æ¬¡ç»“æ„æ¥å­˜å‚¨æ•°æ®ï¼ˆè¿™å¾ˆç±»åŒäº DNSï¼‰ï¼Œæœ€é¡¶å±‚å³æ ¹éƒ¨ç§°ä½œ â€œåŸºå‡† DNâ€ï¼Œå½¢å¦‚ â€œdc&#x3D;mydomain,dc&#x3D;orgâ€ æˆ–è€… â€œo&#x3D;mydomain.orgâ€ï¼Œå‰ä¸€ç§æ–¹å¼æ›´ä¸ºçµæ´»ä¹Ÿæ˜¯ Windows AD ä¸­ä½¿ç”¨çš„æ–¹å¼ã€‚åœ¨æ ¹ç›®å½•çš„ä¸‹é¢æœ‰å¾ˆå¤šçš„æ–‡ä»¶å’Œç›®å½•ï¼Œä¸ºäº†æŠŠè¿™äº›å¤§é‡çš„æ•°æ®ä»é€»è¾‘ä¸Šåˆ†å¼€ï¼ŒOpenLDAP åƒå…¶å®ƒçš„ç›®å½•æœåŠ¡åè®®ä¸€æ ·ä½¿ç”¨ OUï¼ˆOrganization Unitï¼Œç»„ç»‡å•å…ƒï¼‰ï¼Œå¯ä»¥ç”¨æ¥è¡¨ç¤ºå…¬å¸å†…éƒ¨æœºæ„ï¼Œå¦‚éƒ¨é—¨ç­‰ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥è¡¨ç¤ºè®¾å¤‡ã€äººå‘˜ç­‰ã€‚åŒæ—¶ OU è¿˜å¯ä»¥æœ‰å­ OUï¼Œç”¨æ¥è¡¨ç¤ºæ›´ä¸ºç»†è‡´çš„åˆ†ç±»ã€‚ OpenLDAP ä¸­æ¯ä¸€æ¡è®°å½•éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„åŒºåˆ«äºå…¶å®ƒè®°å½•çš„åå­— DNï¼ˆDistinguished Nameï¼‰, å…¶å¤„åœ¨ â€œå¶å­â€ ä½ç½®çš„éƒ¨åˆ†ç§°ä½œ RDN (ç”¨æˆ·æ¡ç›®çš„ç›¸å¯¹æ ‡è¯†å)ã€‚å¦‚ dn:cn&#x3D;tom,ou&#x3D;animals,dc&#x3D;ilanni,dc&#x3D;com ä¸­ cn å³ä¸º RDNï¼Œè€Œ RDN åœ¨ä¸€ä¸ª OU ä¸­å¿…é¡»æ˜¯å”¯ä¸€çš„ã€‚ OpenLDAP é»˜è®¤ä»¥ Berkeley DB ä½œä¸ºåç«¯æ•°æ®åº“ï¼ŒBerkeleyDB æ•°æ®åº“ä¸»è¦ä»¥æ•£åˆ—çš„æ•°æ®ç±»å‹è¿›è¡Œæ•°æ®å­˜å‚¨ï¼Œå¦‚ä»¥é”®å€¼å¯¹çš„æ–¹å¼è¿›è¡Œå­˜å‚¨ã€‚ BerkeleyDB æ˜¯ä¸€ç±»ç‰¹æ®Šçš„é¢å‘æŸ¥è¯¢è¿›è¡Œä¼˜åŒ–ã€é¢å‘è¯»å–è¿›è¡Œä¼˜åŒ–çš„æ•°æ®åº“ï¼Œä¸»è¦ç”¨äºæœç´¢ã€æµè§ˆã€æ›´æ–°æŸ¥è¯¢æ“ä½œï¼Œä¸€èˆ¬å¯¹äºä¸€æ¬¡å†™å…¥æ•°æ®ã€å¤šæ¬¡æŸ¥è¯¢å’Œæœç´¢æœ‰å¾ˆå¥½çš„æ•ˆæœã€‚BerkeleyDB ä¸æ”¯æŒäº‹åŠ¡å‹æ•°æ®åº“ (MySQLã€MariDBã€Oracle ç­‰) æ‰€æ”¯æŒçš„é«˜å¹¶å‘çš„ååé‡ä»¥åŠå¤æ‚çš„äº‹åŠ¡æ“ä½œã€‚ LDAP ç®€ç§°ç›®å½• ç®€ç§° å…¨ç§°ï¼ˆå«ä¹‰ï¼‰ c countryNameï¼ˆå›½å®¶ï¼‰ dc domainComponentï¼ˆåŸŸåï¼‰ o organizationï¼ˆç»„ç»‡ - å…¬å¸ï¼‰ ou organization unitï¼ˆç»„ç»‡å•å…ƒ - éƒ¨é—¨ï¼‰ sn suer nameï¼ˆçœŸå®åç§°ï¼‰ cn common nameï¼ˆå¸¸ç”¨åç§°ï¼‰","tags":["OpenLDAP"],"categories":["æŠ˜è…¾ä¸æ­¢"]},{"title":"æ¨¡å—è®¾è®¡æ–‡æ¡£ç¼–å†™è§„èŒƒ","path":"/2019/module-design-doc.html","content":"æ¨¡å—è´Ÿè´£äºº ğŸ‘©â€ğŸ’» leeifme &#x2F; XXXXé¡¹ç›® ğŸš€ XXXXéƒ¨é—¨ &#x2F; XXXXäº‹ä¸šéƒ¨ ğŸ“§ Email &#105;&#x40;&#x6c;&#101;&#x65;&#105;&#102;&#x2e;&#x6d;&#x65; ç‰ˆæœ¬å†å²è®°å½•(History) ï¼ˆå¯é€‰ï¼‰ è®¾è®¡ç¨¿ç‰ˆæœ¬æ¯å‘ç”Ÿä¸€æ¬¡æ¯”è¾ƒå¤§çš„è¿­ä»£æ›´æ–°ï¼Œéƒ½è¦è®°å½•åœ¨ç‰ˆæœ¬å†å²è®°å½•é‡Œï¼Œç›¸æ¯”ä¸€ä¸ªä¸ªå»ç¿»ä»¥å‰çš„è®¾è®¡ç¨¿ï¼Œç‰ˆæœ¬å†å²è®°å½•å¯ä»¥æ¸…æ™°åœ°å±•ç°è®¾è®¡ç¨¿çš„è¿­ä»£å†ç¨‹ï¼Œæœ‰å“ªäº›éœ€æ±‚çš„å˜åŠ¨ï¼Œæœ‰å“ªäº›è®¾è®¡æ—¶æ²¡æ€è€ƒæ¸…æ¥šéœ€è¦ä¿®æ”¹çš„åœ°æ–¹ï¼ŒReview æ—¶å¤§å®¶ç»™å‡ºäº†å“ªäº›æ„è§å’Œå»ºè®®ç­‰ã€‚æœ‰æ—¶ç‰ˆæœ¬éœ€è¦å›æ»šï¼Œå¯ä»¥æ›´æ–¹ä¾¿åœ°è¿½æº¯ï¼Œè€Œé¡¹ç›®ç»“æŸåæµè§ˆè¿™ä¸€éƒ¨åˆ†ï¼Œå¯ä»¥çœ‹åˆ°è‡ªå·±çš„è®¾è®¡åœ¨å“ªäº›æ–¹é¢ä¸€å¼€å§‹æ€è€ƒä¸è¶³å‡ºç°äº†å„ç§é—®é¢˜ï¼Œæ˜¯å¦‚ä½•è¢«å‘ç°ã€æ”¹è¿›å’Œæå‡çš„ï¼Œä¸‹ä¸€æ¬¡è®¾è®¡çš„æ—¶å€™æ˜¯å¦å¯ä»¥æ›´æ—©åœ°æ€è€ƒåˆ°å’Œå›é¿æ‰ æ’æœŸ(Schedule) ï¼ˆå¯é€‰ï¼‰ å’Œéœ€æ±‚æ–¹ç¡®è®¤å„é˜¶æ®µäº¤ä»˜çš„æ—¶é—´èŠ‚ç‚¹ï¼Œåˆ¶å®šå®Œæˆæ¨¡å—è®¾è®¡çš„å…·ä½“è®¡åˆ’ï¼Œæ¯ä¸ªé˜¶æ®µå¤§æ¦‚åšå“ªäº›å·¥ä½œï¼Œä»€ä¹ˆæ—¶å€™å†…éƒ¨ Reviewï¼Œä»€ä¹ˆæ—¶å€™å’Œé¡¹ç›®ç»„ Review ç­‰ã€‚ç¡®ä¿è®¾è®¡ä»¥ä¸€ä¸ªåˆç†çš„èŠ‚å¥å±•å¼€ï¼Œå¯ä»¥ä»¥è¾ƒé«˜çš„è´¨é‡æŒ‰æ—¶äº¤ä»˜ æ¨¡å—æ¦‚è¿°(Background) è¿™ä¸€éƒ¨åˆ†çš„å†…å®¹åœ¨å¼€å‘è€…å’Œ PMã€ä¸šåŠ¡æ–¹å……åˆ†æ²Ÿé€šéœ€æ±‚ä¹‹åå®Œæˆ æ¨¡å—æè¿°ï¼Œè¦è®¾è®¡çš„äº§å“æ˜¯ä»€ä¹ˆï¼Œè§£å†³ä»€ä¹ˆä¸šåŠ¡éœ€æ±‚ ä¸šåŠ¡ &#x2F; äº§å“ç°çŠ¶ï¼Œæ€»ç»“éœ€æ±‚æ–¹ç°åœ¨é¢ä¸´çš„ä¸»è¦é—®é¢˜ åŠŸèƒ½è®¾è®¡ï¼Œæ¨¡å—å¼€å‘å…³é”®ç‚¹ä»¥åŠä¸šåŠ¡é€»è¾‘æè¿° éœ€è¦è®¾è®¡ä»€ä¹ˆæ–°çš„åŠŸèƒ½ï¼Œéœ€è¦ä¼˜åŒ–å“ªäº›å·²æœ‰çš„è®¾è®¡ æé«˜æ¨¡å—å“ªäº›ä½¿ç”¨ç¯èŠ‚çš„ä½“éªŒï¼Œå¼•å¯¼ç”¨æˆ·åšå‡ºä»€ä¹ˆæ“ä½œ æ¨¡å—è¯¦ç»†è®¾è®¡ è¯¦ç»†æè¿°æ¨¡å—å®ç°çš„æ¶æ„åˆ†æï¼Œé‡‡ç”¨çš„æ¡†æ¶ã€æŠ€æœ¯æ ˆé€‰å‹ï¼Œä»¥åŠå®ç°ç®—æ³•ç­‰ ä½¿ç”¨ç¬¬ä¸‰æ–¹æœåŠ¡ï¼šé‡‡ç”¨çš„æ¡†æ¶ã€ä»€ä¹ˆå­˜å‚¨æœåŠ¡ã€æ•°æ®åº“ã€é˜Ÿåˆ—ç­‰ç­‰çš„ä¸€äº›æœåŠ¡ï¼Œä»¥åŠå¯èƒ½éœ€è¦ç”¨åˆ°çš„ç®—æ³• ç¨‹åºé€»è¾‘æè¿°ï¼šæœ‰ä»€ä¹ˆæ ·çš„äº¤äº’é€»è¾‘ï¼Œå¤„ç†æµç¨‹æ˜¯ä»€ä¹ˆæ ·çš„ï¼Œæ˜¯ä¸æ˜¯æœ‰å¼‚æ­¥å¤„ç†ä»»åŠ¡åˆæ˜¯æ€æ ·åšçš„ æ•°æ®ç»“æ„å®šä¹‰ï¼šç¨‹åºå†…éƒ¨ä¸»è¦ç”¨åˆ°çš„æ•°æ®ç»“æ„ã€æ•°æ®åº“è¡¨è®¾è®¡ã€ç´¢å¼•è®¾è®¡ ç»“æ„ &#x2F; æ¶æ„å›¾ï¼šæ ¹æ®ä½¿ç”¨äº†ä»€ä¹ˆæœåŠ¡ã€æœ‰ä»€ä¹ˆæ ·çš„è°ƒç”¨æµç¨‹ã€æˆ–è€…æ˜¯ç¨‹åºé‡Œé¢æœ‰ä»€ä¹ˆæ ·çš„ç»“æ„å’Œæµç¨‹éœ€è¦ç”»çš„å›¾ ç™¾åº¦è„‘å›¾ Process On è¿™äº›æ¡†æ¶ã€è®¾è®¡éƒ½éœ€ç»è¿‡å¯è¡Œæ€§åˆ†æï¼Œå¿…é¡»æ˜¯å¯è¡Œçš„ æ¥å£è®¾è®¡æ–‡æ¡£(Interface) ä¸»è¦å‚è€ƒ Swaggeræ–‡æ¡£ï¼ˆå¦‚æœæœ‰ï¼‰ï¼Œè¿™é‡Œåªåšä¸€äº›è¡¥å……è¯´æ˜ï¼Œç”¨æ¥è¯´æ˜è°ƒç”¨æ­¤æ¥å£éœ€è¦æ³¨æ„çš„äº‹é¡¹(æ²¡æœ‰å¯ä¸å†™) åŸå‹è®¾è®¡ï¼ˆå¯é€‰ï¼‰ åŸå‹è®¾è®¡ä¹‹äºåº”ç”¨å¼€å‘ï¼Œæ˜¯ä¸ºç¬¬ä¸€è¦ç´ ã€‚å®ƒæ‰€èµ·åˆ°çš„ä¸ä»…æ˜¯æ²Ÿé€šçš„ä½œç”¨ï¼Œæ›´æœ‰ä½“ç°ä¹‹æ•ˆã€‚é€šè¿‡å†…å®¹å’Œç»“æ„å±•ç¤ºï¼Œä»¥åŠç²—ç•¥å¸ƒå±€ï¼Œèƒ½å¤Ÿè¯´æ˜ç”¨æˆ·å°†å¦‚ä½•ä¸äº§å“è¿›è¡Œäº¤äº’ ã€‚ä¹Ÿèƒ½æ›´ç›´è§‚çš„ä½“ç°å‡ºæ‰€è®¾è®¡æ¨¡å—çš„åŸºæœ¬åŠŸèƒ½å’Œäº¤äº’æ–¹å¼ï¼Œä½“ç°å¼€å‘è€…åŠUIè®¾è®¡å¸ˆçš„ideaï¼Œä½“ç°ç”¨æˆ·æ‰€æœŸæœ›çœ‹åˆ°çš„å†…å®¹ï¼Œä½“ç°å†…å®¹ç›¸å¯¹ä¼˜å…ˆçº§ç­‰ å¢¨åˆ€ æ‘¹å®¢ Axure RP æµ‹è¯•è¦ç‚¹ï¼ˆå¯é€‰ï¼‰ ç»™å‡ºæµ‹è¯•æ¨¡å—çš„ä¸»è¦æµ‹è¯•è¦æ±‚ï¼Œå’Œé€»è¾‘æ“ä½œ æ³¨æ˜ï¼š ä»¥ä¸Šè®¾è®¡è§„èŒƒåªæ˜¯é€šç”¨è®¾è®¡è¦æ±‚ï¼Œå…·ä½“è§†æ¨¡å—åŠŸèƒ½è¦æ±‚åšå…·ä½“æ”¹åŠ¨","tags":["è§„èŒƒå»ºè®®"],"categories":["è®¾è®¡å¼€å‘"]},{"title":"æ­å»º Airflow ä»»åŠ¡è°ƒåº¦ç¯å¢ƒ","path":"/2019/deploy-airflow.html","content":"å‰æœŸå‡†å¤‡å…³é—­é˜²ç«å¢™å’Œ selinuxsystemctl stop firewalldsystemctl disable firewalldsetenforce 0 sed -i &#x27;s/^SELINUX=.*/SELINUX=disabled/g&#x27; /etc/selinux/config éƒ¨ç½² Python 3.X ä¾èµ–åŒ…å®‰è£… Python å®‰è£…ä¼šä¾èµ–ä¸€äº›ç¯å¢ƒï¼Œä¸ºäº†é¿å…åœ¨å®‰è£…è¿‡ç¨‹ä¸­å› ä¸ºç¼ºå°‘ä¾èµ–è€Œäº§ç”Ÿä¸å¿…è¦çš„éº»çƒ¦ï¼Œéœ€è¦å…ˆæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œç¡®ä¿å®‰è£…å¥½ä»¥ä¸‹ä¾èµ–åŒ…ï¼š yum -y install zlib zlib-develyum -y install bzip2 bzip2-develyum -y install ncurses ncurses-develyum -y install readline readline-develyum -y install openssl openssl-develyum -y install openssl-staticyum -y install xz lzma xz-develyum -y install sqlite sqlite-develyum -y install gdbm gdbm-develyum -y install tk tk-develyum -y install libffi-devel # åªæœ‰ 3.7 æ‰ä¼šç”¨åˆ°è¿™ä¸ªåŒ…ï¼Œå¦‚æœä¸å®‰è£…è¿™ä¸ªåŒ…çš„è¯ï¼Œåœ¨ make é˜¶æ®µä¼šå‡ºç°å¦‚ä¸‹çš„æŠ¥é”™ï¼šModuleNotFoundError: No module named &#x27;_ctypes&#x27;yum install gccyum install wget# å®‰è£… pipï¼Œå› ä¸º CentOs æ˜¯æ²¡æœ‰ pip çš„#è¿è¡Œè¿™ä¸ªå‘½ä»¤æ·»åŠ epelæ‰©å±•æº yum -y install epel-release #å®‰è£…pip yum install python-pip Python æºç ä¸‹è½½ å¯ä»¥å‰å¾€ https://www.python.org/ftp/python/ æŸ¥çœ‹ Python å„ä¸ªç‰ˆæœ¬ wget https://www.python.org/ftp/python/3.7.4/Python-3.7.4.tgz çŸ¥è¯†ç‚¹è¡¥å……ï¼šå¦‚æœä¸çŸ¥é“ configure, make, make install ä¸‰ä¸ªå‘½ä»¤ä½œç”¨ï¼Œç‚¹è¿™é‡ŒæŸ¥çœ‹ å®‰è£… Python è§£å‹ç¼© tar -zxvf Python-3.7.0.tgz è¿›å…¥è§£å‹åçš„ç›®å½•ï¼Œä¾æ¬¡æ‰§è¡Œä¸‹é¢å‘½ä»¤è¿›è¡Œæ‰‹åŠ¨ç¼–è¯‘ ./configure prefix=/usr/local/python3 # æŒ‡å®šç›®å½•make &amp;&amp; make install å¦‚æœæœ€åæ²¡æç¤ºå‡ºé”™ï¼Œå°±ä»£è¡¨æ­£ç¡®å®‰è£…äº† æ·»åŠ è½¯é“¾æ¥ # åšå¥½åŸå§‹æ•°æ®çš„å¤‡ä»½mv /usr/bin/python /usr/bin/python2.backup mv /usr/bin/pip /usr/bin/pip2.backup# è®¾ç½®è½¯è¿æ¥ln -s /usr/local/python3/bin/python3.7 /usr/bin/pythonln -s /usr/local/python3/bin/pip3.7 /usr/bin/pip# æ£€æµ‹python -Vpip -V ä¿è¯ç³»ç»Ÿå¯ç”¨ æ›´æ”¹ yum é…ç½®ï¼Œå› ä¸ºå…¶è¦ç”¨åˆ° python2 æ‰èƒ½æ‰§è¡Œï¼Œå¦åˆ™ä¼šå¯¼è‡´ yum ä¸èƒ½æ­£å¸¸ä½¿ç”¨ï¼ˆä¸ç®¡å®‰è£… python3 çš„é‚£ä¸ªç‰ˆæœ¬ï¼Œéƒ½å¿…é¡»è¦åšçš„ï¼‰ # æŠŠ #! /usr/bin/python ä¿®æ”¹ä¸º #! /usr/bin/python2 vi /usr/bin/yum vi /usr/libexec/urlgrabber-ext-down éƒ¨ç½² PostgreSQL å®‰è£… PostgreSQL ä»“åº“ $ yum install https://download.postgresql.org/pub/repos/yum/reporpms/EL-7-x86_64/pgdg-redhat-repo-latest.noarch.rpm å®‰è£…å®¢æˆ·ç«¯ $ yum install postgresql10 å®‰è£…æœåŠ¡ç«¯ $ yum install postgresql10-server åŠ å…¥å¼€æœºå¯åŠ¨é¡¹ $ systemctl enable postgresql-10.service åˆå§‹åŒ–æ•°æ®åº“ $ /usr/pgsql-10/bin/postgresql-10-setup initdb å¯åŠ¨æ•°æ®åº“æœåŠ¡ $ systemctl start postgresql-10 æ£€æŸ¥è¿è¡ŒçŠ¶æ€ $ systemctl status postgresql-10 è®¾ç½®ç”¨æˆ·å¯†ç  $ su - postgresLast login: Mon Aug 5 11:09:14 CST 2019 on pts/0# é»˜è®¤ç”¨æˆ·postgres-bash-4.2$ psqlpsql (10.9)Type &quot;help&quot; for help.postgres=# \\password# è®¾ç½®å¯†ç ä¸º &#x27;******&#x27;Enter new password:Enter it again:# ä¿å­˜é€€å‡ºpostgres=# \\q ä¿®æ”¹ç›‘å¬åœ°å€ vi /var/lib/pgsql/10/data/postgresql.conf listen_addresses = &#x27;*&#x27;#listen_addresses = &#x27;localhost&#x27; ä¿®æ”¹å®¢æˆ·ç«¯è®¤è¯æ–¹å¼ vi /var/lib/pgsql/10/data/pg_hba.conf # replication privilege.#local replication all peer#host replication all 127.0.0.1/32 ident#host replication all ::1/128 identhost all all 0.0.0.0/0 md5 é‡å¯æœåŠ¡ $ systemctl restart postgresql-10 è¿æ¥æµ‹è¯• $ psql -h 192.168.1.2 -U postgres éƒ¨ç½² RabbitMQå®‰è£… Erlang RabbitMQ æ˜¯ä½¿ç”¨ Erlang å¼€å‘çš„ï¼Œæ‰€ä»¥éœ€è¦é¦–å…ˆå®‰è£… Erlangï¼Œæœ¬æ–‡å®‰è£…å…¶æœ€æ–°ç‰ˆæœ¬ æ·»åŠ  repo æ–‡ä»¶ï¼š $ vi /etc/yum.repos.d/rabbitmq_erlang.repo æ–‡ä»¶å†…å®¹ï¼š [rabbitmq_erlang]name=rabbitmq_erlangbaseurl=https://packagecloud.io/rabbitmq/erlang/el/7/$basearchrepo_gpgcheck=1gpgcheck=0enabled=1gpgkey=https://packagecloud.io/rabbitmq/erlang/gpgkeysslverify=1sslcacert=/etc/pki/tls/certs/ca-bundle.crtmetadata_expire=300[rabbitmq_erlang-source]name=rabbitmq_erlang-sourcebaseurl=https://packagecloud.io/rabbitmq/erlang/el/7/SRPMSrepo_gpgcheck=1gpgcheck=0enabled=1gpgkey=https://packagecloud.io/rabbitmq/erlang/gpgkeysslverify=1sslcacert=/etc/pki/tls/certs/ca-bundle.crtmetadata_expire=300 å®‰è£…ï¼š $ yum -y install erlang socat å®‰è£… RabbitMQ ä¸‹è½½ RPM åŒ…ï¼š $ wget https://dl.bintray.com/rabbitmq/all/rabbitmq-server/3.7.17/rabbitmq-server-3.7.17-1.el7.noarch.rpm å¯¼å…¥ GPG keyï¼š $ rpm --import https://www.rabbitmq.com/rabbitmq-release-signing-key.asc å®‰è£… RabbitMQï¼š $ rpm -Uvh rabbitmq-server-3.7.17-1.el7.noarch.rpm å¯åŠ¨ RabbitMQï¼š $ systemctl start rabbitmq-server æŸ¥çœ‹ RabbitMQ è¿è¡ŒçŠ¶æ€ $ systemctl status rabbitmq-server å°† RabbitMQ åŠ å…¥å¼€æœºè‡ªå¯åŠ¨ï¼š $ systemctl enable rabbitmq-server RabbitMQ é…ç½® å¯ç”¨ RabbitMQ ç½‘é¡µç®¡ç†æ’ä»¶ $ rabbitmq-plugins enable rabbitmq_management åˆ›å»ºç®¡ç†å‘˜ç”¨æˆ·å¹¶æˆæƒï¼š $ rabbitmqctl add_user admin ä½ çš„å¯†ç $ rabbitmqctl set_user_tags admin administrator$ rabbitmqctl set_permissions -p / admin &quot;.*&quot; &quot;.*&quot; &quot;.*&quot; åœ¨æµè§ˆå™¨è®¿é—® http://IP:15672 å³å¯è¿›å…¥åˆ° RabbitMQ ç½‘é¡µç®¡ç†é¡µé¢ éƒ¨ç½² Airflowé€šè¿‡ pip å®‰è£… airflow è„šæ‰‹æ¶å®‰è£…ä¹‹å‰éœ€è¦è®¾ç½®ä¸€ä¸‹ä¸´æ—¶ç¯å¢ƒå˜é‡ SLUGIFY_USES_TEXT_UNIDECODE ï¼Œä¸ç„¶ï¼Œä¼šå¯¼è‡´å®‰è£…å¤±è´¥ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š export SLUGIFY_USES_TEXT_UNIDECODE=yes å®‰è£… airflow è„šæ‰‹æ¶: sudo pip install apache-airflow===1.10.4 airflow ä¼šè¢«å®‰è£…åˆ° python3 ä¸‹çš„ site-packages ç›®å½•ä¸‹ï¼Œå®Œæ•´ç›®å½•ä¸º:$&#123;PYTHON_HOME&#125;/lib/python3.6/site-packages/airflowï¼Œæˆ‘çš„ airflow ç›®å½•å¦‚ä¸‹æ‰€ç¤ºï¼š [root@n71 airflow]# pwd/usr/local/python3/lib/python3.7/site-packages/airflow æ·»åŠ ç¯å¢ƒå˜é‡ vi ~/.bash_profile # User specific environment and startup programsAIRFLOW_HOME=/home/airflowSITE_AIRFLOW_HOME=/usr/local/python3/lib/python3.7/site-packages/airflowPYTHON3=/usr/local/python3PATH=$PATH:$HOME/bin:$SITE_AIRFLOW_HOME/bin:$PYTHON3/binexport AIRFLOW_HOMEexport SITE_AIRFLOW_HOMEexport PATHexport C_FORCE_ROOT=true ä½¿ä¿®æ”¹åçš„ä½¿ç¯å¢ƒå˜é‡ç”Ÿæ•ˆï¼šsudo source /etc/profile Airflow ç›¸å…³æ“ä½œ æ‰§è¡Œ airflow å‘½ä»¤åšåˆå§‹åŒ–æ“ä½œ airflow airflow ä¼šåœ¨åˆšåˆšçš„ AIRFLOW_HOME ç›®å½•ä¸‹ç”Ÿæˆä¸€äº›æ–‡ä»¶ã€‚å½“ç„¶ï¼Œæ‰§è¡Œè¯¥å‘½ä»¤æ—¶å¯èƒ½ä¼šæŠ¥ä¸€äº›é”™è¯¯ï¼Œå¯ä»¥ä¸ç”¨ç†ä¼šï¼ç”Ÿæˆçš„æ–‡ä»¶åˆ—è¡¨å¦‚ä¸‹æ‰€ç¤ºï¼š [root@n71 airflow]# lsairflow.cfg logs unittests.cfg ä¸º airflow å®‰è£…ä¾èµ–æ¨¡å— pip install &#x27;apache-airflow[postgres,celery,hive,rabbitmq]&#x27; airflow çš„åŒ…ä¾èµ–å®‰è£…å‡å¯é‡‡ç”¨è¯¥æ–¹å¼è¿›è¡Œå®‰è£…ï¼Œå…·ä½“å¯å‚è€ƒ airflow å®˜æ–¹æ–‡æ¡£ é‡åˆ°çš„å‘ä»¥åŠè§£å†³æ–¹æ¡ˆ ä¸º airflow å®‰è£… [rabbitmq] ä¾èµ–æ¨¡å—æŠ¥é”™ å…·ä½“å¯ä»¥å‚çœ‹è¿™ä¸ª repositories https://github.com/celery/librabbitmq è§£å†³æ–¹æ¡ˆï¼š git clone https://github.com/celery/librabbitmq.gitcd librabbitmqcheckout 1.6yum install install autoconf automake libtoolmake install# åœ¨å®‰è£…ä¾èµ–æ¨¡å—pip install &#x27;apache-airflow[rabbitmq]&#x27; å¯åŠ¨ webserver ç»„ä»¶æ—¶æŠ¥é”™ é”™ä½å¦‚ä¸‹ï¼š Error: &#x27;python:airflow.www.gunicorn_config&#x27; doesnâ€˜t exist æˆ–è€…æ˜¯ï¼š FileNotFoundError: [Errno 2] No such file or directory: &#x27;gunicorn&#x27;: &#x27;gunicorn&#x27; è§£å†³æ–¹æ¡ˆï¼š # 1 : æ·»åŠ è½¯è¿æ¥ln -s /usr/local/python3/bin/gunicorn /usr/bin/gunicorn# 2 : æ·»åŠ  python ç¯å¢ƒå˜é‡PYTHON3=/usr/local/python3PATH=$PATH:$HOME/bin:$SITE_AIRFLOW_HOME/bin:$PYTHON3/bin airflow worker è§’è‰²ä¸èƒ½ä½¿ç”¨ root å¯åŠ¨ &#x3D;&#x3D;åŸå› ï¼šä¸èƒ½ç”¨æ ¹ç”¨æˆ·å¯åŠ¨çš„æ ¹æœ¬åŸå› ï¼Œåœ¨äº airflow çš„ worker ç›´æ¥ç”¨çš„ celeryï¼Œè€Œ celery æºç ä¸­æœ‰å‚æ•°é»˜è®¤ä¸èƒ½ä½¿ç”¨ ROOT å¯åŠ¨ï¼Œå¦åˆ™å°†æŠ¥é”™ï¼š&#x3D;&#x3D; C_FORCE_ROOT = os.environ.get(&#x27;C_FORCE_ROOT&#x27;, False) ROOT_DISALLOWED = &quot;&quot;&quot;\\Running a worker with superuser privileges when theworker accepts messages serialized with pickle is a very bad idea! If you really want to continue then you have to set the C_FORCE_ROOTenvironment variable (but please think about this before you do). User information: uid=&#123;uid&#125; euid=&#123;euid&#125; gid=&#123;gid&#125; egid=&#123;egid&#125;&quot;&quot;&quot; ROOT_DISCOURAGED = &quot;&quot;&quot;\\You&#x27;re running the worker with superuser privileges: this isabsolutely not recommended! Please specify a different user using the --uid option. User information: uid=&#123;uid&#125; euid=&#123;euid&#125; gid=&#123;gid&#125; egid=&#123;egid&#125;&quot;&quot;&quot; è§£å†³æ–¹æ¡ˆï¼š # è®¾ç½®ç¯å¢ƒå˜é‡, å¼ºåˆ¶celery workerè¿è¡Œé‡‡ç”¨rootæ¨¡å¼ export C_FORCE_ROOT=True airflow remote worker log hostname é—®é¢˜ å½“ worker èŠ‚ç‚¹ä¸æ˜¯è·Ÿ webserver éƒ¨ç½²åœ¨åŒä¸€å°æœºå™¨çš„æ—¶å€™ï¼Œæœ‰æ—¶ä» webserver æŸ¥çœ‹è¯¥ worker èŠ‚ç‚¹æ—¥å¿—ï¼Œå‡ºç°å¦‚ä¸‹é”™è¯¯ï¼š *** Log file isn&#x27;t local.*** Fetching here: http://n73:8793/log/.../1.log*** Failed to fetch log file from worker. HTTPConnectionPool(host=&#x27;kaimanas.serveriai.lt&#x27;, port=8793): Max retries exceeded with url: /log/.../1.log (Caused by NewConnectionError(&#x27;&lt;urllib3.connection.HTTPConnection object at 0x7f64da2fab38&gt;: Failed to establish a new connection: [Errno 111] Connection refused&#x27;,)) n73 (æˆ–æ˜¯å…¶ä»–) ä¸æ˜¯ webserver èŠ‚ç‚¹æ‰€åœ¨çš„ hostname è§£å†³æ–¹æ¡ˆï¼š é…ç½® worker èŠ‚ç‚¹çš„ /etc/hosts çš„ hostname æ˜ å°„ï¼ŒæŠŠ worker èŠ‚ç‚¹çš„ ip æ˜ å°„ä¸ºæœ¬æœºçš„ hostnameï¼Œå¦‚ä¸‹ï¼š 192.168.50.71 n71192.168.50.72 n72192.168.50.73 n73 é…ç½® airflow.cfg ä¿®æ”¹ Executor ä¸º CeleryExecutor executor = CeleryExecutor æŒ‡å®šå…ƒæ•°æ®åº“ï¼ˆmetestore) sql_alchemy_conn = postgresql+psycopg2://postgres:postgres@192.168.50.73:5432/airflow è®¾ç½®ä¸­é—´äººï¼ˆbroker) broker_url = amqp://admin:datatom.com@192.168.50.73:5672/ è®¾å®šç»“æœå­˜å‚¨åç«¯ backend celery_result_backend = db+postgres://postgres:postgres@192.168.50.73:5432/airflowresult_backend = db+postgres://stork:stork@192.168.50.73:14103/airflow ç½® dags åˆå§‹åŒ–åä¸ºæš‚åœçŠ¶æ€(å¯åŠ¨çŠ¶æ€) dags_are_paused_at_creation = True(False) ä¸å¼•ç”¨å®ä¾‹è„šæœ¬ load_examples = False å½“å®šä¹‰çš„ dag æ–‡ä»¶è¿‡å¤šçš„æ—¶å€™ï¼Œairflow çš„ scheduler èŠ‚ç‚¹è¿è¡Œæ•ˆç‡ç¼“æ…¢ [scheduler]# The scheduler can run multiple threads in parallel to schedule dags.# This defines how many threads will run.#é»˜è®¤æ˜¯2è¿™é‡Œæ”¹ä¸º50max_threads = 30worker_concurrency = 5worker_max_tasks_per_child = 10 ä¿®æ”¹æ£€æµ‹æ–° DAG é—´éš”ï¼Œå¦‚æœ scheduler æ£€æµ‹ DAG è¿‡äºé¢‘ç¹ï¼Œä¼šå¯¼è‡´ CPU è´Ÿè½½éå¸¸é«˜ã€‚è€Œé»˜è®¤ scheduler æ£€æµ‹æ—¶é—´ä¸º 0ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰æ—¶é—´é—´éš” min_file_process_interval = 5 å®šæœŸåˆ·æ–° DAG å®šä¹‰ç›®å½•ä¸­çš„æ–‡ä»¶åˆ—è¡¨ï¼Œé»˜è®¤300s dag_dir_list_interval = 10 Airflow çš„ DAG å¹¶è¡Œåº¦æ§åˆ¶ dag_concurrencyï¼šè¡¨ç¤ºä¸€ä¸ª DAGï¼Œåœ¨åŒä¸€æ—¶é—´ç‚¹æœ€å¤§å¯ä»¥è¿è¡Œå¤šå°‘ä¸ª Taskmax_active_runs_per_dagï¼šè¡¨ç¤ºä¸€ä¸ª DAGï¼Œåœ¨åŒä¸€æ—¶é—´ç‚¹æœ€å¤šå¯ä»¥è¢«è¿è¡Œå‡ ä¸ª # é»˜è®¤å€¼éƒ½ä¸º16dag_concurrency = 16max_active_runs_per_dag = 16","tags":["Python","Airflow"],"categories":["æŠ˜è…¾ä¸æ­¢"]},{"title":"GFS ä¸€è‡´æ€§æ¨¡å‹","path":"/2019/gfs-consistency.html","content":"å‰è¨€quote,æœ€è¿‘ï¼Œéƒ¨é—¨å†…éƒ¨ç»„ç»‡äº†å­¦ä¹ æ´»åŠ¨ï¼Œå‰ä¸¤è¯¾å°±æ˜¯ç ”è¯»è‘—åçš„å¯æ‰©å±•åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ GFS è®ºæ–‡ï¼Œå¹¶å¸ƒç½®äº†å­¦ä¹ ä½œä¸šï¼Œå°±æ˜¯æ•´ç† GFS ä¸­æå‡ºçš„ä¸€è‡´æ€§æ¨¡å‹ï¼Œå¦‚ä¸‹æ–‡ï¼š ä¸€è‡´æ€§èƒŒæ™¯åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿä¸­ï¼Œä¸ç®¡æ˜¯æ–‡ä»¶ç³»ç»Ÿè¿˜æ˜¯æ•°æ®åº“ï¼Œåªè¦æ•°æ®å­˜åœ¨å¤šä¸ªå‰¯æœ¬ï¼Œéƒ½æ¶‰åŠä¸€è‡´æ€§é—®é¢˜ã€‚å…¶ä¸­ä¸€è‡´æ€§åŒ…æ‹¬å†…éƒ¨ä¸€è‡´æ€§å’Œå‰¯æœ¬ä¸€è‡´æ€§ï¼Œå†…éƒ¨ä¸€è‡´æ€§å³å•æœºç‰ˆæ•°æ®åº“ä¸­çš„æ•°æ®æ»¡è¶³ä¸€å®šçš„çº¦æŸæ¡ä»¶ã€‚å‰¯æœ¬ä¸€è‡´æ€§è¡¨ç¤ºåŒä¸€æ•°æ®çš„å¤šä¸ªå‰¯æœ¬çš„å€¼ç›¸åŒã€‚GFS ä½œä¸ºä¸€ç§åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼Œé‡‡ç”¨äº†å¤šå‰¯æœ¬æœºåˆ¶ï¼Œè‡ªç„¶ä¹Ÿä¼šæœ‰ä¸€è‡´æ€§é—®é¢˜ ä¸€è‡´æ€§æ¨¡å‹ å…·ä½“æ“ä½œä¿®æ”¹æ“ä½œï¼š åŒ…æ‹¬å†™æ“ä½œå’Œè¿½åŠ æ“ä½œï¼Œå†™æ“ä½œéœ€è¦æŒ‡å®šæ–‡ä»¶å— + offsetã€‚è¿½åŠ æ“ä½œæˆåŠŸåç³»ç»Ÿä¼šå°†è¿½åŠ æˆåŠŸçš„åç§»é‡è¿”å›ç»™å®¢æˆ·ç«¯ã€‚ å¹¶å‘å†™ï¼š å¦‚æœä¸¤ä¸ªå®¢æˆ·ç«¯åŒæ—¶å†™åŒä¸€ä¸ªæ–‡ä»¶å—çš„åŒä¸€åç§»é‡ï¼Œé‚£ä¹ˆå°±æœ‰ä¸ªå…ˆåé¡ºåºé—®é¢˜ï¼Œå¦‚æœæ¥è¿‘åŒæ—¶ï¼Œç³»ç»Ÿä¸ä¿è¯è¿™ä¸ªé¡ºåºã€‚é‚£ä¹ˆå®¢æˆ·ç«¯å†å»è¯»ï¼Œå°±ä¸ä¸€å®šèƒ½è¯»åˆ°è‡ªå·±åˆšå†™çš„æ•°æ®ã€‚ è¿½åŠ å¤±è´¥ï¼š è¿½åŠ æ“ä½œä¼šä¿è¯è‡³å°‘æˆåŠŸä¸€æ¬¡ã€‚è¿½åŠ æ“ä½œæ—¶ï¼Œå‡è®¾é…ç½®ä¸‰å‰¯æœ¬ï¼Œä½†æ˜¯åªæœ‰ä¸¤ä¸ªå‰¯æœ¬å†™æˆåŠŸï¼Œæœ€åä¸€ä¸ªå‰¯æœ¬è¶…æ—¶äº†ï¼ˆå¯èƒ½å¯¹åº”å—æœåŠ¡å™¨å®•æœºï¼Œå½“ç„¶é‡å¯å GFS ä¼šç”¨ chunk version æ¥æ ‡è®°å…¶è¿‡æœŸ stale äº†ï¼Œä»è€Œè·³è¿‡è¯¥ offsetã€‚ï¼‰ï¼Œé‚£ä¹ˆè¿½åŠ æ“ä½œä¼šé‡è¯•ï¼Œå¹¶ä¸”å¤±è´¥æ•°æ®ä¸ä¼šåˆ é™¤ï¼Œä½†æ˜¯ GFS æœ‰å¯¹é½æ“ä½œï¼Œå³é‡è¯•æˆåŠŸåï¼Œä¸‰ä¸ªå‰¯æœ¬ä¸­è¯¥è¿½åŠ æ•°æ®çš„èµ·å§‹åç§»é‡æ˜¯å®šä¹‰çš„ï¼ˆä¹Ÿå°±æ˜¯ä¸€è‡´çš„ï¼‰ï¼Œé‚£ä¹ˆå…¶ä¸­é‚£ä¸ªä¸Šæ¬¡å¤±è´¥çš„å‰¯æœ¬å°±ä¼šæœ‰ä¸ªç©ºæ´ï¼Œç³»ç»Ÿä¼šç”¨ç‰¹æ®Šå­—ç¬¦å¡«å……ã€‚ info,ç»“è®ºï¼š å®šä¹‰æœªå®šä¹‰é’ˆå¯¹çš„æ˜¯å¤šå®¢æˆ·ç«¯å¹¶å‘å†™åŒä¸€ä¸ªåç§»é‡çš„è¦†ç›–é¡ºåºé—®é¢˜ï¼›ä¸€è‡´ä¸ä¸€è‡´é’ˆå¯¹çš„æ˜¯å¤šä¸ªå‰¯æœ¬ç›¸åŒåç§»é‡çš„å†…å®¹æ˜¯å¦ç›¸åŒ æ¦‚å¿µè§£æå·²å®šä¹‰ï¼ˆdefinedï¼‰ï¼šå®¢æˆ·ç«¯å†™æŸä¸ªåç§»é‡åï¼Œå†è¯»ï¼Œè¯»åˆ°çš„ä¸€å®šæ˜¯è‡ªå·±çš„ã€‚ æœªå®šä¹‰çš„ä½†æ˜¯ä¸€è‡´çš„ï¼ˆundefined but consistentï¼‰ï¼šå¤šä¸ªå®¢æˆ·ç«¯å¹¶å‘å†™åŒä¸€ä¸ªåç§»é‡ï¼Œä¸ç¡®å®šè°ä¼šè¦†ç›–è°ï¼ˆè¿™ä¸ªé¡ºåºç”± Primary Replica æ‰€åœ¨ Chunkserver æ¥å®‰æ’ï¼Œåé¢å°†ä¼šè®²ï¼‰ï¼Œå³å†™å®Œåå†è¯»ï¼Œä¸ç¡®å®šæ˜¯è‡ªå·±å†™çš„è¿˜æ˜¯å…¶ä»–äººå†™çš„ã€‚ä½†æ˜¯ä¿è¯æœ€ç»ˆä¸€è‡´æ€§ï¼Œå³å¹¶å‘å†™å®Œæˆåï¼Œæœ€åå‡ ä¸ªå‰¯æœ¬æ˜¯ä¸€è‡´çš„ã€‚ ä¸ä¸€è‡´çš„ï¼ˆinconsistentï¼‰ï¼šå³ä¿®æ”¹æ“ä½œåï¼Œæ‰€æœ‰å‰¯æœ¬åŒä¸€åç§»é‡çš„æ•°æ®å¹¶ä¸å®Œå…¨ç›¸åŒã€‚","tags":["åˆ†å¸ƒå¼"],"categories":["è§£å†³æ–¹æ¡ˆ"]},{"title":"go pprof æ€§èƒ½åˆ†æ","path":"/2019/go-pprof-analysis.html","content":"èµ·å› çº¿ä¸Šè¿è¡Œçš„åŸºç¡€å¹³å°æ–‡ä»¶ç®¡ç†æœåŠ¡è¿›ç¨‹å‡ºç°å†…å­˜æ³„éœ²çš„ç°è±¡ä¸‹å›¾æ˜¯ grafana é’ˆå¯¹è¯¥æœåŠ¡çš„ç›‘æ§æŒ‡æ ‡æƒ…å†µï¼Œå¯ä»¥å‘ç°æœåŠ¡åˆšèµ·æ—¶ï¼Œå†…å­˜ä½¿ç”¨é‡ä¸º 20M å·¦å³ï¼Œç»è¿‡æ“ä½œåï¼Œå†…å­˜ä¼šç¨³å®šåœ¨ 300M å·¦å³ï¼Œä¸ä¼šæŒç»­ä¸Šå‡ï¼Œä¹Ÿä¸ä¼šä¸‹é™ï¼Œä¸€å¼€å§‹æ‰¾ä¸åˆ°åŸå› ï¼Œæ‰€ä»¥å°è¯•ä½¿ç”¨ä¸€ä¸‹ golang pprof æ€§èƒ½åˆ†æå·¥å…·åˆ†æä¸€ä¸‹ç¨‹åºåˆ°åº•å“ªå‡ºé—®é¢˜äº† æ·»åŠ  pprof æ¨¡å—ç°åœ¨æœ€æ–°ç‰ˆæœ¬çš„ go tool åˆ†æå·¥å…·å·²ç»å¾ˆäººæ€§åŒ–äº†ï¼Œpprof é‡‡æ ·æ•°æ®ä¸»è¦æœ‰ä¸‰ç§è·å–æ–¹å¼: runtime&#x2F;pprof: æ‰‹åŠ¨è°ƒç”¨runtime.StartCPUProfileæˆ–è€…runtime.StopCPUProfileç­‰ API æ¥ç”Ÿæˆå’Œå†™å…¥é‡‡æ ·æ–‡ä»¶ï¼Œçµæ´»æ€§é«˜ï¼Œé€‚ç”¨äºåº”ç”¨ç¨‹åº net&#x2F;http&#x2F;pprof: é€šè¿‡ http æœåŠ¡è·å– Profile é‡‡æ ·æ–‡ä»¶ï¼Œç®€å•æ˜“ç”¨ï¼Œé€‚ç”¨äºå¯¹åº”ç”¨ç¨‹åºçš„æ•´ä½“ç›‘æ§ï¼Œé€šè¿‡ runtime&#x2F;pprof å®ç°ï¼Œé€‚ç”¨äºwebæœåŠ¡ç¨‹åºã€æœåŠ¡è¿›ç¨‹ go test: é€šè¿‡ go test -bench . -cpuprofile prof.cpuç”Ÿæˆé‡‡æ ·æ–‡ä»¶ é€‚ç”¨å¯¹å‡½æ•°è¿›è¡Œé’ˆå¯¹æ€§æµ‹è¯• å…¶å® net&#x2F;http&#x2F;pprof ä¸­åªæ˜¯ä½¿ç”¨ runtime&#x2F;pprof åŒ…æ¥è¿›è¡Œå°è£…äº†ä¸€ä¸‹ï¼Œå¹¶åœ¨ http ç«¯å£ä¸Šæš´éœ²å‡ºæ¥ï¼Œè®©æˆ‘ä»¬å¯ä»¥åœ¨æµè§ˆå™¨æŸ¥çœ‹ç¨‹åºçš„æ€§èƒ½åˆ†æã€‚å¯ä»¥è‡ªè¡ŒæŸ¥çœ‹ net&#x2F;http&#x2F;pprof ä¸­ä»£ç ï¼Œåªæœ‰ä¸€ä¸ªæ–‡ä»¶ pprof.goã€‚ ä»¥ä¸Šè·å–æ–¹å¼å°±ä¸è¯¦ç»†æ¼”ç¤ºäº†ï¼Œæ¯•ç«Ÿç€é‡äºè§£å†³å½“ä¸‹é—®é¢˜ï¼Œç”±äºæ‰€è¦åˆ†æçš„æœåŠ¡ç¨‹åºä¾èµ–äº gin web æ¡†æ¶ ï¼Œå› æ­¤è¦åœ¨ gin ä¸­é›†æˆ pprofï¼› Exampleï¼š package mainimport ( &quot;github.com/gin-contrib/pprof&quot; // step 1 &quot;github.com/gin-gonic/gin&quot;)func main() &#123; router := gin.Default() pprof.Register(router) // step 2 router.Run(&quot;:8080&quot;)&#125; åˆ†æå¯åŠ¨ç¨‹åºï¼Œé€šè¿‡æœåŠ¡ç«¯å£å³å¯è®¿é—® pprof çš„æ•°æ® æŸ¥çœ‹å½“å‰æ€»è§ˆï¼šè®¿é—® http://$HOSTIP:$PORT/debug/pprof cpuï¼ˆCPU Profilingï¼‰: $HOST/debug/pprof/profileï¼Œé»˜è®¤è¿›è¡Œ 30s çš„ CPU Profilingï¼Œå¾—åˆ°ä¸€ä¸ªåˆ†æç”¨çš„ profile æ–‡ä»¶blockï¼ˆBlock Profilingï¼‰ï¼š$HOST/debug/pprof/blockï¼ŒæŸ¥çœ‹å¯¼è‡´é˜»å¡åŒæ­¥çš„å †æ ˆè·Ÿè¸ªgoroutineï¼š$HOST/debug/pprof/goroutineï¼ŒæŸ¥çœ‹å½“å‰æ‰€æœ‰è¿è¡Œçš„ goroutines å †æ ˆè·Ÿè¸ªheapï¼ˆMemory Profilingï¼‰: $HOST/debug/pprof/heapï¼ŒæŸ¥çœ‹æ´»åŠ¨å¯¹è±¡çš„å†…å­˜åˆ†é…æƒ…å†µmutexï¼ˆMutex Profilingï¼‰ï¼š$HOST/debug/pprof/mutexï¼ŒæŸ¥çœ‹å¯¼è‡´äº’æ–¥é”çš„ç«äº‰æŒæœ‰è€…çš„å †æ ˆè·Ÿè¸ªthreadcreateï¼š$HOST/debug/pprof/threadcreateï¼ŒæŸ¥çœ‹åˆ›å»ºæ–° OS çº¿ç¨‹çš„å †æ ˆè·Ÿè¸ª è¿™é‡Œï¼Œæˆ‘æ›´å¤šçš„æ˜¯åšç¨‹åºçš„å†…å­˜åˆ†æï¼Œå¹¶é€šè¿‡äº¤äº’å¼ç»ˆç«¯ä½¿ç”¨ï¼› åœ¨ terminal ä¸­ä½¿ç”¨ go tool pprof http://$HOSTIP:$PORT/debug/pprof/heap å¯ä»¥è¿›å…¥ pprof åˆ†æå·¥å…·ï¼Œæ¯”å¦‚è¾“å…¥ top å¯ä»¥æ˜¾ç¤ºé å‰çš„å‡ é¡¹ï¼Œgo tool pprof å¯ä»¥å¸¦ä¸Šå‚æ•° -inuse_space (åˆ†æåº”ç”¨ç¨‹åºçš„å¸¸é©»å†…å­˜å ç”¨æƒ…å†µ) æˆ–è€… -alloc_space (åˆ†æåº”ç”¨ç¨‹åºçš„å†…å­˜ä¸´æ—¶åˆ†é…æƒ…å†µ) ç°åœ¨ go tool å¯ä»¥ç›´æ¥å¯è§†åŒ–ç»“æœï¼Œåªéœ€è¦å¸¦ä¸Š -http=:8081 å‚æ•°å³å¯ï¼Œå¦‚ï¼š $ go tool pprof -http=:8081 http://$HOSTIP:$PORT/debug/pprof/heap ä¹‹åå°±ä¼šåœ¨æµè§ˆå™¨å¼¹å‡º http://$HOSTIP:8081/uiï¼Œé‡Œé¢åŒ…å«ç¨‹åºå†…å­˜åˆ†æçš„ dot æ ¼å¼çš„å›¾ã€ç«ç„°å›¾ã€top åˆ—è¡¨ã€source åˆ—è¡¨ç­‰ï¼Œå¦‚ä¸‹ï¼š ä¼˜åŒ–å†…å­˜æ¶ˆè€—åœæ»åœ¨ä¸€ä¸ªå€¼æ—¶ï¼Œæ¯”å¦‚ä¸Šè¿°é—®é¢˜æè¿°ï¼Œå…¶å®ä¸ç”¨ç§°ä¹‹ä¸ºå†…å­˜æ³„æ¼ï¼Œè€Œæ˜¯ä¸ä¸»åŠ¨ GCï¼Œéœ€è¦ä¸»åŠ¨é‡Šæ”¾å†…å­˜ï¼› å¯¼è‡´è¿™ä¸ªé—®é¢˜çš„åŸå› æ˜¯ç”±äºä¸Šä¼ æ–‡ä»¶æ—¶ï¼Œé‡‡ç”¨ multipart/form-data ä¼ è¾“æ•°æ®ï¼Œr.FormFile(&quot;file&quot;) å°†å¯¼è‡´è°ƒç”¨Request.ParseMultipartForm()ï¼Œå¹¶å°†32 MBç”¨ä½œmaxMemoryå‚æ•°çš„å€¼ï¼Œåˆ›å»º 32M çš„ç¼“å†²åŒºï¼›ç”±äºbytes.Buffer ç”¨äºè¯»å–å†…å®¹ï¼Œå› æ­¤è¯»å–è¿‡ç¨‹å°†ä»ä¸€ä¸ªå°çš„æˆ–ç©ºçš„ç¼“å†²åŒºå¼€å§‹ï¼Œå¹¶åœ¨éœ€è¦æ›´å¤§çš„æ—¶å€™é‡æ–°åˆ†é…ï¼› æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… multipart.Reader.ReadFrom() çš„å®ç°ã€‚ r.ParseMultipartForm(32 &lt;&lt; 20) // 32 MBfile, _, err := r.FormFile(&quot;file&quot;)// ... rest of your handler è¯¦ç»†æè¿°å¯ä»¥å‚è€ƒ stackoverflow ä¸Šçš„å›ç­”ï¼ŒMultipart form uploads + memory leaks in golang? è¿™é‡Œä¼˜åŒ–çš„æ–¹æ¡ˆæ˜¯åœ¨ requestè¯·æ±‚çš„ body ä¸­åªæ”¾æ–‡ä»¶æ•°æ®ï¼Œå…¶ä½™ä¿¡æ¯æ”¾åˆ° header ä¸­ï¼Œè¿™æ ·å°±ä¸éœ€è¦ä½¿ç”¨ MultipartForm å»è§£ææ•°æ®ï¼› file = r.Body// ... rest of your handler å¯ä»¥çœ‹åˆ°ä¼ è¾“å®Œæˆåï¼Œå†…å­˜å ç”¨æ¢å¤åˆ°äº†æœåŠ¡åˆå§‹çš„çŠ¶æ€å€¼ å‚è€ƒGolang å¤§æ€å™¨ä¹‹æ€§èƒ½å‰–æ PProf Multipart form uploads + memory leaks in golang?","tags":["Go"],"categories":["è®¾è®¡å¼€å‘"]},{"title":"Opeartor-SDK ç®€å•ä¸Šæ‰‹","path":"/2019/operator-sdk-use.html","content":"å‰è¨€ æœ¬ç¯‡ä»‹ç»äº†CoreOSï¼ˆå·²è¢«çº¢å¸½æ”¶è´­ï¼‰çš„å¼€æºé¡¹ç›® Operator-SDK çš„åŸºæœ¬ä½¿ç”¨ã€‚è¯¥é¡¹ç›®æ˜¯ Operator Framework çš„ä¸€ä¸ªç»„ä»¶ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¼€æºå·¥å…·åŒ…ï¼Œä»¥æœ‰æ•ˆï¼Œè‡ªåŠ¨åŒ–å’Œå¯æ‰©å±•çš„æ–¹å¼ç®¡ç†ç§°ä¸º Operators çš„KubernetesåŸç”Ÿåº”ç”¨ç¨‹åº æ¦‚è¿°Operators å¯ä»¥åœ¨Kubernetesä¹‹ä¸Šè½»æ¾åœ°ç®¡ç†å¤æ‚æœ‰çŠ¶æ€çš„åº”ç”¨ç¨‹åºã€‚ç„¶è€Œï¼Œç”±äºè¯¸å¦‚ä½¿ç”¨ä½çº§APIï¼Œç¼–å†™æ ·æ¿ä»¥åŠç¼ºä¹æ¨¡å—å¯¼è‡´é‡å¤æ€§å·¥ä½œç­‰æŒ‘æˆ˜ï¼Œå¯¼è‡´ç›®å‰ç¼–å†™Operatorå¯èƒ½å¾ˆå›°éš¾ Operator SDKæ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Œæ—¨åœ¨ç®€åŒ–Operatorçš„ç¼–å†™ï¼Œå®ƒæä¾›å¦‚ä¸‹åŠŸèƒ½ï¼š é«˜çº§APIå’ŒæŠ½è±¡ï¼Œæ›´ç›´è§‚åœ°ç¼–å†™æ“ä½œé€»è¾‘ ç”¨äºè„šæ‰‹æ¶å’Œä»£ç ç”Ÿæˆçš„å·¥å…·ï¼Œå¯ä»¥å¿«é€Ÿå¼•å¯¼æ–°é¡¹ç›® æ‰©å±•ä»¥æ¶µç›–å¸¸è§çš„æ“ä½œå‘˜ç”¨ä¾‹ å·¥ä½œæµç¨‹SDKæä¾›ä»¥ä¸‹å·¥ä½œæµç¨‹æ¥å¼€å‘æ–°çš„Operatorï¼š ä½¿ç”¨SDKå‘½ä»¤è¡Œç•Œé¢ï¼ˆCLIï¼‰åˆ›å»ºæ–°çš„Operatoré¡¹ç›® é€šè¿‡æ·»åŠ è‡ªå®šä¹‰èµ„æºå®šä¹‰ï¼ˆCRDï¼‰å®šä¹‰æ–°èµ„æºAPI ä½¿ç”¨SDK APIç›‘æ§æŒ‡å®šçš„èµ„æº åœ¨æŒ‡å®šçš„å¤„ç†ç¨‹åºä¸­å®šä¹‰Operatoråè°ƒé€»è¾‘(å¯¹æ¯”æœŸæœ›çŠ¶æ€ä¸å®é™…çŠ¶æ€)ï¼Œå¹¶ä½¿ç”¨SDK APIä¸èµ„æºè¿›è¡Œäº¤äº’ ä½¿ç”¨SDK CLIæ„å»ºå¹¶ç”ŸæˆOperatoréƒ¨ç½²manifests Operatorä½¿ç”¨SDKåœ¨ç”¨æˆ·è‡ªå®šä¹‰çš„å¤„ç†ç¨‹åºä¸­ä»¥é«˜çº§APIå¤„ç†ç›‘è§†èµ„æºçš„äº‹ä»¶ï¼Œå¹¶é‡‡å–æªæ–½æ¥reconcileï¼ˆå¯¹æ¯”æœŸæœ›çŠ¶æ€ä¸å®é™…çŠ¶æ€ï¼‰åº”ç”¨ç¨‹åºçš„çŠ¶æ€ å¿«é€Ÿå¼€å§‹å®‰è£… Operator-SDK CLI$ mkdir -p $GOPATH/src/github.com/operator-framework$ cd $GOPATH/src/github.com/operator-framework$ git clone https://github.com/operator-framework/operator-sdk$ cd operator-sdk$ git checkout master$ make dep$ make install æ³¨ï¼šè¿™é‡Œå¯çŸ¥ï¼ŒOperator-SDK é»˜è®¤é‡‡ç”¨ dep ä½œä¸ºåŒ…ç®¡ç†æ–¹å¼ï¼Œä½† dep å½“å‰çš„æ‰§è¡Œæ•ˆç‡çš„ç¡®ä¸é«˜ï¼Œå¦‚æœä½ çš„ project ä¾èµ–çš„å¤–éƒ¨åŒ…å¾ˆå¤šï¼Œé‚£ä¹ˆç­‰å¾…çš„æ—¶é—´å¯èƒ½ä¼šå¾ˆé•¿ã€‚å¹¶ä¸”ç”±äº dep ä¼šä¸‹è½½ä¾èµ–åŒ…ï¼Œä¸€æ—¦ä¸‹è½½ qiang å¤–çš„åŒ…ï¼Œé‚£ä¹ˆ dep å¯èƒ½ä¼š â€œé˜»å¡â€ åœ¨é‚£é‡Œï¼å› æ­¤è¿™é‡Œå¯ä»¥é€‰æ‹©è‡ªå·±æ‹‰åŒ…å go install åˆ›å»º app-operator# åˆ›å»ºä¸€ä¸ªå®šä¹‰ App ç”¨æˆ·èµ„æºçš„ app-operator é¡¹ç›®$ mkdir -p $GOPATH/src/github.com/&lt;GitHub_ID&gt;# åˆ›å»º app-operator é¡¹ç›®$ cd $GOPATH/src/github.com/&lt;GitHub_ID&gt;$ operator-sdk new app-operator $ cd app-operator# ä¸ºAppServiceç”¨æˆ·èµ„æºæ·»åŠ ä¸€ä¸ªæ–°çš„ API$ operator-sdk add api --api-version=app.example.com/v1alpha1 --kind=AppService# Required: --kind - æ˜¯ CRD è¦å®šç¾©çš„ kind# Required: --api-version - æ˜¯CRD æƒ³å®šä¹‰çš„ group/versionã€‚# æ·»åŠ ä¸€ä¸ªæ–°çš„æ§åˆ¶å™¨æ¥ç›‘æ§ AppService$ operator-sdk add controller --api-version=app.example.com/v1alpha1 --kind=AppService# æ„å»ºå¹¶æ¨é€ app-operator é•œåƒåˆ°ä¸€ä¸ªå…¬å¼€çš„ registry# è¿™é‡Œ build é•œåƒï¼Œä½¿ç”¨çš„åŸºç¡€é•œåƒï¼Œç”±äºä¸å¯æè¿°çš„åŸå› ï¼Œéå¸¸è€—æ—¶# å¯æ›¿æ¢ä¸º ï¼š FROM docker.io/ericnie2017/helm-operator:latest$ operator-sdk build app-operator:v0.1.0$ docker push # æ›´æ–° operator manifest æ¥ä½¿ç”¨æ–°æ„å»ºçš„é•œåƒ$ sed -i &#x27;s|REPLACE_IMAGE|app-operator:v0.1.0|g&#x27; deploy/operator.yaml æ³¨ï¼šè¿™é‡Œé‡‡ç”¨ operator-sdk new åˆ›å»º app-operator æ—¶ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆ Gopkg.toml å¹¶ä½¿ç”¨ dep ä¸‹è½½ä¾èµ–åŒ…ï¼Œæœ€å¥½æŒ‚ä»£ç†ï¼Œä¸ç„¶éå¸¸è€—æ—¶ï¼Œä¹Ÿå¯ä»¥ç›´æ¥è·³è¿‡ï¼Œè‡ªå·±æ‹‰åŒ…ç¼–è¯‘ åˆ›å»º app-operator for Helm# å…¶ä»–æ­¥éª¤éƒ½ä¸€æ ·# åªæ˜¯å†åˆ›å»º app-operator æ—¶ï¼Œå¢åŠ  --type=helmï¼Œå¹¶ä¸”å†åˆ›å»º helm ç±»å‹çš„ operator æ—¶ï¼Œå¯ä»¥ç›´æ¥ add api å’Œ kind$ operator-sdk new &lt;project-name&gt; --type=helm --kind=&lt;kind&gt; --api-version=&lt;group/version&gt; # ä¾‹å¦‚$ operator-sdk new app-operator api --api-version=app.example.com/v1alpha1 --kind=AppService --type=helm éƒ¨ç½² app-operatorä¸Šè¿°ä¸¤ç§åˆ›å»ºæ–¹å¼ï¼Œéƒ½ä¼šè‡ªåŠ¨ç”Ÿæˆ /deploy æ–‡ä»¶å¤¹ï¼Œå…¶ä¸­åŒ…å«ä¸€ç»„å¯ä»¥ deploy åˆ° K8s cluser ä¸Šçš„ resource filesï¼› deploy&#x2F;service_account.yaml: å»ºç«‹ä¸€ä¸ªè¯¥è‡ªå®šä¹‰ operator åç§°çš„ ServiceAccount deploy&#x2F;role.yaml: å»ºç«‹ä¸€ä¸ª role å®šä¹‰å®ƒèƒ½å­˜å– K8s cluster çš„è§„åˆ™ deploy&#x2F;role_binding.yaml: æŠŠä¸Šé¢çš„ ServiceAccount å’Œ Role ç»‘å®šèµ·æ¥ï¼Œä½¿è¯¥ ServiceAccount æ‹¥æœ‰è¿™ä¸ª Role å®šä¹‰çš„å­˜å– rule deploy&#x2F;operator.yaml: æ˜¯ deploy operator åˆ° K8s cluster ä¸Šçš„ deploymentï¼Œä½¿ç”¨çš„ ServiceAccount æ˜¯æˆ‘ä»¬ deploy/service_account.yaml å®šä¹‰çš„åç§° deploy&#x2F;crds&#x2F;GROUP_VERSION_CRDNAME_crd.yaml: å°±æ˜¯æˆ‘å€‘è‡ªå·±å®šä¹‰ resource typeï¼ŒMore detail: Extend the Kubernetes API with CustomResourceDefinitions deploy&#x2F;crds&#x2F;GROUP_VERSION_CRDNAME_cr.yaml: æ˜¯æˆ‘ä»¬è¦ deploy è‡ªå®šä¹‰çš„ resourceï¼ŒCR ä»£è¡¨ Custom Resource ï¼ŒMore detail: Create custom objects ï¼Œè¯¥æ–‡ä»¶ä¸­çš„ spec å°±æ˜¯å®Œå…¨å¤åˆ¶ helm-charts ä¸‹çš„ values.yamlï¼Œæ‰€ä»¥åŸæœ¬ç”¨ helm æ€ä¹ˆå®šä¹‰ values.yaml ä¸­çš„å€¼ï¼Œè¯¥æ–‡ä»¶ä¸­å°±æ€ä¹ˆå†™ # å»ºç«‹Service Account$ kubectl create -f deploy/service_account.yaml# å»ºç«‹RBAC$ kubectl create -f deploy/role.yaml$ kubectl create -f deploy/role_binding.yaml# å»ºç«‹CRD$ kubectl create -f deploy/crds/app_v1alpha1_appservice_crd.yaml# éƒ¨ç½²app-operator# è¿™é‡Œéƒ¨ç½²æ—¶ï¼Œç”±äºè‡ªåŠ¨ç”Ÿæˆçš„ operator.yaml æ–‡ä»¶ä¸­çš„ æ‹‰å–é•œåƒï¼Œé»˜è®¤ä¸º imagePullPolicy: Always ï¼›åˆ°é•œåƒä»“åº“æ‹‰å–# æˆ‘ä¸€èˆ¬é•œåƒæ‰“åŒ…åˆ°æœ¬åœ°ï¼Œæ‰€ä»¥æ›¿æ¢ä¸º imagePullPolicy: IfNotPresent ï¼›æœ¬åœ°æœ‰ï¼Œå°±ä¸åˆ°é•œåƒä»“åº“æ‹‰å–$ kubectl create -f deploy/operator.yaml# åˆ›å»ºä¸€ä¸ªAppServiceç”¨æˆ·èµ„æº# é»˜è®¤æ§åˆ¶å™¨å°†ç›‘è§†AppServiceå¯¹è±¡å¹¶ä¸ºæ¯ä¸€ä¸ªCRåˆ›å»ºä¸€ä¸ªpod$ kubectl create -f deploy/crds/app_v1alpha1_appservice_cr.yaml# éªŒè¯podæ˜¯å¦åˆ›å»º$ kubectl get pod -l app=example-appserviceNAME READY STATUS RESTARTS AGEexample-appservice-pod 1/1 Running 0 1m æœ€åè¿™æ ·é€šè¿‡ operator-framework/operator-sdk è¦å®Œæˆè‡ªå·±çš„ CRD å’Œ operator çœŸçš„å¾ˆå¿«é€Ÿå’Œæ–¹ä¾¿ï¼Œå¯ä»¥é¢„è§ï¼Œå¦‚æœæ˜¯å¼€å‘æˆ–è¿ç»´äººå‘˜ï¼Œåœ¨äº†è§£éœ€æ±‚åï¼Œå¯ä»¥ä¸ç”¨å†™å¾ˆå¤šçš„ operator å¤æ‚å’Œç¹ççš„é‡å¤ç¨‹åºï¼Œå°±å¯ä»¥å¿«é€Ÿå¼€å‘å’Œéƒ¨ç½² operator ï¼Œä¸”åç»­ä¸€æ ·å¯ä»¥å¾ˆæ–¹ä¾¿çš„ä½¿ç”¨ K8s çš„ API èµ„æºï¼›ä¸è¿‡ï¼Œæ˜¯å¦è¦ä½¿ç”¨ operator-framework/operator-sdk ï¼Œä¸€åˆ‡è¿˜æ˜¯éœ€è¦è‡ªè¡Œçš„è¯„ä¼°å’Œç»“åˆå½“å‰åº”ç”¨æœåŠ¡çš„ä½“é‡æ¥çœ‹æ˜¯å¦é€‚åˆä½¿ç”¨ï¼Œå°å¿ƒæœç”¨ã€‚","tags":["Cloud Navite","Kubernetes"],"categories":["æŠ€æœ¯åŠ æ²¹ç«™"]},{"title":"Select -- æ— é˜»å¡è¯»å†™ channel","path":"/2019/go-channel-select.html","content":"é€šé“é˜»å¡åœ¨ä¹‹å‰çš„ Go çš„å¹¶å‘æ¨¡å‹ å¯ä»¥äº†è§£åˆ°ï¼ŒFAN æµæ°´æ¨¡å‹å¯ä»¥å¤šä¸ª Goroutine è¯»ä¸€ä¸ª Channel ä¸­çš„æ•°æ®(FAN-OUT)ï¼Œæˆ–è€…å¤šä¸ª Chanel å°†æ•°æ®å‘é€åˆ°ä¸€ä¸ª Goroutine ä¸­æ¥æ”¶(FAN-IN)ï¼Œä½†æ˜¯æ— è®ºæ˜¯æ— ç¼“å†²é€šé“ï¼Œè¿˜æ˜¯æœ‰ç¼“å†²é€šé“ï¼Œéƒ½å­˜åœ¨é˜»å¡çš„æƒ…å†µ æ— ç¼“å†²é€šé“ ç‰¹ç‚¹ï¼šå‘é€çš„æ•°æ®éœ€è¦è¢«è¯»å–åï¼Œå‘é€æ‰ä¼šå®Œæˆ é˜»å¡åœºæ™¯ï¼š é€šé“ä¸­æ— æ•°æ®ï¼Œä½†æ‰§è¡Œéƒ½é€šé“ é€šé“ä¸­æ— æ•°æ®ï¼Œå‘é€šé“ä¸­å†™æ•°æ®ï¼Œä½†æ— å…¶ä»–åç¨‹è¯»å–è¯¥é€šé“ä¸­çš„æ•°æ® ä»£ç ç¤ºä¾‹ï¼š // åœºæ™¯ 1func ReadNoDataFromNoBufCh()&#123; noBufCh := make(chan int) // é€šé“ä¸­æ— æ•°æ® &lt;- noBufCh fmt.Println(&quot;read from no buffer channel success&quot;) // Output: // fatal error: all goroutines are asleep - deadlock!&#125;// åœºæ™¯ 2func WriteNoBufCh()&#123; ch := make(chan int) ch &lt;- 1 fmt.Println(&quot;write success no block&quot;) // Output: // fatal error: all goroutines are asleep - deadlock!&#125; æœ‰ç¼“å†²é€šé“ ç‰¹ç‚¹ï¼šæœ‰ç¼“å­˜æ—¶å¯ä»¥å‘é€šé“ä¸­å†™å…¥æ•°æ®åç›´æ¥è¿”å›ï¼Œç¼“å­˜ä¸­æœ‰æ•°æ®æ—¶å¯ä»¥ä»é€šé“ä¸­è¯»åˆ°æ•°æ®ç›´æ¥è¿”å›ï¼Œè¿™æ—¶æœ‰ç¼“å­˜é€šé“æ˜¯ä¸ä¼šé˜»å¡çš„ é˜»å¡åœºæ™¯ï¼š é€šé“çš„ç¼“å­˜æ— æ•°æ®ï¼Œä½†æ‰§è¡Œè¯»é€šé“ é€šé“çš„ç¼“å­˜å·²ç»å æ»¡ï¼Œå‘é€šé“å†™æ•°æ®ï¼Œä½†æ— åç¨‹è¯» ä»£ç ç¤ºä¾‹ï¼š // åœºæ™¯ 1func ReadNoDataFromBufCh()&#123; bufCh := make(chan int, 1) // é€šé“ä¸­æ— æ•°æ® &lt;- bufCh fmt.Println(&quot;read from no buffer channel success&quot;) // Output: // fatal error: all goroutines are asleep - deadlock!&#125;// åœºæ™¯ 2func WriteBufChButFull()&#123; ch := make(chan int, 1) // å†™æ•°æ®ï¼Œå æ»¡ç¼“å†² ch &lt;- 1 // æ— åç¨‹è¯»å–ç¼“å†²ä¸­çš„æ•°æ®ï¼Œç»§ç»­å†™ï¼Œé˜»å¡ ch &lt;- 2 fmt.Println(&quot;write success no block&quot;) // Output: // fatal error: all goroutines are asleep - deadlock!&#125; Select åŠŸèƒ½Select ç”±å…³é”®å­— select å’Œ case ç»„æˆï¼Œdefault ä¸æ˜¯å¿…é¡»çš„ï¼Œå¦‚æœæ²¡å…¶ä»–äº‹å¯åšï¼Œå¯ä»¥çœç•¥ defaultï¼Œåœ¨å¤šä¸ªé€šé“ä¸Šè¿›è¡Œè¯»æˆ–å†™æ“ä½œï¼Œè®©å‡½æ•°å¯ä»¥å¤„ç†å¤šä¸ªäº‹æƒ…ï¼Œä½† 1 æ¬¡åªå¤„ç† 1 ä¸ªï¼Œæœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š æ¯æ¬¡æ‰§è¡Œ selectï¼Œéƒ½ä¼šåªæ‰§è¡Œå…¶ä¸­ 1 ä¸ª case æˆ–è€…æ‰§è¡Œ default è¯­å¥ å½“æ²¡æœ‰ case æˆ–è€… default å¯ä»¥æ‰§è¡Œæ—¶ï¼Œselect åˆ™é˜»å¡ï¼Œç­‰å¾…ç›´åˆ°æœ‰ 1 ä¸ª case å¯ä»¥æ‰§è¡Œ å½“æœ‰å¤šä¸ª case å¯ä»¥æ‰§è¡Œæ—¶ï¼Œåˆ™éšæœºé€‰æ‹© 1 ä¸ª case æ‰§è¡Œ case åé¢è·Ÿçš„å¿…é¡»æ˜¯è¯»æˆ–è€…å†™é€šé“çš„æ“ä½œï¼Œå¦åˆ™ç¼–è¯‘å‡ºé”™","tags":["Go"],"categories":["è®¾è®¡å¼€å‘"]},{"title":"Kuberntes åˆ›å»º LoadBalancer ç±»å‹æœåŠ¡","path":"/2019/k8s-deploy-metallb-LoadBalancer.html","content":"å‰è¨€ æˆ‘ä»¬çŸ¥é“ï¼ŒService æœºåˆ¶ï¼Œä»¥åŠ Kubernetes é‡Œçš„ DNS æ’ä»¶ï¼Œéƒ½æ˜¯åœ¨å¸®åŠ©æˆ‘ä»¬è§£å†³åŒæ ·ä¸€ä¸ªé—®é¢˜ï¼Œå³ï¼šå¦‚ä½•æ‰¾åˆ°æŸä¸€ä¸ªå®¹å™¨ï¼›è€Œ Service æ˜¯ç”± kube-proxy ç»„ä»¶ï¼ŒåŠ ä¸Š iptables æ¥å…±åŒå®ç°çš„ï¼›æ‰€è°“ Service çš„è®¿é—®å…¥å£ï¼Œå…¶å®å°±æ˜¯æ¯å°å®¿ä¸»æœºä¸Šç”± kube-proxy ç”Ÿæˆçš„ iptables è§„åˆ™ï¼Œä»¥åŠ kube-dns ç”Ÿæˆçš„ DNS è®°å½•ã€‚è€Œä¸€æ—¦ç¦»å¼€äº†è¿™ä¸ªé›†ç¾¤ï¼Œè¿™äº›ä¿¡æ¯å¯¹ç”¨æˆ·æ¥è¯´ï¼Œä¹Ÿå°±è‡ªç„¶æ²¡æœ‰ä½œç”¨äº† åœ¨ä½¿ç”¨ Kubernetes çš„ Service æ—¶ï¼Œä¸€ä¸ªå¿…é¡»è¦é¢å¯¹å’Œè§£å†³çš„é—®é¢˜å°±æ˜¯ï¼šå¦‚ä½•ä»å¤–éƒ¨ï¼ˆKubernetes é›†ç¾¤ä¹‹å¤–ï¼‰ï¼Œè®¿é—®åˆ° Kubernetes é‡Œåˆ›å»ºçš„ Serviceï¼Ÿ ä»å¤–ç•Œè¿é€š Serviceä¸‰ç§æ–¹å¼ NodePort ExternalIP LoadBalance è¿™é‡Œ NodePort å’Œ externalIPs æ˜¯ K8S é›†ç¾¤æœ¬èº«å°±æ”¯æŒçš„ç‰¹æ€§ï¼Œè¿™ä¸¤ä¸ªæ–¹æ¡ˆè®©å¾ˆå¤šç§æœ‰äº‘ç”¨æˆ·æˆä¸ºäº† K8S ä¸–ç•Œä¸­çš„äºŒç­‰å…¬æ°‘ï¼Œè€Œ NodePort ä¹Ÿæ˜¯æˆ‘ä»¬æœ€å¸¸ç”¨çš„ï¼› è€Œ kubernetes æ²¡æœ‰ä¸ºè£¸æœºç¾¤é›†æä¾›ç½‘ç»œè´Ÿè½½å‡è¡¡å™¨ï¼ˆç±»å‹ä¸º LoadBalancer çš„æœåŠ¡ï¼‰çš„å®ç°ï¼Œå¦‚æœä½ çš„ K8S é›†ç¾¤æ²¡æœ‰åœ¨å…¬æœ‰äº‘çš„ IaaS å¹³å°ï¼ˆGCPï¼ŒAWSï¼ŒAzure â€¦ï¼‰ä¸Šè¿è¡Œï¼Œåˆ™ LoadBalancers å°†åœ¨åˆ›å»ºæ—¶æ— é™æœŸåœ°ä¿æŒ â€œæŒ‚èµ·â€ çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰å…¬æœ‰äº‘å‚å•†è‡ªå®¶çš„ kubernetes æ”¯æŒ LoadBalancerï¼Œå¯¹ LoadBalancer ç±»å‹çš„æœåŠ¡çš„æ”¯æŒåº”è¯¥æ˜¯ä¼—å¤šè¡¨é¢å·®å¼‚ä¸­æœ€é†’ç›®çš„ä¸€ä¸ªäº† çº¯è½¯ä»¶è§£å†³æ–¹æ¡ˆ: MetalLB è¯¥é¡¹ç›®å‘å¸ƒäº 2017 å¹´åº•ï¼Œå½“å‰å¤„äº Beta é˜¶æ®µï¼Œæ—¨åœ¨è§£å†³ä¸Šè¿°ä¸­çš„ä¸å¹³è¡¡ï¼Œé€šè¿‡æä¾›ä¸æ ‡å‡†ç½‘ç»œè®¾å¤‡é›†æˆçš„ç½‘ç»œ LB å®ç°æ¥çº æ­£è¿™ç§ä¸å¹³è¡¡ï¼Œä»¥ä¾¿è£¸æœºé›†ç¾¤ä¸Šçš„å¤–éƒ¨æœåŠ¡ä¹Ÿ â€œå°½å¯èƒ½â€ åœ°å·¥ä½œï¼›å³ MetalLB èƒ½å¤Ÿå¸®åŠ©ä½ åœ¨ kubernetes ä¸­åˆ›å»º LoadBalancer ç±»å‹çš„ kubernetes æœåŠ¡ é¡¹ç›®åœ°å€ï¼šhttps://github.com/google/metallb ç‰ˆæœ¬è¯´æ˜ï¼šhttps://metallb.universe.tf/release-notes/ Metallb ä¼šåœ¨ Kubernetes å†…è¿è¡Œï¼Œç›‘æ§æœåŠ¡å¯¹è±¡çš„å˜åŒ–ï¼Œä¸€æ—¦å¯Ÿè§‰æœ‰æ–°çš„ LoadBalancer æœåŠ¡è¿è¡Œï¼Œå¹¶ä¸”æ²¡æœ‰å¯ç”³è¯·çš„è´Ÿè½½å‡è¡¡å™¨ä¹‹åï¼Œå°±ä¼šå®Œæˆä¸¤éƒ¨åˆ†çš„å·¥ä½œï¼š åœ°å€åˆ†é… ç”¨æˆ·éœ€è¦åœ¨é…ç½®ä¸­æä¾›ä¸€ä¸ªåœ°å€æ± ï¼ŒMetallb å°†ä¼šåœ¨å…¶ä¸­é€‰å–åœ°å€åˆ†é…ç»™æœåŠ¡ã€‚ åœ°å€å¹¿æ’­ æ ¹æ®ä¸åŒé…ç½®ï¼ŒMetallb ä¼šä»¥äºŒå±‚ï¼ˆARP&#x2F;NDPï¼‰æˆ–è€… BGP çš„æ–¹å¼è¿›è¡Œåœ°å€çš„å¹¿æ’­ å®‰è£…éƒ¨ç½²æ¼”ç¤ºéƒ¨ç½² Metallb è´Ÿè½½å‡è¡¡å™¨Metallb æ”¯æŒ Helm å’Œ YAML ä¸¤ç§å®‰è£…æ–¹æ³•(è¿™é‡Œæ¨èç¬¬äºŒç§) Helm $ helm install --name metallb stable/metallb YAML $ kubectl apply -f https://raw.githubusercontent.com/google/metallb/v0.7.3/manifests/metallb.yaml å¾ˆç®€å•ï¼ŒMetallb å°±ä¼šå¼€å§‹å®‰è£…ï¼Œä¼šç”Ÿæˆè‡ªå·±çš„å‘½åç©ºé—´ä»¥åŠ RBAC é…ç½® [root@lee ~]# kubectl apply -f https://raw.githubusercontent.com/google/metallb/v0.7.3/manifests/metallb.yamlnamespace/metallb-system createdserviceaccount/controller createdserviceaccount/speaker createdclusterrole.rbac.authorization.k8s.io/metallb-system:controller createdclusterrole.rbac.authorization.k8s.io/metallb-system:speaker createdrole.rbac.authorization.k8s.io/config-watcher createdclusterrolebinding.rbac.authorization.k8s.io/metallb-system:controller createdclusterrolebinding.rbac.authorization.k8s.io/metallb-system:speaker createdrolebinding.rbac.authorization.k8s.io/config-watcher createddaemonset.apps/speaker createddeployment.apps/controller created[root@lee ~]# kubectl get pods -n metallb-system -owideNAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODEcontroller-765899887-bdwdk 1/1 Running 0 82s 10.0.0.22 lee &lt;none&gt;speaker-qldl6 1/1 Running 0 82s 192.168.50.124 lee &lt;none&gt; ç›®å‰è¿˜æ²¡æœ‰å®£å¸ƒä»»ä½•å†…å®¹ï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰æä¾› ConfigMapï¼Œä¹Ÿæ²¡æœ‰æä¾›è´Ÿè½½å‡è¡¡åœ°å€çš„æœåŠ¡ï¼›æ¥ä¸‹æ¥æˆ‘ä»¬è¦ç”Ÿæˆä¸€ä¸ª ConfigMapæ–‡ä»¶ï¼Œä¸º Metallb è®¾ç½®ç½‘å€èŒƒå›´ä»¥åŠåè®®ç›¸å…³çš„é€‰æ‹©å’Œé…ç½® æä¾› IP poolé€šè¿‡ä¹‹å‰æåˆ°çš„åŸç†å›¾å¯çŸ¥ï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ª ConfigMap æ–‡ä»¶ï¼Œä»¥æä¾› IP æ± ï¼› $ wget https://raw.githubusercontent.com/google/metallb/v0.7.3/manifests/example-layer2-config.yaml ä¿®æ”¹ ip åœ°å€æ± å’Œé›†ç¾¤èŠ‚ç‚¹ç½‘æ®µç›¸åŒï¼Œä¸”å¿…é¡»ä¸ºä¸€ä¸ª IP åŒºé—´ apiVersion: v1kind: ConfigMapmetadata: namespace: metallb-system name: configdata: config: | address-pools: - name: my-ip-space protocol: layer2 addresses: # ä¸é›†ç¾¤èŠ‚ç‚¹ç½‘æ®µç›¸åŒ - 192.168.50.211-192.168.50.220 **IP åœ°å€ä¸º æ— å ç”¨ ** [root@lee ~]# ping 192.168.50.211PING 192.168.50.211 (192.168.50.211) 56(84) bytes of data.From 192.168.50.124 icmp_seq=1 Destination Host UnreachableFrom 192.168.50.124 icmp_seq=2 Destination Host UnreachableFrom 192.168.50.124 icmp_seq=3 Destination Host UnreachableFrom 192.168.50.124 icmp_seq=4 Destination Host Unreachable^C--- 192.168.50.211 ping statistics ---5 packets transmitted, 0 received, +4 errors, 100% packet loss, time 4001ms éƒ¨ç½² example-layer2-config.yaml æ–‡ä»¶ $ kubectl apply -f example-layer2-config.yaml éƒ¨ç½²åº”ç”¨æœåŠ¡æµ‹è¯•$ wget https://raw.githubusercontent.com/google/metallb/master/manifests/tutorial-2.yaml$ kubectl apply -f tutorial-2.yaml æŸ¥çœ‹ yaml æ–‡ä»¶é…ç½®ï¼ŒåŒ…å«äº†ä¸€ä¸ª deployment å’Œä¸€ä¸ª LoadBalancer ç±»å‹çš„ serviceï¼Œé»˜è®¤å³å¯ï¼› æŸ¥çœ‹ service åˆ†é…çš„ EXTERNAL-IP [root@lee ~]# kubectl get svc -owideNAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE SELECTORnginx LoadBalancer 10.0.228.36 192.168.50.211 80:31796/TCP 65s app=nginx ping è¯¥ EXTERNAL-IP åœ°å€ï¼Œå‘ç°è¯¥åœ°å€å¯ä»¥è®¿é—®äº† [root@lee ~]# ping 192.168.50.211PING 192.168.50.211 (192.168.50.211) 56(84) bytes of data.64 bytes from 192.168.50.211: icmp_seq=1 ttl=64 time=0.050 ms64 bytes from 192.168.50.211: icmp_seq=2 ttl=64 time=0.082 ms64 bytes from 192.168.50.211: icmp_seq=3 ttl=64 time=0.068 ms é›†ç¾¤å†…è®¿é—®è¯¥ EXTERNAL-IP åœ°å€ [root@lee ~]# curl 192.168.50.211&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;title&gt;Welcome to nginx!&lt;/title&gt;...............&lt;p&gt;&lt;em&gt;Thank you for using nginx.&lt;/em&gt;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt; ä»é›†ç¾¤å¤–è®¿é—®è¯¥ IP åœ°å€ Administrator at 16:47:09 / $ curl 192.168.50.211 % Total % Received % Xferd Average Speed Time Time Time Current Dload Upload Total Spent Left Speed100 612 100 612 0 0 597k 0 --:--:-- --:--:-- --:--:-- 597k&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;title&gt;Welcome to nginx!&lt;/title&gt;................&lt;p&gt;&lt;em&gt;Thank you for using nginx.&lt;/em&gt;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt; å¦å¤–ä½¿ç”¨ Node IP + NodePort ä¹Ÿå¯ä»¥è®¿é—® Administrator at 16:47:09 / $ curl 192.168.50.124:31796 % Total % Received % Xferd Average Speed Time Time Time Current Dload Upload Total Spent Left Speed100 612 100 612 0 0 597k 0 --:--:-- --:--:-- --:--:-- 597k&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;title&gt;Welcome to nginx!&lt;/title&gt;................&lt;p&gt;&lt;em&gt;Thank you for using nginx.&lt;/em&gt;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;","tags":["Cloud Navite","Kubernetes"],"categories":["è§£å†³æ–¹æ¡ˆ"]},{"title":"Go å¹¶å‘æ¨¡å‹","path":"/2019/go-concurrent-model.html","content":"å‰è¨€ Go è¯­è¨€æ˜¯ä¸ºå¹¶å‘è€Œç”Ÿçš„è¯­è¨€ï¼ŒGo è¯­è¨€æ˜¯ä¸ºæ•°ä¸å¤šçš„åœ¨è¯­è¨€å±‚é¢å®ç°å¹¶å‘çš„è¯­è¨€ï¼›ä¹Ÿæ­£æ˜¯ Go è¯­è¨€çš„å¹¶å‘ç‰¹æ€§ï¼Œå¸å¼•äº†å…¨çƒæ— æ•°çš„å¼€å‘è€… å¹¶å‘ (concurrency) å’Œå¹¶è¡Œ(parallellism)åœ¨äº†è§£ Go çš„å¹¶å‘åŸç†ä¹‹å‰ï¼Œå…ˆäº†è§£ä»€ä¹ˆæ˜¯å¹¶å‘ä»€ä¹ˆæ˜¯å¹¶è¡Œï¼› å¹¶å‘ ( concurrency ) ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„ä»»åŠ¡åœ¨ä¸€æ®µæ—¶é—´å†…è¢«æ‰§è¡Œã€‚æˆ‘ä»¬ä¸å¿… care è¿™äº›ä»»åŠ¡åœ¨æŸä¸€ä¸ªæ—¶é—´ç‚¹æ˜¯å¦æ˜¯åŒæ—¶æ‰§è¡Œï¼Œå¯èƒ½åŒæ—¶æ‰§è¡Œï¼Œä¹Ÿå¯èƒ½ä¸æ˜¯ï¼Œæˆ‘ä»¬åªå…³å¿ƒåœ¨ä¸€æ®µæ—¶é—´å†…ï¼Œå“ªæ€•æ˜¯å¾ˆçŸ­çš„æ—¶é—´ï¼ˆä¸€ç§’æˆ–è€…ä¸¤ç§’ï¼‰æ˜¯å¦æ‰§è¡Œè§£å†³äº†ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šä»»åŠ¡ å¹¶è¡Œ ( parallellism ) ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„ä»»åŠ¡åœ¨åŒä¸€æ—¶åˆ»è¢«åŒæ—¶æ‰§è¡Œ å¹¶å‘è¯´çš„æ˜¯é€»è¾‘ä¸Šçš„æ¦‚å¿µï¼Œè€Œå¹¶è¡Œï¼Œå¼ºè°ƒçš„æ˜¯ç‰©ç†è¿è¡ŒçŠ¶æ€ï¼›å¹¶å‘ â€œåŒ…å«â€ å¹¶è¡Œï¼›( è¯¦æƒ…è¯·è§ï¼šRob Pike çš„ PPT) CSP å¹¶å‘æ¨¡å‹Go å®ç°äº†ä¸¤ç§å¹¶å‘å½¢å¼ã€‚ç¬¬ä¸€ç§æ˜¯å¤§å®¶æ™®éè®¤çŸ¥çš„ï¼šå¤šçº¿ç¨‹å…±äº«å†…å­˜ã€‚å…¶å®å°±æ˜¯ Java æˆ–è€… C++ ç­‰è¯­è¨€ä¸­çš„å¤šçº¿ç¨‹å¼€å‘ã€‚å¦å¤–ä¸€ç§æ˜¯ Go è¯­è¨€ç‰¹æœ‰çš„ï¼Œä¹Ÿæ˜¯ Go è¯­è¨€æ¨èçš„ï¼šCSPï¼ˆcommunicating sequential processesï¼‰å¹¶å‘æ¨¡å‹ è¯·è®°ä½ä¸‹é¢è¿™å¥è¯ï¼š Do not communicate by sharing memory; instead, share memory by communicating.â€œä¸è¦ä»¥å…±äº«å†…å­˜çš„æ–¹å¼æ¥é€šä¿¡ï¼Œç›¸åï¼Œè¦é€šè¿‡é€šä¿¡æ¥å…±äº«å†…å­˜â€ æ™®é€šçš„çº¿ç¨‹å¹¶å‘æ¨¡å‹ï¼Œå°±æ˜¯åƒ Javaã€C++ã€æˆ–è€… Pythonï¼Œä»–ä»¬çº¿ç¨‹é—´é€šä¿¡éƒ½æ˜¯é€šè¿‡å…±äº«å†…å­˜çš„æ–¹å¼æ¥è¿›è¡Œçš„ã€‚éå¸¸å…¸å‹çš„æ–¹å¼å°±æ˜¯ï¼Œåœ¨è®¿é—®å…±äº«æ•°æ®ï¼ˆä¾‹å¦‚æ•°ç»„ã€Mapã€æˆ–è€…æŸä¸ªç»“æ„ä½“æˆ–å¯¹è±¡ï¼‰çš„æ—¶å€™ï¼Œé€šè¿‡é”æ¥è®¿é—®ï¼Œå› æ­¤ï¼Œåœ¨å¾ˆå¤šæ—¶å€™ï¼Œè¡ç”Ÿå‡ºä¸€ç§æ–¹ä¾¿æ“ä½œçš„æ•°æ®ç»“æ„ï¼Œå«åš â€œçº¿ç¨‹å®‰å…¨çš„æ•°æ®ç»“æ„â€ Go çš„ CSP å¹¶å‘æ¨¡å‹ï¼Œæ˜¯é€šè¿‡goroutineå’Œchannelæ¥å®ç°çš„ã€‚ goroutine: æ˜¯ Go è¯­è¨€ä¸­å¹¶å‘çš„æ‰§è¡Œå•ä½ï¼Œæœ‰ç‚¹æŠ½è±¡ï¼Œå…¶å®å°±æ˜¯å’Œä¼ ç»Ÿæ¦‚å¿µä¸Šçš„çº¿ç¨‹ ç±»ä¼¼ï¼Œä½†å®ƒæ¯”çº¿ç¨‹æ›´ä¸ºè½»é‡ï¼Œç§°ä¹‹ä¸ºåç¨‹ channelï¼š æ˜¯ Go è¯­è¨€ä¸­å„ä¸ªå¹¶å‘ç»“æ„ä½“ (goroutine) ä¹‹å‰çš„é€šä¿¡æœºåˆ¶ã€‚ é€šä¿—çš„è®²ï¼Œå°±æ˜¯å„ä¸ªgoroutineä¹‹é—´é€šä¿¡çš„â€ ç®¡é“ â€œï¼Œæœ‰ç‚¹ç±»ä¼¼äº Linux ä¸­çš„ç®¡é“ åˆ›å»ºä¸€ä¸ª goroutine å¾ˆç®€å•ï¼Œåªè¦ä½¿ç”¨ go å…³é”®å­—å°±å¯ä»¥äº†ï¼Œå¦‚ä¸‹ï¼› go func() é€šä¿¡æœºåˆ¶ channel ä¹Ÿå¾ˆæ–¹ä¾¿ï¼Œä¼ æ•°æ®ç”¨ channel &lt;- data ï¼Œå–æ•°æ®ç”¨ &lt;-channel åœ¨é€šä¿¡è¿‡ç¨‹ä¸­ï¼Œä¼ æ•°æ® channel &lt;- data å’Œå–æ•°æ® &lt;-channel å¿…ç„¶ä¼šæˆå¯¹å‡ºç°ï¼Œå› ä¸ºè¿™è¾¹ä¼ ï¼Œé‚£è¾¹å–ï¼Œä¸¤ä¸ªgoroutineä¹‹é—´æ‰ä¼šå®ç°é€šä¿¡ï¼Œè€Œä¸”ä¸ç®¡ä¼ è¿˜æ˜¯å–ï¼Œå¿…é˜»å¡ï¼Œç›´åˆ°å¦å¤–çš„goroutineä¼ æˆ–è€…å–ä¸ºæ­¢ è¿™ä¾¿æ˜¯ Golang CSP å¹¶å‘æ¨¡å‹æœ€åŸºæœ¬çš„å½¢å¼ï¼Œæœ¬é—®å†…å®¹ä¸è¯¦ç»†é˜è¿°å¹¶å‘åŸç† å¹¶å‘æ¨¡å‹çš„è¿ç”¨æµæ°´çº¿æ¨¡å‹ Golang å¹¶å‘æ ¸å¿ƒæ€è·¯æ˜¯å…³æ³¨æ•°æ®æµåŠ¨ã€‚æ•°æ®æµåŠ¨çš„è¿‡ç¨‹äº¤ç»™ channelï¼Œæ•°æ®å¤„ç†çš„æ¯ä¸ªç¯èŠ‚éƒ½äº¤ç»™ goroutineï¼ŒæŠŠè¿™äº›æµç¨‹ç”»èµ·æ¥ï¼Œæœ‰å§‹æœ‰ç»ˆå½¢æˆä¸€æ¡çº¿ï¼Œé‚£å°±èƒ½æ„æˆæµæ°´çº¿æ¨¡å‹ æµæ°´çº¿å¹¶ä¸æ˜¯ä»€ä¹ˆæ–°å¥‡çš„æ¦‚å¿µï¼Œå®ƒèƒ½æå¤§çš„æé«˜ç”Ÿäº§æ•ˆç‡ï¼Œåœ¨å½“ä»£ç¤¾ä¼šæµæ°´çº¿éå¸¸æ™®éï¼Œæˆ‘ä»¬ç”¨çš„å‡ ä¹ä»»ä½•äº§å“ï¼ˆæ‰‹æœºã€ç”µè„‘ã€æ±½è½¦ã€æ°´æ¯ï¼‰ï¼Œéƒ½æ˜¯ä»æµæ°´çº¿ä¸Šç”Ÿäº§å‡ºæ¥çš„ï¼›åœ¨ Golang ä¸­ï¼Œæµæ°´çº¿ç”±å¤šä¸ªé˜¶æ®µç»„æˆï¼Œæ¯ä¸ªé˜¶æ®µä¹‹é—´é€šè¿‡ channel è¿æ¥ï¼Œæ¯ä¸ªèŠ‚ç‚¹å¯ä»¥ç”±å¤šä¸ªåŒæ—¶è¿è¡Œçš„ goroutine ç»„æˆ å¦‚ä¸Šå›¾ï¼Œä»æœ€ç®€å•çš„æµæ°´çº¿å…¥æ‰‹ï¼Œç”± 3 ä¸ªé˜¶æ®µç»„æˆï¼Œåˆ†åˆ«æ˜¯ Aã€Bã€Cï¼›ç¬¬ä¸€ä¸ªé˜¶æ®µçš„åç¨‹æ˜¯ç”Ÿäº§è€…ï¼Œå®ƒä»¬åªç”Ÿäº§æ•°æ®ï¼Œæœ€åä¸€ä¸ªé˜¶æ®µçš„åç¨‹æ˜¯æ¶ˆè´¹è€…ï¼ŒA æ˜¯ç”Ÿæˆè€…ï¼ŒC æ˜¯æ¶ˆè´¹è€…ï¼Œè€Œ B åªæ˜¯ä¸­é—´è¿‡ç¨‹çš„å¤„ç†è€…ï¼›A å’Œ B ä¹‹é—´æ˜¯é€šé“aChï¼ŒB å’Œ C ä¹‹é—´æ˜¯é€šé“bChï¼ŒA ç”Ÿæˆæ•°æ®ä¼ é€’ç»™ Bï¼ŒB ç”Ÿæˆæ•°æ®ä¼ é€’ç»™ C ä¸¾ä¸ªä¾‹å­ï¼Œè®¾è®¡ä¸€ä¸ªç¨‹åºï¼šè®¡ç®—ä¸€ä¸ªæ•´æ•°åˆ‡ç‰‡ä¸­å…ƒç´ çš„å¹³æ–¹å€¼å¹¶æŠŠå®ƒæ‰“å°å‡ºæ¥ã€‚éå¹¶å‘çš„æ–¹å¼æ˜¯ä½¿ç”¨ for éå†æ•´ä¸ªåˆ‡ç‰‡ï¼Œç„¶åè®¡ç®—å¹³æ–¹ï¼Œæ‰“å°ç»“æœ æˆ‘ä»¬ä½¿ç”¨æµæ°´çº¿æ¨¡å‹å®ç°è¿™ä¸ªç®€å•çš„åŠŸèƒ½ï¼Œä»æµæ°´çº¿çš„è§’åº¦ï¼Œå¯ä»¥åˆ†ä¸º 3 ä¸ªé˜¶æ®µï¼š éå†åˆ‡ç‰‡ï¼Œè¿™æ˜¯ç”Ÿäº§è€…ã€‚ è®¡ç®—å¹³æ–¹å€¼ã€‚ æ‰“å°ç»“æœï¼Œè¿™æ˜¯æ¶ˆè´¹è€…ã€‚ å…·ä½“ä»£ç ï¼Œå‚è€ƒ simple.go producer()è´Ÿè´£ç”Ÿäº§æ•°æ®ï¼Œå®ƒä¼šæŠŠæ•°æ®å†™å…¥é€šé“ï¼Œå¹¶æŠŠå®ƒå†™æ•°æ®çš„é€šé“è¿”å› square()è´Ÿè´£ä»æŸä¸ªé€šé“è¯»æ•°å­—ï¼Œç„¶åè®¡ç®—å¹³æ–¹ï¼Œå°†ç»“æœå†™å…¥é€šé“ï¼Œå¹¶æŠŠå®ƒçš„è¾“å‡ºé€šé“è¿”å› main()è´Ÿè´£å¯åŠ¨ producer å’Œ squareï¼Œå¹¶ä¸”è¿˜æ˜¯æ¶ˆè´¹è€…ï¼Œè¯»å– suqre çš„ç»“æœï¼Œå¹¶æ‰“å°å‡ºæ¥ æµæ°´çº¿çš„ç‰¹ç‚¹ æ¯ä¸ªé˜¶æ®µæŠŠæ•°æ®é€šè¿‡ channel ä¼ é€’ç»™ä¸‹ä¸€ä¸ªé˜¶æ®µ æ¯ä¸ªé˜¶æ®µè¦åˆ›å»º 1 ä¸ª goroutine å’Œ 1 ä¸ªé€šé“ï¼Œè¿™ä¸ª goroutine å‘é‡Œé¢å†™æ•°æ®ï¼Œå‡½æ•°è¦è¿”å›è¿™ä¸ªé€šé“ æœ‰ 1 ä¸ªå‡½æ•°æ¥ç»„ç»‡æµæ°´çº¿ï¼Œæˆ‘ä»¬ä¾‹å­ä¸­æ˜¯ main å‡½æ•° æµæ°´çº¿ FAN æ¨¡å¼ æµæ°´çº¿æ¨¡å‹è¿›é˜¶ï¼ŒFAN-IN å’Œ FAN-OUT æ¨¡å¼ï¼ŒFAN æ¨¡å¼å¯ä»¥è®©æˆ‘ä»¬çš„æµæ°´çº¿æ¨¡å‹æ›´å¥½çš„åˆ©ç”¨ Golang å¹¶å‘ï¼Œæé«˜è½¯ä»¶æ€§èƒ½ è¿™é‡Œè¿˜æ˜¯ä»¥ç”Ÿäº§æ±½è½¦çš„æµæ°´çº¿ä¸ºä¾‹ï¼Œæ±½è½¦ç”Ÿäº§çº¿ä¸Šæœ‰ä¸ªé˜¶æ®µæ˜¯ç»™å°æ±½è½¦è£… 4 ä¸ªè½®å­ï¼Œå¯ä»¥æŠŠè¿™ä¸ªé˜¶æ®µä»»åŠ¡äº¤ç»™ 4 ä¸ªäººåŒæ—¶å»åšï¼Œè¿™ 4 ä¸ªäººæŠŠè½®å­éƒ½è£…å®Œåï¼Œå†æŠŠæ±½è½¦ç§»åŠ¨åˆ°ç”Ÿäº§çº¿ä¸‹ä¸€ä¸ªé˜¶æ®µï¼›è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå°±æœ‰ä»»åŠ¡çš„åˆ†å‘ï¼Œå’Œä»»åŠ¡ç»“æœçš„æ”¶é›†ï¼›å…¶ä¸­ä»»åŠ¡åˆ†å‘æ˜¯ FAN-OUTï¼Œä»»åŠ¡æ”¶é›†æ˜¯ FAN-IN FAN-OUT æ¨¡å¼ï¼šå¤šä¸ª goroutine ä»åŒä¸€ä¸ªé€šé“è¯»å–æ•°æ®ï¼Œç›´åˆ°è¯¥é€šé“å…³é—­ï¼›OUT æ˜¯ä¸€ç§å¼ å¼€çš„æ¨¡å¼ï¼Œæ‰€ä»¥åˆè¢«ç§°ä¸ºæ‰‡å‡ºï¼Œå¯ä»¥ç”¨æ¥åˆ†å‘ä»»åŠ¡ FAN-IN æ¨¡å¼ï¼š1 ä¸ª goroutine ä»å¤šä¸ªé€šé“è¯»å–æ•°æ®ï¼Œç›´åˆ°è¿™äº›é€šé“å…³é—­ï¼›IN æ˜¯ä¸€ç§æ”¶æ•›çš„æ¨¡å¼ï¼Œæ‰€ä»¥åˆè¢«ç§°ä¸ºæ‰‡å…¥ï¼Œç”¨æ¥æ”¶é›†å¤„ç†çš„ç»“æœ å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œ ä¾ç„¶å»¶ç”¨ä¸Šé¢çš„æ¡ˆä¾‹éœ€æ±‚ï¼Œè®¡ç®—ä¸€ä¸ªæ•´æ•°åˆ‡ç‰‡ä¸­å…ƒç´ çš„å¹³æ–¹å€¼å¹¶æŠŠå®ƒæ‰“å°å‡ºæ¥ï¼Œè¿™æ¬¡æˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹ï¼Œæ·»åŠ  merge() æ–¹æ³•ï¼Œå…·ä½“ä»£ç å‚è€ƒ fan.go producer()ä¿æŒä¸å˜ï¼Œè´Ÿè´£ç”Ÿäº§æ•°æ® squre()ä¹Ÿä¸å˜ï¼Œè´Ÿè´£è®¡ç®—å¹³æ–¹å€¼ ä¿®æ”¹main()ï¼Œå¯åŠ¨ 3 ä¸ª squareï¼Œè¿™ 3 ä¸ª squre ä» producer ç”Ÿæˆçš„é€šé“è¯»æ•°æ®ï¼Œè¿™æ˜¯ FAN-OUT å¢åŠ merge()ï¼Œå…¥å‚æ˜¯ 3 ä¸ª square å„è‡ªå†™æ•°æ®çš„é€šé“ï¼Œç»™è¿™ 3 ä¸ªé€šé“åˆ†åˆ«å¯åŠ¨ 1 ä¸ªåç¨‹ï¼ŒæŠŠæ•°æ®å†™å…¥åˆ°è‡ªå·±åˆ›å»ºçš„é€šé“ï¼Œå¹¶è¿”å›è¯¥é€šé“ï¼Œè¿™æ˜¯ FAN-IN","tags":["Go"],"categories":["è®¾è®¡å¼€å‘"]},{"title":"ç®€åŒ– Kubernetes åº”ç”¨éƒ¨ç½²å·¥å…· -- Helm","path":"/2018/k8s-deploy-tool-helm.html","content":"å…ˆåŒºåˆ†ä¸‹æ¦‚å¿µ Docker: é•œåƒæ˜¯æŠŠä¸€ä¸ªå•çº¯çš„ App å’Œå®ƒçš„å®‰è£…ç¯å¢ƒæ•´åˆåœ¨ä¸€èµ·ã€‚ Kubertnetes: ç®¡ç† Docker å®¹å™¨çš„ç”Ÿæˆå’Œæ¯ç­ï¼Œä¿è¯ Docker å®¹å™¨å¯¹åº” App çš„é«˜å¯ç”¨ï¼ˆç›‘æ§ã€è‡ªåŠ¨åˆ›å»ºï¼‰å’Œæ˜“ç»´æŠ¤ï¼ˆéƒ¨ç½²å’Œå¯¹å¤–æš´éœ²ã€åŠ¨æ€æ‰©å®¹ã€å¯åŠ¨åœæ­¢åˆ é™¤ç­‰ï¼‰ã€‚ Helm: æ˜¯ä¸ºäº†æ–¹ä¾¿é…ç½®å’Œéƒ¨ç½²ã€å‡çº§å’Œå›æ»šåº”ç”¨ï¼Œå°¤å…¶æ˜¯å¤šä¸ª Service ç»„åˆåˆ›å»ºçš„ä¸€ä¸ªå¤§å‹åº”ç”¨ï¼Œæ¯”å¦‚ç½‘ç«™ ä¸ºä»€ä¹ˆè¦ç”¨ï¼Ÿ é¦–å…ˆåœ¨åŸæ¥é¡¹ç›®ä¸­éƒ½æ˜¯åŸºäº yaml æ–‡ä»¶æ¥è¿›è¡Œéƒ¨ç½²å‘å¸ƒçš„ï¼Œè€Œç›®å‰é¡¹ç›®å¤§éƒ¨åˆ†å¾®æœåŠ¡åŒ–æˆ–è€…æ¨¡å—åŒ–ï¼Œä¼šåˆ†æˆå¾ˆå¤šä¸ªç»„ä»¶æ¥éƒ¨ç½²ï¼Œæ¯ä¸ªç»„ä»¶å¯èƒ½å¯¹åº”ä¸€ä¸ª deployment.yaml, ä¸€ä¸ª service.yaml, ä¸€ä¸ª Ingress.yaml è¿˜å¯èƒ½å­˜åœ¨å„ç§ä¾èµ–å…³ç³»ï¼Œè¿™æ ·ä¸€ä¸ªé¡¹ç›®å¦‚æœæœ‰ 5 ä¸ªç»„ä»¶ï¼Œå¾ˆå¯èƒ½å°±æœ‰ 15 ä¸ªä¸åŒçš„ yaml æ–‡ä»¶ï¼Œè¿™äº› yaml åˆ†æ•£å­˜æ”¾ï¼Œå¦‚æœæŸå¤©è¿›è¡Œé¡¹ç›®æ¢å¤çš„è¯ï¼Œå¾ˆéš¾çŸ¥é“éƒ¨ç½²é¡ºåºï¼Œä¾èµ–å…³ç³»ç­‰ï¼Œè€Œæ‰€æœ‰è¿™äº›åŒ…æ‹¬ åŸºäº yaml é…ç½®çš„é›†ä¸­å­˜æ”¾ åŸºäºé¡¹ç›®çš„æ‰“åŒ… ç»„ä»¶é—´çš„ä¾èµ– éƒ½å¯ä»¥é€šè¿‡ helm æ¥è¿›è¡Œè§£å†³ Helm åŸºæœ¬æ¦‚å¿µ Helm å¯ä»¥ç†è§£ä¸º Kubernetes çš„åŒ…ç®¡ç†å·¥å…·ï¼Œå¯ä»¥æ–¹ä¾¿åœ°å‘ç°ã€å…±äº«å’Œä½¿ç”¨ä¸º Kubernetes æ„å»ºçš„åº”ç”¨ï¼Œå®ƒåŒ…å«å‡ ä¸ªåŸºæœ¬æ¦‚å¿µ Chartï¼šä¸€ä¸ª Helm åŒ…ï¼Œå…¶ä¸­åŒ…å«äº†è¿è¡Œä¸€ä¸ªåº”ç”¨æ‰€éœ€è¦çš„é•œåƒã€ä¾èµ–å’Œèµ„æºå®šä¹‰ç­‰ï¼Œè¿˜å¯èƒ½åŒ…å« Kubernetes é›†ç¾¤ä¸­çš„æœåŠ¡å®šä¹‰ Release: åœ¨ Kubernetes é›†ç¾¤ä¸Šè¿è¡Œçš„ Chart çš„ä¸€ä¸ªå®ä¾‹ã€‚åœ¨åŒä¸€ä¸ªé›†ç¾¤ä¸Šï¼Œä¸€ä¸ª Chart å¯ä»¥å®‰è£…å¾ˆå¤šæ¬¡æ¯æ¬¡å®‰è£…éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ releaseã€‚ä¾‹å¦‚ä¸€ä¸ª MySQL Chartï¼Œå¦‚æœæƒ³åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œä¸¤ä¸ªæ•°æ®åº“ï¼Œå°±å¯ä»¥æŠŠè¿™ä¸ª Chart å®‰è£…ä¸¤æ¬¡ã€‚æ¯æ¬¡å®‰è£…éƒ½ä¼šç”Ÿæˆè‡ªå·±çš„ Releaseï¼Œä¼šæœ‰è‡ªå·±çš„ Release åç§° Repositoryï¼šç”¨äºå‘å¸ƒå’Œå­˜å‚¨ Chart çš„ä»“åº“ è¦ç‚¹ Helm æ˜¯ä¸€ä¸ª Chart ç®¡ç†å™¨: GitHub - kubernetes&#x2F;helm: The Kubernetes Package Manager Charts æ˜¯ä¸€ç»„é…ç½®å¥½çš„ Kubernetes èµ„æºï¼ˆå®šä¹‰ï¼‰ç»„åˆ Release æ˜¯ä¸€ç»„å·²ç»éƒ¨ç½²åˆ° Kubernetes ä¸Šçš„èµ„æºé›†åˆ Chart çš„åŸºæœ¬ç»“æ„.â”œâ”€â”€ Chart.yamlâ”œâ”€â”€ README.mdâ”œâ”€â”€ templatesâ”‚ â”œâ”€â”€ NOTES.txtâ”‚ â”œâ”€â”€ _helpers.tplâ”‚ â”œâ”€â”€ deployment.yamlâ”‚ â”œâ”€â”€ pvc.yamlâ”‚ â”œâ”€â”€ secrets.yamlâ”‚ â””â”€â”€ svc.yamlâ””â”€â”€ values.yaml ç”¨é€” åˆ›å»ºå¯é…ç½®çš„ Release å‡çº§ã€åˆ é™¤ã€æŸ¥çœ‹ç”± Helm åˆ›å»ºçš„ Release ç»„æˆ Helm Client å®¢æˆ·ç«¯ åˆ¶ä½œã€æ‹‰å–ã€æŸ¥æ‰¾å’ŒéªŒè¯ Chart å®‰è£…æœåŠ¡ç«¯ Tiller æŒ‡ç¤ºæœåŠ¡ç«¯ Tiller åšäº‹ï¼Œæ¯”å¦‚æ ¹æ® chart åˆ›å»ºä¸€ä¸ª Release helm æœåŠ¡ç«¯ tillerå®‰è£…åœ¨ Kubernetes é›†ç¾¤å†…çš„ä¸€ä¸ªåº”ç”¨ï¼Œ ç”¨æ¥æ‰§è¡Œå®¢æˆ·ç«¯å‘æ¥çš„å‘½ä»¤ï¼Œç®¡ç† Release Helmçš„å®‰è£…Helm Client å®‰è£…ä¸‹è½½ helm çš„ç›¸å…³ç‰ˆæœ¬: https://github.com/kubernetes/helm/releases å®‰è£…è¿‡ç¨‹å¦‚ä¸‹ï¼š ä¸‹è½½ Helm è§£åŒ…ï¼štar -zxvf helm-v2.11.0-linux-amd64.tgz helm äºŒè¿›åˆ¶æ–‡ä»¶ç§»åˆ° &#x2F; usr&#x2F;local&#x2F;bin ç›®å½• Helm Tiller å®‰è£… å› ä¸º Kubernetes APIServer å¼€å¯äº† RBAC è®¿é—®æ§åˆ¶ï¼Œæ‰€ä»¥éœ€è¦åˆ›å»º tiller ä½¿ç”¨çš„ service account: tiller å¹¶åˆ†é…åˆé€‚çš„è§’è‰²ç»™å®ƒã€‚è¿™é‡Œç®€å•èµ·è§ç›´æ¥åˆ†é… cluster-admin è¿™ä¸ªé›†ç¾¤å†…ç½®çš„ ClusterRole ç»™å®ƒã€‚åˆ›å»º rbac-config.yaml æ–‡ä»¶ï¼š # rbac-config.yamlapiVersion: v1kind: ServiceAccountmetadata: name: tiller namespace: kube-system---apiVersion: rbac.authorization.k8s.io/v1beta1kind: ClusterRoleBindingmetadata: name: tillerroleRef: apiGroup: rbac.authorization.k8s.io kind: ClusterRole name: cluster-adminsubjects: - kind: ServiceAccount name: tiller namespace: kube-system æ¥ä¸‹æ¥ä½¿ç”¨ helm éƒ¨ç½² tiller: helm init --service-account tiller --skip-refresh å¦‚æœç›´æ¥æ‰§è¡Œéƒ¨ç½²è¯­å¥ï¼Œè¦é“¾æ¥ https://kubernetes-charts.storage.googleapis.com å»ä¸‹è½½é•œåƒï¼›åœ¨å›½å†…è¿™ä¸ªåœ°å€ä¸èƒ½ç›´æ¥è®¿é—®ï¼Œæ‰€ä»¥éœ€è¦ä¸‹è½½å…¶ä»–é•œåƒï¼›docker pull fengzos&#x2F;tiller:v2.11.0 è¿™ä¸ªé•œåƒæ˜¯ç›´æ¥ä» gcr.io&#x2F;kubernetes-helm&#x2F;tiller:v2.11.0 ç»§æ‰¿è¿‡æ¥çš„ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚ docker pull fengzos/tillerhelm init --service-account tiller --upgrade -i fengzos/tiller:latest --skip-refresh å¸®åŠ©æ–‡æ¡£ helm help æŸ¥çœ‹ helm æ”¯æŒçš„å‘½ä»¤ helm somecommand -h æŸ¥çœ‹æŸä¸ªå‘½ä»¤çš„ä½¿ç”¨æ–¹æ³• helm version æŸ¥çœ‹å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„ç‰ˆæœ¬ï¼Œå¦‚æœåªæ˜¾ç¤ºäº†å®¢æˆ·ç«¯ç‰ˆæœ¬ï¼Œè¯´æ˜æ²¡æœ‰è¿ä¸ŠæœåŠ¡ç«¯ã€‚ å®ƒä¼šè‡ªåŠ¨å» K8s ä¸Š kube-system å‘½åç©ºé—´ä¸‹æŸ¥æ‰¾æ˜¯å¦æœ‰ Tiller çš„ Pod åœ¨è¿è¡Œï¼Œé™¤éä½ é€šè¿‡ --tiller-namespaceæ ‡ç­¾ or TILLER_NAMESPACEç¯å¢ƒå˜é‡æŒ‡å®š Helmçš„ä½¿ç”¨ä½¿ç”¨ Chart helm search æŸ¥æ‰¾å¯ç”¨çš„ Charts helm inspect æŸ¥çœ‹æŒ‡å®š Chart çš„åŸºæœ¬ä¿¡æ¯ helm install æ ¹æ®æŒ‡å®šçš„ Chart éƒ¨ç½²ä¸€ä¸ª Release åˆ° K8s helm create åˆ›å»ºè‡ªå·±çš„ Chart helm package æ‰“åŒ… Chartï¼Œä¸€èˆ¬æ˜¯ä¸€ä¸ªå‹ç¼©åŒ…æ–‡ä»¶ ç®¡ç† Release helm list åˆ—å‡ºå·²ç»éƒ¨ç½²çš„ Release helm delete [RELEASE] åˆ é™¤ä¸€ä¸ª Release. å¹¶æ²¡æœ‰ç‰©ç†åˆ é™¤ï¼Œ å‡ºäºå®¡è®¡éœ€è¦ï¼Œå†å²å¯æŸ¥ helm delete --purge [RELEASE] ç§»é™¤æ‰€æœ‰ä¸æŒ‡å®š Release ç›¸å…³çš„ K8sèµ„æºå’Œæ‰€æœ‰è¿™ä¸ª Release çš„è®°å½• helm status [RELEASE] æŸ¥çœ‹æŒ‡å®šçš„ Release ä¿¡æ¯ï¼Œå³ä½¿ä½¿ç”¨helm deleteå‘½ä»¤åˆ é™¤çš„ Release. helm upgrade å‡çº§æŸä¸ª Release helm rollback [RELEASE] [REVISION] å›æ»š Release åˆ°æŒ‡å®šå‘å¸ƒåºåˆ— helm get values [RELEASE] æŸ¥çœ‹ Release çš„é…ç½®æ–‡ä»¶å€¼ ç®¡ç† Chart Repository helm repo list helm repo add [RepoName] [RepoUrl] helm repo update","tags":["Cloud Navite","Kubernetes"],"categories":["æŠ€æœ¯åŠ æ²¹ç«™"]},{"title":"vscode + sftp å¼€å‘ç¯å¢ƒåŒæ­¥å·®å¼‚æ–‡ä»¶","path":"/2018/sftp-sync-project.html","content":"å‰è¨€radiation,è§£å†³éœ€æ±‚ï¼š æœ¬åœ°æ˜¯ win10 ç³»ç»Ÿï¼Œä»£ç éœ€è¦åœ¨ linux ä¸‹è·‘ï¼Œåˆä¸æƒ³è£…è™šæ‹Ÿæœºæˆ–åŒç³»ç»Ÿï¼› æ‰€ä»¥ï¼Œé¡¹ç›®ç”¨åˆ°è¿æ¥è¿œç¨‹æµ‹è¯•æœåŠ¡å™¨è¿›è¡Œå¼€å‘è”è°ƒï¼Œéœ€è¦å®‰è£… SFTP&#x2F;FTP çš„æ‰©å±•æ’ä»¶æ‰èƒ½åŒæ­¥ä»£ç ï¼› è¿˜æœ‰å…¶ä»–å®ç°æ–¹æ³•ï¼Œå¦‚ï¼ŒGit å·¥ä½œæµã€winscpã€rzlz ç­‰ï¼Œä½†å¤§éƒ½ä¸å¤ªçµæ´»ï¼Œç”šè‡³éº»çƒ¦ CentOS 7 é…ç½®ä½¿ç”¨ SFTP æœåŠ¡å™¨ä½•ä¸º SFTPï¼ŸSFTPï¼Œå³ SSH æ–‡ä»¶ä¼ è¾“åè®®ï¼ˆ SSH File Transfer Protocol ï¼‰ï¼Œæˆ–è€…è¯´æ˜¯å®‰å…¨æ–‡ä»¶ä¼ è¾“åè®®ï¼ˆ Secure File Transfer Protocol ï¼‰ã€‚SFTP æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ SSH å°è£…åè®®åŒ…ï¼Œé€šè¿‡å®‰å…¨è¿æ¥ä»¥ç›¸ä¼¼çš„æ–¹å¼å·¥ä½œã€‚å®ƒçš„ä¼˜åŠ¿åœ¨äºå¯ä»¥åˆ©ç”¨å®‰å…¨çš„è¿æ¥ä¼ è¾“æ–‡ä»¶ï¼Œè¿˜èƒ½æµè§ˆæœ¬åœ°å’Œè¿œç¨‹ç³»ç»Ÿä¸Šçš„æ–‡ä»¶ç³»ç»Ÿã€‚ åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼ŒSFTP éƒ½æ¯” FTP æ›´å¯å–ï¼Œå› ä¸ºå®ƒå…·æœ‰æœ€åŸºæœ¬çš„å®‰å…¨ç‰¹æ€§å’Œèƒ½åˆ©ç”¨ SSH è¿æ¥çš„èƒ½åŠ›ï¼ŒFTP æ˜¯ä¸€ç§ä¸å®‰å…¨çš„åè®®ï¼Œåªèƒ½åœ¨æœ‰é™çš„æƒ…å†µä¸‹æˆ–åœ¨æ‚¨ä¿¡ä»»çš„ç½‘ç»œä¸Šä½¿ç”¨ã€‚ å…ˆå†³æ¡ä»¶ï¼š æœåŠ¡å™¨ OpenSSH-Server ç‰ˆæœ¬æœ€ä½ 4.8p1ï¼Œå› ä¸ºé…ç½®æƒé™éœ€è¦ç‰ˆæœ¬æ·»åŠ çš„æ–°é…ç½®é¡¹ ChrootDirectory æ¥å®Œæˆã€‚ å¦‚ä½•æŸ¥çœ‹ OpenSSH ç‰ˆæœ¬ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š $ ssh -VOpenSSH_7.4p1, OpenSSL 1.0.2k-fips 26 Jan 2017 åˆ›å»ºç”¨æˆ·ä¿¡æ¯æ·»åŠ ç”¨æˆ·ç»„ï¼š $ groupadd sftp æ·»åŠ ç”¨æˆ·ï¼š $ useradd -g sftp -s /sbin/nologin -M leeifme å‚æ•°æ³¨è§£ï¼š -g # åŠ å…¥ç”¨æˆ·ç»„-s # æŒ‡å®šç”¨æˆ·ç™»å…¥åæ‰€ä½¿ç”¨çš„shell/sbin/nologin # ç”¨æˆ·ä¸å…è®¸ç™»å½•-M # ä¸è¦è‡ªåŠ¨å»ºç«‹ç”¨æˆ·çš„ç™»å…¥ç›®å½• è®¾ç½®ç”¨æˆ·å¯†ç ï¼š $ passwd leeifme åˆ›å»ºç”¨æˆ·ç›®å½•å¹¶è®¾ç½®æƒé™åˆ›å»º sftp ä¸»ç›®å½•ï¼š $ mkdir /home/danaos è®¾ç½® sftp ä¸»ç›®å½•æƒé™ï¼š $ chown root:sftp /home/danaos æ–‡ä»¶å¤¹æ‰€æœ‰è€…å¿…é¡»æ˜¯ rootï¼Œç”¨æˆ·ç»„å¯ä»¥ä¸æ˜¯ root $ chmod 755 /home/danaos æƒé™ä¸èƒ½è¶…è¿‡ 755 ä½†ä¸åŒ…æ‹¬ 755ï¼Œå¦åˆ™ä¼šå¯¼è‡´ç™»å½•æŠ¥é”™ åˆ›å»ºä¸Šä¼ ç›®å½•å¹¶è®¾ç½®æƒé™åœ¨/home/danaos/ä¸»ç›®å½•ä¸‹åˆ›å»ºarcheré¡¹ç›®æ–‡ä»¶å¤¹ï¼Œå¹¶è®¾ç½®æ‰€æœ‰è€…æ˜¯ï¼šleeifmeï¼Œç”¨æˆ·ç»„éš¶å±ï¼šsftpï¼Œè¿™æ ·æ–°å¢çš„å¸å·æ‰èƒ½æœ‰ä¸Šä¼ ç¼–è¾‘çš„æƒé™ã€‚ $ mkdir -p /home/danaos/archer$ chown leeifme:sftp /home/danaos/archer ä¿®æ”¹ sshd_config é…ç½®æ–‡ä»¶$ vim /etc/ssh/sshd_config å°†æ­¤è¡Œæ³¨é‡Šæ‰ï¼Œä¾‹å¦‚ï¼š #Subsystem sftp /usr/libexec/openssh/sftp-server åœ¨æ­¤è¡Œä¸‹é¢æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š Subsystem sftp internal-sftp # æŒ‡å®šä½¿ç”¨sftpæœåŠ¡ä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦çš„internal-sftpMatch Group sftp # åŒ¹é…sftpç»„çš„ç”¨æˆ·,è‹¥è¦åŒ¹é…å¤šä¸ªç»„,å¯ç”¨é€—å·åˆ†å¼€ChrootDirectory /home/danaos # é™åˆ¶ç”¨æˆ·çš„æ ¹ç›®å½•ForceCommand internal-sftp # åªèƒ½ç”¨äºsftpç™»å½•AllowTcpForwarding no # ç¦æ­¢ç”¨æˆ·ä½¿ç”¨ç«¯å£è½¬å‘X11Forwarding no # ç¦æ­¢ç”¨æˆ·ä½¿ç”¨ç«¯å£è½¬å‘ é‡å¯ SSH æœåŠ¡$ systemctl restart sshd æµ‹è¯•æ˜¯å¦èƒ½å¤Ÿç™»å½•ã€ä¸Šä¼ ã€ä¸‹è½½ç­‰æ“ä½œåœ¨10.28.204.61æœåŠ¡å™¨æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ç™»å½•ï¼š $ sftp leeifme@192.168.50.124leeifme@192.168.50.124&#x27;s password:Connected to leeifme@192.168.50.124.sftp&gt; lsarchersftp&gt; cd archer/sftp&gt; ä¸Šä¼  sftp&gt; put test.goUploading test.go to /archer/test.gotest.go 100% 3824 626.2KB/s 00:00sftp&gt; ä¸‹è½½ sftp&gt; get test.goFetching /archer/test.go to test.go/archer/oplog.go 100% 3824 475.1KB/s 00:00sftp&gt; åˆ é™¤ sftp&gt; rm test.goRemoving test.go æ›´å¤šå‘½ä»¤è¯·å‚é˜… sftp&gt; help vscode é…ç½® sftpä¸‹è½½ sftp æ’ä»¶ åœ¨ vscode ä¸­å¿«æ·é”® ctrl+shift+P æ‰“å¼€æŒ‡ä»¤çª—å£ï¼Œè¾“å…¥extension:installï¼Œå›è½¦ï¼Œå·¦ä¾§å³æ‰“å¼€æ‰©å±•å®‰è£…çš„ç•Œé¢ åœ¨æœç´¢æ¡†ä¸­è¾“å…¥sftpï¼Œç¬¬ä¸€ä¸ªå°±æ˜¯éœ€è¦å®‰è£…çš„ï¼Œç‚¹å®‰è£…(å¯ä»¥å‚è€ƒä¸‹è½½æ•°ï¼Œé€‰æ‹©é€‚åˆè‡ªå·±çš„æ’ä»¶ï¼ŒåŠŸèƒ½å¤§éƒ½å¤§åŒå°å¼‚) åœ¨ vscode çš„å·¥ç¨‹ä¸­é…ç½® sftp.jsonç„¶åå¿«æ·é”® ctrl+shift+P æ‰“å¼€æŒ‡ä»¤çª—å£ï¼Œè¾“å…¥sftp:configï¼Œå›è½¦ï¼Œå°±ä¼šåœ¨å½“å‰å·¥ä½œå·¥ç¨‹çš„.vscodeæ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆä¸€ä¸ªsftp.jsonæ–‡ä»¶ï¼Œä¸çŸ¥é“å“ªå¤©ä¼¼ä¹æ˜¯æ’ä»¶æ›´æ–°äº†ï¼Œé»˜è®¤çš„æ–‡ä»¶éå¸¸ç©ºï¼Œæˆ‘ä»¬åªèƒ½æ‰‹åŠ¨é…ç½®æ–‡ä»¶çš„å‚æ•°äº†ã€‚é…ç½®å¥½host, port, username, privateKeyPath, remotePath, ignoreè¿™å‚æ•°å³å¯ï¼š hostï¼šå·¥ä½œç«™çš„ IP åœ°å€ portï¼šssh çš„ç«¯å£ usernameï¼šå·¥ä½œç«™è‡ªå·±çš„ç”¨æˆ·å privateKeyPathï¼šå­˜æ”¾åœ¨æœ¬åœ°çš„å·²é…ç½®å¥½çš„ç”¨äºç™»å½•å·¥ä½œç«™çš„å¯†é’¥æ–‡ä»¶ã€‚å’Œä¸‹é¢çš„ä½¿ç”¨å¯†ç äºŒé€‰ä¸€ï¼ˆå¯ä»¥æ˜¯ openssh æ ¼å¼çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯ ppk æ ¼å¼çš„ï¼‰ passwordï¼šå·¥ä½œç«™è‡ªå·±çš„ç”¨æˆ·å¯†ç ã€‚ä½¿ç”¨å¯†é’¥å’Œä½¿ç”¨å¯†ç é€‰ç”¨ä¸€ç§å³å¯ï¼›ä½¿ç”¨å¯†ç çš„è¯å·¥ä½œç«™ä¸ç”¨é…ç½® sshï¼Œä½†ä½¿ç”¨å¯†é’¥çš„è¯å·¥ä½œç«™ä¸Šéœ€è¦é…ç½®å¥½ sshï¼Œpassword å°±å¯ä»¥å¡« null protocolï¼šåè®®ç±»å‹ï¼Œé»˜è®¤é€‰&quot;sftp&quot; remotePathï¼šå·¥ä½œç«™ä¸Šä¸æœ¬åœ°å·¥ç¨‹åŒæ­¥çš„æ–‡ä»¶å¤¹è·¯å¾„ï¼Œéœ€è¦å’Œæœ¬åœ°å·¥ç¨‹æ–‡ä»¶æ ¹ç›®å½•åŒåï¼Œä¸”åœ¨ä½¿ç”¨ sftp ä¸Šä¼ æ–‡ä»¶ä¹‹å‰è¦æ‰‹åŠ¨åœ¨å·¥ä½œç«™ä¸Šä½¿ç”¨mkdirç”Ÿæˆè¿™ä¸ªæ ¹ç›®å½•ï¼Œæ ¹ç›®å½•ä¸‹çš„å…¶ä»–å­ç›®å½•ä¼šè‡ªåŠ¨å¯¹åº”ç”Ÿæˆ ignoreï¼šæŒ‡å®šåœ¨ä½¿ç”¨sftp: sync to remoteçš„æ—¶å€™å¿½ç•¥çš„æ–‡ä»¶åŠæ–‡ä»¶å¤¹ï¼Œæ³¨æ„æ¯ä¸€è¡Œåé¢æœ‰é€—å·ï¼Œæœ€åä¸€è¡Œæ²¡æœ‰é€—å· debugï¼š é»˜è®¤æ˜¯ falseï¼Œå¦‚æœè®¾ç½®ä¸º trueï¼Œå¯ä»¥çœ‹åˆ°é€šè¿‡èœå•çš„ æŸ¥çœ‹ -&gt; è¾“å‡º æ‰“å¼€è¾“å‡ºç•Œé¢ï¼Œçœ‹åˆ°æ‰“å°ï¼Œæ€€ç–‘è‡ªå·±è¿æ¥æœ‰é—®é¢˜çš„å¯ä»¥æ‰“å¼€çœ‹çœ‹ uploadOnSave: é»˜è®¤æ˜¯ falseï¼Œå»ºè®®è®¾ç½®æˆ trueï¼Œè¿™æ ·æ¯æ¬¡ä¿®æ”¹å ctrl+s ä¿å­˜åä¼šè‡ªåŠ¨åŒæ­¥ã€‚å¦åˆ™å°±éœ€è¦æ‰‹åŠ¨åŒæ­¥ ä¸¾ä¸ªæ —å­ï¼šï¼ˆè®°ä½ä¸èƒ½æœ‰ä»»ä½•æ³¨é‡Šå†…å®¹ï¼‰ &#123; &quot;protocol&quot;: &quot;sftp&quot;, &quot;host&quot;: &quot;192.168.50.124&quot;, &quot;port&quot;: 22, &quot;username&quot;: &quot;leeifme&quot;, &quot;password&quot;: &quot;XXXXXXXXXX&quot;, &quot;remotePath&quot;: &quot;archer/&quot;, &quot;watcher&quot;: &#123; &quot;files&quot;: &quot;**/&quot;, &quot;autoUpload&quot;: true, &quot;autoDelete&quot;: true &#125;, &quot;ignore&quot;: [ &quot;**/.git/**&quot; ]&#125;","tags":["VSCode","Linux"],"categories":["æŠ˜è…¾ä¸æ­¢"]},{"title":"æš´åŠ›å­¦ä¹  k8s - é›†ç¾¤æ­å»º","path":"/2018/k8s-cluster-deploy.html","content":"å‰è¨€ å…¶å®ï¼Œæ­å»ºä¸€ä¸ª Kubernetesï¼ˆK8Sï¼‰é›†ç¾¤ä¸æ˜¯ä¸€ä»¶å®¹æ˜“çš„äº‹æƒ…ï¼Œä¸»è¦å›°éš¾æœ‰ä¸¤ä¸ªï¼š é‚£ä¸€é“åšåšçš„å¢™ å¯¹ K8S çš„çŸ¥è¯†ä¸ç†Ÿæ‚‰ åªè¦èƒ½è§£å†³ä¸Šé¢ä¸¤ä¸ªé—®é¢˜ï¼Œæ­å»ºçš„è¿‡ç¨‹å®é™…ä¸Šå°±æ²¡æœ‰é‚£ä¹ˆå¤æ‚äº†ã€‚ æœ¬ç³»åˆ—æ˜¯æˆ‘åœ¨æ­å»ºè¿‡ç¨‹ä¸­è¸©çš„æ— æ•°å‘ ã€ä»¥åŠæŸ¥é˜…ä¼—å¤šç›¸å…³é—®é¢˜è§£å†³çš„æ–‡ç« çš„ä¸€äº›è®°å½•å’Œæ€»ç»“ã€‚ é›†ç¾¤è§„åˆ’ç½‘ç»œé…ç½® èŠ‚ç‚¹ç½‘ç»œï¼š 192.168.31.0&#x2F;24 service ç½‘ç»œï¼š 10.96.0.0&#x2F;12 pod ç½‘ç»œï¼š 10.244.0.0&#x2F;16 kubeadm éƒ¨ç½²åŸºæœ¬æƒ…å†µ kubeadm é¡¹ç›®é“¾æ¥åœ°å€ masterã€nodeï¼š å®‰è£… kubeletã€ kubeadmã€ docker masterï¼š kubeadm init nodeï¼š kubeadm join apiserverã€schedulerã€Controller-managerã€etcd åœ¨ master ä¸Šä»¥ Pod è¿è¡Œ kubeproxy ä»¥ Pod æ–¹å¼è¿è¡Œåœ¨æ¯ä¸€ä¸ª node èŠ‚ç‚¹ä¸Šã€‚ ä»¥ä¸Š pod å‡ä¸ºé™æ€ Pod æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½éœ€è¦è¿è¡Œ flannelï¼ˆä¹Ÿæ˜¯ä»¥ Pod æ–¹å¼è¿è¡Œï¼‰ï¼Œä»¥æä¾› Pod ç½‘ç»œ kubeadm çš„ä»‹ç» å®‰è£…æ­¥éª¤ masterï¼Œnode éœ€è¦å®‰è£… kubeletï¼Œ kubeadmï¼Œ docker master èŠ‚ç‚¹ä¸Šè¿è¡Œ kubeadm init node èŠ‚ç‚¹ä¸Šè¿è¡Œ kubeadm join åŠ å…¥é›†ç¾¤ å‡†å¤‡ç¯å¢ƒæˆ‘çš„ç¯å¢ƒ[root@master yum.repos.d]# cat /etc/redhat-release CentOS Linux release 7.4.1708 (Core) [root@master yum.repos.d]# uname -aLinux master 3.10.0-693.el7.x86_64 #1 SMP Tue Aug 22 21:09:27 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux èŠ‚ç‚¹è§£æé€šè¿‡ /etc/hosts æ–‡ä»¶è§£æ 192.168.31.81 master.test.com master192.168.31.82 node01.test.com node01192.168.31.83 node02.test.com node02 é›†ç¾¤é€šè¿‡æ—¶é—´æœåŠ¡å™¨åšæ—¶é’ŸåŒæ­¥ï¼Œæˆ‘æ²¡åš èŠ‚ç‚¹äº’ä¿¡å¯ä»¥æŒ‰ç…§æ­¤æ–‡æ¡£é…ç½®èŠ‚ç‚¹äº’ä¿¡ï¼Œä¹Ÿæ²¡æœ‰åš é€‰æ‹©ç‰ˆæœ¬ä½¿ç”¨ kubernetes v1.11.2 å¼€å§‹éƒ¨ç½²ç¡®ä¿ iptables firewalld ç­‰æœªå¯åŠ¨, ä¸”ä¸å¼€æœºè‡ªå¯åŠ¨ï¼Œå¯å‚è€ƒæˆ‘ä¹‹å‰çš„ CentOS å®‰è£… é…ç½® yum ä»“åº“ä½¿ç”¨ aliyun æºï¼Œé“¾æ¥ docker æºä½¿ç”¨å¦‚ä¸‹å‘½ä»¤è·å–cd /etc/yum.repos.dwget https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo kubernetes æº[root@master yum.repos.d]# cat kubernetes.repo [kubernetes]name=Kubernetes Repobaseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64/gpgcheck=1gpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpgenabled=1 æŸ¥çœ‹æºæ˜¯å¦ç”Ÿæ•ˆ# yum clean all# yum repolist**********Determining fastest mirrorskubernetes 243/243repo id repo name statusbase/7/x86_64 CentOS-7 - Base - 163.com 9,911docker-ce-stable/x86_64 Docker CE Stable - x86_64 16extras/7/x86_64 CentOS-7 - Extras - 163.com 370kubernetes Kubernetes Repo 243updates/7/x86_64 CentOS-7 - Updates - 163.com 1,054repolist: 11,594 å®‰è£…è½¯ä»¶ä¸‰å°æœºå™¨éƒ½éœ€è¦å®‰è£… ä½¿ç”¨ yum install docker-ce kubelet kubeadm kubectl å®‰è£… å®‰è£…çš„è½¯ä»¶åŒ…å¦‚ä¸‹ï¼š Installing : kubectl-1.11.2-0.x86_64 1/7 Installing : cri-tools-1.11.0-0.x86_64 2/7 Installing : socat-1.7.3.2-2.el7.x86_64 3/7 Installing : kubernetes-cni-0.6.0-0.x86_64 4/7 Installing : kubelet-1.11.2-0.x86_64 5/7 Installing : kubeadm-1.11.2-0.x86_64 6/7 Installing : docker-ce-18.06.0.ce-3.el7.x86_64 7/7 å¯åŠ¨ docker æœåŠ¡ç­‰ç”±äºå›½å†…ç½‘ç»œåŸå› ï¼Œkubernetes çš„é•œåƒæ‰˜ç®¡åœ¨ google äº‘ä¸Šï¼Œæ— æ³•ç›´æ¥ä¸‹è½½ï¼Œéœ€è¦è®¾ç½® proxyåœ¨ /usr/lib/systemd/system/docker.service æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹ä¸¤è¡Œ [root@master ~]# cat /usr/lib/systemd/system/docker.service |grep PROXYEnvironment=&quot;HTTPS_PROXY=http://www.ik8s.io:10080&quot;Environment=&quot;NO_PROXY=127.0.0.0/8,192.168.31.0/24&quot; ä¹‹åï¼Œå¯åŠ¨ docker systemctl daemon-reloadsystemctl start dockersystemctl enable docker ç¡®è®¤ proc çš„è¿™ä¸¤ä¸ªå‚æ•°å¦‚ä¸‹ï¼Œå‡ä¸º 1 [root@master ~]# cat /proc/sys/net/bridge/bridge-nf-call-iptables 1[root@master ~]# cat /proc/sys/net/bridge/bridge-nf-call-ip6tables 1è§£å†³æ–¹æ³•ï¼šä¿®æ”¹ç³»ç»Ÿæ–‡ä»¶æ˜¯çš„æœºå™¨ bridge æ¨¡å¼å¼€å¯è®¾ç½®æœºå™¨å¼€æœºå¯åŠ¨çš„æ—¶å€™æ‰§è¡Œä¸‹é¢ä¸¤æ¡å‘½ä»¤ç¼–è¾‘ vim /etc/rc.d/rc.local æ·»åŠ ä¸‹é¢ä¸¤æ¡å‘½ä»¤ echo 1 &gt; /proc/sys/net/bridge/bridge-nf-call-iptables echo 1 &gt; /proc/sys/net/bridge/bridge-nf-call-ip6tablescentos7 éœ€è¦å¢åŠ æ‰§è¡Œæƒé™ï¼š chmod +xã€€/etc/rc,d/rc.localé‡å¯ç³»ç»Ÿ è®¾ç½® kubeletæŸ¥çœ‹ kubelet å®‰è£…ç”Ÿæˆäº†å“ªäº›æ–‡ä»¶ [root@master ~]# rpm -ql kubelet/etc/kubernetes/manifests # æ¸…å•ç›®å½•/etc/sysconfig/kubelet # é…ç½®æ–‡ä»¶/etc/systemd/system/kubelet.service # unit file/usr/bin/kubelet # ä¸»ç¨‹åº é»˜è®¤çš„é…ç½®æ–‡ä»¶ [root@master ~]# cat /etc/sysconfig/kubeletKUBELET_EXTRA_ARGS= ä¿®æ”¹ kubelet çš„é…ç½®æ–‡ä»¶ [root@master ~]# cat /etc/sysconfig/kubeletKUBELET_EXTRA_ARGS=&quot;--fail-swap-on=false&quot; æ­¤æ—¶è¿˜æ— æ³•æ­£å¸¸å¯åŠ¨ kubeletï¼Œå…ˆè®¾ç½® kubelet å¼€æœºè‡ªå¯åŠ¨ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š systemctl enable kubelet ã€‚ kubeadm initåœ¨ master èŠ‚ç‚¹ä¸Šæ‰§è¡Œ kubeadm init --kubernetes-version=v1.11.2 --pod-network-cidr=10.244.0.0/16 --service-cidr=10.96.0.0/12 --ignore-preflight-errors=Swap kubeadm init çš„è¾“å‡ºå¯è§äºæ­¤é“¾æ¥ æ­¤å‘½ä»¤ï¼Œä¸‹è½½äº†å¦‚ä¸‹ image [root@master ~]# docker imagesREPOSITORY TAG IMAGE ID CREATED SIZEk8s.gcr.io/kube-proxy-amd64 v1.11.2 46a3cd725628 7 days ago 97.8MBk8s.gcr.io/kube-apiserver-amd64 v1.11.2 821507941e9c 7 days ago 187MBk8s.gcr.io/kube-controller-manager-amd64 v1.11.2 38521457c799 7 days ago 155MBk8s.gcr.io/kube-scheduler-amd64 v1.11.2 37a1403e6c1a 7 days ago 56.8MBk8s.gcr.io/coredns 1.1.3 b3b94275d97c 2 months ago 45.6MBk8s.gcr.io/etcd-amd64 3.2.18 b8df3b177be2 4 months ago 219MBk8s.gcr.io/pause 3.1 da86e6ba6ca1 7 months ago 742kB ç°åœ¨ï¼Œæ­£åœ¨è¿è¡Œçš„ docker å¦‚ä¸‹ [root@master ~]# docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES1c03e043e6b7 46a3cd725628 &quot;/usr/local/bin/kube?? 3 minutes ago Up 3 minutes k8s_kube-proxy_kube-proxy-6fgjm_kube-system_f85e8660-a090-11e8-8ee7-000c29f71e04_05f166bd11566 k8s.gcr.io/pause:3.1 &quot;/pause&quot; 3 minutes ago Up 3 minutes k8s_POD_kube-proxy-6fgjm_kube-system_f85e8660-a090-11e8-8ee7-000c29f71e04_00f306f98cc52 b8df3b177be2 &quot;etcd --advertise-cl?? 3 minutes ago Up 3 minutes k8s_etcd_etcd-master_kube-system_2cc1c8a24b68ab9b46bca47e153e74c6_08f01317b9e20 37a1403e6c1a &quot;kube-scheduler --ad?? 3 minutes ago Up 3 minutes k8s_kube-scheduler_kube-scheduler-master_kube-system_a00c35e56ebd0bdfcd77d53674a5d2a1_04e6a71ab20d3 821507941e9c &quot;kube-apiserver --au?? 3 minutes ago Up 3 minutes k8s_kube-apiserver_kube-apiserver-master_kube-system_d25d40ebb427821464356bb27a38f487_069e4c5dae335 38521457c799 &quot;kube-controller-man?? 3 minutes ago Up 3 minutes k8s_kube-controller-manager_kube-controller-manager-master_kube-system_6363f7ebf727b0b95d9a9ef72516a0e5_0da5981dc546a k8s.gcr.io/pause:3.1 &quot;/pause&quot; 3 minutes ago Up 3 minutes k8s_POD_kube-controller-manager-master_kube-system_6363f7ebf727b0b95d9a9ef72516a0e5_0b7a8fdc35029 k8s.gcr.io/pause:3.1 &quot;/pause&quot; 3 minutes ago Up 3 minutes k8s_POD_kube-apiserver-master_kube-system_d25d40ebb427821464356bb27a38f487_0b09efc7ff7bd k8s.gcr.io/pause:3.1 &quot;/pause&quot; 3 minutes ago Up 3 minutes k8s_POD_kube-scheduler-master_kube-system_a00c35e56ebd0bdfcd77d53674a5d2a1_0ab11d6ffadab k8s.gcr.io/pause:3.1 &quot;/pause&quot; 3 minutes ago Up 3 minutes k8s_POD_etcd-master_kube-system_2cc1c8a24b68ab9b46bca47e153e74c6_0 node èŠ‚ç‚¹å¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤åŠ å…¥é›†ç¾¤ kubeadm join 192.168.31.81:6443 --token n84v6t.c7d83cn4mo2z8wyr --discovery-token-ca-cert-hash sha256:b946c145416fe1995e1d4d002c149e71a897acc7b106d94cee2920cb2c85ce29 åœ¨ kubeadm init çš„è¾“å‡ºä¸­ï¼Œæç¤ºæˆ‘ä»¬éœ€è¦ä»¥æ™®é€šç”¨æˆ·åšå¦‚ä¸‹æ“ä½œï¼Œæˆ‘æ­¤æ—¶ç”¨ root æ‰§è¡Œ [root@master ~]# mkdir -p $HOME/.kube[root@master ~]# cp -i /etc/kubernetes/admin.conf $HOME/.kube/config æ­¤æ—¶å¯ä»¥é€šè¿‡ kubelet get è·å–å„ç§èµ„æºä¿¡æ¯ã€‚æ¯”å¦‚ [root@master ~]# kubectl get csNAME STATUS MESSAGE ERRORscheduler Healthy ok controller-manager Healthy ok etcd-0 Healthy &#123;&quot;health&quot;: &quot;true&quot;&#125; æ­¤æ—¶çš„ç›‘å¬çŠ¶æ€ [root@master ~]# ss -tnlState Recv-Q Send-Q Local Address:Port Peer Address:Port LISTEN 0 128 127.0.0.1:2379 *:* LISTEN 0 128 127.0.0.1:10251 *:* LISTEN 0 128 127.0.0.1:2380 *:* LISTEN 0 128 127.0.0.1:10252 *:* LISTEN 0 128 *:22 *:* LISTEN 0 128 127.0.0.1:33881 *:* LISTEN 0 100 127.0.0.1:25 *:* LISTEN 0 128 192.168.18.128:10010 *:* LISTEN 0 128 127.0.0.1:10248 *:* LISTEN 0 128 127.0.0.1:10249 *:* LISTEN 0 128 :::6443 :::* LISTEN 0 128 :::10256 :::* LISTEN 0 128 :::22 :::* LISTEN 0 100 ::1:25 :::* LISTEN 0 128 :::10250 :::* æ­¤æ—¶çš„èŠ‚ç‚¹çŠ¶æ€ [root@master ~]# kubectl get nodesNAME STATUS ROLES AGE VERSIONmaster NotReady master 9m v1.11.2 çŠ¶æ€ä¸º NotReady ï¼Œ éœ€è¦éƒ¨ç½² flannelï¼Œé“¾æ¥ éƒ¨ç½² flannelåœ¨æ–‡æ¡£ä¸­ï¼Œæ‰¾åˆ°å¦‚ä¸‹å‘½ä»¤ï¼Œéƒ¨ç½² [root@master ~]# kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.ymlclusterrole.rbac.authorization.k8s.io/flannel createdclusterrolebinding.rbac.authorization.k8s.io/flannel createdserviceaccount/flannel createdconfigmap/kube-flannel-cfg createddaemonset.extensions/kube-flannel-ds-amd64 createddaemonset.extensions/kube-flannel-ds-arm64 createddaemonset.extensions/kube-flannel-ds-arm createddaemonset.extensions/kube-flannel-ds-ppc64le createddaemonset.extensions/kube-flannel-ds-s390x created æŒ‰å¦‚ä¸‹æ–¹æ³•æŸ¥çœ‹ï¼š [root@master ~]# kubectl get pods -n kube-systemNAME READY STATUS RESTARTS AGEcoredns-78fcdf6894-cv4gp 1/1 Running 0 13mcoredns-78fcdf6894-wmd25 1/1 Running 0 13metcd-master 1/1 Running 0 49skube-apiserver-master 1/1 Running 0 49skube-controller-manager-master 1/1 Running 0 48skube-flannel-ds-amd64-r42wr 1/1 Running 0 2mkube-proxy-6fgjm 1/1 Running 0 13mkube-scheduler-master 1/1 Running 0 48s[root@master ~]# docker images |grep flannelquay.io/coreos/flannel v0.10.0-amd64 f0fad859c909 6 months ago 44.6MB[root@master ~]# kubectl get nodesNAME STATUS ROLES AGE VERSIONmaster Ready master 14m v1.11.2 æ­¤æ—¶ master èŠ‚ç‚¹çŠ¶æ€å˜ä¸º Ready ã€‚ åœ¨ node èŠ‚ç‚¹ä¸Šæ‰§è¡Œ kubeadm join å‘½ä»¤ä½¿ç”¨ master èŠ‚ç‚¹æ‰§è¡Œ kubeadm init å‘½ä»¤çš„è¾“å‡ºï¼Œåœ¨ node ä¸Šæ‰§è¡Œï¼Œä½¿å…¶åŠ å…¥é›†ç¾¤ã€‚ [root@node01 ~]# kubeadm join 192.168.18.128:6443 --token n84v6t.c7d83cn4mo2z8wyr --discovery-token-ca-cert-hash sha256:b946c145416fe1995e1d4d002c149e71a897acc7b106d94cee2920cb2c85ce29 --ignore-preflight-errors=Swap[preflight] running pre-flight checks [WARNING RequiredIPVSKernelModulesAvailable]: the IPVS proxier will not be used, because the following required kernel modules are not loaded: [ip_vs ip_vs_rr ip_vs_wrr ip_vs_sh] or no builtin kernel ipvs support: map[ip_vs_sh:&#123;&#125; nf_conntrack_ipv4:&#123;&#125; ip_vs:&#123;&#125; ip_vs_rr:&#123;&#125; ip_vs_wrr:&#123;&#125;]you can solve this problem with following methods: 1. Run &#x27;modprobe -- &#x27; to load missing kernel modules;2. Provide the missing builtin kernel ipvs support [WARNING Swap]: running with swap on is not supported. Please disable swapI0815 22:02:30.751069 15460 kernel_validator.go:81] Validating kernel versionI0815 22:02:30.751145 15460 kernel_validator.go:96] Validating kernel config [WARNING SystemVerification]: docker version is greater than the most recently validated version. Docker version: 18.06.0-ce. Max validated version: 17.03[discovery] Trying to connect to API Server &quot;192.168.18.128:6443&quot;[discovery] Created cluster-info discovery client, requesting info from &quot;https://192.168.18.128:6443&quot;[discovery] Requesting info from &quot;https://192.168.18.128:6443&quot; again to validate TLS against the pinned public key[discovery] Cluster info signature and contents are valid and TLS certificate validates against pinned roots, will use API Server &quot;192.168.18.128:6443&quot;[discovery] Successfully established connection with API Server &quot;192.168.18.128:6443&quot;[kubelet] Downloading configuration for the kubelet from the &quot;kubelet-config-1.11&quot; ConfigMap in the kube-system namespace[kubelet] Writing kubelet configuration to file &quot;/var/lib/kubelet/config.yaml&quot;[kubelet] Writing kubelet environment file with flags to file &quot;/var/lib/kubelet/kubeadm-flags.env&quot;[preflight] Activating the kubelet service[tlsbootstrap] Waiting for the kubelet to perform the TLS Bootstrap...[patchnode] Uploading the CRI Socket information &quot;/var/run/dockershim.sock&quot; to the Node API object &quot;node01&quot; as an annotationThis node has joined the cluster:* Certificate signing request was sent to master and a response was received.* The Kubelet was informed of the new secure connection details.Run &#x27;kubectl get nodes&#x27; on the master to see this node join the cluster. åœ¨ä¸¤ä¸ªèŠ‚ç‚¹ä¸Šï¼Œæ‰§è¡Œå®Œæ¯•ä¸Šè¿°å‘½ä»¤åï¼Œåœ¨ master ä¸ŠæŸ¥çœ‹ [root@master ~]# kubectl get nodesNAME STATUS ROLES AGE VERSIONmaster Ready master 23m v1.11.2node01 Ready &lt;none&gt; 2m v1.11.2node02 Ready &lt;none&gt; 1m v1.11.2 éƒ¨ç½²æˆåŠŸã€‚ éƒ¨ç½²å®Œæˆåçš„è§‚å¯Ÿæ£€æŸ¥ç°åœ¨æ­£åœ¨è¿è¡Œçš„ pod [root@master ~]# kubectl get pods -n kube-system -o wideNAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODEcoredns-78fcdf6894-cv4gp 1/1 Running 0 28m 10.244.0.3 master &lt;none&gt;coredns-78fcdf6894-wmd25 1/1 Running 0 28m 10.244.0.2 master &lt;none&gt;etcd-master 1/1 Running 0 15m 192.168.18.128 master &lt;none&gt;kube-apiserver-master 1/1 Running 0 15m 192.168.18.128 master &lt;none&gt;kube-controller-manager-master 1/1 Running 0 15m 192.168.18.128 master &lt;none&gt;kube-flannel-ds-amd64-48rvq 1/1 Running 3 6m 192.168.18.130 node02 &lt;none&gt;kube-flannel-ds-amd64-7dw42 1/1 Running 3 7m 192.168.18.129 node01 &lt;none&gt;kube-flannel-ds-amd64-r42wr 1/1 Running 0 16m 192.168.18.128 master &lt;none&gt;kube-proxy-6fgjm 1/1 Running 0 28m 192.168.18.128 master &lt;none&gt;kube-proxy-6mngv 1/1 Running 0 7m 192.168.18.129 node01 &lt;none&gt;kube-proxy-9sh2n 1/1 Running 0 6m 192.168.18.130 node02 &lt;none&gt;kube-scheduler-master 1/1 Running 0 15m 192.168.18.128 master &lt;none&gt; å¯ä»¥å‘ç°ï¼š kube-apiserverï¼Œ kube-schedulerï¼Œ kube-controllerï¼Œetcd-master è¿è¡Œåœ¨ master ä¸Šï¼Œ kube-flannel åœ¨ä¸‰ä¸ªèŠ‚ç‚¹ä¸Šå‡æœ‰è¿è¡Œ kube-proxy åœ¨ä¸‰ä¸ªèŠ‚ç‚¹å‡æœ‰è¿è¡Œ","tags":["Cloud Navite","Kubernetes"],"categories":["æŠ˜è…¾ä¸æ­¢"]},{"title":"å¼€å¯äº‘åŸç”Ÿä¹‹é—¨","path":"/2018/open-cloud-native-study.html","content":"ä»€ä¹ˆæ˜¯äº‘åŸç”ŸCNCFç»„ç»‡åœ¨è®²äº‘åŸç”Ÿä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸‹ CNCF ï¼Œå³äº‘åŸç”Ÿè®¡ç®—åŸºé‡‘ä¼šï¼Œ2015å¹´ç”±è°·æ­Œç‰µå¤´æˆç«‹ï¼ŒåŸºé‡‘ä¼šæˆå‘˜ç›®å‰å·²æœ‰ä¸€ç™¾å¤šä¼ä¸šä¸æœºæ„ï¼ŒåŒ…æ‹¬äºšé©¬é€Šã€å¾®è½¯ã€‚æ€ç§‘ç­‰å·¨å¤´ã€‚ç›®å‰ CNCF æ‰€æ‰˜ç®¡çš„åº”ç”¨å·²è¾¾14ä¸ªï¼Œä¸‹å›¾ä¸ºå…¶å…¬å¸ƒçš„Cloud Native Landscapeï¼Œç»™å‡ºäº†äº‘åŸç”Ÿç”Ÿæ€çš„å‚è€ƒä½“ç³»ï¼š äº‘åŸç”Ÿ(Cloud Native)CNCF ç»™å‡ºäº†äº‘åŸç”Ÿåº”ç”¨çš„ä¸‰å¤§ç‰¹å¾ï¼š å®¹å™¨åŒ–å°è£…ï¼šä»¥å®¹å™¨ä¸ºåŸºç¡€ï¼Œæé«˜æ•´ä½“å¼€å‘æ°´å¹³ï¼Œå½¢æˆä»£ç å’Œç»„ä»¶é‡ç”¨ï¼Œç®€åŒ–äº‘åŸç”Ÿåº”ç”¨ç¨‹åºçš„ç»´æŠ¤ã€‚åœ¨å®¹å™¨ä¸­è¿è¡Œåº”ç”¨ç¨‹åºå’Œè¿›ç¨‹ï¼Œå¹¶ä½œä¸ºåº”ç”¨ç¨‹åºéƒ¨ç½²çš„ç‹¬ç«‹å•å…ƒï¼Œå®ç°é«˜æ°´å¹³èµ„æºéš”ç¦»ã€‚ åŠ¨æ€ç®¡ç†ï¼šé€šè¿‡é›†ä¸­å¼çš„ç¼–æ’è°ƒåº¦ç³»ç»Ÿæ¥åŠ¨æ€çš„ç®¡ç†å’Œè°ƒåº¦ã€‚ é¢å‘å¾®æœåŠ¡ï¼šæ˜ç¡®æœåŠ¡é—´çš„ä¾èµ–ï¼Œäº’ç›¸è§£è€¦ã€‚ äº‘åŸç”ŸåŒ…å«äº†ä¸€ç»„åº”ç”¨çš„æ¨¡å¼ï¼Œç”¨äºå¸®åŠ©ä¼ä¸šå¿«é€Ÿï¼ŒæŒç»­ï¼Œå¯é ï¼Œè§„æ¨¡åŒ–åœ°äº¤ä»˜ä¸šåŠ¡è½¯ä»¶ã€‚äº‘åŸç”Ÿç”±å¾®æœåŠ¡æ¶æ„ï¼ŒDevOps å’Œä»¥å®¹å™¨ä¸ºä»£è¡¨çš„æ•æ·åŸºç¡€æ¶æ„ç»„æˆã€‚è¿™è¾¹å¼•ç”¨ç½‘ä¸Šå…³äºäº‘åŸç”Ÿæ‰€éœ€è¦çš„èƒ½åŠ›å’Œç‰¹å¾æ€»ç»“ï¼š åº”ç”¨éƒ¨ç½²è¿è¡Œæ¨¡å¼çš„å˜è¿ å­¦ä¹ ä¸€ä¸ªæ–°äº‹ç‰©ä¹‹å‰å‘¢ï¼Œæˆ‘ä»¬åº”è¯¥å…ˆäº†è§£\tè¯¥äº‹ç‰©å‘å±•çš„å†ç¨‹å’Œè§„å¾‹ï¼ŒKubernetes çš„å‡ºç°å°±æ˜¯åº”ç”¨éƒ¨ç½²è¿è¡Œæ¨¡å¼åœ¨å¤–éƒ¨æ¡ä»¶éœ€æ±‚å˜æ›´çš„æƒ…å†µä¸‹ï¼Œæ¼”åŒ–å‡ºæ¥çš„ç»“æœ ç‰©ç†æœºæ¨¡å¼(ç‰©ç†æœº-æ“ä½œç³»ç»Ÿ-åº”ç”¨) è™šæ‹ŸåŒ–æ¨¡å¼(è™šæ‹Ÿæœº-åº”ç”¨) å®¹å™¨åŒ–æ¨¡å¼ ä»¥ Dockerä¸ºä»£è¡¨çš„å†…æ ¸å®¹å™¨æŠ€æœ¯ä¸æ˜¯æ–°æŠ€æœ¯,è€Œæ˜¯å°†å·²æœ‰æŠ€æœ¯(LXCã€ groupsã€ Union fs)è¿›è¡Œäº†æ›´å¥½çš„æ•´åˆå’ŒåŒ…è£…,å¹¶å½¢æˆäº†ä¸€ç§æ ‡å‡†é•œåƒæ ¼å¼ ä¸VMç›¸æ¯”,å®¹å™¨å…·æœ‰å¼€å‘äº¤ä»˜æµç¨‹æ“ä½œå¯¹è±¡åŒæ­¥ã€æ‰§è¡Œæ›´ä¸ºé«˜æ•ˆèµ„æºå ç”¨æ›´ä¸ºé›†çº¦ç­‰ä¼˜åŠ¿ã€‚ è®¡ç®—åŸºæœ¬å•å…ƒç”±è™šæ‹Ÿæœºå˜ä¸ºäº†å®¹å™¨,è¶Šæ¥è¶Šå¤šåº”ç”¨çš„æ„å»ºã€éƒ¨ç½²ä¸è¿è¡Œé€‰æ‹©åœ¨å®¹å™¨ä¸­è¿›è¡Œã€‚ äº‘åŸç”Ÿæ¨¡å¼ éšç€å®¹å™¨æŠ€æœ¯çš„å²€ç°ä»¥åŠåº”ç”¨æ‰€é¢ä¸´çš„å¤–éƒ¨ç¯å¢ƒçš„å˜åŒ–,äº‘åŸç”Ÿé€æ¸æˆä¸ºä¸€ç§åº”ç”¨äº‘åŒ–å¼€å‘ã€éƒ¨ç½²å’Œè¿è¡Œçš„ä¸»æµæ–¹å¼ åŸºç¡€å‰æ:åº”ç”¨çš„å®¹å™¨åŒ–å’Œå¾®æœåŠ¡åŒ–ã€‚å®¹å™¨,ä½œä¸ºåº”ç”¨éƒ¨ç½²ã€è¿è¡Œå’Œç®¡ç†çš„åŸºæœ¬å•å…ƒ æ ¸å¿ƒ:å€ŸåŠ©å®¹å™¨ç®¡ç†è‡ªåŠ¨åŒ–å¹³å°è¿›è¡ŒåŠ¨æ€ç¼–æ’å’Œèµ„æºä¼˜åŒ–åˆ©ç”¨ äº‘åŸç”Ÿåº”ç”¨çš„ä¸‰å¤§ç‰¹å¾å®¹å™¨åŒ–å°è£…æœ€è¿‘å‡ å¹´Dockerå®¹å™¨åŒ–æŠ€æœ¯å¾ˆç«ï¼Œç»å¸¸åœ¨å„ç§åœºåˆèƒ½å¤Ÿå¬åˆ°å…³äº Docker çš„åˆ†äº«ã€‚Docker è®©å¼€å‘å·¥ç¨‹å¸ˆå¯ä»¥å°†ä»–ä»¬çš„åº”ç”¨å’Œä¾èµ–å°è£…åˆ°ä¸€ä¸ªå¯ç§»æ¤çš„å®¹å™¨ä¸­ã€‚Docker èƒŒåçš„æƒ³æ³•æ˜¯åˆ›å»ºè½¯ä»¶ç¨‹åºå¯ç§»æ¤çš„è½»é‡å®¹å™¨ï¼Œè®©å…¶å¯ä»¥åœ¨ä»»ä½•å®‰è£…äº† Docker çš„æœºå™¨ä¸Šè¿è¡Œï¼Œè€Œä¸ç”¨å…³å¿ƒåº•å±‚æ“ä½œç³»ç»Ÿã€‚ Docker å¯ä»¥è§£å†³è™šæ‹Ÿæœºèƒ½å¤Ÿè§£å†³çš„é—®é¢˜ï¼ŒåŒæ—¶ä¹Ÿèƒ½å¤Ÿè§£å†³è™šæ‹Ÿæœºç”±äºèµ„æºè¦æ±‚è¿‡é«˜è€Œæ— æ³•è§£å†³çš„é—®é¢˜ã€‚å…¶ä¼˜åŠ¿åŒ…1æ‹¬ï¼š éš”ç¦»åº”ç”¨ä¾èµ– åˆ›å»ºåº”ç”¨é•œåƒå¹¶è¿›è¡Œå¤åˆ¶ åˆ›å»ºå®¹æ˜“åˆ†å‘çš„å³å¯å³ç”¨çš„åº”ç”¨ å…è®¸å®ä¾‹ç®€å•ã€å¿«é€Ÿåœ°æ‰©å±• æµ‹è¯•åº”ç”¨å¹¶éšåé”€æ¯å®ƒä»¬ è‡ªåŠ¨åŒ–è¿ç»´å·¥å…·å¯ä»¥é™ä½ç¯å¢ƒæ­å»ºçš„å¤æ‚åº¦ï¼Œä½†ä»ç„¶ä¸èƒ½ä»æ ¹æœ¬ä¸Šè§£å†³ç¯å¢ƒçš„é—®é¢˜ã€‚åœ¨çœ‹ä¼¼ç¨³å®šè€Œæˆç†Ÿçš„åœºæ™¯ä¸‹ï¼Œä½¿ç”¨ Docker çš„å¥½å¤„è¶Šæ¥è¶Šå¤šã€‚ æœåŠ¡ç¼–æ’ åŠ¨æ€ç®¡ç†Jimmy Song å¯¹äº‘åŸç”Ÿæ¶æ„ä¸­è¿ç”¨æœåŠ¡ç¼–æ’çš„æ€»ç»“æ˜¯ï¼š Kubernetesâ€”â€”è®©å®¹å™¨åº”ç”¨è¿›å…¥å¤§è§„æ¨¡å·¥ä¸šç”Ÿäº§ ç¼–æ’è°ƒåº¦çš„å¼€æºç»„ä»¶è¿˜æœ‰ï¼šKubernetesã€Mesos å’Œ Docker Swarm; ä»–ä»¬ä¸ºäº‘åŸç”Ÿåº”ç”¨æä¾›çš„å¼ºæœ‰åŠ›çš„ç¼–æ’å’Œè°ƒåº¦èƒ½åŠ›ï¼Œå®ƒä»¬æ˜¯äº‘å¹³å°ä¸Šçš„åˆ†å¸ƒå¼æ“ä½œç³»ç»Ÿã€‚åœ¨å•æœºä¸Šè¿è¡Œå®¹å™¨ï¼Œæ— æ³•å‘æŒ¥å®ƒçš„æœ€å¤§æ•ˆèƒ½ï¼Œåªæœ‰å½¢æˆé›†ç¾¤ï¼Œæ‰èƒ½æœ€å¤§ç¨‹åº¦å‘æŒ¥å®¹å™¨çš„è‰¯å¥½éš”ç¦»ã€èµ„æºåˆ†é…ä¸ç¼–æ’ç®¡ç†çš„ä¼˜åŠ¿ å¾®æœåŠ¡æ¶æ„è¿‘å‡ å¹´å¾®æœåŠ¡æ¶æ„ï¼ˆMicro-Serviceï¼ŒArchetictureï¼‰æ˜¯æœ€æµè¡Œçš„æ¶æ„é£æ ¼ï¼Œæ—¨åœ¨é€šè¿‡å°†åŠŸèƒ½æ¨¡å—åˆ†è§£åˆ°å„ä¸ªç‹¬ç«‹çš„å­ç³»ç»Ÿä¸­ä»¥å®ç°è§£è€¦ï¼Œå®ƒå¹¶æ²¡æœ‰ä¸€æˆä¸å˜çš„è§„å®šï¼Œè€Œæ˜¯éœ€è¦æ ¹æ®ä¸šåŠ¡æ¥åšè®¾è®¡ã€‚å¾®æœåŠ¡æ¶æ„æ˜¯å¯¹SOAçš„ä¼ æ‰¿ï¼Œæ˜¯SOAçš„å…·ä½“å®è·µæ–¹æ³•ã€‚å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œæ¯ä¸ªå¾®æœåŠ¡æ¨¡å—åªæ˜¯å¯¹ç®€å•ã€ç‹¬ç«‹ã€æ˜ç¡®çš„ä»»åŠ¡è¿›è¡Œå¤„ç†ï¼Œé€šè¿‡REST APIè¿”å›å¤„ç†ç»“æœç»™å¤–éƒ¨ã€‚åœ¨å¾®æœåŠ¡æ¨å¹¿å®è·µè§’åº¦æ¥çœ‹ï¼Œå¾®æœåŠ¡å°†æ•´ä¸ªç³»ç»Ÿè¿›è¡Œæ‹†åˆ†ï¼Œæ‹†åˆ†æˆæ›´å°çš„ç²’åº¦ï¼Œä¿æŒè¿™äº›æœåŠ¡ç‹¬ç«‹è¿è¡Œï¼Œåº”ç”¨å®¹å™¨åŒ–æŠ€æœ¯å°†å¾®æœåŠ¡ç‹¬ç«‹è¿è¡Œåœ¨å®¹å™¨ä¸­ã€‚è¿‡å»è®¾è®¡æ¶æ„æ—¶ï¼Œæ˜¯åœ¨å†…å­˜ä¸­ä»¥å‚æ•°æˆ–å¯¹è±¡çš„æ–¹å¼å®ç°ç²’åº¦ç»†åŒ–ã€‚å¾®æœåŠ¡ä½¿ç”¨å„ä¸ªå­æœåŠ¡æ§åˆ¶æ¨¡å—çš„æ€æƒ³ä»£æ›¿æ€»çº¿ã€‚ä¸åŒçš„ä¸šåŠ¡è¦æ±‚ï¼ŒæœåŠ¡æ§åˆ¶æ¨¡å—è‡³å°‘åŒ…å«æœåŠ¡çš„å‘å¸ƒã€æ³¨å†Œã€è·¯ç”±ã€ä»£ç†åŠŸèƒ½ã€‚ å®¹å™¨åŒ–çš„å‡ºç°ï¼Œä¸€å®šç¨‹åº¦ä¸Šå¸¦åŠ¨äº†å¾®æœåŠ¡æ¶æ„ã€‚æ¶æ„æ¼”åŒ–ä»å•ä½“å¼åº”ç”¨åˆ°åˆ†å¸ƒå¼ï¼Œå†ä»åˆ†å¸ƒå¼æ¶æ„åˆ°äº‘åŸç”Ÿæ¶æ„ï¼Œå¾®æœåŠ¡åœ¨å…¶ä¸­æœ‰ç€ä¸å¯æˆ–ç¼ºçš„è§’è‰²ã€‚å¾®æœåŠ¡å¸¦ç»™æˆ‘ä»¬å¾ˆå¤šå¼€å‘å’Œéƒ¨ç½²ä¸Šçš„çµæ´»æ€§å’ŒæŠ€æœ¯å¤šæ ·æ€§ï¼Œä½†æ˜¯ä¹Ÿå¢åŠ äº†æœåŠ¡è°ƒç”¨çš„å¼€é”€ã€åˆ†å¸ƒå¼ç³»äº‹åŠ¡ã€è°ƒè¯•ä¸æœåŠ¡æ²»ç†æ–¹é¢çš„éš¾é¢˜ã€‚ æ€»ç»“æŠ€æœ¯æ¶æ„çš„æ¼”å˜éå¸¸å¿«ï¼Œå„ç§æ–°çš„åè¯ä¹Ÿæ˜¯å±‚å‡ºä¸ç©·ã€‚æœ¬æ–‡ä¸»è¦æ˜¯å¯¹äº‘åŸç”Ÿçš„æ¦‚è¿°ã€‚äº‘åŸç”Ÿåº”ç”¨çš„ä¸‰å¤§ç‰¹å¾ï¼šå®¹å™¨åŒ–å°è£…ã€åŠ¨æ€ç®¡ç†ã€é¢å‘å¾®æœåŠ¡ã€‚é¦–å…ˆç”±CNCFç»„ç»‡ä»‹ç»äº†äº‘åŸç”Ÿçš„æ¦‚å¿µï¼Œç„¶ååˆ†åˆ«å¯¹è¿™ä¸‰ä¸ªç‰¹å¾è¿›è¡Œè¯¦è¿°ã€‚äº‘åŸç”Ÿæ¶æ„æ˜¯å½“ä¸‹å¾ˆç«çš„è®¨è®ºè¯é¢˜ï¼Œæ˜¯ä¸åŒæ€æƒ³çš„é›†åˆï¼Œé›†ç›®å‰å„ç§çƒ­é—¨æŠ€æœ¯ä¹‹å¤§æˆ","tags":["Docker","Cloud Navite","Kubernetes"],"categories":["è®¾è®¡å¼€å‘"]},{"title":"ä¼˜åŒ–ç¡è§‰çš„æ²™å‘","path":"/2018/optimization-blog-theme.html","content":"åšå®¢å¤ªä¹…æ²¡åŠ¨äº†ï¼Œåˆšå¥½æ²¡äº‹åšçš„æ—¶å€™ï¼Œå°±ç‰¹åˆ«æ”¹åšå®¢ä¸»é¢˜ï¼Œæ„Ÿè§‰åƒæ˜¯å¼ºè¿«ç—‡ï¼Œå¾—æ”¹~ ç©åšå®¢ä¹…äº†ï¼Œå°±åƒè°ˆæ‹çˆ±ï¼Œåˆšå¼€å§‹å¾ˆç¾å¥½ï¼Œä¹…è€Œä¹…ä¹‹ï¼Œé—®é¢˜å°±å†’å‡ºæ¥ï¼Œæ€»æƒ³è®©å¥¹å˜çš„æ›´å¥½ï¼Œ å…¶å®è¿™äº›éƒ½æ˜¯æ¬¡è¦çš„ï¼Œæˆ‘ä¹ŸçŸ¥é“æ›´åº”è¯¥ä¸“æ³¨æ–‡ç« çš„å†…å®¹ï¼Œå“â€¦â€¦ é›†æˆGitmentGitment æ˜¯ä½œè€…å®ç°çš„ä¸€æ¬¾åŸºäº GitHub Issues çš„è¯„è®ºç³»ç»Ÿã€‚æ”¯æŒåœ¨å‰ç«¯ç›´æ¥å¼•å…¥ï¼Œä¸éœ€è¦ä»»ä½•åç«¯ä»£ç ã€‚å¯ä»¥åœ¨é¡µé¢è¿›è¡Œç™»å½•ã€æŸ¥çœ‹ã€è¯„è®ºã€ç‚¹èµç­‰æ“ä½œï¼ŒåŒæ—¶æœ‰å®Œæ•´çš„ Markdown &#x2F; GFM å’Œä»£ç é«˜äº®æ”¯æŒã€‚å°¤ä¸ºé€‚åˆå„ç§åŸºäº GitHub&#x2F;Coding Pages çš„é™æ€åšå®¢æˆ–é¡¹ç›®é¡µé¢ é¡¹ç›®åœ°å€ ç¤ºä¾‹é¡µé¢ å½“ç„¶ï¼Œäººå®¶ä½œè€…ä¹Ÿè¯´äº†ï¼Œç€è¿™ä¸ªé¡¹ç›®çš„æ—¶å€™è€ƒè™‘è¿‡åˆ°åº•æœ‰æ²¡æœ‰æ»¥ç”¨ GitHub ï¼Œä¸ºæ­¤è¿˜ç‰¹åœ° Email äº†å®˜æ–¹ï¼ŒGitHub ç»™å‡ºçš„å›å¤æ˜¯ï¼š Weâ€™re pleased to see you making use of the tools and resources available on GitHub. æ‰€ä»¥å•Šï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œä¹Ÿè¦æªå°½èŒå®ˆï¼Œç»´æŠ¤ä¸€ä¸ªå¥½çš„å¼€æºç¯å¢ƒï¼Œå–„ç”¨ GitHub å¥½äº†ï¼Œè¯´å¤šäº†ï¼Œä¸‹é¢å¼€å§‹ï¼š æ³¨å†Œ OAuth Applicationç‚¹å‡»æ­¤å¤„ æ¥æ³¨å†Œä¸€ä¸ªæ–°çš„ OAuth Applicationï¼ŒæˆåŠŸä¹‹åå°±ä¼šæ‹¿åˆ° Client ID å’Œ Client Secret ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶############################################################################### Plugins################################################################################ Gitmentgitment: enable: true owner: your_id repo: your_repo client_id: your_client_id client_secret: your_client_secret ä¸º Gitment æ·»åŠ  layout å¸ƒå±€è¿™é‡Œä»¥æˆ‘çš„ä¸»é¢˜ cactus ä¸ºä¾‹ï¼Œåœ¨ layout/_partial/comments.ejs ä¸‹åˆ—ä»£æ·»åŠ ç ï¼š &lt;% if(is_post() || page.comments) &#123; %&gt;&lt;div id=&quot;gitment_title&quot; class=&quot;gitment_title&quot;&gt;&lt;/div&gt;&lt;div id=&quot;container&quot; style=&quot;display:none&quot;&gt;&lt;/div&gt;&lt;script src=&quot;https://imsun.github.io/gitment/dist/gitment.browser.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;https://code.jquery.com/jquery-3.3.1.min.js&quot;&gt;&lt;/script&gt;&lt;script&gt; const myTheme = &#123; render(state, instance) &#123; const container = document.createElement(&#x27;div&#x27;); container.lang = &quot;en-US&quot;; container.className = &#x27;gitment-container gitment-root-container&#x27;; container.appendChild(instance.renderHeader(state, instance)); container.appendChild(instance.renderEditor(state, instance)); container.appendChild(instance.renderComments(state, instance)); container.appendChild(instance.renderFooter(state, instance)); return container; &#125; &#125; function showGitment() &#123; $(&quot;#gitment_title&quot;).attr(&quot;style&quot;, &quot;display:none&quot;); $(&quot;#container&quot;).attr(&quot;style&quot;, &quot;&quot;).addClass(&quot;gitment_container&quot;); var gitment = new Gitment(&#123; id: decodeURI(window.location.pathname), theme: myTheme, owner: &quot;&lt;%=theme.gitment.owner%&gt;&quot;, repo: &quot;&lt;%=theme.gitment.repo%&gt;&quot;, oauth: &#123; client_id: &quot;&lt;%=theme.gitment.client_id%&gt;&quot;, client_secret: &quot;&lt;%=theme.gitment.client_secret%&gt;&quot; &#125; &#125;); gitment.render(&#x27;container&#x27;); &#125; showGitment();&lt;/script&gt;&lt;% &#125; %&gt; ä¸º Gitment æ·»åŠ æ ·å¼_gitment.styl è¿™æ˜¯æˆ‘è‡ªå®šä¹‰çš„ Gitment çš„æ ·å¼æ–‡ä»¶ï¼Œæ¯”è¾ƒå¥‘åˆæˆ‘çš„ä¸»é¢˜ cactus ï¼Œå¯ä»¥è‡ªè¡Œä¿®æ”¹ï¼›å°†æ ·å¼æ–‡ä»¶æ‹·è´åˆ° source/css/ ç›®å½•ä¸‹ å¼•å…¥ Gitment æ ·å¼ åœ¨ source/css/style.styl æ–‡ä»¶ä¸­ï¼Œæ·»åŠ ï¼š @import &quot;_gitment.styl&quot; okï¼Œæ›´æ–°åšå®¢ï¼Œå°±å¯ä»¥çœ‹åˆ°è¯„è®ºäº† ä¸»é¢˜é¦–é¡µæ·»åŠ  ä¸€è¨€ ä¸€è¨€ï¼šéšæœºä¸€å¥è¯å‰¯æ ‡é¢˜ï¼Œ å¯ä»¥æ˜¯ä¸€æœ¬ä¹¦ï¼Œä¸€éƒ¨ç”µå½±ï¼Œä¸€å¥æ­Œè¯ï¼Œ å¯ä»¥æ˜¯ä¸­æ–‡ï¼Œè‹±æ–‡ï¼Œæ—¥è¯­ï¼Œ æ€»ä¹‹æ˜¯ä¸€å¥è¯ æ„Ÿè°¢ä½œè€…ï¼šisecretï¼Œæ˜¯ä»ä»–ä»–åˆ¶ä½œçš„ Hexo ä¸»é¢˜ Hola è·å–çš„çµæ„Ÿ ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶############################################################################### Plugins################################################################################ ä¸€è¨€hitokoto: enabled ä¸ºä¸€è¨€æ·»åŠ  layout å¸ƒå±€åœ¨ layout/index.styl æ–‡ä»¶ä¸­çš„ &lt;section id=&quot;about&quot;&gt; å†…æ·»åŠ ï¼š &lt;% if (theme.hitokoto == &#x27;enabled&#x27;) &#123; %&gt; &lt;p&gt; &lt;script&gt; fetch(&#x27;https://api.hitokoto.cn&#x27;) .then(function (res)&#123; return res.json(); &#125;) .then(function (data) &#123; var hitokoto = document.getElementById(&#x27;hitokoto&#x27;); hitokoto.innerText = data.hitokoto + &#x27; â€”â€”&#x27; + &#x27;ã€&#x27; + data.from + &#x27;ã€&#x27;; &#125;) .catch(function (err) &#123; console.error(err); &#125;); &lt;/script&gt; &lt;a id=&quot;hitokoto&quot;&gt;&lt;/a&gt; &lt;/p&gt; &lt;% &#125; %&gt; æ¼”ç¤ºåœ°å€ gulp æ–‡ä»¶å‹ç¼©å®‰è£… npm ä¾èµ–ç»„ä»¶# åœ¨ç«™ç‚¹çš„æ ¹ç›®å½•ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤npm install gulp -gnpm install gulp-minify-css gulp-uglify gulp-htmlmin gulp-htmlclean gulp --save# æ¨¡å—ä½œç”¨gulp-htmlclean // æ¸…ç†htmlgulp-htmlmin // å‹ç¼©htmlgulp-minify-css // å‹ç¼©cssgulp-uglify // æ··æ·†jsgulp-imagemin // å‹ç¼©å›¾ç‰‡ æ–°å»º gulp é…ç½®/* åœ¨ç«™ç‚¹æ ¹ç›®å½•æ·»åŠ  gulpfile.js æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š */var gulp = require(&#x27;gulp&#x27;);var minifycss = require(&#x27;gulp-minify-css&#x27;);var uglify = require(&#x27;gulp-uglify&#x27;);var htmlmin = require(&#x27;gulp-htmlmin&#x27;);var htmlclean = require(&#x27;gulp-htmlclean&#x27;);// å‹ç¼© public ç›®å½• cssgulp.task(&#x27;minify-css&#x27;, function() &#123; return gulp.src(&#x27;./public/**/*.css&#x27;) .pipe(minifycss()) .pipe(gulp.dest(&#x27;./public&#x27;));&#125;);// å‹ç¼© public ç›®å½• htmlgulp.task(&#x27;minify-html&#x27;, function() &#123; return gulp.src(&#x27;./public/**/*.html&#x27;) .pipe(htmlclean()) .pipe(htmlmin(&#123; removeComments: true, minifyJS: true, minifyCSS: true, minifyURLs: true, &#125;)) .pipe(gulp.dest(&#x27;./public&#x27;))&#125;);// å‹ç¼© public/js ç›®å½• jsgulp.task(&#x27;minify-js&#x27;, function() &#123; return gulp.src(&#x27;./public/**/*.js&#x27;) .pipe(uglify()) .pipe(gulp.dest(&#x27;./public&#x27;));&#125;);// æ‰§è¡Œ gulp å‘½ä»¤æ—¶æ‰§è¡Œçš„ä»»åŠ¡gulp.task(&#x27;default&#x27;, [ &#x27;minify-html&#x27;,&#x27;minify-css&#x27;,&#x27;minify-js&#x27;]); éƒ¨ç½²å‘½ä»¤åœ¨ç«™ç‚¹æ ¹ç›®å½•æ‰§è¡Œ gulp å‘½ä»¤ï¼Œå°±èƒ½å‹ç¼© public æ–‡ä»¶å¤¹é‡Œé¢çš„æ–‡ä»¶äº† hexo g &amp;&amp; gulp;hexo d; åç»­æœ‰å…¶ä»–ä¼˜åŒ–ï¼Œä¼šæŒç»­æ›´æ–°çš„â€¦â€¦","tags":["Hexo"],"categories":["æŠ˜è…¾ä¸æ­¢"]},{"title":"ä½ å’Œå¤§ä½¬ä¹‹é—´å°±å·®ä¸€ä¸ª vim","path":"/2018/vim-common-hotkey.html","content":"è¿›å…¥ vim å‘½ä»¤ æè¿° vim filename æ‰“å¼€æˆ–æ–°å»ºæ–‡ä»¶, å¹¶å°†å…‰æ ‡ç½®äºç¬¬ä¸€è¡Œé¦– vim +n filename æ‰“å¼€æ–‡ä»¶ï¼Œå¹¶å°†å…‰æ ‡ç½®äºç¬¬ n è¡Œé¦– vim + filename æ‰“å¼€æ–‡ä»¶ï¼Œå¹¶å°†å…‰æ ‡ç½®äºæœ€åä¸€è¡Œé¦– vim +&#x2F;pattern filename æ‰“å¼€æ–‡ä»¶ï¼Œå¹¶å°†å…‰æ ‡ç½®äºç¬¬ä¸€ä¸ªä¸ pattern åŒ¹é…çš„ä¸²å¤„ vim -r filename åœ¨ä¸Šæ¬¡æ­£ç”¨ vim ç¼–è¾‘æ—¶å‘ç”Ÿç³»ç»Ÿå´©æºƒï¼Œæ¢å¤ filename vim filenameâ€¦.filename æ‰“å¼€å¤šä¸ªæ–‡ä»¶ï¼Œä¾æ¬¡ç¼–è¾‘ vim é…ç½® å‘½ä»¤ æè¿° :set number &#x2F; set nonumber æ˜¾ç¤º &#x2F; ä¸æ˜¾ç¤ºè¡Œå· :set ruler &#x2F;set noruler æ˜¾ç¤º &#x2F; ä¸æ˜¾ç¤ºæ ‡å°º :set hlsearch é«˜äº®æ˜¾ç¤ºæŸ¥æ‰¾åˆ°çš„å•è¯ :set nohlsearch å…³é—­é«˜äº®æ˜¾ç¤º :syntax on è¯­æ³•é«˜äº® :set nu æ˜¾ç¤ºè¡Œå· :set tabstop&#x3D;8 è®¾ç½® tab å¤§å°, 8 ä¸ºæœ€å¸¸ç”¨æœ€æ™®éçš„è®¾ç½® :set softtabstop&#x3D;8 4:4 ä¸ªç©ºæ ¼, 8: æ­£å¸¸çš„åˆ¶è¡¨ç¬¦, 12: ä¸€ä¸ªåˆ¶è¡¨ç¬¦ 4 ä¸ªç©ºæ ¼, 16: ä¸¤ä¸ªåˆ¶è¡¨ç¬¦ :set autoindent è‡ªåŠ¨ç¼©è¿› :set cindent C è¯­è¨€æ ¼å¼é‡Œé¢çš„è‡ªåŠ¨ç¼©è¿› ç§»åŠ¨å…‰æ ‡ å‘½ä»¤ æè¿° k nk ä¸Š å‘ä¸Šç§»åŠ¨ n è¡Œ j nj ä¸‹ å‘ä¸‹ç§»åŠ¨ n è¡Œ h nh å·¦ å‘å·¦ç§»åŠ¨ n è¡Œ l nl å³ å‘å³ç§»åŠ¨ n è¡Œ Space å…‰æ ‡å³ç§»ä¸€ä¸ªå­—ç¬¦ Backspace å…‰æ ‡å·¦ç§»ä¸€ä¸ªå­—ç¬¦ Enter å…‰æ ‡ä¸‹ç§»ä¸€è¡Œ w&#x2F;W å…‰æ ‡å³ç§»ä¸€ä¸ªå­—è‡³å­—é¦– b&#x2F;B å…‰æ ‡å·¦ç§»ä¸€ä¸ªå­—è‡³å­—é¦– e æˆ– E å…‰æ ‡å³ç§»ä¸€ä¸ªå­—è‡³å­—å°¾ ) å…‰æ ‡ç§»è‡³å¥å°¾ ( å…‰æ ‡ç§»è‡³å¥é¦– } å…‰æ ‡ç§»è‡³æ®µè½å¼€å¤´ { å…‰æ ‡ç§»è‡³æ®µè½ç»“å°¾ n$ å…‰æ ‡ç§»è‡³ç¬¬ n è¡Œå°¾ H å…‰æ ‡ç§»è‡³å±å¹•é¡¶è¡Œ M å…‰æ ‡ç§»è‡³å±å¹•ä¸­é—´è¡Œ L å…‰æ ‡ç§»è‡³å±å¹•æœ€åè¡Œ 0 ï¼ˆæ³¨æ„æ˜¯æ•°å­—é›¶ï¼‰å…‰æ ‡ç§»è‡³å½“å‰è¡Œé¦– ^ ç§»åŠ¨å…‰æ ‡åˆ°è¡Œé¦–ç¬¬ä¸€ä¸ªéç©ºå­—ç¬¦ä¸Šå» $ å…‰æ ‡ç§»è‡³å½“å‰è¡Œå°¾ gg ç§»åˆ°ç¬¬ä¸€è¡Œ G ç§»åˆ°æœ€åä¸€è¡Œ f ç§»åŠ¨å…‰æ ‡åˆ°å½“å‰è¡Œçš„å­—ç¬¦ a ä¸Š F ç›¸å % ç§»åŠ¨åˆ°ä¸åˆ¶åŒ¹é…çš„æ‹¬å·ä¸Šå»ï¼ˆï¼‰ï¼Œ{}ï¼Œ[]ï¼Œ&lt;&gt; ç­‰ nG ç§»åŠ¨åˆ°ç¬¬ n è¡Œä¸Š G åˆ°æœ€åä¸€è¡Œ å±å¹•æ»šåŠ¨ å‘½ä»¤ æè¿° Ctrl+u å‘æ–‡ä»¶é¦–ç¿»åŠå± Ctrl+d å‘æ–‡ä»¶å°¾ç¿»åŠå± Ctrl+f å‘æ–‡ä»¶å°¾ç¿»ä¸€å± Ctrlï¼‹b å‘æ–‡ä»¶é¦–ç¿»ä¸€å± nz å°†ç¬¬ n è¡Œæ»šè‡³å±å¹•é¡¶éƒ¨ï¼Œä¸æŒ‡å®š n æ—¶å°†å½“å‰è¡Œæ»šè‡³å±å¹•é¡¶éƒ¨ æ’å…¥æ–‡æœ¬ç±» å‘½ä»¤ æè¿° i åœ¨å…‰æ ‡å‰ I åœ¨å½“å‰è¡Œé¦– a å…‰æ ‡å A åœ¨å½“å‰è¡Œå°¾ o åœ¨å½“å‰è¡Œä¹‹ä¸‹æ–°å¼€ä¸€è¡Œ O åœ¨å½“å‰è¡Œä¹‹ä¸Šæ–°å¼€ä¸€è¡Œ r æ›¿æ¢å½“å‰å­—ç¬¦ R æ›¿æ¢å½“å‰å­—ç¬¦åŠå…¶åçš„å­—ç¬¦ï¼Œç›´è‡³æŒ‰ ESC é”® s ä»å½“å‰å…‰æ ‡ä½ç½®å¤„å¼€å§‹ï¼Œä»¥è¾“å…¥çš„æ–‡æœ¬æ›¿ä»£æŒ‡å®šæ•°ç›®çš„å­—ç¬¦ S åˆ é™¤æŒ‡å®šæ•°ç›®çš„è¡Œï¼Œå¹¶ä»¥æ‰€è¾“å…¥æ–‡æœ¬ä»£æ›¿ä¹‹ ncw&#x2F;nCW ä¿®æ”¹æŒ‡å®šæ•°ç›®çš„å­— nCC ä¿®æ”¹æŒ‡å®šæ•°ç›®çš„è¡Œ åˆ é™¤å‘½ä»¤ å‘½ä»¤ æè¿° x&#x2F;X åˆ é™¤ä¸€ä¸ªå­—ç¬¦ï¼Œx åˆ é™¤å…‰æ ‡åçš„ï¼Œè€Œ X åˆ é™¤å…‰æ ‡å‰çš„ dw åˆ é™¤ä¸€ä¸ªå•è¯ (åˆ é™¤å…‰æ ‡ä½ç½®åˆ°ä¸‹ä¸€ä¸ªå•è¯å¼€å§‹çš„ä½ç½®) dnw åˆ é™¤ n ä¸ªå•è¯ dne ä¹Ÿå¯ï¼Œåªæ˜¯åˆ é™¤åˆ°å•è¯å°¾ do åˆ è‡³è¡Œé¦– d$ åˆ è‡³è¡Œå°¾ dd åˆ é™¤ä¸€è¡Œ ndd åˆ é™¤å½“å‰è¡ŒåŠå…¶å n-1 è¡Œ dnl å‘å³åˆ é™¤ n ä¸ªå­—æ¯ dnh å‘å·¦åˆ é™¤ n ä¸ªå­—æ¯ dnj å‘ä¸‹åˆ é™¤ n è¡Œ, å½“å‰è¡Œ + å…¶ä¸Š n è¡Œ dnk å‘ä¸Šåˆ é™¤ n è¡Œ, å½“æœŸè¡Œ + å…¶ä¸‹ n è¡Œ cnw[word] å°† n ä¸ª word æ”¹å˜ä¸º word C$ æ”¹å˜åˆ°è¡Œå°¾ cc æ”¹å˜æ•´è¡Œ shift+j åˆ é™¤è¡Œå°¾çš„æ¢è¡Œç¬¦ï¼Œä¸‹ä¸€è¡Œæ¥ä¸Šæ¥äº† å¤åˆ¶ç²˜è´´ å‘½ä»¤ æè¿° p ç²˜è´´ç”¨ x æˆ– d åˆ é™¤çš„æ–‡æœ¬ ynw å¤åˆ¶ n ä¸ªå•è¯ yy å¤åˆ¶ä¸€è¡Œ ynl å¤åˆ¶ n ä¸ªå­—ç¬¦ y$ å¤åˆ¶å½“å‰å…‰æ ‡è‡³è¡Œå°¾å¤„ nyy æ‹·è´ n è¡Œ æ’¤é”€ å‘½ä»¤ æè¿° u æ’¤é”€å‰ä¸€æ¬¡çš„æ“ä½œ shif+u(U) æ’¤é”€å¯¹è¯¥è¡Œçš„æ‰€æœ‰æ“ä½œ æœç´¢åŠæ›¿æ¢ å‘½ä»¤ æè¿° &#x2F;pattern ä»å…‰æ ‡å¼€å§‹å¤„å‘æ–‡ä»¶å°¾æœç´¢ pattern ?pattern ä»å…‰æ ‡å¼€å§‹å¤„å‘æ–‡ä»¶é¦–æœç´¢ pattern n åœ¨åŒä¸€æ–¹å‘é‡å¤ä¸Šä¸€æ¬¡æœç´¢å‘½ä»¤ N åœ¨åæ–¹å‘ä¸Šé‡å¤ä¸Šä¸€æ¬¡æœç´¢å‘½ä»¤ cw newword æ›¿æ¢ä¸º newword n ç»§ç»­æŸ¥æ‰¾ . æ‰§è¡Œæ›¿æ¢ :s&#x2F;p1&#x2F;p2&#x2F;g å°†å½“å‰è¡Œä¸­æ‰€æœ‰ p1 å‡ç”¨ p2 æ›¿ä»£, g è¡¨ç¤ºæ‰§è¡Œ ç”¨ c è¡¨ç¤ºéœ€è¦ç¡®è®¤ :n1,n2 s&#x2F;p1&#x2F;p2&#x2F;g å°†ç¬¬ n1 è‡³ n2 è¡Œä¸­æ‰€æœ‰ p1 å‡ç”¨ p2 æ›¿ä»£ :g&#x2F;p1&#x2F;s&#x2F;&#x2F;p2&#x2F;g å°†æ–‡ä»¶ä¸­æ‰€æœ‰ p1 å‡ç”¨ p2 æ›¿æ¢ :1,$ s&#x2F;string1&#x2F;string2&#x2F;g åœ¨å…¨æ–‡ä¸­å°† string1 æ›¿æ¢ä¸º string2 ä¹¦ç­¾ å‘½ä»¤ æè¿° m[a-z] åœ¨æ–‡ä¸­åšæ ‡è®°ï¼Œæ ‡è®°å·å¯ä¸º a-z çš„ 26 ä¸ªå­—æ¯ &#96;a ç§»åŠ¨åˆ°æ ‡è®° a å¤„ visual æ¨¡å¼ å‘½ä»¤ æè¿° v è¿›å…¥ visual æ¨¡å¼ V è¿›å…¥è¡Œçš„ visual æ¨¡å¼ ctrl+v è¿›å¦‚å—æ“ä½œæ¨¡å¼ç”¨ o å’Œ O æ”¹å˜é€‰æ‹©çš„è¾¹çš„å¤§å° åœ¨æ‰€æœ‰è¡Œæ’å…¥ç›¸åŒçš„å†…å®¹å¦‚ include&lt; å°†å…‰æ ‡ç§»åˆ°å¼€å§‹æ’å…¥çš„ä½ç½®ï¼ŒæŒ‰ CTRL+V è¿›å…¥ VISUAL æ¨¡å¼ï¼Œé€‰æ‹©å¥½æ¨¡å—åæŒ‰ Iï¼ˆshift+i)ï¼Œåæ’å…¥è¦æ’å…¥çš„æ–‡æœ¬ï¼ŒæŒ‰ [ESC] å®Œæˆ è¡Œæ–¹å¼å‘½ä»¤ å‘½ä»¤ æè¿° :n1,n2 co n3 æˆ–è€… :n1,n2 copy n3 å°† n1 è¡Œåˆ° n2 è¡Œä¹‹é—´çš„å†…å®¹æ‹·è´åˆ°ç¬¬ n3 è¡Œä¸‹ :n1,n2 m n3 æˆ–è€… :n1,n2 move n3 å°† n1 è¡Œåˆ° n2 è¡Œä¹‹é—´çš„å†…å®¹ç§»è‡³åˆ°ç¬¬ n3 è¡Œä¸‹ :n1,n2 d å°† n1 è¡Œåˆ° n2 è¡Œä¹‹é—´çš„å†…å®¹åˆ é™¤ :n1,n2 w!command å°†æ–‡ä»¶ä¸­ n1 è¡Œè‡³ n2 è¡Œçš„å†…å®¹ä½œä¸º command çš„è¾“å…¥å¹¶æ‰§è¡Œä¹‹ è‹¥ä¸æŒ‡å®š n1ï¼Œn2ï¼Œåˆ™è¡¨ç¤ºå°†æ•´ä¸ªæ–‡ä»¶å†…å®¹ä½œä¸º command çš„è¾“å…¥ å® å‘½ä»¤ æè¿° q[a-z] å¼€å§‹è®°å½•ä½†å‰å¼€å§‹çš„æ“ä½œä¸ºå®ï¼Œåç§°å¯ä¸ºã€a-zã€‘ï¼Œç„¶åç”¨ q ç»ˆæ­¢å½•åˆ¶å® reg æ˜¾ç¤ºå½“å‰å®šä¹‰çš„æ‰€æœ‰çš„å®ï¼Œç”¨ @[a-z] æ¥åœ¨å½“å‰å…‰æ ‡å¤„æ‰§è¡Œå® [a-z] çª—å£æ“ä½œ å‘½ä»¤ æè¿° :split åˆ†å‰²ä¸€ä¸ªçª—å£ :split file.c ä¸ºå¦ä¸€ä¸ªæ–‡ä»¶ file.c åˆ†éš”çª—å£ :nsplit file.c ä¸ºå¦ä¸€ä¸ªæ–‡ä»¶ file.c åˆ†éš”çª—å£ï¼Œå¹¶æŒ‡å®šå…¶è¡Œæ•° ctrlï¼‹w åœ¨çª—å£ä¸­åˆ‡æ¢ :close å…³é—­å½“å‰çª—å£ æ–‡ä»¶åŠå…¶ä»– å‘½ä»¤ æè¿° :q é€€å‡º vi :q! ä¸ä¿å­˜æ–‡ä»¶å¹¶é€€å‡º vi :e filename æ‰“å¼€æ–‡ä»¶ filename è¿›è¡Œç¼–è¾‘ :e! æ”¾å¼ƒä¿®æ”¹æ–‡ä»¶å†…å®¹ï¼Œé‡æ–°è½½å…¥è¯¥æ–‡ä»¶ç¼–è¾‘ :w ä¿å­˜å½“å‰æ–‡ä»¶ :wq å­˜ç›˜é€€å‡º :ZZ ä¿å­˜å½“å‰æ–‡æ¡£å¹¶é€€å‡º VIM :!command æ‰§è¡Œ shell å‘½ä»¤ command :r!command å°†å‘½ä»¤ command çš„è¾“å‡ºç»“æœæ”¾åˆ°å½“å‰è¡Œ :read file.c å°†æ–‡ä»¶ file.c çš„å†…å®¹æ’å…¥åˆ°å½“å‰å…‰æ ‡æ‰€åœ¨çš„ä¸‹é¢ å¸¸ç”¨æ­£åˆ™ åˆ é™¤è¡Œå°¾ç©ºæ ¼ï¼š:%s/\\s+$//g åˆ é™¤è¡Œé¦–å¤šä½™ç©ºæ ¼ï¼š%s/^\\s*// æˆ–è€… %s/^ *// åˆ é™¤æ²’æœ‰å…§å®¹çš„ç©ºè¡Œï¼š%s/^$// æˆ–è€… g/^$/d åˆ é™¤åŒ…å«æœ‰ç©ºæ ¼ç»„æˆçš„ç©ºè¡Œï¼š%s/^\\s*$// æˆ–è€… g/^\\s*$/d åˆ é™¤ä»¥ç©ºæ ¼æˆ– TAB å¼€å¤´åˆ°ç»“å°¾çš„ç©ºè¡Œï¼š%s/^[ |\\t]*$// æˆ–è€… g/^[ |\\t]*$/d æ¸…ç©ºæŸä¸€è¡Œæˆ–å¤šè¡Œæ–‡æœ¬ï¼š:n1,n2 s/\\w//g ç»™ä¸€è¡Œæˆ–å¤šè¡Œé¦–å­—ç¬¦æ·»åŠ æ³¨é‡Šï¼šn1,n2 s/^/#/g ç»™ä¸€è¡Œæˆ–å¤šè¡Œé¦–å­—ç¬¦åˆ é™¤æ³¨é‡Šï¼šn1,n2 s/^#//g","tags":["Linux","Vim"],"categories":["å®‰åˆ©ç³»åˆ—"]},{"title":"gin-swagger è‡ªåŠ¨åŒ–æ„å»º API æ–‡æ¡£","path":"/2018/gin-swagger-build-document.html","content":"å‰åç«¯çš„äº¤äº’ä¸€èˆ¬æµç¨‹æ˜¯è¿™æ ·çš„ï¼Œåç«¯æš´éœ²å‡º API åï¼Œäº¤ç»™å‰ç«¯ï¼Œå‰ç«¯æ ¹æ® API çš„å“åº”ï¼Œç¼–å†™å‰ç«¯é¡µé¢ï¼Œä¸€å®šç¨‹åº¦ä¸Š API æ˜¯å‰åç«¯çš„äº¤äº’æ¡¥æ¢ã€‚ API æ–‡æ¡£ä¸»è¦è¦åŒ…å«: è·¯ç”±ï¼šåŒ…æ‹¬è·¯å¾„å‚æ•°ã€è¯·æ±‚å‚æ•°ã€è¿˜æ˜¯è¯·æ±‚ä½“å‚æ•° åŠ¨ä½œï¼šHTTP è¯·æ±‚åŠ¨ä½œï¼ŒGETã€POSTã€DELETEã€PUT å“åº”ï¼šè¯·æ±‚ä¹‹åçš„è¿”å›å€¼åŒ…å«å“ªäº›ä¿¡æ¯ï¼Œä¸€èˆ¬æ˜¯ JSON swagger å¯ä»¥å°†ä»£ç å’Œ api æ–‡æ¡£ç»´æŠ¤åœ¨ä¸€èµ·ï¼Œé€šè¿‡è®¿é—®æœåŠ¡è¿›ç¨‹çš„ swagger é¡µé¢å°±å¯ä»¥å¾—åˆ°å®Œå–„çš„ api æ–‡æ¡£ï¼Œè¿˜å¯ä»¥ç›´æ¥ Try outã€‚ docæ–‡æ¡£ gin-swagger swagger-doc åšæ³• è¦çŸ¥é“ swagger æ³¨é‡Šçš„è¯­æ³• å¦‚ä½•åœ¨ gin å†…æ€ä¹ˆä½¿ç”¨ æ³¨é‡Šè¯­æ³•è¿™ä¸ªï¼Œå…¨é æŸ¥æ–‡æ¡£ã€‚å¯¹ç€æ–‡æ¡£æ¥ã€‚ å½“ç„¶æˆ‘è§‰å¾—æœ€å¥½çš„æ–¹æ³•æ˜¯ä»€ä¹ˆå‘¢ï¼Œæ˜¯æ¨¡ä»¿ï¼Œæ‰¾ä¸€ä¸ªåˆ«äººå·²ç»å†™å¥½çš„ï¼Œä¿®ä¿®æ”¹æ”¹ï¼Œçœ‹çœ‹èƒ½ä¸èƒ½ç¼–è¯‘é€šè¿‡ï¼Œç¼–è¯‘é€šè¿‡åæ˜¯ä¸æ˜¯ä½ é¢„æœŸçš„ç»“æœã€‚ä¸æ˜¯çš„è¯ï¼Œç»§ç»­ä¿®ä¿®æ”¹æ”¹ï¼Œå†ç¼–è¯‘ï¼Œå†çœ‹æ˜¯ä¸æ˜¯ä½ å¸Œæœ›çš„ç»“æœã€‚å¦‚æ­¤åå¤ã€‚ 1. ç¼–å†™å…¨å±€ä¿¡æ¯æ³¨é‡Šï¼Œåœ¨ä¸»å‡½æ•°ä¸Šç¼–å†™æ ¼å¼ï¼š// @param info // @title Swagger Example API// @version 1.0// @description This is a sample server Petstore server.// @termsOfService http://swagger.io/terms/// @contact.name API Support// @contact.url http://www.swagger.io/support// @contact.email support@swagger.io// @license.name Apache 2.0// @license.url http://www.apache.org/licenses/LICENSE-2.0.html// @host 127.0.0.1:8080// @BasePath /v1func main() &#123; r := gin.Default() r.GET(&quot;/docs/*any&quot;, ginSwagger.WrapHandler(swaggerFiles.Handler)) r.GET(&quot;v1/hello/:name&quot;, Name) r.Run()&#125; r.GET(&quot;/docs/*any&quot;, ginSwagger.WrapHandler(swaggerFiles.Handler)) è¿™ä¸ªè·¯ç”±å’Œå“åº”éœ€è¦æœ‰ï¼Œè·¯ç”±éšä¾¿çš„å®šä¹‰ï¼Œä½†æˆ‘è§‰å¾—æˆ‘è¿™ç§æ–¹å¼ä¸€ç›®äº†ç„¶ï¼ŒçŸ¥é“æ˜¯æ–‡æ¡£ã€‚ å…¶ä»–æ³¨é‡Šå¯¹ç…§ç€å‚è€ƒæ–‡æ¡£å³å¯ã€‚ 2. ç¼–å†™åº”ç”¨æ³¨é‡Šå³åœ¨å“åº”å‡½æ•°çš„ä¸Šæ–¹ç¼–å†™æ³¨é‡Š // Name will print hello name// @Summary Print// @Accept json// @Tags Name// @Security Bearer// @Produce json// @Param name path string true &quot;name&quot;// @Resource Name// @Router /hello/&#123;name&#125; [get]// @Success 200 &#123;object&#125; main.Messagefunc Name(c *gin.Context) &#123; name := c.Param(&quot;name&quot;) if name == &quot;&quot; &#123; return &#125; var message Message message = Message&#123; MessageInfo: fmt.Sprintf(&quot;hello %s&quot;, name), &#125; c.JSON(http.StatusOK, message.Serializer())&#125; è¿™é‡Œæœ€å¥½æŠŠå“åº”ä½“ç»Ÿä¸€æˆç»“æ„ä½“çš„å½¢å¼ã€‚å³ type Message struct &#123; MessageInfo string `json:&quot;message&quot;`&#125;func (m *Message) Serializer()Message&#123; return Message&#123; MessageInfo: m.MessageInfo, &#125;&#125; 3. ç›®å½•ä¸‹ æ‰§è¡Œå‘½ä»¤swag init è‡ªåŠ¨ç”Ÿæˆ docs æ–‡ä»¶å¤¹ï¼Œå†…å« swagger.json ã€swagger.json ã€ docs.go ç¼–è¯‘ä¸é€šè¿‡ï¼ŒæŸ¥çœ‹æŠ¥é”™ä¿¡æ¯ï¼Œä¿®æ”¹æ³¨é‡Šã€‚ 4. å¯¼å…¥ç”Ÿæˆçš„ docs æ–‡ä»¶import ( &quot;github.com/swaggo/gin-swagger&quot; &quot;github.com/swaggo/gin-swagger/swaggerFiles&quot; _ &quot;./docs&quot; // docs is generated by Swag CLI, you have to import it. &quot;github.com/gin-gonic/gin&quot; &quot;net/http&quot; &quot;fmt&quot;) å³è¿™ä¸ª ./docs 5. go run main.goè®¿é—®ï¼šhttp://127.0.0.1:8080/docs/index.html å³å¯æŸ¥çœ‹ swagger æ–‡æ¡£ã€‚","tags":["Go"],"categories":["æŠ€æœ¯åŠ æ²¹ç«™"]},{"title":"é«˜æ€§èƒ½çš„ Go Web æ¡†æ¶ - gin","path":"/2018/gin-go-web-frame.html","content":"Gin çš„ä½¿ç”¨å®‰è£…å’Œæ›´æ–°é¦–æ¬¡å®‰è£…ï¼Œä½¿ç”¨ go getå‘½ä»¤è·å–å³å¯ã€‚ $ go get github.com/gin-gonic/gin æ›´æ–°å°±æ˜¯å¸¸è§„çš„ go get -uã€‚ $ go get -u github.com/gin-gonic/gin å¿«é€Ÿè¿è¡Œåœ¨ä½ çš„ main åŒ…ä¸­ï¼Œå¼•å…¥ gin åŒ…å¹¶åˆå§‹åŒ–ã€‚ package mainimport ( &quot;github.com/gin-gonic/gin&quot; &quot;net/http&quot;)func main() &#123; // åˆå§‹åŒ–å¼•æ“ engine := gin.Default() // æ³¨å†Œä¸€ä¸ªè·¯ç”±å’Œå¤„ç†å‡½æ•° engine.Any(&quot;/&quot;, WebRoot) // ç»‘å®šç«¯å£ï¼Œç„¶åå¯åŠ¨åº”ç”¨ engine.Run(&quot;:9205&quot;)&#125;/*** æ ¹è¯·æ±‚å¤„ç†å‡½æ•°* æ‰€æœ‰æœ¬æ¬¡è¯·æ±‚ç›¸å…³çš„æ–¹æ³•éƒ½åœ¨ context ä¸­ï¼Œå®Œç¾* è¾“å‡ºå“åº” hello, world*/func WebRoot(context *gin.Context) &#123; context.String(http.StatusOK, &quot;hello, world&quot;)&#125; ä¸€ä¸ªæœ€ç®€å•çš„åº”ç”¨å°±å†™å¥½äº†ï¼Œæ¥è¿è¡Œä¸‹è¯•è¯•: $ go run[GIN-debug] Listening and serving HTTP on :9205 è®¿é—® http://127.0.0.1:9205 ï¼Œå°±å¯ä»¥å¾—åˆ°å“åº” â€œhello, worldâ€ ã€‚ è·¯ç”± (Router)Restful Apiä½ å¯ä»¥æ³¨å†Œè·¯ç”±æ–¹æ³•æœ‰ GET, POST, PUT, PATCH, DELETE å’Œ OPTIONS. ä½¿ç”¨å¾ˆç®€å•ï¼Œç›´æ¥è°ƒç”¨åŒåçš„æ–¹æ³•å³å¯ã€‚ // çœç•¥çš„ä»£ç  ...func main() &#123; router := gin.Default() router.GET(&quot;/someGet&quot;, getting) router.POST(&quot;/somePost&quot;, posting) router.PUT(&quot;/somePut&quot;, putting) router.DELETE(&quot;/someDelete&quot;, deleting) router.PATCH(&quot;/somePatch&quot;, patching) router.HEAD(&quot;/someHead&quot;, head) router.OPTIONS(&quot;/someOptions&quot;, options) // é»˜è®¤ç»‘å®š :8080 router.Run()&#125;// çœç•¥çš„ä»£ç  ... åŠ¨æ€è·¯ç”±ï¼ˆå‚æ•°è·¯ç”±ï¼‰æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦åŠ¨æ€çš„è·¯ç”±ï¼Œå¦‚ /user/:idï¼Œé€šè¿‡è°ƒç”¨çš„ url æ¥ä¼ å…¥ä¸åŒçš„ id . åœ¨ Gin ä¸­å¾ˆå®¹æ˜“å¤„ç†è¿™ç§è·¯ç”±ï¼š // çœç•¥çš„ä»£ç  ...func main() &#123; router := gin.Default() // æ³¨å†Œä¸€ä¸ªåŠ¨æ€è·¯ç”± // å¯ä»¥åŒ¹é… /user/leeifme // ä¸èƒ½åŒ¹é… /user å’Œ /user/ router.GET(&quot;/user/:name&quot;, func(c *gin.Context) &#123; // ä½¿ç”¨ c.Param(key) è·å– url å‚æ•° name := c.Param(&quot;name&quot;) c.String(http.StatusOK, &quot;Hello %s&quot;, name) &#125;) // æ³¨å†Œä¸€ä¸ªé«˜çº§çš„åŠ¨æ€è·¯ç”± // è¯¥è·¯ç”±ä¼šåŒ¹é… /user/leeifme/ å’Œ /user/leeifme/send // å¦‚æœæ²¡æœ‰ä»»ä½•è·¯ç”±åŒ¹é…åˆ° /user/leeifme, é‚£ä¹ˆä»–å°±ä¼šé‡å®šå‘åˆ° /user/leeifme/ï¼Œä»è€Œè¢«è¯¥æ–¹æ³•åŒ¹é…åˆ° router.GET(&quot;/user/:name/*action&quot;, func(c *gin.Context) &#123; name := c.Param(&quot;name&quot;) action := c.Param(&quot;action&quot;) message := name + &quot; is &quot; + action c.String(http.StatusOK, message) &#125;) router.Run(&quot;:8080&quot;)&#125;// çœç•¥çš„ä»£ç  ... è·¯ç”±ç»„ä¸€äº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šæœ‰ç»Ÿä¸€å‰ç¼€çš„ url çš„éœ€æ±‚ï¼Œå…¸å‹çš„å¦‚ Api æ¥å£ç‰ˆæœ¬å· /v1/somethingã€‚Gin å¯ä»¥ä½¿ç”¨ Group æ–¹æ³•ç»Ÿä¸€å½’ç±»åˆ°è·¯ç”±ç»„ä¸­ï¼š // çœç•¥çš„ä»£ç  ...func main() &#123; router := gin.Default() // å®šä¹‰ä¸€ä¸ªç»„å‰ç¼€ // /v1/login å°±ä¼šåŒ¹é…åˆ°è¿™ä¸ªç»„ v1 := router.Group(&quot;/v1&quot;) &#123; v1.POST(&quot;/login&quot;, loginEndpoint) v1.POST(&quot;/submit&quot;, submitEndpoint) v1.POST(&quot;/read&quot;, readEndpoint) &#125; // å®šä¹‰ä¸€ä¸ªç»„å‰ç¼€ // ä¸ç”¨èŠ±æ‹¬å·åŒ…èµ·æ¥ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ä¸Šé¢é‚£ç§åªæ˜¯çœ‹èµ·æ¥ä¼šç»Ÿä¸€ä¸€ç‚¹ã€‚çœ‹ä½ ä¸ªäººå–œå¥½ v2 := router.Group(&quot;/v2&quot;) v2.POST(&quot;/login&quot;, loginEndpoint) v2.POST(&quot;/submit&quot;, submitEndpoint) v2.POST(&quot;/read&quot;, readEndpoint) router.Run(&quot;:8080&quot;)&#125;// çœç•¥çš„ä»£ç  ... ä¸­é—´ä»¶ (Middleware)golang çš„ net&#x2F;http è®¾è®¡çš„ä¸€å¤§ç‰¹ç‚¹å°±æ˜¯ç‰¹åˆ«å®¹æ˜“æ„å»ºä¸­é—´ä»¶ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ä¸­é—´ä»¶åªå¯¹æ³¨å†Œè¿‡çš„è·¯ç”±å‡½æ•°èµ·ä½œç”¨ã€‚å¯¹äºåˆ†ç»„è·¯ç”±ï¼ŒåµŒå¥—ä½¿ç”¨ä¸­é—´ä»¶ï¼Œå¯ä»¥é™å®šä¸­é—´ä»¶çš„ä½œç”¨èŒƒå›´ã€‚ä¸­é—´ä»¶åˆ†ä¸ºå…¨å±€ä¸­é—´ä»¶ï¼Œå•ä¸ªè·¯ç”±ä¸­é—´ä»¶å’Œç¾¤ç»„ä¸­é—´ä»¶ã€‚ ç°ä»£åŒ–çš„ Web ç¼–ç¨‹ï¼Œä¸­é—´ä»¶å·²ç»æ˜¯å¿…ä¸å¯å°‘çš„äº†ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸­é—´ä»¶çš„æ–¹å¼ï¼ŒéªŒè¯ Auth å’Œèº«ä»½é‰´åˆ«ï¼Œé›†ä¸­å¤„ç†è¿”å›çš„æ•°æ®ç­‰ç­‰ã€‚Gin æä¾›äº† Middleware çš„åŠŸèƒ½ï¼Œå¹¶ä¸è·¯ç”±ç´§ç´§ç›¸è¿ã€‚ å•ä¸ªè·¯ç”±ä¸­é—´ä»¶å•ä¸ªè·¯ç”±ä½¿ç”¨ä¸­é—´ä»¶ï¼Œåªéœ€è¦åœ¨æ³¨å†Œè·¯ç”±çš„æ—¶å€™æŒ‡å®šè¦æ‰§è¡Œçš„ä¸­é—´ä»¶å³å¯ã€‚ // çœç•¥çš„ä»£ç  ...func main() &#123; router := gin.Default() // æ³¨å†Œä¸€ä¸ªè·¯ç”±ï¼Œä½¿ç”¨äº† middleware1ï¼Œmiddleware2 ä¸¤ä¸ªä¸­é—´ä»¶ router.GET(&quot;/someGet&quot;, middleware1, middleware2, handler) // é»˜è®¤ç»‘å®š :8080 router.Run()&#125;func handler(c *gin.Context) &#123; log.Println(&quot;exec handler&quot;)&#125;// çœç•¥çš„ä»£ç  ... æ‰§è¡Œæµç¨‹æ§åˆ¶ç”¨ä¸Šé¢çš„å®ä¾‹ä»£ç ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ä¸­é—´ä»¶æ˜¯æ€ä¹ˆæ‰§è¡Œçš„ã€‚ // çœç•¥çš„ä»£ç  ...func middleware1(c *gin.Context) &#123; log.Println(&quot;exec middleware1&quot;) //ä½ å¯ä»¥å†™ä¸€äº›é€»è¾‘ä»£ç  // æ‰§è¡Œè¯¥ä¸­é—´ä»¶ä¹‹åçš„é€»è¾‘ c.Next()&#125;// çœç•¥çš„ä»£ç  ... å¯ä»¥çœ‹å‡ºï¼Œä¸­é—´ä»¶çš„å†™æ³•å’Œè·¯ç”±çš„ Handler å‡ ä¹æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯å¤šè°ƒç”¨ c.Next()ã€‚ æ­£æ˜¯æœ‰ä¸ªc.Next()ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸­é—´ä»¶ä¸­æ§åˆ¶è°ƒç”¨é€»è¾‘çš„å˜åŒ–ï¼Œçœ‹ä¸‹é¢çš„ middleware2 ä»£ç ã€‚ // çœç•¥çš„ä»£ç  ...func middleware2(c *gin.Context) &#123; log.Println(&quot;arrive at middleware2&quot;) // æ‰§è¡Œè¯¥ä¸­é—´ä»¶ä¹‹å‰ï¼Œå…ˆè·³åˆ°æµç¨‹çš„ä¸‹ä¸€ä¸ªæ–¹æ³• c.Next() // æµç¨‹ä¸­çš„å…¶ä»–é€»è¾‘å·²ç»æ‰§è¡Œå®Œäº† log.Println(&quot;exec middleware2&quot;) //ä½ å¯ä»¥å†™ä¸€äº›é€»è¾‘ä»£ç &#125;// çœç•¥çš„ä»£ç  ... åœ¨ middleware2ä¸­ï¼Œæ‰§è¡Œåˆ° c.Next()æ—¶ï¼ŒGin ä¼šç›´æ¥è·³åˆ°æµç¨‹çš„ä¸‹ä¸€ä¸ªæ–¹æ³•ä¸­ï¼Œç­‰åˆ°è¿™ä¸ªæ–¹æ³•æ‰§è¡Œå®Œåï¼Œæ‰ä¼šå›æ¥æ¥ç€æ‰§è¡Œ middleware2 å‰©ä¸‹çš„ä»£ç ã€‚ æ‰€ä»¥è¯·æ±‚ä¸Šé¢æ³¨å†Œçš„è·¯ç”± url /someGet ï¼Œè¯·æ±‚å…ˆåˆ°è¾¾middleware1ï¼Œç„¶ååˆ°è¾¾ middleware2ï¼Œä½†æ­¤æ—¶ middleware2è°ƒç”¨äº† c.Next()ï¼Œæ‰€ä»¥ middleware2çš„ä»£ç å¹¶æ²¡æœ‰æ‰§è¡Œï¼Œè€Œæ˜¯è·³åˆ°äº† handlerï¼Œç­‰ handleræ‰§è¡Œå®Œæˆåï¼Œè·³å›åˆ° middleware2ï¼Œæ‰§è¡Œ middleware2å‰©ä¸‹çš„ä»£ç ã€‚ æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨æ§åˆ¶å°ä¸Šçœ‹åˆ°ä»¥ä¸‹æ—¥å¿—è¾“å‡º: exec middleware1arrive at middleware2exec handlerexec middleware2 è·¯ç”±ç»„ä½¿ç”¨ä¸­é—´ä»¶è·¯ç”±ç»„ä½¿ç”¨ä¸­é—´ä»¶å’Œå•ä¸ªè·¯ç”±ç±»ä¼¼ï¼Œåªä¸è¿‡æ˜¯è¦æŠŠä¸­é—´ä»¶æ”¾åˆ° Group ä¸Š. // çœç•¥çš„ä»£ç  ...func main() &#123; router := gin.Default() // å®šä¹‰ä¸€ä¸ªç»„å‰ç¼€, å¹¶ä½¿ç”¨ middleware1 ä¸­é—´ä»¶ // è®¿é—® /v2/login å°±ä¼šæ‰§è¡Œ middleware1 å‡½æ•° v2 := router.Group(&quot;/v2&quot;, middleware1) v2.POST(&quot;/login&quot;, loginEndpoint) v2.POST(&quot;/submit&quot;, submitEndpoint) v2.POST(&quot;/read&quot;, readEndpoint) router.Run(&quot;:8080&quot;)&#125;// çœç•¥çš„ä»£ç  ...","tags":["Go"],"categories":["æŠ€æœ¯åŠ æ²¹ç«™"]},{"title":"Docker å¸¸ç”¨å‘½ä»¤è®°å½•","path":"/2018/docker-common-command .html","content":"Docker æ˜¯ä»€ä¹ˆDocker æ˜¯ä¸€ä¸ªæ”¹è¿›çš„å®¹å™¨æŠ€æœ¯ã€‚å…·ä½“çš„ â€œæ”¹è¿›â€ ä½“ç°åœ¨ï¼ŒDocker ä¸ºå®¹å™¨å¼•å…¥äº†é•œåƒï¼Œä½¿å¾—å®¹å™¨å¯ä»¥ä»é¢„å…ˆå®šä¹‰å¥½çš„æ¨¡ç‰ˆï¼ˆimagesï¼‰åˆ›å»ºå‡ºæ¥ï¼Œå¹¶ä¸”è¿™ä¸ªæ¨¡ç‰ˆè¿˜æ˜¯åˆ†å±‚çš„ã€‚ Docker ç»å¸¸è¢«æèµ·çš„ç‰¹ç‚¹ï¼š è½»é‡ï¼Œä½“ç°åœ¨å†…å­˜å ç”¨å°ï¼Œé«˜å¯†åº¦ å¿«é€Ÿï¼Œæ¯«ç§’å¯åŠ¨ éš”ç¦»ï¼Œæ²™ç›’æŠ€æœ¯æ›´åƒè™šæ‹Ÿæœº Docker æŠ€æœ¯çš„åŸºç¡€ï¼š namespaceï¼Œå®¹å™¨éš”ç¦»çš„åŸºç¡€ï¼Œä¿è¯ A å®¹å™¨çœ‹ä¸åˆ° B å®¹å™¨. 6 ä¸ªåç©ºé—´ï¼šUser,Mnt,Network,UTS,IPC,Pid cgroupsï¼Œå®¹å™¨èµ„æºç»Ÿè®¡å’Œéš”ç¦»ã€‚ä¸»è¦ç”¨åˆ°çš„ cgroups å­ç³»ç»Ÿï¼šcpu,blkio,device,freezer,memory unionfsï¼Œå…¸å‹ï¼šaufs&#x2F;overlayfsï¼Œåˆ†å±‚é•œåƒå®ç°çš„åŸºç¡€ Docker ç»„ä»¶ï¼š docker Client å®¢æˆ·ç«¯â€”â€”â€”â€”&gt; å‘ docker æœåŠ¡å™¨è¿›ç¨‹å‘èµ·è¯·æ±‚ï¼Œå¦‚: åˆ›å»ºã€åœæ­¢ã€é”€æ¯å®¹å™¨ç­‰æ“ä½œ docker Server æœåŠ¡å™¨è¿›ç¨‹â€”â€“&gt; å¤„ç†æ‰€æœ‰ docker çš„è¯·æ±‚ï¼Œç®¡ç†æ‰€æœ‰å®¹å™¨ docker Registry é•œåƒä»“åº“â€”â€”&gt; é•œåƒå­˜æ”¾çš„ä¸­å¤®ä»“åº“ï¼Œå¯çœ‹ä½œæ˜¯å­˜æ”¾äºŒè¿›åˆ¶çš„ scm Docker å®‰è£…Docker çš„å®‰è£…éå¸¸ç®€å•ï¼Œæ”¯æŒç›®å‰æ‰€æœ‰ä¸»æµæ“ä½œç³»ç»Ÿï¼Œä» Mac åˆ° Windows åˆ°å„ç§ Linux å‘è¡Œç‰ˆå…·ä½“å‚è€ƒï¼š docker å®‰è£… Docker å¸¸è§å‘½ä»¤å®¹å™¨ç›¸å…³æ“ä½œdocker create # åˆ›å»ºä¸€ä¸ªå®¹å™¨ä½†æ˜¯ä¸å¯åŠ¨å®ƒdocker run # åˆ›å»ºå¹¶å¯åŠ¨ä¸€ä¸ªå®¹å™¨docker stop # åœæ­¢å®¹å™¨è¿è¡Œï¼Œå‘é€ä¿¡å· SIGTERMdocker start # å¯åŠ¨ä¸€ä¸ªåœæ­¢çŠ¶æ€çš„å®¹å™¨docker restart # é‡å¯ä¸€ä¸ªå®¹å™¨docker rm # åˆ é™¤ä¸€ä¸ªå®¹å™¨docker kill # å‘é€ä¿¡å·ç»™å®¹å™¨ï¼Œé»˜è®¤ SIGKILLdocker attach # è¿æ¥ (è¿›å…¥) åˆ°ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„å®¹å™¨docker wait # é˜»å¡åˆ°ä¸€ä¸ªå®¹å™¨ï¼Œç›´åˆ°å®¹å™¨åœæ­¢è¿è¡Œ è·å–å®¹å™¨ç›¸å…³ä¿¡æ¯docker ps # æ˜¾ç¤ºçŠ¶æ€ä¸ºè¿è¡Œï¼ˆUpï¼‰çš„å®¹å™¨docker ps -a # æ˜¾ç¤ºæ‰€æœ‰å®¹å™¨, åŒ…æ‹¬è¿è¡Œä¸­ï¼ˆUpï¼‰çš„å’Œé€€å‡ºçš„ (Exited)docker inspect # æ·±å…¥å®¹å™¨å†…éƒ¨è·å–å®¹å™¨æ‰€æœ‰ä¿¡æ¯docker logs # æŸ¥çœ‹å®¹å™¨çš„æ—¥å¿— (stdout/stderr)docker events # å¾—åˆ° docker æœåŠ¡å™¨çš„å®æ—¶çš„äº‹ä»¶docker port # æ˜¾ç¤ºå®¹å™¨çš„ç«¯å£æ˜ å°„docker top # æ˜¾ç¤ºå®¹å™¨çš„è¿›ç¨‹ä¿¡æ¯docker diff # æ˜¾ç¤ºå®¹å™¨æ–‡ä»¶ç³»ç»Ÿçš„å‰åå˜åŒ– å¯¼å‡ºå®¹å™¨docker cp # ä»å®¹å™¨é‡Œå‘å¤–æ‹·è´æ–‡ä»¶æˆ–ç›®å½•docker export # å°†å®¹å™¨æ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿå¯¼å‡ºä¸ºä¸€ä¸ª tar åŒ…ï¼Œä¸å¸¦ layersã€tag ç­‰ä¿¡æ¯ æ‰§è¡Œdocker exec # åœ¨å®¹å™¨é‡Œæ‰§è¡Œä¸€ä¸ªå‘½ä»¤ï¼Œå¯ä»¥æ‰§è¡Œ bash è¿›å…¥äº¤äº’å¼ é•œåƒæ“ä½œdocker images # æ˜¾ç¤ºæœ¬åœ°æ‰€æœ‰çš„é•œåƒåˆ—è¡¨docker import # ä»ä¸€ä¸ª tar åŒ…åˆ›å»ºä¸€ä¸ªé•œåƒï¼Œå¾€å¾€å’Œ export ç»“åˆä½¿ç”¨docker build # ä½¿ç”¨ Dockerfile åˆ›å»ºé•œåƒï¼ˆæ¨èï¼‰docker commit # ä»å®¹å™¨åˆ›å»ºé•œåƒdocker rmi # åˆ é™¤ä¸€ä¸ªé•œåƒdocker load # ä»ä¸€ä¸ª tar åŒ…åˆ›å»ºä¸€ä¸ªé•œåƒï¼Œå’Œ save é…åˆä½¿ç”¨docker save # å°†ä¸€ä¸ªé•œåƒä¿å­˜ä¸ºä¸€ä¸ª tar åŒ…ï¼Œå¸¦ layers å’Œ tag ä¿¡æ¯docker history # æ˜¾ç¤ºç”Ÿæˆä¸€ä¸ªé•œåƒçš„å†å²å‘½ä»¤docker tag # ä¸ºé•œåƒèµ·ä¸€ä¸ªåˆ«å é•œåƒä»“åº“ (registry) æ“ä½œdocker login # ç™»å½•åˆ°ä¸€ä¸ª registrydocker search # ä» registry ä»“åº“æœç´¢é•œåƒdocker pull # ä»ä»“åº“ä¸‹è½½é•œåƒåˆ°æœ¬åœ°docker push # å°†ä¸€ä¸ªé•œåƒ push åˆ° registry ä»“åº“ä¸­ è·å– Container IP åœ°å€ï¼ˆContainer çŠ¶æ€å¿…é¡»æ˜¯ Upï¼‰docker inspect id | grep IPAddress | cut -d &#x27;&quot;&#x27; -f 4 è·å–ç«¯å£æ˜ å°„docker inspect -f &#x27;&#123;&#123;range $p, $conf := .NetworkSettings.Ports&#125;&#125; &#123;&#123;$p&#125;&#125; -&gt; &#123;&#123;(index $conf 0).HostPort&#125;&#125; &#123;&#123;end&#125;&#125;&#x27; id è·å–ç¯å¢ƒå˜é‡docker exec container_id env æ€æ‰æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨docker kill $(docker ps -q) åˆ é™¤è€çš„ (ä¸€å‘¨å‰åˆ›å»º) å®¹å™¨docker ps -a | grep &#x27;weeks ago&#x27; | awk &#x27;&#123;print $1&#125;&#x27; | xargs docker rm åˆ é™¤å·²ç»åœæ­¢çš„å®¹å™¨docker rm `docker ps -a -q` åˆ é™¤æ‰€æœ‰é•œåƒï¼Œå°å¿ƒdocker rmi $(docker images -q) DockerfileDockerfile æ˜¯ docker æ„å»ºé•œåƒçš„åŸºç¡€ï¼Œä¹Ÿæ˜¯ docker åŒºåˆ«äºå…¶ä»–å®¹å™¨çš„é‡è¦ç‰¹å¾ï¼Œæ­£æ˜¯æœ‰äº† Dockerfileï¼Œdocker çš„è‡ªåŠ¨åŒ–å’Œå¯ç§»æ¤æ€§æ‰æˆä¸ºå¯èƒ½ã€‚ ä¸è®ºæ˜¯å¼€å‘è¿˜æ˜¯è¿ç»´ï¼Œå­¦ä¼šç¼–å†™ Dockerfile å‡ ä¹æ˜¯å¿…å¤‡çš„ï¼Œè¿™æœ‰åŠ©äºä½ ç†è§£æ•´ä¸ªå®¹å™¨çš„è¿è¡Œã€‚ FROM , ä»ä¸€ä¸ªåŸºç¡€é•œåƒæ„å»ºæ–°çš„é•œåƒFROM ubuntu MAINTAINER , ç»´æŠ¤è€…ä¿¡æ¯MAINTAINER William &lt;wlj@nicescale.com&gt; ENV , è®¾ç½®ç¯å¢ƒå˜é‡ENV TEST 1 RUN , éäº¤äº’å¼è¿è¡Œ shell å‘½ä»¤RUN apt-get -y update RUN apt-get -y install nginx ADD , å°†å¤–éƒ¨æ–‡ä»¶æ‹·è´åˆ°é•œåƒé‡Œ, src å¯ä»¥ä¸º urlADD http://nicescale.com/ /data/nicescale.tgz WORKDIR &#x2F;path&#x2F;to&#x2F;workdir, è®¾ç½®å·¥ä½œç›®å½•WORKDIR /var/www USER , è®¾ç½®ç”¨æˆ· IDUSER nginx VULUME &lt;#dir&gt;, è®¾ç½® volumeVOLUME [â€˜/dataâ€™] EXPOSE , æš´éœ²å“ªäº›ç«¯å£EXPOSE 80 443 ENTRYPOINT [â€˜executableâ€™, â€˜param1â€™,â€™param2â€™] æ‰§è¡Œå‘½ä»¤ENTRYPOINT [&quot;/usr/sbin/nginx&quot;] CMD [â€œparam1â€,â€param2â€]CMD [&quot;start&quot;] docker åˆ›å»ºã€å¯åŠ¨ container æ—¶æ‰§è¡Œçš„å‘½ä»¤ï¼Œå¦‚æœè®¾ç½®äº† ENTRYPOINTï¼Œåˆ™ CMD å°†ä½œä¸ºå‚æ•° Dockerfile æœ€ä½³å®è·µ å°½é‡å°†ä¸€äº›å¸¸ç”¨ä¸å˜çš„æŒ‡ä»¤æ”¾åˆ°å‰é¢ CMD å’Œ ENTRYPOINT å°½é‡ä½¿ç”¨ json æ•°ç»„æ–¹å¼ é€šè¿‡ Dockerfile æ„å»º imagedocker build csphere/nginx:1.7 . é•œåƒä»“åº“ Registryé•œåƒä» Dockerfile build ç”Ÿæˆåï¼Œéœ€è¦å°†é•œåƒæ¨é€ (push) åˆ°é•œåƒä»“åº“ã€‚ä¼ä¸šå†…éƒ¨éƒ½éœ€è¦æ„å»ºä¸€ä¸ªç§æœ‰ docker registryï¼Œè¿™ä¸ª registry å¯ä»¥çœ‹ä½œäºŒè¿›åˆ¶çš„ scmï¼ŒCI&#x2F;CD ä¹Ÿéœ€è¦å›´ç»• registry è¿›è¡Œã€‚ éƒ¨ç½² registrymkdir /registrydocker run -p 80:5000 -e STORAGE_PATH=/registry -v /registry:/registry registry:2.0 æ¨é€é•œåƒä¿å­˜åˆ°ä»“åº“å‡è®¾ 192.168.1.2 æ˜¯ registry ä»“åº“çš„åœ°å€ï¼š docker tag csphere/nginx:1.7 192.168.1.2/csphere/nginx:1.7docker push 192.168.1.2/csphere/nginx:1.7 å‡ ä¸ªç®€å•å°ä¾‹å­å®¹å™¨æ“ä½œ1. åˆ›å»ºå¹¶æ‹‰å– busybox# docker run -it --name con01 busybox:latest/ # ip addr #å®¹å™¨é‡Œæ‰§è¡Œ1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00inet 127.0.0.1/8 scope host lo valid_lft forever preferred_lft foreverSegmentation fault (core dumped)/ # ping www.csphere.cnPING www.csphere.cn (117.121.26.243): 56 data bytes64 bytes from 117.121.26.243: seq=0 ttl=48 time=3.139 ms64 bytes from 117.121.26.243: seq=1 ttl=48 time=3.027 ms^C--- www.csphere.cn ping statistics ---2 packets transmitted, 2 packets received, 0% packet lossround-trip min/avg/max = 3.027/3.083/3.139 msexit #é€€å‡ºå®¹å™¨ 2. åˆ›å»ºæµ‹è¯•å®¹å™¨docker run -d --name con03 csphere/test:0.1efc9bda4a2ff2f479b18e0fc4698e42c47c9583a24c93f5ce6b28a828a172709 3. ç™»é™†åˆ° con03 ä¸­# docker exec -it con03 /bin/bash[root@efc9bda4a2ff /]# exit 4. åœæ­¢ con03# docker stop con03con03 5. å¼€å¯ con03# docker start con03con03 6. åˆ é™¤ con03# docker ps -aCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMESefc9bda4a2ff csphere/test:0.1 &quot;/usr/local/bin/run 4 minutes ago Up 17 seconds con03 99aa6ee25adc busybox:latest &quot;/bin/sh&quot; 14 minutes ago Exited (0) 12 minutes ago con02 831c93de9b9f busybox:latest &quot;/bin/sh&quot; 2 hours ago Up 27 minutes con01# docker rm con02 #å®¹å™¨åœæ­¢çš„çŠ¶æ€# docker rm -f con03 #å®¹å™¨å¼€å¯çš„çŠ¶æ€ é•œåƒæ“ä½œ1. ä» docker hub å®˜æ–¹é•œåƒä»“åº“æ‹‰å–é•œåƒ# docker pull busybox:latestatest: Pulling from busyboxcf2616975b4a: Pull complete 6ce2e90b0bc7: Pull complete 8c2e06607696: Already exists busybox:latest: The image you are pulling has been verified. Important: image verification is a tech preview feature and should not be relied on to provide security.Digest: sha256:38a203e1986cf79639cfb9b2e1d6e773de84002feea2d4eb006b52004ee8502dStatus: Downloaded newer image for busybox:latest 2. ä»æœ¬åœ°ä¸Šä¼ é•œåƒåˆ°é•œåƒä»“åº“docker push 192.168.1.2/csphere/nginx:1.7 3. æŸ¥æ‰¾é•œåƒä»“åº“çš„æŸä¸ªé•œåƒ# docker search centos/nginxNAME DESCRIPTION STARS OFFICIAL AUTOMATEDjohnnyzheng/centos-nginx-php-wordpress 1 [OK]sergeyzh/centos6-nginx 1 [OK]hzhang/centos-nginx 1 [OK] 4. æŸ¥çœ‹æœ¬åœ°é•œåƒåˆ—è¡¨# docker imagesTAG IMAGE ID CREATED VIRTUAL SIZEdocker.io/csphere/csphere 0.10.3 604c03bf0c9e 3 days ago 62.72 MBdocker.io/csphere/csphere latest 604c03bf0c9e 3 days ago 62.72 MBcsphere/csphere 0.10.3 604c03bf0c9e 3 days ago 62.72 MBregistry 2.0 2971b6ce766c 7 days ago 548.1 MBbusybox latest 8c2e06607696 3 weeks ago 2.43 MB 5. åˆ é™¤é•œåƒdocker rmi busybox:latest #æ²¡æœ‰å®¹å™¨ä½¿ç”¨æ­¤é•œåƒåˆ›å»ºï¼Œå¦‚æœæœ‰å®¹å™¨åœ¨ä½¿ç”¨æ­¤é•œåƒä¼šæŠ¥é”™ï¼šError response from daemon: Conflict, cannot delete 8c2e06607696 because the running container 831c93de9b9f is using it, stop it and use -f to forceFATA[0000] Error: failed to remove one or more imagesdocker rmi -f busybox:latest #å®¹å™¨ä½¿ç”¨æ­¤é•œåƒåˆ›å»ºï¼Œæ­¤å®¹å™¨çŠ¶æ€ä¸ºExited 6. æŸ¥çœ‹æ„å»ºé•œåƒæ‰€ç”¨è¿‡çš„å‘½ä»¤# docker history busybox:latestIMAGE CREATED CREATED BY SIZE8c2e06607696 3 weeks ago /bin/sh -c #(nop) CMD [&quot;/bin/sh&quot;] 0 B6ce2e90b0bc7 3 weeks ago /bin/sh -c #(nop) ADD file:8cf517d90fe79547c4 2.43 MBcf2616975b4a 3 weeks ago /bin/sh -c #(nop) MAINTAINER JÃ©rÃ´me Petazzo 0 B","tags":["Docker","Cloud Navite"],"categories":["æŠ€æœ¯åŠ æ²¹ç«™"]},{"title":"åˆå­¦ Redis ä½œç¼“å­˜å±‚","path":"/2018/redis-for-mysql-cache.html","content":"é¡¹ç›®éœ€æ±‚ï¼šæ•°æ®åº“ç”¨çš„æ˜¯MySQLï¼Œè€ƒè™‘ç”¨Redis&#x2F;memcachedåšæ•°æ®åº“çš„ç¼“å­˜å±‚ã€‚åœ¨è¯»DBå‰ï¼Œå…ˆè¯»ç¼“å­˜å±‚ï¼Œå¦‚æœæœ‰ç›´æ¥è¿”å›ï¼Œå¦‚æœæ²¡æœ‰å†è¯»DBï¼Œç„¶åå†™å…¥ç¼“å­˜å±‚å¹¶è¿”å›ã€‚ æ€è·¯ï¼š###ç¼“å­˜è¯»å–æµç¨‹ å…ˆåˆ°ç¼“å­˜ä¸­æŸ¥æ•°æ® ç¼“å­˜ä¸­ä¸å­˜åœ¨åˆ™åˆ°å®é™…æ•°æ®æºä¸­å–ï¼Œå–å‡ºæ¥åæ”¾å…¥ç¼“å­˜ ä¸‹æ¬¡å†æ¥å–åŒæ ·ä¿¡æ¯æ—¶åˆ™å¯ç›´æ¥ä»ç¼“å­˜ä¸­è·å– ###ç¼“å­˜æ›´æ–°æµç¨‹ æ›´æ–°æ•°æ®åº“ ä½¿ç¼“å­˜è¿‡æœŸæˆ–å¤±æ•ˆï¼Œè¿™æ ·ä¼šä¿ƒä½¿ä¸‹æ¬¡æŸ¥è¯¢æ•°æ®æ—¶åœ¨ç¼“å­˜ä¸­æŸ¥ä¸åˆ°è€Œé‡æ–°ä»æ•°æ®åº“å»ä¸€æ¬¡ã€‚ ###é€šç”¨ç¼“å­˜æœºåˆ¶ ç”¨æŸ¥è¯¢çš„æ–¹æ³•å + å‚æ•°ä½œä¸ºæŸ¥è¯¢æ—¶çš„ key value å¯¹ä¸­çš„ key å€¼ å‘ memcache æˆ– redis ä¹‹ç±»çš„ nosql æ•°æ®åº“ï¼ˆæˆ–è€…å†…å­˜ hashmapï¼‰æ’å…¥æ•°æ®3ã€å–æ•°æ®æ—¶ä¹Ÿç”¨æ–¹æ³•å + å‚æ•°ä½œä¸º key å‘ç¼“å­˜æ•°æ®æºè·å–ä¿¡æ¯ã€‚ åº”ç”¨åœºæ™¯åˆ¤æ–­ç¼“å­˜æ˜¯å¦å­˜åœ¨dataList, err := dataRedis.Get(CacheKey).Result()if err == redis.Nil &#123; // ä¸å­˜åœ¨redis key return &quot;&quot;, false&#125; else if err != nil &#123; log.Errorf(&quot;Get cache err, cache_key: %s, error: %s&quot;, CacheKey, err) return &quot;&quot;, false&#125; else &#123; // ç¼“å­˜å€¼ä¸ºç©º if dataList == &quot;&quot; &#123; return &quot;&quot;, false &#125;&#125;return dataList, true å¯¹æ•°æ®åšå¤„ç†CacheKey := &quot;key&quot;Data, isTrue := isGetDataCache(CacheKey)if isTrue &#123; // ä»`redis`ä¸­è·å–æ•°æ®ç›´æ¥è¿”å› err := json.Unmarshal([]byte(Data), &amp;dataList) if err != nil &#123; log.Errorf(&quot;Json unmarshal datalist err:%s&quot;, err) return dataList &#125;&#125; else &#123; // ä»dbä¸­è·å–æ•°æ® dataList = GetDataWhere(&quot;`deleted`=0 order by sort limit ? offset ?&quot;, limit, offset) // æ›´æ–°redisç¼“å­˜ err := dataRedis.Set(CacheKey, xutil.ToJSONString(dataList), 1*time.Minute).Err() if err != nil &#123; log.Errorf(&quot;Set rediscache error:%s&quot;, err) return dataList &#125;&#125;return dataList æ€è€ƒå†™å…¥æ•°æ®æ˜¯å¦ç«‹åˆ»æ›´æ–°ç¼“å­˜å¦‚æœéœ€è¦ç«‹åˆ»æ›´æ–°ç¼“å­˜çš„è¯ï¼Œä½¿ç”¨ findAndModify è·å–æœ€æ–°ç»“æœå¹¶è®¾ç½®è¿›ç¼“å­˜ä¸­ï¼Œä½†è¿™å¸¦æ¥äº†ä¸€ä¸ªå¼Šç«¯ï¼Œæœ‰äº›å¹¶ä¸æ˜¯çƒ­æ•°æ®ï¼Œè¿™æ—¶å€™æ”¾è¿›äº† redis ä¼šå¯¼è‡´å ç”¨å†…å­˜ï¼Œå¦‚æœè®¾ç½®è¿‡å¿«ï¼Œredis å†…å­˜çš„ä½¿ç”¨é‡å¢é•¿å¾—éå¸¸å¿«ï¼›å¥½å¤„éœ€è¦ä¸å¦ä¸€ç§æ–¹å¼å¯¹æ¯”æ‰æ˜æ˜¾ï¼Œå¦ä¸€ç§æ–¹å¼æ˜¯å†™å…¥æ•°æ®åç«‹åˆ»åˆ æ‰è¯¥ç¼“å­˜ï¼Œç­‰å¾…æœ‰éœ€è¦æ‰å†åŠ è½½ç¼“å­˜ï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯ redis å ç”¨ç¼“å­˜ä¸ä¼šè¿‡é«˜ï¼Œæ€»æ˜¯ä¿ç•™ç€çƒ­æ•°æ®ï¼Œå¼Šç«¯å°±æ˜¯åŠ è½½ç¼“å­˜è¯»å–ä»åº“çš„æ•°æ®è¿˜æ˜¯æœªåŒæ­¥çš„ï¼Œè¿™æ ·å¯¼è‡´è„æ•°æ®ï¼Œæ‰€ä»¥å‰è€…çš„ç›´æ¥æ›´æ–°ä¿è¯äº†ä¸ä¼šæ˜¯è„æ•°æ®ã€‚è‡³äºé‡‡å–é‚£ç§æ–¹å¼ï¼Œè¦çœ‹ä½¿ç”¨åœºæ™¯ï¼Œå¦‚æœä¸éœ€è¦æœ€æ–°çš„æ•°æ®ï¼Œæœ€æ–¹ä¾¿æ˜¯åˆ é™¤æ‰è¯¥ç¼“å­˜å°±å¯ä»¥äº†ï¼Œå¦åˆ™å°±éœ€è¦ç«‹åˆ»æ›´æ–°ç¼“å­˜æ•°æ®ï¼Œå¦‚æœé”®æ•°é‡ç‰¹åˆ«å¤šçš„æƒ…å†µä¸‹ï¼Œå¯ä»¥è®¾ç½®è¿‡æœŸæ—¶é—´çŸ­ä¸€äº›ï¼Œå°½å¿«é‡Šæ”¾ redis çš„å†…å­˜å ç”¨ã€‚ è¯»å– Set å’Œ SortedSet æ•°æ®ç¼“å­˜å¤±æ•ˆé—®é¢˜è¿™ç§å¤§æ•°æ®é›†åˆï¼Œæ— æ³•å•ä¸ªæ“ä½œå°±å¯ä»¥åˆ¤æ–­å…¶ key å­˜åœ¨è¿˜æ˜¯è¯¥ key æ˜¯å¦æœ‰å€¼ã€‚é€šå¸¸éœ€è¦ä¸¤ä¸ªæ“ä½œï¼šåŠ è½½å’Œè·å–éœ€è¦çš„æ•°æ®ã€‚é—®é¢˜å°±å‡ºç°åœ¨åŠ è½½å’Œè·å–çš„é—´éš™ä¸­ï¼Œè¿™ä¸ªé—´éš™ç¼“å­˜åˆšå¥½è¿‡æœŸï¼Œå°±ä¼šå‡ºç°æ•°æ®é”™è¯¯çš„åæœï¼Œæˆ‘è§‰å¾—æœ€ä½³å®è·µæ˜¯è¿™æ ·: ä¿è¯åœ¨æœåŠ¡è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œè¿™äº›æ•°æ®é›†åˆä¸ä¼šç¼“å­˜è¿‡æœŸã€‚åƒæˆ‘ä»¬ä½¿ç”¨æ’è¡Œæ¦œçš„æ—¶å€™ç”¨åˆ°å¤§é‡äº† SortedSetï¼Œå½“æ—¶è®¾ç½®äº† 1 å¤©å°±è¿‡æœŸï¼Œè¿™æ ·å¯¼è‡´å‡ºç°æ’è¡Œæ¦œæ•°æ®å‡ºç°ä¸å…¨çš„é—®é¢˜ã€‚åˆå¦‚ Set ä¿å­˜ç€æ¯”èµ›åå•çš„æ•°æ®ï¼Œå‘ç° key æ˜¯å­˜åœ¨ï¼Œä¸å†åŠ è½½æ•°æ®ï¼Œå‡†å¤‡åˆ¤æ–­æŸä¸ªé¡¹æ˜¯å¦å­˜åœ¨è¯¥ set çš„æ—¶å€™ï¼Œè¿™ä¸ª set å°±è¿‡æœŸäº†ï¼Œç”¨sismemberå°±ä¼šè¿”å›Falseï¼Œå°±æ— æ³•åˆ¤æ–­è¿™ä¸ª False çš„æ„æ€æ˜¯è¯¥æ•°æ®é¡¹ä¸å­˜åœ¨è¯¥ set é‡Œé¢è¿˜æ˜¯è¯¥ set çš„ key å·²ç»è¿‡æœŸäº†ã€‚ åœ¨é¡¹ç›®ä¸­ Redis åšç¼“å­˜ é¦–å…ˆï¼Œå¯¹äºæ•°æ®ç¼“å­˜ä¸æ˜¯æ‰€æœ‰ä¸œè¥¿éƒ½ç¼“å­˜åˆ° redis å°±æ˜¯å¥½çš„ï¼Œè€Œæ˜¯è¦é’ˆå¯¹ä¸€äº›æ”¹åŠ¨ä¸å¤§æˆ–è€…è®¿é—®ç‡å¤§çš„æ•°æ®è¿›è¡Œç¼“å­˜æ¥å‡å°‘å…³ç³»å‹æ•°æ®åº“çš„å‹åŠ›ã€‚ redis ä½œä¸ºç¼“å­˜ä½¿ç”¨ï¼Œä¸ä½œæ•°æ®åº“ç”¨é€”ï¼Œéµå¾ªä»¥ä¸‹è§„åˆ™ï¼šå¦‚æœç¼“å­˜æ²¡æœ‰æ•°æ®ï¼Œå³åŠ è½½æ•°æ®åˆ°ç¼“å­˜ï¼Œå¹¶ä¼šè®¾ç½®è¿‡æœŸæ—¶é—´ã€‚ å‡¡æ˜¯å¯ä»¥ç”¨ String ä¿å­˜çš„ï¼Œå°½é‡å°†æ•°æ®ç”¨json.dumpsä¹‹åå†æ”¾è¿› Stringï¼Œå¦‚æœéœ€è¦ Set å’Œ SortedSet å°±éœ€è¦è­¦æƒ•ç¼“å­˜ key åˆšå¥½è¿‡æœŸæ—¶å€™ï¼Œä¼šæœ‰ä¸€å®šè¯»å–é”™è¯¯çš„é—®é¢˜ï¼Œè¿™ä¸ªæ— æ³•é¿å…ã€‚ å¯¹äºä¸€äº›ä¸åˆ†é¡µï¼Œä¸éœ€è¦å®æ—¶ï¼ˆéœ€è¦å¤šè¡¨æŸ¥è¯¢ï¼‰çš„åˆ—è¡¨ï¼Œæˆ‘ä»¬å¯ä»¥å°†åˆ—è¡¨ç»“æœç¼“å­˜åˆ° redis ä¸­ï¼Œè®¾å®šä¸€å®šç¼“å­˜æ—¶é—´ä½œä¸ºè¯¥æ•°æ®çš„å­˜æ´»æ—¶é—´ã€‚ç”¨è·å–è¯¥åˆ—è¡¨çš„æ–¹æ³•åä½œä¸º keyï¼Œåˆ—è¡¨ç»“æœä¸º valueï¼›è¿™ç§æƒ…å†µåªè¯•ç”¨äºä¸ç»å¸¸æ›´æ–°ä¸”ä¸éœ€è¦å®æ—¶çš„æƒ…å†µä¸‹ã€‚ ä¸éœ€è¦å®æ—¶çš„ï¼Œéœ€è¦åˆ†é¡µçš„åˆ—è¡¨ï¼šå¯ä»¥æŠŠåˆ†é¡µçš„ç»“æœåˆ—è¡¨æ”¾åˆ°ä¸€ä¸ª mapï¼ˆkey ä¸ºåˆ†é¡µæ ‡è¯†ï¼Œvalue ä¸ºåˆ†é¡µç»“æœï¼‰ä¸­ï¼Œç„¶åå°†è¯¥ map å­˜åˆ° redis çš„ list ä¸­ï¼ˆç”¨è¯¥æ–¹æ³•åä¸º keyï¼‰ã€‚ç„¶åç»™è¯¥ list è®¾ç½®ä¸€ä¸ªç¼“å­˜å­˜æ´»æ—¶é—´ï¼ˆç”¨ expireï¼‰ã€‚è¿™æ ·é€šè¿‡æ–¹æ³•å lrange å‡ºæ¥å°±èƒ½è·å–å­˜æœ‰åˆ†é¡µåˆ—è¡¨çš„æ•°æ®ï¼Œéå†è¯¥ listï¼Œé€šè¿‡éå† list ä¸­ map çš„ key åˆ¤æ–­è¯¥åˆ†é¡µæ•°æ®æ˜¯å¦åœ¨ç¼“å­˜å†…ï¼Œæ˜¯åˆ™è¿”å›ï¼Œä¸å­˜åœ¨åˆ™ rpush è¿›å»ã€‚è¿™ç§åšæ³•èƒ½è§£å†³æ¯”å¦‚ 1-5 é¡µçš„æ•°æ®å·²ç»é‡æ–°åŠ è½½ï¼Œè€Œ 6-10 é¡µçš„æ•°æ®ä¾ç„¶æ˜¯ç¼“å­˜çš„æ•°æ®è€Œå¯¼è‡´è„æ•°æ®çš„æƒ…å†µã€‚","tags":["Go","Redis"],"categories":["æŠ€æœ¯åŠ æ²¹ç«™"]},{"title":"Windows åˆ©å™¨ - babun","path":"/2018/babun-windows-tool.html","content":"ä»€ä¹ˆæ˜¯ babunbabun æ˜¯ windows ä¸Šçš„ä¸€ä¸ªç¬¬ä¸‰æ–¹ shellï¼Œåœ¨è¿™ä¸ª shell ä¸Šé¢ä½ å¯ä»¥ä½¿ç”¨å‡ ä¹æ‰€æœ‰ linuxï¼Œunix ä¸Šé¢çš„å‘½ä»¤ï¼Œä»–å‡ ä¹å¯ä»¥å–ä»£ windows çš„ shellã€‚ç”¨å®˜æ–¹çš„é¢˜ç›®è¯´å°±æ˜¯ A Windows shell you will love! babun çš„å‡ ä¸ªç‰¹ç‚¹ä½¿ç”¨ babun æ— éœ€ç®¡ç†å‘˜æƒé™å…ˆè¿›çš„å®‰è£…åŒ…ç®¡ç†å™¨ (ç±»ä¼¼äº linux ä¸Šé¢çš„ apt-get æˆ– yum)é¢„å…ˆé…ç½®äº† Cygwin å’Œå¾ˆå¤šæ’ä»¶æ‹¥æœ‰ 256 è‰²çš„å…¼å®¹æ§åˆ¶å°HTTP(S) çš„ä»£ç†æ”¯æŒé¢å‘æ’ä»¶çš„ä½“ç³»ç»“æ„å¯ä»¥ä½¿ç”¨å®ƒæ¥é…ç½®ä½ çš„ gité›†æˆäº† oh-my-zshè‡ªåŠ¨å‡çº§æ”¯æŒ shell ç¼–ç¨‹ï¼Œå†…ç½® VIM ç­‰ babun å®˜ç½‘é“¾æ¥ï¼š&lt;http://babun.github.io/&gt; ä»€ä¹ˆæ˜¯ cmdercmder æ˜¯ window ä¸‹çš„å¤šæ ‡ç­¾å‘½ä»¤è¡Œå·¥å…·ï¼Œå¯ä»¥æ–¹ä¾¿çš„æ–°å»º cmdã€cmd adminã€powershellã€powershell admin å¤šç§å‘½ä»¤è¡Œï¼Œè®¾ç½®å¾ˆå¤šï¼ŒåŠŸèƒ½å¼ºå¤§ã€‚ å®‰è£…cmder å®‰è£…ä¸‹è½½ï¼šhttp://cmder.net/ cmder æ˜¯å¼€ç®±å³ç”¨çš„è½¯ä»¶å°±ä¸åœ¨è¯¦è¿°äº†ï¼Œå…·ä½“ä½¿ç”¨å¯å‚è€ƒå®˜ç½‘è¯´æ˜ã€‚ babun å®‰è£…ä¸‹è½½ï¼šhttp://babun.github.io/ é»˜è®¤å®‰è£…ä¸‹è½½å®Œæˆä¹‹åè§£å‹ babunï¼Œç›´æ¥åŒå‡»ç›®å½•ä¸­ install.bat è„šæœ¬ (éœ€ç®¡ç†å‘˜æƒé™) è¿›è¡Œå®‰è£…ã€‚å‡ åˆ†é’Ÿä¹‹åè‡ªåŠ¨å®‰è£…å®Œæˆï¼Œé»˜è®¤ä¼šè¢«å®‰è£…åœ¨%userprofile%\\.babunç›®å½•ä¸‹ã€‚ è‡ªå®šä¹‰å®‰è£…ä½ç½®é€šè¿‡ cmd å‘½ä»¤è¡Œåœ¨æ‰§è¡Œ install.bat æ—¶æŒ‡å®šå‚æ•° &#x2F; t æˆ– &#x2F; target æŒ‡å®šå®‰è£…çš„ç›®å½•ã€‚ æ‰§è¡Œï¼šbabun.bat /t c:\\babun å®‰è£…å¥½ä¹‹åä¼šåœ¨ c:\\babun ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ª. babun çš„ç›®å½•ï¼Œbabun æ‰€æœ‰æ–‡ä»¶éƒ½åœ¨è¿™ä¸ªç›®å½•ä¸­ã€‚æ³¨æ„å®‰è£…ç›®å½•æœ€å¥½ä¸è¦æœ‰ç©ºæ ¼ï¼Œè¿™æ˜¯ cygwin è¦æ±‚çš„ã€‚ æµ‹è¯•å®‰è£…æˆåŠŸå®‰è£…å®Œæ¯•åï¼Œä¸€èˆ¬éœ€è¦ä»¥ä¸‹ä¸¤ä¸ªå‘½ä»¤æ£€æŸ¥ babun check(ç”¨äºåˆ¤æ–­ç¯å¢ƒæ˜¯å¦æ­£ç¡®)babun update(ç”¨äºåˆ¤æ–­æ˜¯å¦æœ‰æ–°çš„æ›´æ–°åŒ…) babun ä¸»è¦é…ç½®ä¸»é¢˜é…ç½® å­—ä½“ä¸‹è½½ï¼ˆä¸å®‰è£…ä¼šä¹±ç ï¼‰ # clone(å…‹éš†git)git clone https://github.com/powerline/fonts.git --depth=1# install(è¿è¡Œå®‰è£…è„šæœ¬)cd fonts./install.sh# clean-up a bit(æ¸…æ¥šå…‹éš†gitæ–‡ä»¶)_cd ..rm -rf fonts å®‰è£… [åœ¨~\\.local\\share\\fontsç›®å½•ä¸‹æ‰¾åˆ°DejaVu Sans Mono for Powerlineå­—ä½“] æŠŠZSH_THEME=â€babunâ€è®¾ç½®ä¸ºZSH_THEME=â€agnosterâ€ï¼ˆè¯¦æƒ…å‚è€ƒ.zshrcé…ç½®ï¼‰ ä¿®æ”¹~/.minttyrc # open ~/.minttyrcvi ~/.minttyrc# æŠŠä¸‹é¢è¿™æ®µå¤åˆ¶ç²˜è´´è¿›å»BoldAsFont=noColumns=90Rows=55Font=DejaVu Sans Mono for PowerlineFontHeight=10Transparency=lowForegroundColour=248,248,242BackgroundColour=27,29,30CursorColour=160,160,160Black=249,38,114Red=249,38,114Green=130,180,20Yellow=253,151,31Blue=38,139,210Magenta=140,84,254Cyan=86,194,214White=204,204,198BoldRed=255,89,149BoldBlack=80,83,84BoldGreen=183,235,70BoldYellow=254,237,108BoldBlue=98,173,227BoldMagenta=191,160,254BoldCyan=148,216,229BoldWhite=248,248,242Scrollbar=none babun æ’ä»¶å®‰è£…zsh-syntax-highlighting &amp;&amp; zsh-autosuggestionscd ~/.oh-my-zsh/custom/pluginsgit clone git://github.com/zsh-users/zsh-syntax-highlighting.gitgit clone git://github.com/zsh-users/zsh-autosuggestionsvi ~/.zshrc # add below to ~/.zshrcplugins=(zsh-syntax-highlighting zsh-autosuggestions) source ~/.zshrc or src autojumpcd ~/.oh-my-zsh/custom/pluginsgit clone git://github.com/joelthelion/autojump.gitcd autojump./install.pyvi ~/.zshrc # add below to ~/.zshrc[[ -s ~/.autojump/etc/profile.d/autojump.sh ]] &amp;&amp; . ~/.autojump/etc/profile.d/autojump.shautoload -U compinit &amp;&amp; compinit -u ç„¶åå®šä½åˆ° plugins&#x3D;(git) çš„ä½ç½®ï¼Œå°†å…¶ä¿®æ”¹æˆï¼š plugins=(git autojump) .zshrcé…ç½®# Path to your oh-my-zsh installation.export ZSH=$HOME/.oh-my-zsh# Set name of the theme to load.# Look in ~/.oh-my-zsh/themes/ZSH_THEME=&quot;agnoster&quot;# DEFAULT_USER=&quot;$USER&quot;# Uncomment the following line if you want to disable marking untracked files# under VCS as dirty. This makes repository status check for large repositories# much, much faster.# DISABLE_UNTRACKED_FILES_DIRTY=&quot;true&quot;# The optional three formats: &quot;mm/dd/yyyy&quot;|&quot;dd.mm.yyyy&quot;|&quot;yyyy-mm-dd&quot;HIST_STAMPS=&quot;yyyy-mm-dd&quot;# Would you like to use another custom folder than $ZSH/custom?# ZSH_CUSTOM=/path/to/new-custom-folder# Which plugins would you like to load? (plugins can be found in ~/.oh-my-zsh/plugins/*)# Custom plugins may be added to ~/.oh-my-zsh/custom/plugins/# Example format: plugins=(rails git textmate ruby lighthouse)# Add wisely, as too many plugins slow down shell startup.plugins=(git autojump sh-autosuggestions zsh-syntax-highlighting wd web-search history history-substring-search)[[ -s ~/.autojump/etc/profile.d/autojump.sh ]] &amp;&amp; . ~/.autojump/etc/profile.d/autojump.shautoload -U compinit &amp;&amp; compinit -usource ~/.bash_profile# Load zsh-syntax-highlighting.source ~/.oh-my-zsh/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh## Load zsh-autosuggestions.source ~/.oh-my-zsh/plugins/zsh-autosuggestions/zsh-autosuggestions.zsh# User configurationexport PATH=$HOME/bin:/usr/local/bin:$PATH# export MANPATH=&quot;/usr/local/man:$MANPATH&quot;source $ZSH/oh-my-zsh.sh# Compilation flags# export ARCHFLAGS=&quot;-arch x86_64&quot;# ssh# export SSH_KEY_PATH=&quot;~/.ssh/dsa_id&quot;# Example aliasesalias zshconfig=&quot;mate ~/.zshrc&quot;alias ohmyzsh=&quot;mate ~/.oh-my-zsh&quot;alias cls=&#x27;clear&#x27;alias mysql=&#x27;/usr/local/opt/mysql/bin/mysql&#x27;alias mysqladmin=&#x27;/usr/local/opt/mysql/bin/mysqladmin&#x27;alias rake=&#x27;noglob rake&#x27;alias code=&quot;/Applications/Visual\\ Studio\\ Code.app/Contents/Resources/app/bin/code&quot;alias vi=&quot;vim&quot;alias vim=&quot;vim&quot;alias tmux=&quot;tmux -2&quot;alias ssh=&quot;ssh -X&quot;alias s=&quot;ssh -X&quot;alias md=&quot;mkdir -p&quot;alias rd=&quot;rmdir&quot;alias df=&quot;df -h&quot;alias mv=&quot;mv -i&quot;alias slink=&quot;link -s&quot;alias sed=&quot;sed -E&quot;alias l=&quot;ls -l&quot;alias la=&quot;ls -a&quot;alias ll=&quot;ls -la&quot;alias lt=&quot;ls -lhtrF&quot;alias l.=&quot;ls -lhtrdF .*&quot;alias grep=&quot;grep --color=auto&quot;alias cd..=&quot;cd ..&quot;alias cd...=&quot;cd ../..&quot;alias cd....=&quot;cd ../../..&quot;alias ..=&quot;cd ..&quot;alias ...=&quot;cd ../..&quot;alias ....=&quot;cd ../../..&quot;alias zb=&quot;cat /dev/urandom | hexdump -C | grep --color=auto \\&quot;ca fe\\&quot;&quot;alias mtr=&quot;/usr/local/sbin/mtr&quot;alias gs=&quot;git status&quot;alias gsm=&quot;git summary&quot;alias ga=&#x27;git add&#x27;alias gd=&#x27;git diff&#x27;alias gf=&#x27;git fetch&#x27;alias grv=&#x27;git remote -v&#x27;alias grb=&#x27;git rebase&#x27;alias gbr=&#x27;git branch&#x27;alias gpl=&quot;git pull&quot;alias gps=&quot;git push&quot;alias gco=&quot;git checkout&quot;alias gl=&quot;git log&quot;alias gc=&quot;git commit -m&quot;alias gm=&quot;git merge&quot;alias pro=&quot;proxychains4&quot;alias gb=&quot;go build&quot;alias -s go=vialias -s html=vialias -s rb=vialias -s py=vialias -s txt=vialias -s ex=vialias -s exs=vialias -s js=vialias -s json=vialias qas01=&#x27;ssh root@123.59.56.118 -p38390&#x27;alias rdp01=&#x27;ssh lei.li@rdp01.xiaoenai.net -p38390&#x27;alias rdp=&#x27;ssh lei.li@rdp01.xiaoenai.net -p38390&#x27;_COLUMNS=$(tput cols)_MESSAGE=&quot; FBI Warining &quot;y=$(( ( $_COLUMNS - $&#123;#_MESSAGE&#125; ) / 2 ))spaces=$(printf &quot;%-$&#123;y&#125;s&quot; &quot; &quot;)echo &quot; &quot;echo -e &quot;$&#123;spaces&#125;\\033[41;37;5m FBI WARNING \\033[0m&quot;echo &quot; &quot;_COLUMNS=$(tput cols)_MESSAGE=&quot;Ferderal Law provides severe civil and criminal penalties for&quot;y=$(( ( $_COLUMNS - $&#123;#_MESSAGE&#125; ) / 2 ))spaces=$(printf &quot;%-$&#123;y&#125;s&quot; &quot; &quot;)echo -e &quot;$&#123;spaces&#125;$&#123;_MESSAGE&#125;&quot;_COLUMNS=$(tput cols)_MESSAGE=&quot;the unauthorized reproduction, distribution, or exhibition of&quot;y=$(( ( $_COLUMNS - $&#123;#_MESSAGE&#125; ) / 2 ))spaces=$(printf &quot;%-$&#123;y&#125;s&quot; &quot; &quot;)echo -e &quot;$&#123;spaces&#125;$&#123;_MESSAGE&#125;&quot;_COLUMNS=$(tput cols)_MESSAGE=&quot;copyrighted motion pictures (Title 17, United States Code,&quot;y=$(( ( $_COLUMNS - $&#123;#_MESSAGE&#125; ) / 2 ))spaces=$(printf &quot;%-$&#123;y&#125;s&quot; &quot; &quot;)echo -e &quot;$&#123;spaces&#125;$&#123;_MESSAGE&#125;&quot;_COLUMNS=$(tput cols)_MESSAGE=&quot;Sections 501 and 508). The Federal Bureau of Investigation&quot;y=$(( ( $_COLUMNS - $&#123;#_MESSAGE&#125; ) / 2 ))spaces=$(printf &quot;%-$&#123;y&#125;s&quot; &quot; &quot;)echo -e &quot;$&#123;spaces&#125;$&#123;_MESSAGE&#125;&quot;_COLUMNS=$(tput cols)_MESSAGE=&quot;investigates allegations of criminal copyright infringement&quot;y=$(( ( $_COLUMNS - $&#123;#_MESSAGE&#125; ) / 2 ))spaces=$(printf &quot;%-$&#123;y&#125;s&quot; &quot; &quot;)echo -e &quot;$&#123;spaces&#125;$&#123;_MESSAGE&#125;&quot;_COLUMNS=$(tput cols)_MESSAGE=&quot;(Title 17, United States Code, Section 506).&quot;y=$(( ( $_COLUMNS - $&#123;#_MESSAGE&#125; ) / 2 ))spaces=$(printf &quot;%-$&#123;y&#125;s&quot; &quot; &quot;)echo -e &quot;$&#123;spaces&#125;$&#123;_MESSAGE&#125;&quot;echo &quot; &quot;","tags":["Windows","Shell"],"categories":["å®‰åˆ©ç³»åˆ—"]},{"title":"Python ä¹‹æ­£åˆ™è¡¨è¾¾å¼","path":"/2018/python-regular-expression.html","content":"1. ä»€ä¹ˆæ˜¯æ­£åˆ™è¡¨è¾¾å¼æ­£åˆ™è¡¨è¾¾å¼ï¼šä¹Ÿæˆä¸ºè§„åˆ™è¡¨è¾¾å¼ï¼Œè‹±æ–‡åç§° Regular Expressionï¼Œæˆ‘ä»¬åœ¨ç¨‹åºä¸­ç»å¸¸ä¼šç¼©å†™ä¸º regex æˆ–è€… regexpï¼Œä¸“é—¨ç”¨äºè¿›è¡Œæ–‡æœ¬æ£€ç´¢ã€åŒ¹é…ã€æ›¿æ¢ç­‰æ“ä½œçš„ä¸€ç§æŠ€æœ¯ã€‚æ³¨æ„ï¼šæ­£åˆ™è¡¨è¾¾å¼æ˜¯ä¸€ç§ç‹¬ç«‹çš„æŠ€æœ¯ï¼Œå¹¶ä¸æ˜¯æŸç¼–ç¨‹è¯­è¨€ç‹¬æœ‰çš„ æ­£åˆ™è¡¨è¾¾å¼ï¼Œæ˜¯ä¸€ç§ç‰¹æ®Šçš„ç¬¦å·ï¼Œè¿™æ ·çš„ç¬¦å·æ˜¯éœ€è¦è§£é‡Šæ‰èƒ½ä½¿ç”¨çš„ï¼Œä¹Ÿå°±æ˜¯éœ€è¦æ­£åˆ™è¡¨è¾¾å¼å¼•æ“æ¥è¿›è¡Œè§£é‡Šï¼Œç›®å‰æ­£åˆ™è¡¨è¾¾å¼çš„å¼•æ“ä¸»è¦åˆ†ä¸‰ç§ï¼šDFAï¼ŒNFAã€POSIX NFAï¼Œæœ‰å…´è¶£äº†æ­£åˆ™è¡¨è¾¾å¼å¼•æ“çš„ç«¥é‹ï¼Œå¯ä»¥è‡ªå·±æŸ¥çœ‹èµ„æ–™ 2. æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•ç»“æ„æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¼€å§‹äº†è§£è¿™æ ·ä¸€ä¸ªç¥ç§˜çš„å¯ä»¥ç±»ä¼¼äººç±»ç¥ç»ç½‘ç»œä¸€æ ·æ€è€ƒé—®é¢˜çš„æŠ€æœ¯çš„è¯­æ³•ç»“æ„ã€‚æ³¨æ„ï¼šæˆ‘ä»¬é€šè¿‡ python ç¨‹åºè¿›è¡Œæµ‹è¯•ï¼Œä½†æ˜¯æ­£åˆ™è¡¨è¾¾å¼çš„è¯­æ³•ç»“æ„åœ¨å„ç§è¯­è¨€ç¯å¢ƒä¸­éƒ½æ˜¯é€šç”¨çš„ã€‚ 2.1. å…¥é—¨æ¡ˆä¾‹ï¼šäº†è§£æ­£åˆ™è¡¨è¾¾å¼æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€å•çš„æ¡ˆä¾‹å…¥æ‰‹ï¼šé€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šéªŒè¯ç”¨æˆ·è¾“å…¥çš„æ‰‹æœºå·ç æ˜¯å¦åˆæ³•ï¼Œæ˜¯å¦ 156&#x2F;186&#x2F;188 å¼€å¤´çš„æ‰‹æœºå·ç ï¼Œå¦‚æœæŒ‰ç…§å¸¸è§„éªŒè¯æ‰‹æ®µï¼Œå°±éœ€è¦å¯¹å­—ç¬¦ä¸²è¿›è¡Œæ‹†åˆ†å¤„ç†ï¼Œç„¶åé€æ­¥åŒ¹é… é‡è¦æç¤ºï¼špython ä¸­æä¾›äº†reæ¨¡å—ï¼ŒåŒ…å«äº†æ­£åˆ™è¡¨è¾¾å¼çš„æ‰€æœ‰åŠŸèƒ½ï¼Œä¸“é—¨ç”¨äºè¿›è¡Œæ­£åˆ™è¡¨è¾¾å¼çš„å¤„ç†ï¼› æˆ‘ä»¬é¦–å…ˆçœ‹ä¸€ä¸‹ï¼Œå¸¸è§„çš„æ‰‹æœºå·ç éªŒè¯è¿‡ç¨‹ userphone = input(&quot;è¯·è¾“å…¥æ‰‹æœºå·ç ï¼š&quot;)# éªŒè¯ç”¨æˆ·æ‰‹æœºå·ç æ˜¯å¦åˆæ³•çš„å‡½æ•°def validatePhone(phone): msg = &quot;æç¤ºä¿¡æ¯ï¼šè¯·è¾“å…¥æ‰‹æœºå·ç &quot; # åˆ¤æ–­è¾“å…¥çš„å­—ç¬¦çš„é•¿åº¦æ˜¯å¦åˆæ³• if len(phone) == 11: # åˆ¤æ–­æ˜¯å¦156/186/188å¼€å¤´ if phone.startswith(&quot;156&quot;) or phone.startswith(&quot;186&quot;) or phone.startswith(&quot;188&quot;): # åˆ¤æ–­æ¯ä¸€ä¸ªå­—ç¬¦éƒ½æ˜¯æ•°å­— for num in phone: # isdigit()å‡½æ•°ç”¨äºåˆ¤æ–­è°ƒç”¨è€…æ˜¯å¦æ•°å­— if not num.isdigit(): msg = &quot;ä¸èƒ½åŒ…å«éæ³•å­—ç¬¦&quot; return msg msg = &quot;æ‰‹æœºå·ç åˆæ³•&quot; else: msg = &quot;å¼€å¤´æ•°å­—ä¸åˆæ³•&quot; else: msg = &quot;é•¿åº¦ä¸åˆæ³•&quot; return msg# å¼€å§‹æµ‹è¯•print(validatePhone(userphone)) æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œåˆ†åˆ«è¾“å…¥ä¸åŒçš„æ‰‹æœºå·ç ï¼Œç»“æœå¦‚ä¸‹ è¯·è¾“å…¥æ‰‹æœºå·ç ï¼š188é•¿åº¦ä¸åˆæ³• è¯·è¾“å…¥æ‰‹æœºå·ç ï¼š15568686868å¼€å¤´æ•°å­—ä¸åˆæ³• è¯·è¾“å…¥æ‰‹æœºå·ç ï¼š1566868686aä¸èƒ½åŒ…å«éæ³•å­—ç¬¦ è¯·è¾“å…¥æ‰‹æœºå·ç ï¼š15688888888æ‰‹æœºå·ç åˆæ³• æˆ‘ä»¬å†æ¬¡ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥æ”¹é€ è¿™æ®µç¨‹åºæ³¨æ„ï¼šå¦‚æœä¸‹é¢çš„ç¨‹åºä¸­å‡ºç°äº†ä¸€äº›è¯­æ³•ä¸æ˜¯å¾ˆæ˜ç™½ï¼Œæ²¡å…³ç³»ï¼Œåé¢ä¼šè¯¦ç»†è®²è§£ import re# æ¥æ”¶ç”¨æˆ·è¾“å…¥userphone = input(&quot;è¯·è¾“å…¥æ‰‹æœºå·ç &quot;)# å®šä¹‰éªŒè¯æ‰‹æœºå·ç çš„å‡½æ•°def validatePhone(phone): # å®šä¹‰æ­£åˆ™è¡¨è¾¾å¼ï¼ŒPythonä¸­çš„æ­£åˆ™è¡¨è¾¾å¼è¿˜æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ˜¯ä»¥rå¼€å¤´çš„å­—ç¬¦ä¸² regexp = r&quot;^(156|186|188)\\d&#123;8&#125;$&quot; # å¼€å§‹éªŒè¯ if re.match(regexp, phone): return &quot;æ‰‹æœºå·ç åˆæ³•&quot; else: return &quot;æ‰‹æœºå·ç åªèƒ½156/186/188å¼€å¤´ï¼Œå¹¶ä¸”æ¯ä¸€ä¸ªå­—ç¬¦éƒ½æ˜¯æ•°å­—ï¼Œè¯·æ£€æŸ¥&quot;# å¼€å§‹éªŒè¯print(validatePhone(userphone)) æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œæˆ‘ä»¬å¾—åˆ°æ­£å¸¸éªŒè¯çš„ç»“æœï¼Œå¤§å®¶å¯ä»¥è‡ªå·±è¯•ä¸€è¯•ã€‚æˆ‘ä»¬ä»è¿™ä¸¤å¥—ä»£ç ä¸­ï¼Œå¯ä»¥çœ‹å‡ºæ¥ï¼Œä½¿ç”¨äº†æ­£åˆ™è¡¨è¾¾å¼ä¹‹åçš„ç¨‹åºå˜å¾—éå¸¸ç®€æ´äº†ï¼Œé‚£ä¿æŒå¥½ä½ çš„å†²åŠ¨å’Œçƒ­æƒ…ï¼Œè®©æ­£åˆ™è¡¨è¾¾å¼æ¥æäº‹å§ 2.3. python ä¸­çš„æ­£åˆ™è¡¨è¾¾å¼æ¨¡å— repython æä¾›çš„æ­£åˆ™è¡¨è¾¾å¼å¤„ç†æ¨¡å— reï¼Œæä¾›äº†å„ç§æ­£åˆ™è¡¨è¾¾å¼çš„å¤„ç†å‡½æ•° 2.3.1 å­—ç¬¦ä¸²æŸ¥è¯¢åŒ¹é…çš„å‡½æ•°ï¼š å‡½æ•° æè¿° re.match(reg, info) ç”¨äºåœ¨å¼€å§‹ä½ç½®åŒ¹é…ç›®æ ‡å­—ç¬¦ä¸² info ä¸­ç¬¦åˆæ­£åˆ™è¡¨è¾¾å¼ reg çš„å­—ç¬¦ï¼ŒåŒ¹é…æˆåŠŸä¼šè¿”å›ä¸€ä¸ª match å¯¹è±¡ï¼ŒåŒ¹é…ä¸æˆåŠŸè¿”å› None re.search(reg, info) æ‰«ææ•´ä¸ªå­—ç¬¦ä¸² infoï¼Œä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ reg è¿›è¡ŒåŒ¹é…ï¼ŒåŒ¹é…æˆåŠŸè¿”å›åŒ¹é…çš„ç¬¬ä¸€ä¸ª match å¯¹è±¡ï¼ŒåŒ¹é…ä¸æˆåŠŸè¿”å› None re.findall(reg, info) æ‰«ææ•´ä¸ªå­—ç¬¦ä¸² infoï¼Œå°†ç¬¦åˆæ­£åˆ™è¡¨è¾¾å¼ reg çš„å­—ç¬¦å…¨éƒ¨æå–å‡ºæ¥å­˜æ”¾åœ¨åˆ—è¡¨ä¸­è¿”å› re.fullmatch(reg, info) æ‰«ææ•´ä¸ªå­—ç¬¦ä¸²ï¼Œå¦‚æœæ•´ä¸ªå­—ç¬¦ä¸²éƒ½åŒ…å«åœ¨æ­£åˆ™è¡¨è¾¾å¼è¡¨ç¤ºçš„èŒƒå›´ä¸­ï¼Œè¿”å›æ•´ä¸ªå­—ç¬¦ä¸²ï¼Œå¦åˆ™è¿”å› None re.finditer(reg, info) æ‰«ææ•´ä¸ªå­—ç¬¦ä¸²ï¼Œå°†åŒ¹é…åˆ°çš„å­—ç¬¦ä¿å­˜åœ¨ä¸€ä¸ªå¯ä»¥éå†çš„åˆ—è¡¨ä¸­ å‚è€ƒå®˜æ–¹ re.py æºä»£ç å¦‚ä¸‹ï¼š def match(pattern, string, flags=0): &quot;&quot;&quot;Try to apply the pattern at the start of the string, returning a match object, or None if no match was found.&quot;&quot;&quot; return _compile(pattern, flags).match(string)def fullmatch(pattern, string, flags=0): &quot;&quot;&quot;Try to apply the pattern to all of the string, returning a match object, or None if no match was found.&quot;&quot;&quot; return _compile(pattern, flags).fullmatch(string)def search(pattern, string, flags=0): &quot;&quot;&quot;Scan through string looking for a match to the pattern, returning a match object, or None if no match was found.&quot;&quot;&quot; return _compile(pattern, flags).search(string)def findall(pattern, string, flags=0): &quot;&quot;&quot;Return a list of all non-overlapping matches in the string. If one or more capturing groups are present in the pattern, return a list of groups; this will be a list of tuples if the pattern has more than one group. Empty matches are included in the result.&quot;&quot;&quot; return _compile(pattern, flags).findall(string)def finditer(pattern, string, flags=0): &quot;&quot;&quot;Return an iterator over all non-overlapping matches in the string. For each match, the iterator returns a match object. Empty matches are included in the result.&quot;&quot;&quot; return _compile(pattern, flags).finditer(string) 2.3.2 å­—ç¬¦ä¸²æ‹†åˆ†æ›¿æ¢çš„å‡½æ•°ï¼š å‡½æ•° æè¿° re.split(reg, string) ä½¿ç”¨æŒ‡å®šçš„æ­£åˆ™è¡¨è¾¾å¼ reg åŒ¹é…çš„å­—ç¬¦ï¼Œå°†å­—ç¬¦ä¸² string æ‹†åˆ†æˆä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨ï¼Œå¦‚ï¼šre.split(râ€\\s+â€, info)ï¼Œè¡¨ç¤ºä½¿ç”¨ä¸€ä¸ªæˆ–è€…å¤šä¸ªç©ºç™½å­—ç¬¦å¯¹å­—ç¬¦ä¸² info è¿›è¡Œæ‹†åˆ†ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ‹†åˆ†åçš„å­—ç¬¦ä¸²åˆ—è¡¨ re.sub(reg, repl, string) ä½¿ç”¨æŒ‡å®šçš„å­—ç¬¦ä¸² repl æ¥æ›¿æ¢ç›®æ ‡å­—ç¬¦ä¸² string ä¸­åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼ reg çš„å­—ç¬¦ å‚è€ƒå®˜æ–¹æºä»£ç å¦‚ä¸‹ï¼š def split(pattern, string, maxsplit=0, flags=0): &quot;&quot;&quot;Split the source string by the occurrences of the pattern, returning a list containing the resulting substrings. If capturing parentheses are used in pattern, then the text of all groups in the pattern are also returned as part of the resulting list. If maxsplit is nonzero, at most maxsplit splits occur, and the remainder of the string is returned as the final element of the list.&quot;&quot;&quot; return _compile(pattern, flags).split(string, maxsplit)def sub(pattern, repl, string, count=0, flags=0): &quot;&quot;&quot;Return the string obtained by replacing the leftmost non-overlapping occurrences of the pattern in string by the replacement repl. repl can be either a string or a callable; if a string, backslash escapes in it are processed. If it is a callable, it&#x27;s passed the match object and must return a replacement string to be used.&quot;&quot;&quot; return _compile(pattern, flags).sub(repl, string, count) æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¿›å…¥æ­£åˆ™è¡¨è¾¾å¼å¹²è´§éƒ¨åˆ† 2.4. æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„å…ƒå­—ç¬¦åœ¨ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼çš„è¿‡ç¨‹ä¸­ï¼Œä¸€äº›åŒ…å«ç‰¹æ®Šå«ä¹‰çš„å­—ç¬¦ï¼Œç”¨äºè¡¨ç¤ºå­—ç¬¦ä¸²ä¸­ä¸€äº›ç‰¹æ®Šçš„ä½ç½®ï¼Œéå¸¸é‡è¦ï¼Œæˆ‘ä»¬å…ˆç®€å•äº†è§£ä¸€ä¸‹ä¸€äº›å¸¸ç”¨çš„å…ƒå­—ç¬¦ å…ƒå­—ç¬¦ æè¿° ^ è¡¨ç¤ºåŒ¹é…å­—ç¬¦ä¸²çš„å¼€å¤´ä½ç½®çš„å­—ç¬¦ $ è¡¨ç¤ºåŒ¹é…å­—ç¬¦ä¸²çš„ç»“æŸä½ç½®çš„å­—ç¬¦ . è¡¨ç¤ºåŒ¹é…ä»»æ„ä¸€ä¸ªå­—ç¬¦ \\d åŒ¹é…ä¸€ä¸ªæ•°å­—å­—ç¬¦ \\D åŒ¹é…ä¸€ä¸ªéæ•°å­—å­—ç¬¦ \\s åŒ¹é…ä¸€ä¸ªç©ºç™½å­—ç¬¦ \\S åŒ¹é…ä¸€ä¸ªéç©ºç™½å­—ç¬¦ \\w åŒ¹é…ä¸€ä¸ªæ•°å­— &#x2F; å­—æ¯ &#x2F; ä¸‹åˆ’çº¿ä¸­ä»»æ„ä¸€ä¸ªå­—ç¬¦ \\W åŒ¹é…ä¸€ä¸ªéæ•°å­—å­—æ¯ä¸‹åˆ’çº¿çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ \\b åŒ¹é…ä¸€ä¸ªå•è¯çš„è¾¹ç•Œ \\B åŒ¹é…ä¸æ˜¯å•è¯çš„å¼€å¤´æˆ–è€…ç»“æŸä½ç½® ä¸Šå¹²è´§ï¼šä»£ç æ¡ˆä¾‹ # å¯¼å…¥æ­£åˆ™è¡¨è¾¾å¼æ¨¡å—import re# å®šä¹‰æµ‹è¯•æ–‡æœ¬å­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬åç»­åœ¨è¿™æ®µæ–‡æœ¬ä¸­æŸ¥è¯¢æ•°æ®msg1 = &quot;&quot;&quot;Python is an easy to learn, powerful programming language.It has efficient high-level data structures and a simple but effective approach to object-oriented programming.Pythonâ€™s elegant syntax and dynamic typing, together with its interpreted nature, make it an ideal language for scripting and rapid application development in many areas on most platforms.&quot;&quot;&quot;msg2 = &quot;hello&quot;msg3 = &quot;hello%&quot;# å®šä¹‰æ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒ¹é…å­—ç¬¦ä¸²å¼€å¤´æ˜¯å¦ä¸ºpythonregStart = r&quot;efficient&quot;# ä»å­—ç¬¦ä¸²å¼€å§‹ä½ç½®åŒ¹é…ï¼Œæ˜¯å¦åŒ…å«ç¬¦åˆæ­£åˆ™è¡¨è¾¾å¼çš„å†…å®¹ï¼Œè¿”å›åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²çš„Matchå¯¹è±¡print(re.match(regStart, msg1))# æ‰«ææ•´ä¸ªå­—ç¬¦ä¸²ï¼Œæ˜¯å¦åŒ…å«ç¬¦åˆæ­£åˆ™è¡¨è¾¾å¼çš„å†…å®¹ï¼Œè¿”å›åŒ¹é…åˆ°çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²çš„Matchå¯¹è±¡print(re.search(regStart, msg1))# æ‰«ææ•´ä¸ªå­—ç¬¦ä¸²ï¼Œæ˜¯å¦åŒ…å«ç¬¦åˆæ­£åˆ™è¡¨è¾¾å¼çš„å†…å®¹ï¼Œè¿”å›åŒ¹é…åˆ°çš„æ‰€æœ‰å­—ç¬¦ä¸²åˆ—è¡¨print(re.findall(regStart, msg1))# æ‰«ææ•´ä¸ªå­—ç¬¦ä¸²ï¼Œæ˜¯å¦åŒ…å«ç¬¦åˆæ­£åˆ™è¡¨è¾¾å¼çš„å†…å®¹ï¼Œè¿”å›åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²çš„è¿­ä»£å¯¹è±¡for r in re.finditer(regStart, msg1): print(&quot;-&gt;&quot;+ r.group())# æ‰«ææ•´ä¸ªå­—ç¬¦ä¸²ï¼Œæ˜¯å¦åŒ…å«åœ¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„å†…å®¹ä¸­ï¼Œæ˜¯åˆ™è¿”å›æ•´ä¸ªå­—ç¬¦ä¸²ï¼Œå¦åˆ™è¿”å›Noneprint(re.fullmatch(r&quot;\\w*&quot;, msg2))print(re.fullmatch(r&quot;\\w*&quot;, msg3)) ä¸Šè¿°ä»£ç æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š ~ None~&lt;sre.SRE_Match object; span&#x3D;(66, 75), match&#x3D;â€™efficientâ€™&gt;~[â€˜efficientâ€™]~-&gt;efficient~&lt;sre.SRE_Match object; span&#x3D;(0, 5), match&#x3D;â€™helloâ€™&gt;~None 2.5. æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„é‡è¯æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„é‡è¯ï¼Œæ˜¯ç”¨äºé™å®šæ•°é‡çš„ç‰¹æ®Šå­—ç¬¦ é‡è¯ æè¿° x* ç”¨äºåŒ¹é…ç¬¦å· * å‰é¢çš„å­—ç¬¦å‡ºç° 0 æ¬¡æˆ–è€…å¤šæ¬¡ x+ ç”¨äºåŒ¹é…ç¬¦å· + å‰é¢çš„å­—ç¬¦å‡ºç° 1 æ¬¡æˆ–è€…å¤šæ¬¡ xï¼Ÿ ç”¨äºåŒ¹é…ç¬¦å·ï¼Ÿå‰é¢çš„å­—ç¬¦å‡ºç° 0 æ¬¡æˆ–è€… 1 æ¬¡ x{n} ç”¨äºåŒ¹é…ç¬¦å· {n} å‰é¢çš„å­—ç¬¦å‡ºç° n æ¬¡ x{m,n} ç”¨äºåŒ¹é…ç¬¦å· {m,n} å‰é¢çš„å­—ç¬¦å‡ºç°è‡³å°‘ m æ¬¡ï¼Œæœ€å¤š n æ¬¡ x{n,} ç”¨äºåŒ¹é…ç¬¦å· {n,} å‰é¢çš„å­—ç¬¦å‡ºç°è‡³å°‘ n æ¬¡ æ¥ä¸Šä»£ç å¹²è´§ï¼š # å¯¼å…¥æ­£åˆ™è¡¨è¾¾å¼æ¨¡å—import re# å®šä¹‰æµ‹è¯•æ–‡æœ¬å­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬åç»­åœ¨è¿™æ®µæ–‡æœ¬ä¸­æŸ¥è¯¢æ•°æ®msg1 = &quot;&quot;&quot;goodgoodstudy!,dooodooooup&quot;&quot;&quot;# åŒ¹é…ä¸€æ®µå­—ç¬¦ä¸²ä¸­å‡ºç°å•è¯oå­—ç¬¦0æ¬¡æˆ–è€…å¤šæ¬¡çš„æƒ…å†µprint(re.findall(r&quot;o*&quot;, msg1))# åŒ¹é…ä¸€æ®µå­—ç¬¦ä¸²ä¸­å‡ºç°å•è¯oå­—ç¬¦1æ¬¡æˆ–è€…å¤šæ¬¡çš„æƒ…å†µprint(re.findall(r&quot;o+&quot;, msg1))# åŒ¹é…ä¸€æ®µå­—ç¬¦ä¸²ä¸­å‡ºç°å•è¯oå­—ç¬¦0æ¬¡æˆ–è€…1æ¬¡çš„æƒ…å†µprint(re.findall(r&quot;o?&quot;, msg1))# åŒ¹é…å­—ç¬¦ä¸²ä¸­è¿ç»­å‡ºç°2æ¬¡å­—ç¬¦oçš„æƒ…å†µprint(re.findall(r&quot;o&#123;2&#125;&quot;, msg1))# åŒ¹é…å­—ç¬¦ä¸²ä¸­è¿ç»­å‡ºç°2æ¬¡ä»¥ä¸Šå­—ç¬¦oçš„æƒ…å†µprint(re.findall(r&quot;o&#123;2,&#125;&quot;, msg1))# åŒ¹é…å­—ç¬¦ä¸²ä¸­è¿ç»­å‡ºç°2æ¬¡ä»¥ä¸Š3æ¬¡ä»¥å†…å­—ç¬¦oçš„æƒ…å†µprint(re.findall(r&quot;o&#123;2,3&#125;&quot;, msg1)) ä¸Šè¿°ä»£ç å¤§å®¶å¯ä»¥è‡ªè¡Œå°è¯•å¹¶åˆ†æç»“æœã€‚æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š 2.6. æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„èŒƒå›´åŒ¹é…åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ï¼Œé’ˆå¯¹å­—ç¬¦çš„åŒ¹é…ï¼Œé™¤äº†å¿«æ·çš„å…ƒå­—ç¬¦çš„åŒ¹é…ï¼Œè¿˜æœ‰å¦ä¸€ç§ä½¿ç”¨æ–¹æ‹¬å·è¿›è¡Œçš„èŒƒå›´åŒ¹é…æ–¹å¼ï¼Œå…·ä½“å¦‚ä¸‹ï¼š èŒƒå›´ æè¿° [0-9] ç”¨äºåŒ¹é…ä¸€ä¸ª 0~9 ä¹‹é—´çš„æ•°å­—ï¼Œç­‰ä»·äº \\ d [^0-9] ç”¨äºåŒ¹é…ä¸€ä¸ªéæ•°å­—å­—ç¬¦ï¼Œç­‰ä»·äº \\ D [3-6] ç”¨äºåŒ¹é…ä¸€ä¸ª 3~6 ä¹‹é—´çš„æ•°å­— [a-z] ç”¨äºåŒ¹é…ä¸€ä¸ª a~z ä¹‹é—´çš„å­—æ¯ [A-Z] ç”¨äºåŒ¹é…ä¸€ä¸ª A~Z ä¹‹é—´çš„å­—æ¯ [a-f] ç”¨äºåŒ¹é…ä¸€ä¸ª a~f ä¹‹é—´çš„å­—æ¯ [a-zA-Z] ç”¨äºåŒ¹é…ä¸€ä¸ª a~z æˆ–è€… A-Z ä¹‹é—´çš„å­—æ¯ï¼ŒåŒ¹é…ä»»æ„ä¸€ä¸ªå­—æ¯ [a-zA-Z0-9] ç”¨äºåŒ¹é…ä¸€ä¸ªå­—æ¯æˆ–è€…æ•°å­— [a-zA-Z0-9_] ç”¨äºåŒ¹é…ä¸€ä¸ªå­—æ¯æˆ–è€…æ•°å­—æˆ–è€…ä¸‹åˆ’çº¿ï¼Œç­‰ä»·äº \\ w [^a-zA-Z0-9_] ç”¨äºåŒ¹é…ä¸€ä¸ªéå­—æ¯æˆ–è€…æ•°å­—æˆ–è€…ä¸‹åˆ’çº¿ï¼Œç­‰ä»·äº \\ W æ³¨æ„ï¼šä¸è¦ä½¿ç”¨ [0-120] æ¥è¡¨ç¤º 0~120 ä¹‹é—´çš„æ•°å­—ï¼Œè¿™æ˜¯é”™è¯¯çš„ æ•´ç†æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š # å¼•å…¥æ­£åˆ™è¡¨è¾¾å¼æ¨¡å—import remsg = &quot;Hello, The count of Today is 800&quot;# åŒ¹é…å­—ç¬¦ä¸²msgä¸­æ‰€æœ‰çš„æ•°å­—print(re.findall(r&quot;[0-9]+&quot;, msg))# åŒ¹é…å­—ç¬¦ä¸²msgä¸­æ‰€æœ‰çš„å°å†™å­—æ¯print(re.findall(r&quot;[a-z]+&quot;, msg))# åŒ¹é…å­—ç¬¦ä¸²msgä¸­æ‰€æœ‰çš„å¤§å†™å­—æ¯print(re.findall(r&quot;[A-Z]+&quot;, msg))# åŒ¹é…å­—ç¬¦ä¸²msgä¸­æ‰€æœ‰çš„å­—æ¯print(re.findall(r&quot;[A-Za-z]+&quot;, msg)) ä¸Šè¿°ä»£ç æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š [â€˜800â€™][â€˜elloâ€™, â€˜heâ€™, â€˜countâ€™, â€˜ofâ€™, â€˜odayâ€™, â€˜isâ€™][â€˜Hâ€™, â€˜Tâ€™, â€˜Tâ€™][â€˜Helloâ€™, â€˜Theâ€™, â€˜countâ€™, â€˜ofâ€™, â€˜Todayâ€™, â€˜isâ€™] 2.7. æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„åˆ†ç»„æ­£åˆ™è¡¨è¾¾å¼ä¸»è¦æ˜¯ç”¨äºè¿›è¡Œå­—ç¬¦ä¸²æ£€ç´¢åŒ¹é…æ“ä½œçš„åˆ©å™¨åœ¨ä¸€æ¬¡å®Œæ•´çš„åŒ¹é…è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥å°†åŒ¹é…åˆ°çš„ç»“æœè¿›è¡Œåˆ†ç»„ï¼Œè¿™æ ·å°±æ›´åŠ çš„ç»†åŒ–äº†æˆ‘ä»¬å¯¹åŒ¹é…ç»“æœçš„æ“ä½œæ­£åˆ™è¡¨è¾¾å¼é€šè¿‡åœ†æ‹¬å· () è¿›è¡Œåˆ†ç»„ï¼Œä»¥æå–åŒ¹é…ç»“æœçš„éƒ¨åˆ†ç»“æœ å¸¸ç”¨çš„ä¸¤ç§åˆ†ç»„ï¼š åˆ†ç»„ æè¿° (expression) ä½¿ç”¨åœ†æ‹¬å·ç›´æ¥åˆ†ç»„ï¼›æ­£åˆ™è¡¨è¾¾å¼æœ¬èº«åŒ¹é…çš„ç»“æœå°±æ˜¯ä¸€ä¸ªç»„ï¼Œå¯ä»¥é€šè¿‡ group() æˆ–è€… group(0) è·å–ï¼›ç„¶åæ­£åˆ™è¡¨è¾¾å¼ä¸­åŒ…å«çš„åœ†æ‹¬å·å°±æ˜¯æŒ‰ç…§é¡ºåºä» 1 å¼€å§‹ç¼–å·çš„å°ç»„ (?Pexpression) ä½¿ç”¨åœ†æ‹¬å·åˆ†ç»„ï¼Œç„¶åç»™å½“å‰çš„åœ†æ‹¬å·è¡¨ç¤ºçš„å°ç»„å‘½åä¸º nameï¼Œå¯ä»¥é€šè¿‡ group(name) è¿›è¡Œæ•°æ®çš„è·å– åºŸè¯å°‘è¯´ï¼Œä¸Šå¹²è´§ï¼š # å¼•å…¥æ­£åˆ™è¡¨è¾¾å¼æ¨¡å—import re# ç”¨æˆ·è¾“å…¥åº§æœºå·ç ï¼Œå¦‚&quot;010-6688465&quot;phone = input(&quot;è¯·è¾“å…¥åº§æœºå·ç ï¼š&quot;)# 1.è¿›è¡Œæ­£åˆ™åŒ¹é…,å¾—åˆ°Matchå¯¹è±¡ï¼Œå¯¹è±¡ä¸­å°±åŒ…å«äº†åˆ†ç»„ä¿¡æ¯res1 = re.search(r&quot;^(\\d&#123;3,4&#125;)-(\\d&#123;4,8&#125;)$&quot;, phone)# æŸ¥çœ‹åŒ¹é…ç»“æœprint(res1)# åŒ¹é…ç»“æœä¸ºé»˜è®¤çš„ç»„ï¼Œå¯ä»¥é€šè¿‡group()æˆ–è€…group(0)è·å–print(res1.group())# è·å–ç»“æœä¸­ç¬¬ä¸€ä¸ªæ‹¬å·å¯¹åº”çš„ç»„æ•°æ®ï¼šå¤„ç†åŒºå·print(res1.group(1))# è·å–ç»“æœä¸­ç¬¬äºŒä¸ªæ‹¬å·å¯¹åº”çš„ç»„æ•°æ®ï¼šå¤„ç†å·ç print(res1.group(2))# 2.è¿›è¡Œæ­£åˆ™åŒ¹é…,å¾—åˆ°Matchå¯¹è±¡ï¼Œå¯¹è±¡ä¸­å°±åŒ…å«äº†å‘½ååˆ†ç»„ä¿¡æ¯res2 = re.search(r&quot;^(?P&lt;nstart&gt;\\d&#123;3,4&#125;)-(?P&lt;nend&gt;\\d&#123;4,8&#125;)$&quot;, phone)# æŸ¥çœ‹åŒ¹é…ç»“æœprint(res2)# åŒ¹é…ç»“æœä¸ºé»˜è®¤çš„ç»„ï¼Œå¯ä»¥é€šè¿‡group()æˆ–è€…group(0)è·å–print(res2.group(0))# é€šè¿‡åç§°è·å–æŒ‡å®šçš„åˆ†ç»„ä¿¡æ¯ï¼šå¤„ç†åŒºå·print(res2.group(&quot;nstart&quot;))# é€šè¿‡åç§°è·å–æŒ‡å®šåˆ†ç»„çš„ä¿¡æ¯ï¼šå¤„ç†å·ç print(res2.group(&quot;nend&quot;)) ä¸Šè¿°ä»£ç å°±æ˜¯ä»åŸå§‹å­—ç¬¦ä¸²ä¸­ï¼Œé€šè¿‡æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…å¾—åˆ°ä¸€ä¸ªç»“æœï¼Œä½†æ˜¯ä½¿ç”¨äº†åˆ†ç»„ä¹‹åï¼Œå°±å¯ä»¥å°†ç»“æœæ•°æ®é€šè¿‡åˆ†ç»„è¿›è¡Œç»†åŒ–å¤„ç†ï¼Œæ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š è¯·è¾“å…¥åº§æœºå·ç ï¼š021-6565789&lt;_sre.SRE_Match object; span&#x3D;(0, 11), match&#x3D;â€™021-6565789â€™&gt;021-65657890216565789&lt;_sre.SRE_Match object; span&#x3D;(0, 11), match&#x3D;â€™021-6565789â€™&gt;021-65657890216565789 2.8. æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„ç‰¹æ®Šç”¨æ³•ä½¿ç”¨åˆ†ç»„çš„åŒæ—¶ï¼Œä¼šæœ‰ä¸€äº›ç‰¹æ®Šçš„ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š è¡¨è¾¾å¼ æè¿° (?:expression) ä½œä¸ºæ­£åˆ™è¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†ï¼Œä½†æ˜¯åŒ¹é…ç»“æœä¸¢å¼ƒ (?&#x3D;expression) åŒ¹é… expression è¡¨è¾¾å¼å‰é¢çš„å­—ç¬¦ï¼Œå¦‚ â€œHow are you doingâ€ , æ­£åˆ™ â€œ(?.+(?&#x3D;ing))â€ è¿™é‡Œå– ing å‰æ‰€æœ‰çš„å­—ç¬¦ï¼Œå¹¶å®šä¹‰äº†ä¸€ä¸ªæ•è·åˆ†ç»„åå­—ä¸º â€œtxtâ€ è€Œ â€œtxtâ€ è¿™ä¸ªç»„é‡Œçš„å€¼ä¸º â€œHow are you doâ€ (?&lt;&#x3D;expression) åŒ¹é… expression è¡¨è¾¾å¼åé¢çš„å­—ç¬¦ï¼Œå¦‚ â€œHow are you doingâ€ æ­£åˆ™ â€œ(?(?&lt;&#x3D;How).+)â€è¿™é‡Œå–â€Howâ€ä¹‹åæ‰€æœ‰çš„å­—ç¬¦ï¼Œå¹¶å®šä¹‰äº†ä¸€ä¸ªæ•è·åˆ†ç»„åå­—ä¸ºâ€txtâ€è€Œâ€txtâ€è¿™ä¸ªç»„é‡Œçš„å€¼ä¸ºâ€ are you doingâ€; (?!expression) åŒ¹é…å­—ç¬¦ä¸²åé¢ä¸æ˜¯ expression è¡¨è¾¾å¼å­—ç¬¦ï¼Œå¦‚ â€œ123abcâ€ æ­£åˆ™ â€œ\\d{3}(?!\\d)â€ åŒ¹é… 3 ä½æ•°å­—åéæ•°å­—çš„ç»“æœ (?&lt;!expression) åŒ¹é…å­—ç¬¦ä¸²å‰é¢ä¸æ˜¯ expression è¡¨è¾¾å¼å­—ç¬¦ï¼Œå¦‚ â€œabc123â€ æ­£åˆ™ â€œ(?&lt;![0-9])123â€åŒ¹é…â€123â€å‰é¢æ˜¯éæ•°å­—çš„ç»“æœä¹Ÿå¯å†™æˆâ€(?!&lt;\\d)123â€ 2.9 æ­£åˆ™è¡¨è¾¾å¼çš„è´ªå©ªæ¨¡å¼å’Œæ‡’æƒ°æ¨¡å¼åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åŒ¹é…çš„å­—ç¬¦ä¸²å‡ºç°ä¸€äº›ç‰¹æ®Šçš„è§„å¾‹æ—¶ï¼Œå°±ä¼šå‡ºç°åŒ¹é…ç»“æœä¸å°½å¦‚äººæ„çš„æ„å¤–æƒ…å†µå¦‚ï¼šåœ¨ä¸‹é¢çš„å­—ç¬¦ä¸²ä¸­ï¼Œå°† div æ ‡ç­¾ä¸­çš„æ‰€æœ‰å†…å®¹è·å–å‡ºæ¥ &lt;div&gt;å†…å®¹1&lt;/div&gt;&lt;p&gt;è¿™æœ¬æ¥æ˜¯ä¸éœ€è¦çš„å†…å®¹&lt;/p&gt;&lt;div&gt;å†…å®¹2&lt;/div&gt; æ­¤æ—¶ï¼Œæˆ‘ä»¬æƒ³åˆ°çš„æ˜¯ï¼Œä½¿ç”¨ ä½œä¸ºå…³é”®ä¿¡æ¯è¿›è¡Œæ­£åˆ™è¡¨è¾¾å¼çš„å®šä¹‰ï¼Œå¦‚ä¸‹ regexp = r&quot;&lt;div&gt;.*&lt;/div&gt;&quot; æœ¬æ„æ˜¯ä½¿ç”¨ä¸Šè¿°ä»£ç æ¥å®Œæˆ div å¼€å§‹æ ‡ç­¾å’Œç»“æŸæ ‡ç­¾ä¹‹é—´çš„å†…å®¹åŒ¹é…ï¼Œä½†æ˜¯ï¼ŒåŒ¹é…çš„ç»“æœå¦‚ä¸‹ &lt;div&gt; [å†…å®¹1&lt;/div&gt;&lt;p&gt;è¿™æœ¬æ¥æ˜¯ä¸éœ€è¦çš„å†…å®¹&lt;/p&gt;&lt;div&gt;å†…å®¹2] &lt;/div&gt; æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œä¸Šé¢åŒ¹é…çš„ç»“æœï¼Œæ˜¯å°†å­—ç¬¦ä¸²å¼€å¤´çš„ æ ‡ç­¾å’Œå­—ç¬¦ä¸²ç»“æŸçš„ å½“æˆäº†åŒ¹é…å…ƒç´ ï¼Œå¯¹åŒ…å«åœ¨ä¸­é—´çš„å†…å®¹ç›´æ¥è¿›è¡Œäº†åŒ¹é…ï¼Œä¹Ÿå°±å¾—åˆ°äº†æˆ‘ä»¬æœŸæœ›ä¹‹å¤–çš„ç»“æœï¼š å†…å®¹1&lt;/div&gt;&lt;p&gt;è¿™æœ¬æ¥æ˜¯ä¸éœ€è¦çš„å†…å®¹&lt;/p&gt;&lt;div&gt;å†…å®¹2 ä¸Šè¿°å°±æ˜¯æˆ‘ä»¬è¦è¯´çš„æ­£åˆ™è¡¨è¾¾å¼çš„ç¬¬ä¸€ç§æ¨¡å¼ï¼šè´ªå©ªæ¨¡å¼è´ªå©ªæ¨¡å¼ï¼šæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„ä¸€ç§æ¨¡å¼ï¼Œé€Ÿåº¦å¿«ï¼Œä½†æ˜¯åŒ¹é…çš„å†…å®¹ä¼šä»å­—ç¬¦ä¸²ä¸¤å¤´å‘ä¸­é—´æœç´¢åŒ¹é…ï¼ˆæ¯”è¾ƒè´ªå©ª~ï¼‰ï¼Œä¸€æ—¦åŒ¹é…é€‰ä¸­ï¼Œå°±ä¸ç»§ç»­å‘å­—ç¬¦ä¸²ä¸­é—´æœç´¢äº†ï¼Œè¿‡ç¨‹å¦‚ä¸‹ï¼š å¼€å§‹ï¼š&lt;div&gt;å†…å®¹1&lt;/div&gt;&lt;p&gt;è¿™æœ¬æ¥æ˜¯ä¸éœ€è¦çš„å†…å®¹&lt;/p&gt;&lt;div&gt;å†…å®¹2&lt;/div&gt;ç¬¬ä¸€æ¬¡åŒ¹é…ï¼šã€&lt;div&gt;å†…å®¹1&lt;/div&gt;&lt;p&gt;è¿™æœ¬æ¥æ˜¯ä¸éœ€è¦çš„å†…å®¹&lt;/p&gt;&lt;div&gt;å†…å®¹2&lt;/div&gt;ã€‘ç¬¬äºŒæ¬¡åŒ¹é…&lt;div&gt;ã€å†…å®¹1&lt;/div&gt;&lt;p&gt;è¿™æœ¬æ¥æ˜¯ä¸éœ€è¦çš„å†…å®¹&lt;/p&gt;&lt;div&gt;å†…å®¹2ã€‘&lt;/div&gt;åŒ¹é…åˆ°æ­£åˆ™ä¸­éœ€è¦çš„ç»“æœï¼Œä¸å†ç»§ç»­åŒ¹é…ï¼Œç›´æ¥è¿”å›åŒ¹é…ç»“æœå¦‚ä¸‹ï¼šå†…å®¹1&lt;/div&gt;&lt;p&gt;è¿™æœ¬æ¥æ˜¯ä¸éœ€è¦çš„å†…å®¹&lt;/p&gt;&lt;div&gt;å†…å®¹2 æ˜æ˜¾è´ªå©ªæ¨¡å¼æŸäº›æƒ…å†µä¸‹ï¼Œä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œæ‰€ä»¥å‡ºç°äº†å¦ä¸€ç§æ¨¡å¼ï¼šæ‡’æƒ°æ¨¡å¼æ‡’æƒ°æ¨¡å¼ï¼šæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„å¦ä¸€ç§æ¨¡å¼ï¼Œä¼šé¦–å…ˆæœç´¢åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼å¼€å§‹ä½ç½®çš„å­—ç¬¦ï¼Œç„¶åé€æ­¥å‘å­—ç¬¦ä¸²çš„ç»“æŸä½ç½®æŸ¥æ‰¾ï¼Œä¸€æ—¦æ‰¾åˆ°åŒ¹é…çš„å°±è¿”å›ï¼Œç„¶åæ¥ç€æŸ¥æ‰¾ regexp = r&quot;&lt;div&gt;.*?&lt;/div&gt;&quot; å¼€å§‹ï¼š&lt;div&gt;å†…å®¹1&lt;/div&gt;&lt;p&gt;è¿™æœ¬æ¥æ˜¯ä¸éœ€è¦çš„å†…å®¹&lt;/p&gt;&lt;div&gt;å†…å®¹2&lt;/div&gt;ç¬¬ä¸€æ¬¡åŒ¹é…ï¼šã€&lt;div&gt;ã€‘å†…å®¹1&lt;/div&gt;&lt;p&gt;è¿™æœ¬æ¥æ˜¯ä¸éœ€è¦çš„å†…å®¹&lt;/p&gt;&lt;div&gt;å†…å®¹2&lt;/div&gt;ç¬¬äºŒæ¬¡åŒ¹é…ã€&lt;div&gt;å†…å®¹1&lt;/div&gt;ã€‘&lt;p&gt;è¿™æœ¬æ¥æ˜¯ä¸éœ€è¦çš„å†…å®¹&lt;/p&gt;&lt;div&gt;å†…å®¹2&lt;/div&gt;åŒ¹é…åˆ°æ­£åˆ™ä¸­éœ€è¦çš„ç»“æœï¼šå†…å®¹1ç»§ç»­å‘åæŸ¥æ‰¾ç¬¬ä¸‰æ¬¡åŒ¹é…&lt;div&gt;å†…å®¹1&lt;/div&gt;ã€&lt;p&gt;è¿™æœ¬æ¥æ˜¯ä¸éœ€è¦çš„å†…å®¹&lt;/p&gt;ã€‘&lt;div&gt;å†…å®¹2&lt;/div&gt;ç¬¬å››æ¬¡åŒ¹é…&lt;div&gt;å†…å®¹1&lt;/div&gt;&lt;p&gt;è¿™æœ¬æ¥æ˜¯ä¸éœ€è¦çš„å†…å®¹&lt;/p&gt;ã€&lt;div&gt;å†…å®¹2&lt;/div&gt;ã€‘åŒ¹é…åˆ°æ­£åˆ™ä¸­éœ€è¦çš„ç»“æœï¼šå†…å®¹2æŸ¥æ‰¾å­—ç¬¦ä¸²ç»“æŸï¼ æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„ä¸¤ç§æ¨¡å¼ï¼šè´ªå©ªæ¨¡å¼ã€æ‡’æƒ°æ¨¡å¼è´ªå©ªæ¨¡å¼ï¼šä»ç›®æ ‡å­—ç¬¦ä¸²çš„ä¸¤å¤´å¼€å§‹æœç´¢ï¼Œä¸€æ¬¡å°½å¯èƒ½å¤šçš„åŒ¹é…ç¬¦åˆæ¡ä»¶çš„å­—ç¬¦ä¸²ï¼Œä½†æ˜¯æœ‰å¯èƒ½ä¼šåŒ¹é…åˆ°ä¸éœ€è¦çš„å†…å®¹ï¼Œæ­£åˆ™è¡¨è¾¾å¼ä¸­çš„å…ƒå­—ç¬¦ã€é‡è¯ã€èŒƒå›´ç­‰éƒ½æ¨¡å¼æ˜¯è´ªå©ªåŒ¹é…æ¨¡å¼ï¼Œä½¿ç”¨çš„æ—¶å€™ä¸€å®šè¦æ³¨æ„åˆ†æç»“æœï¼Œå¦‚ï¼š&lt;div&gt;.*&lt;/div&gt;å°±æ˜¯ä¸€ä¸ªè´ªå©ªæ¨¡å¼ï¼Œç”¨äºåŒ¹é… å’Œ ä¹‹é—´æ‰€æœ‰çš„å­—ç¬¦æ‡’æƒ°æ¨¡å¼ï¼šä»ç›®æ ‡å­—ç¬¦ä¸²æŒ‰ç…§é¡ºåºä»å¤´åˆ°ä½è¿›è¡Œæ£€ç´¢åŒ¹é…ï¼Œå°½å¯èƒ½çš„æ£€ç´¢åˆ°æœ€å°èŒƒå›´çš„åŒ¹é…ç»“æœï¼Œè¯­æ³•ç»“æ„æ˜¯åœ¨è´ªå©ªæ¨¡å¼çš„è¡¨è¾¾å¼åé¢åŠ ä¸Šä¸€ä¸ªç¬¦å·? å³å¯ï¼Œå¦‚&lt;div&gt;.*?&lt;/div&gt;å°±æ˜¯ä¸€ä¸ªæ‡’æƒ°æ¨¡å¼çš„æ­£åˆ™ï¼Œç”¨äºä»…ä»…åŒ¹é…æœ€å°èŒƒå›´çš„ å’Œ ä¹‹é—´çš„å†…å®¹ ä¸è®ºè´ªå©ªæ¨¡å¼è¿˜æ˜¯æ‡’æƒ°æ¨¡å¼ï¼Œéƒ½æœ‰é€‚åˆè‡ªå·±ä½¿ç”¨çš„åœ°æ–¹ï¼Œå¤§å®¶ä¸€å®šè¦æ ¹æ®å®é™…éœ€æ±‚è¿›è¡Œè§£å†³æ–¹æ¡ˆçš„ç¡®å®š è½¬è½½: https://www.imooc.com/article/22158","tags":["Python"],"categories":["æŠ€æœ¯åŠ æ²¹ç«™"]},{"path":"/index.html","content":"è¿‘æœŸæ—¥ç¨‹å¼€æºé¡¹ç›®æ— ä»»ä½•ç›ˆåˆ©ç›®çš„ï¼Œæ‰€æœ‰é¡¹ç›®å‡ä¼šåœ¨é—²æš‡ä¹‹ä½™ç»´æŠ¤ï¼Œå¼€æºé¡¹ç›®å¦‚æœ‰ä»»ä½•é—®é¢˜å»ºè®®æäº¤ issueï¼Œç´§æ€¥é—®é¢˜ï¼ˆåŒ…æ‹¬ä½†ä¸é™äºå®‰å…¨ç¼ºé™·ç­‰é—®é¢˜ï¼‰è¯·å‘é€é‚®ä»¶ Open Source Project &nbsp; &nbsp; æš‚æ— å¼€æºè®¡åˆ’ï¼Œå…ˆå¥½å¥½å·¥ä½œï¼ŒåŠªåŠ›å­¦ä¹  è¿‘æœŸåŠ¨æ€å¹³æ—¶çš„æ‰€è§æ‰€é—»æˆ–æ˜¯æ¥è§¦åˆ°çš„çŸ¥è¯†ç‚¹ï¼Œä¸ç³»ç»Ÿï¼Œæ¯”è¾ƒå‡Œä¹±ï¼Œåªåšè®°å½•æˆ–æ˜¯åˆ†äº«è¯¦æƒ…è§ï¼š#issues"},{"path":"/about/index.html","content":"è¯»ä¸€äº›æ— ç”¨çš„ä¹¦ï¼Œåšä¸€äº›æ— ç”¨çš„äº‹ï¼ŒèŠ±ä¸€äº›æ— ç”¨çš„æ—¶é—´ï¼Œéƒ½æ˜¯ä¸ºäº†åœ¨ä¸€åˆ‡å·²çŸ¥ä¹‹å¤–ï¼Œä¿ç•™ä¸€ä¸ªè¶…è¶Šè‡ªå·±çš„æœºä¼šï¼Œäººç”Ÿä¸­ä¸€äº›å¾ˆäº†ä¸èµ·çš„å˜åŒ–ï¼Œå°±æ˜¯æ¥è‡ªè¿™ç§æ—¶åˆ»ã€‚æ–‡ç« å‹é“¾å…³äºç•™è¨€ Hey ğŸ‘‹, Iâ€™m LLIEI0XğŸ‘¨ğŸ»â€ğŸ’» ä¸€ä¸ªå·¥ä½œæ˜¯åç«¯ä½†æ­£åœ¨å­¦ä¹ å‰ç«¯ï¼Œå¹³å¸¸è¿˜å…¼èŒå®‰å…¨å’Œè¿ç»´çš„å¼€å‘è€…ğŸ‘¾ Gopher &amp; å­¦äº†åˆå¿˜çš„ Rustacean@lliei0x &amp; @lliei-x.åˆ›å§‹äºº &amp; è½¯ä»¶å·¥ç¨‹å¸ˆ@liei.cc.æœä¸» &amp; è¿ç»´ &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;ğŸ‰ æ„Ÿè°¢ï¼šæ„Ÿè°¢ @LLIEI0X å’Œ @LIEI.CC ä¸ºæˆ‘æä¾›ç½‘ç»œä¸è®¡ç®—åŸºç¡€è®¾æ–½"},{"path":"/friends/index.html","content":"è¯»ä¸€äº›æ— ç”¨çš„ä¹¦ï¼Œåšä¸€äº›æ— ç”¨çš„äº‹ï¼ŒèŠ±ä¸€äº›æ— ç”¨çš„æ—¶é—´ï¼Œéƒ½æ˜¯ä¸ºäº†åœ¨ä¸€åˆ‡å·²çŸ¥ä¹‹å¤–ï¼Œä¿ç•™ä¸€ä¸ªè¶…è¶Šè‡ªå·±çš„æœºä¼šï¼Œäººç”Ÿä¸­ä¸€äº›å¾ˆäº†ä¸èµ·çš„å˜åŒ–ï¼Œå°±æ˜¯æ¥è‡ªè¿™ç§æ—¶åˆ»ã€‚æ–‡ç« å‹é“¾å…³äºç•™è¨€ å‹äººå¸ï¼Œæˆ‘ä»¬è¦å»æµªè¿¹å¤©æ¶¯ yx-hh å¦‚ä½•äº¤æ¢å‹é“¾ï¼Ÿ å…ˆå‹åé“¾ï¼Œåœ¨æˆ‘ä»¬æœ‰ä¸€å®šäº†è§£äº†ä¹‹åæ‰å¯ä»¥äº¤æ¢å‹é“¾ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œæ‚¨çš„ç½‘ç«™è¿˜åº”æ»¡è¶³ä»¥ä¸‹å…¨éƒ¨æ¡ä»¶ï¼š åˆæ³•çš„ã€éè¥åˆ©æ€§ã€æ— å•†ä¸šå¹¿å‘Šã€æ— æœ¨é©¬æ¤å…¥ æœ‰å®è´¨æ€§åŸåˆ›å†…å®¹çš„ HTTPS ç«™ç‚¹ï¼Œå‘å¸ƒè¿‡è‡³å°‘ 5 ç¯‡åŸåˆ›æ–‡ç« ï¼Œå†…å®¹é¢˜æä¸é™ æœ‰ç‹¬ç«‹åŸŸåï¼Œéå…è´¹åŸŸå åšå®¢å·²è¿è¡Œè‡³å°‘åŠå¹´ï¼Œéåˆšæ­å»ºå¥½"},{"path":"/more/index.html","content":"è¯»ä¸€äº›æ— ç”¨çš„ä¹¦ï¼Œåšä¸€äº›æ— ç”¨çš„äº‹ï¼ŒèŠ±ä¸€äº›æ— ç”¨çš„æ—¶é—´ï¼Œéƒ½æ˜¯ä¸ºäº†åœ¨ä¸€åˆ‡å·²çŸ¥ä¹‹å¤–ï¼Œä¿ç•™ä¸€ä¸ªè¶…è¶Šè‡ªå·±çš„æœºä¼šï¼Œäººç”Ÿä¸­ä¸€äº›å¾ˆäº†ä¸èµ·çš„å˜åŒ–ï¼Œå°±æ˜¯æ¥è‡ªè¿™ç§æ—¶åˆ»ã€‚æ–‡ç« å‹é“¾å…³äºç•™è¨€"},{"path":"/notes/index.html","content":"å‰è¨€æ—¥å¸¸æ¥è§¦åˆ°çš„çŸ¥è¯†ç‚¹ï¼Œä¸ç³»ç»Ÿï¼Œæ¯”è¾ƒå‡Œä¹±ï¼Œåªä½œè®°å½•ï¼Œæ•´ç†åè½¬è‡³ WIKI (ä¸“æ )å½“æˆ‘è¯´å‡ºã€Œä½ ã€è¿™ä¸ªå­—ï¼Œæˆ‘çš„æ„æ€æ˜¯ï¼Œä¸€ç™¾ä¸ªå®‡å®™ã€‚"},{"title":"æ•°æ®åº“","path":"/notes/database/index.html","content":"trdsqltrdsqlä¸€ä¸ªå¯ä»¥åœ¨CSVå’ŒLTSVä¸Šæ‰§è¡ŒSQLæŸ¥è¯¢çš„å·¥å…· https://github.com/noborus/trdsqlhttps://github.com/noborus/trdsql trdsql ä½¿ç”¨ç¤ºä¾‹./trdsql -oat -config config.json &quot;select * from table_example where id=1&quot; config.json é…ç½®ç¤ºä¾‹&#123; &quot;db&quot;: &quot;mdb&quot;, &quot;database&quot;: &#123; &quot;sdb&quot;: &#123; &quot;driver&quot;: &quot;sqlite3&quot;, &quot;dsn&quot;: &quot;&quot; &#125;, &quot;pdb&quot;: &#123; &quot;driver&quot;: &quot;postgres&quot;, &quot;dsn&quot;: &quot;user=test dbname=test&quot; &#125;, &quot;mdb&quot;: &#123; &quot;driver&quot;: &quot;mysql&quot;, &quot;dsn&quot;: &quot;test:test@tcp(ubuntu.wsl:4000)/example?charset=utf8mb4&quot; &#125; &#125;&#125;"},{"title":"Docker","path":"/notes/docker/index.html","content":"å®¹å™¨æŠ€æœ¯å››ä¸ªç»„æˆéƒ¨åˆ† é•œåƒ åŒ…å«è™šæ‹Ÿè¿è¡Œç¯å¢ƒçš„æ–‡ä»¶åŒ…ï¼Œæ˜¯ä¸€å †æ–‡ä»¶çš„åˆé›†ï¼ŒæœåŠ¡åœ¨è¯¥ç³»ç»Ÿä¹‹ä¸Šèƒ½å¤Ÿè¿è¡Œèµ·æ¥ã€‚docker é•œåƒé‡‡ç”¨äº†åˆ†å±‚æ¶æ„ã€‚ å®¹å™¨ é•œåƒçš„è¿è¡ŒçŠ¶æ€ï¼Œç”¨æ¥éš”ç¦»è™šæ‹Ÿç¯å¢ƒçš„åŸºç¡€è®¾æ–½ã€‚ä¸»è¦åŒ…å«ï¼šé•œåƒã€è¿è¡Œç¯å¢ƒã€æŒ‡ä»¤é›† ç½‘ç»œ ç½‘ç»œæ˜¯åº”ç”¨ä¹‹é—´é€šè®¯çš„åª’ä»‹ã€‚ æ•°æ®å· åº”ç”¨è‚¯å®šä¼šæ¶‰åŠåˆ°æ•°æ®æŒä¹…åŒ–æ“ä½œï¼Œæ•°æ®å·å°±æ˜¯ç”¨äºå®¿ä¸»æœºå’Œå®¹å™¨ä¹‹é—´å…±äº«æˆ–è€…æŒä¹…åŒ–ã€‚ä¸‰ç‚¹æŠ€æœ¯ Namespace å‘½åç©ºé—´ ä½œç”¨æ˜¯éš”ç¦» Control Groups æ§åˆ¶ç»„ ä½œç”¨æ˜¯é™åˆ¶è®¡ç®—æœºèµ„æºçš„ä½¿ç”¨ Union File System è”åˆæ–‡ä»¶ç³»ç»Ÿ ä½œç”¨æ˜¯å®ç°ä¸åŒç›®å½•æŒ‚è½½åˆ°åŒä¸€ç›®å½• docker logsï¼æŸ¥çœ‹ docker å®¹å™¨æ—¥å¿—å‘½ä»¤æ ¼å¼ï¼š docker logs [OPTIONS] CONTAINER Options: --details æ˜¾ç¤ºæ›´å¤šçš„ä¿¡æ¯ -f, --follow è·Ÿè¸ªå®æ—¶æ—¥å¿— --since string æ˜¾ç¤ºè‡ªæŸä¸ªtimestampä¹‹åçš„æ—¥å¿—ï¼Œæˆ–ç›¸å¯¹æ—¶é—´ï¼Œå¦‚42mï¼ˆå³42åˆ†é’Ÿï¼‰ --tail string ä»æ—¥å¿—æœ«å°¾æ˜¾ç¤ºå¤šå°‘è¡Œæ—¥å¿—ï¼Œ é»˜è®¤æ˜¯all -t, --timestamps æ˜¾ç¤ºæ—¶é—´æˆ³ --until string æ˜¾ç¤ºè‡ªæŸä¸ªtimestampä¹‹å‰çš„æ—¥å¿—ï¼Œæˆ–ç›¸å¯¹æ—¶é—´ï¼Œå¦‚42mï¼ˆå³42åˆ†é’Ÿï¼‰ ä¾‹å­ï¼šæŸ¥çœ‹æŒ‡å®šæ—¶é—´åçš„æ—¥å¿—ï¼Œåªæ˜¾ç¤ºæœ€å 100 è¡Œï¼š docker logs -f -t --since=&quot;2018-02-08&quot; --tail=100 CONTAINER_ID æŸ¥çœ‹æœ€è¿‘ 30 åˆ†é’Ÿçš„æ—¥å¿—: docker logs --since 30m CONTAINER_ID æŸ¥çœ‹æŸæ—¶é—´ä¹‹åçš„æ—¥å¿—ï¼š docker logs -t --since=&quot;2018-02-08T13:23:37&quot; CONTAINER_ID æŸ¥çœ‹æŸæ—¶é—´æ®µæ—¥å¿—ï¼š docker logs -t --since=&quot;2018-02-08T13:23:37&quot; --until &quot;2018-02-09T12:23:37&quot; CONTAINER_ID"},{"title":"Git","path":"/notes/git/index.html","content":"git commit emoji ä½¿ç”¨æŒ‡å—ç›®å½• commit æ ¼å¼ emoji æŒ‡å— å¦‚ä½•åœ¨å‘½ä»¤è¡Œä¸­æ˜¾ç¤º emoji æ‰§è¡Œ git commit æ—¶ä½¿ç”¨ emoji ä¸ºæœ¬æ¬¡æäº¤æ‰“ä¸Šä¸€ä¸ª â€œæ ‡ç­¾â€, ä½¿å¾—æ­¤æ¬¡ commit çš„ä¸»è¦å·¥ä½œå¾—ä»¥å‡¸ç°ï¼Œä¹Ÿèƒ½å¤Ÿä½¿å¾—å…¶åœ¨æ•´ä¸ªæäº¤å†å²ä¸­æ˜“äºåŒºåˆ†ä¸æŸ¥æ‰¾ã€‚ ä¾‹å¦‚ï¼Œgitmoji commit æ ¼å¼git commit æ—¶ï¼Œæäº¤ä¿¡æ¯éµå¾ªä»¥ä¸‹æ ¼å¼ï¼š :emoji1: :emoji2: ä¸è¶…è¿‡ 50 ä¸ªå­—çš„æ‘˜è¦ï¼Œé¦–å­—æ¯å¤§å†™ï¼Œä½¿ç”¨ç¥ˆä½¿è¯­æ°”ï¼Œå¥æœ«ä¸è¦åŠ å¥å·æäº¤ä¿¡æ¯ä¸»ä½“å¼•ç”¨ç›¸å…³ issue æˆ– PR ç¼–å· &lt;#110&gt; åˆæ¬¡æäº¤ç¤ºä¾‹ï¼š git commit -m &quot;:tada: Initialize Repo&quot; emoji æŒ‡å— emoji emoji ä»£ç  commit è¯´æ˜ ğŸ‰ (åº†ç¥) :tada: åˆæ¬¡æäº¤ ğŸ†• (å…¨æ–°)âœ¨ (ç«èŠ±) :new: :sparkles: å¼•å…¥æ–°åŠŸèƒ½ feature ğŸ”– (ä¹¦ç­¾) :bookmark: å‘è¡Œ&#x2F;ç‰ˆæœ¬æ ‡ç­¾ ğŸ› (bug) :bug: ä¿®å¤ bug ğŸš‘ (æ€¥æ•‘è½¦) :ambulance: é‡è¦è¡¥ä¸ ğŸŒ (åœ°çƒ) :globe_with_meridians: å›½é™…åŒ–ä¸æœ¬åœ°åŒ– ğŸ’„ (å£çº¢) :lipstick: æ›´æ–° UI å’Œæ ·å¼æ–‡ä»¶ ğŸ¬ (åœºè®°æ¿) :clapper: æ›´æ–°æ¼”ç¤º&#x2F;ç¤ºä¾‹ ğŸš¨ (è­¦è½¦ç¯) :rotating_light: ç§»é™¤ linter è­¦å‘Š ğŸ”§ (æ‰³æ‰‹) :wrench: ä¿®æ”¹é…ç½®æ–‡ä»¶ â• (åŠ å·) :heavy_plus_sign: å¢åŠ ä¸€ä¸ªä¾èµ– â– (å‡å·) :heavy_minus_sign: å‡å°‘ä¸€ä¸ªä¾èµ– â¬†ï¸ (ä¸Šå‡ç®­å¤´) :arrow_up: å‡çº§ä¾èµ– â¬‡ï¸ (ä¸‹é™ç®­å¤´) :arrow_down: é™çº§ä¾èµ– âš¡ (é—ªç”µ)ğŸ (èµ›é©¬) :zap: :racehorse: æå‡æ€§èƒ½ ğŸ“ˆ (ä¸Šå‡è¶‹åŠ¿å›¾) :chart_with_upwards_trend: æ·»åŠ åˆ†ææˆ–è·Ÿè¸ªä»£ç  ğŸš€ (ç«ç®­) :rocket: éƒ¨ç½²åŠŸèƒ½ âœ… (ç™½è‰²å¤é€‰æ¡†) :white_check_mark: å¢åŠ æµ‹è¯• ğŸ“ (å¤‡å¿˜å½•)ğŸ“– (ä¹¦) :memo::book: æ’°å†™æ–‡æ¡£ ğŸ”¨ (é”¤å­) :hammer: é‡å¤§é‡æ„ ğŸ¨ (è°ƒè‰²æ¿) :art: æ”¹è¿›ä»£ç ç»“æ„&#x2F;ä»£ç æ ¼å¼ ğŸ”¥ (ç«ç„°) :fire: ç§»é™¤ä»£ç æˆ–æ–‡ä»¶ âœï¸ (é“…ç¬”) :pencil2: ä¿®å¤ typo ğŸš§ (æ–½å·¥) :construction: å·¥ä½œè¿›è¡Œä¸­ ğŸ—‘ï¸ (åƒåœ¾æ¡¶) :wastebasket: åºŸå¼ƒæˆ–åˆ é™¤ â™¿ (è½®æ¤…) :wheelchair: å¯è®¿é—®æ€§ ğŸ‘· (å·¥äºº) :construction_worker: æ·»åŠ  CI æ„å»ºç³»ç»Ÿ ğŸ’š (ç»¿å¿ƒ) :green_heart: ä¿®å¤ CI æ„å»ºé—®é¢˜ ğŸ”’ (é”) :lock: ä¿®å¤å®‰å…¨é—®é¢˜ ğŸ³ (é²¸é±¼) :whale: Docker ç›¸å…³å·¥ä½œ ğŸ (è‹¹æœ) :apple: ä¿®å¤ macOS ä¸‹çš„é—®é¢˜ ğŸ§ (ä¼é¹…) :penguin: ä¿®å¤ Linux ä¸‹çš„é—®é¢˜ ğŸ (æ——å¸œ) :checkered_flag: ä¿®å¤ Windows ä¸‹çš„é—®é¢˜ ğŸ”€ (äº¤å‰ç®­å¤´) :twisted_rightwards_arrows: åˆ†æ”¯åˆå¹¶ ğŸ¤– (æœºå™¨äºº) :robot: ä¿®å¤ Android ä¸‹çš„é—®é¢˜ ğŸ (è‹¹æœ) :green_apple: ä¿®å¤ IOSä¸‹çš„é—®é¢˜ ğŸ“Œ (å›¾é’‰) :pushpin: ä¾èµ–å›ºå®šåˆ°ç‰¹å®šç‰ˆæœ¬ â™»ï¸ (å›æ”¶) :recycle: æ·»åŠ  CI æ„å»ºç³»ç»Ÿ ğŸ“¦(åŒ…è£¹) :package: æ›´æ–°ç¼–è¯‘æ–‡ä»¶æˆ–Package ğŸ‘½ (å¤–æ˜Ÿäºº) :alien: ç”±äºå¤–éƒ¨APIçš„æ›´æ”¹è€Œæ›´æ–°äº†ä»£ç  ğŸšš (å¡è½¦) :truck: ç§»åŠ¨æˆ–é‡å‘½åæ–‡ä»¶ ğŸ“„(æ–‡ä»¶) :page_facing_up: æ·»åŠ æˆ–æ›´æ–° Licence ğŸ’¥ (éš†éš†å£°) :boom: å¼•å…¥é‡å¤§å˜åŒ– ğŸ± (ä¾¿å½“) :bento: æ·»åŠ æˆ–æ›´æ–° Assets ğŸ‘Œ(OK) :ok_hand: ç”±äºä»£ç è¯„å®¡æ›´æ”¹è€Œæ›´æ–°ä»£ç  â™¿ (è½®æ¤…) :wheelchair: æé«˜å¯è®¿é—®æ€§ ğŸ’¡ (ç”µç¯æ³¡) :bulb: è®°å½•æºä»£ç  ğŸ» (å•¤é…’) :beers: é†‰é†ºé†ºåœ°ç¼–å†™ä»£ç  ğŸ’¬ (å‘è¨€) :speech_balloon: æ›´æ–°æ–‡æœ¬å’Œæ–‡å­— ğŸ—ƒï¸ (æ–‡ä»¶ç›’) :card_file_box: æ‰§è¡Œä¸æ•°æ®åº“ç›¸å…³çš„æ›´æ”¹ ğŸ”Š (å·¨å¤§å£°å“) :loud_sound: æ·»åŠ æ—¥å¿— ğŸ”‡ (é™éŸ³) :mute: ç§»é™¤æ—¥å¿— ğŸ‘¥ (è½®å»“åŠèº«åƒ) :busts_in_silhouette: æ·»åŠ è´¡çŒ®è€… ğŸš¸ (å„¿ç«¥é€šè¿‡) :children_crossing: æé«˜ç”¨æˆ·ä½“éªŒ&#x2F;å¯ç”¨æ€§ ğŸ—ï¸ (æˆ¿å±‹) :building_construction: ä½¿å»ºç­‘å˜åŒ– ğŸ“± (è‹¹æœæ‰‹æœº) :iphone: è‡´åŠ›äºå“åº”å¼è®¾è®¡ ğŸ¤¡ (å°ä¸‘) :clown_face: Mock ç›¸å…³ ğŸ¥š(å½©è›‹) :egg: åŠ å…¥ä¸€ä¸ªå¤æ´»èŠ‚å½©è›‹ ğŸ™ˆ(éç¤¼å‹¿è§†) :see_no_evil: æ·»åŠ æˆ–æ›´æ–° .gitignore æ–‡ä»¶ ğŸ“¸ (ç›¸æœº) :camera_flash: æ·»åŠ æˆ–æ›´æ–°å¿«ç…§ âš—ï¸ (è’¸é¦å™¨) :alembic: å°è¯•æ–°äº‹ç‰© ğŸ” (æ”¾å¤§é•œ) :mag: SEO æå‡ â˜¸ï¸ (è¾¾æ‘©è½¦è½®) :wheel_of_dharma: Kubernetes ç›¸å…³å·¥ä½œ ğŸ·ï¸ (æ ‡ç­¾) :label: æ·»åŠ æˆ–æ›´æ–° types (Flow, TypeScript) ğŸŒ± (ç§å­) :seedling: æ·»åŠ æˆ–æ›´æ–°ç§å­æ–‡ä»¶ ğŸš© (æ——å¸œ) :triangular_flag_on_post: æ·»åŠ ã€æ›´æ–°æˆ–åˆ é™¤åŠŸèƒ½æ ‡å¿— ğŸ’« (å¤´æ˜çœ¼èŠ±) :dizzy: æ·»åŠ æˆ–æ›´æ–°åŠ¨ç”»å’Œè½¬æ¢ emoji-cheat-sheet&nbsp;-&nbsp;æ±‡æ€» å…³äºå…¶å®ƒä¸ªæ€§åŒ–çš„ emoji æ±‡æ€»ç½‘ç«™http://www.webpagefx.com/tools/emoji-cheat-sheet/ å¦‚ä½•åœ¨å‘½ä»¤è¡Œä¸­æ˜¾ç¤º emojié»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨å‘½ä»¤è¡Œä¸­å¹¶ä¸ä¼šæ˜¾ç¤ºå‡º emoji, ä»…æ˜¾ç¤º emoji ä»£ç ã€‚ä¸è¿‡å¯ä»¥ä½¿ç”¨ emojify ä½¿å¾—åœ¨å‘½ä»¤è¡Œä¹Ÿå¯æ˜¾ç¤º emoji, å®ƒæ˜¯ä¸€ä¸ª shell è„šæœ¬ï¼Œå®‰è£…ä¸ä½¿ç”¨éƒ½å¾ˆç®€å•ï¼Œåœ¨ è¿™é‡Œ æŸ¥çœ‹å¦‚ä½•å®‰è£…ä¸ä½¿ç”¨ã€‚"},{"title":"Kubernetes","path":"/notes/kubernetes/index.html","content":"K8S çš„æ¶æ„åƒå¤§å¤šæ•°çš„åˆ†å¸ƒå¼ç³»ç»Ÿï¼ŒK8S é›†ç¾¤è‡³å°‘éœ€è¦ä¸€ä¸ªä¸»èŠ‚ç‚¹ Master å’Œå¤šä¸ªè®¡ç®—èŠ‚ç‚¹ NodeMasterï¼ˆæ§åˆ¶èŠ‚ç‚¹ï¼‰ç”±ä¸‰ä¸ªç´§å¯†åä½œçš„ç‹¬ç«‹ç»„ä»¶ç»„åˆè€Œæˆè´Ÿè´£ API æœåŠ¡çš„ kube-apiserverè´Ÿè´£è°ƒåº¦çš„ kube-schedulerè´Ÿè´£å®¹å™¨ç¼–æ’çš„ kube-controller-manageræ•´ä¸ªé›†ç¾¤çš„æŒä¹…åŒ–æ•°æ®ï¼Œåˆ™ç”± kube-apiserver å¤„ç†åä¿å­˜åœ¨ Etcd ä¸­Nodeï¼ˆè®¡ç®—èŠ‚ç‚¹ï¼‰æœ€æ ¸å¿ƒçš„æ˜¯ kubelet çš„ç»„ä»¶ï¼Œå…·å¤‡ä»¥ä¸‹åŠŸèƒ½è´Ÿè´£åŒå®¹å™¨è¿è¡Œæ—¶ï¼ˆæ¯”å¦‚ Docker é¡¹ç›®ï¼‰æ‰“äº¤é“ã€‚è€Œè¿™ä¸ªäº¤äº’æ‰€ä¾èµ–çš„ï¼Œæ˜¯ä¸€ä¸ªç§°ä½œ CRIï¼ˆContainer Runtime Interfaceï¼‰çš„è¿œç¨‹è°ƒç”¨æ¥å£ï¼Œè¿™ä¸ªæ¥å£å®šä¹‰äº†å®¹å™¨è¿è¡Œæ—¶çš„å„é¡¹æ ¸å¿ƒæ“ä½œé€šè¿‡ gRPC åè®®åŒä¸€ä¸ªå«ä½œ Device Plugin çš„æ’ä»¶è¿›è¡Œäº¤äº’ã€‚è¿™ä¸ªæ’ä»¶ï¼Œæ˜¯ K8S é¡¹ç›®ç”¨æ¥ç®¡ç† GPU ç­‰å®¿ä¸»æœºç‰©ç†è®¾å¤‡çš„ä¸»è¦ç»„ä»¶è°ƒç”¨ç½‘ç»œæ’ä»¶å’Œå­˜å‚¨æ’ä»¶ä¸ºå®¹å™¨é…ç½®ç½‘ç»œå’ŒæŒä¹…åŒ–å­˜å‚¨ã€‚è¿™ä¸¤ä¸ªæ’ä»¶ä¸ kubelet è¿›è¡Œäº¤äº’çš„æ¥å£ï¼Œåˆ†åˆ«æ˜¯ CNIï¼ˆContainer Networking Interfaceï¼‰å’Œ CSIï¼ˆContainer Storage Interfaceï¼‰è¡¥å……ï¼šK8S é¡¹ç›®å¹¶ä¸å…³å¿ƒä½ éƒ¨ç½²çš„æ˜¯ä»€ä¹ˆå®¹å™¨è¿è¡Œæ—¶ã€ä½¿ç”¨çš„ä»€ä¹ˆæŠ€æœ¯å®ç°ï¼Œåªè¦ä½ çš„è¿™ä¸ªå®¹å™¨è¿è¡Œæ—¶èƒ½å¤Ÿè¿è¡Œæ ‡å‡†çš„å®¹å™¨é•œåƒï¼Œå®ƒå°±å¯ä»¥é€šè¿‡å®ç° CRI æ¥å…¥åˆ° K8S é¡¹ç›®å½“ä¸­ï¼›è€Œå…·ä½“çš„å®¹å™¨è¿è¡Œæ—¶ï¼Œæ¯”å¦‚ Docker é¡¹ç›®ï¼Œåˆ™ä¸€èˆ¬é€šè¿‡ OCI è¿™ä¸ªå®¹å™¨è¿è¡Œæ—¶è§„èŒƒåŒåº•å±‚çš„ Linux æ“ä½œç³»ç»Ÿè¿›è¡Œäº¤äº’ï¼Œå³ï¼šæŠŠ CRI è¯·æ±‚ç¿»è¯‘æˆå¯¹ Linux æ“ä½œç³»ç»Ÿçš„è°ƒç”¨ï¼ˆæ“ä½œ Linux Namespace å’Œ Cgroups ç­‰ï¼‰ Prometheusã€Metrics Server ä¸ K8S ç›‘æ§ä½“ç³»Prometheus é¡¹ç›®å·¥ä½œçš„æ ¸å¿ƒï¼Œæ˜¯ä½¿ç”¨ Pull ï¼ˆæŠ“å–ï¼‰çš„æ–¹å¼å»æœé›†è¢«ç›‘æ§å¯¹è±¡çš„ Metrics æ•°æ®ï¼ˆç›‘æ§æŒ‡æ ‡æ•°æ®ï¼‰ï¼Œç„¶åï¼Œå†æŠŠè¿™äº›æ•°æ®ä¿å­˜åœ¨ä¸€ä¸ª TSDB ï¼ˆæ—¶é—´åºåˆ—æ•°æ®åº“ï¼Œæ¯”å¦‚ OpenTSDBã€InfluxDB ç­‰ï¼‰å½“ä¸­ï¼Œä»¥ä¾¿åç»­å¯ä»¥æŒ‰ç…§æ—¶é—´è¿›è¡Œæ£€ç´¢ï¼›å…¶ä¸»è¦çš„ç‰¹ç‚¹å¦‚ä¸‹ï¼š å¤šç»´åº¦çš„æ•°æ®æ¨¡å‹ï¼šç”±æŒ‡æ ‡åç§°å’Œé”® &#x2F; å€¼å¯¹æ ‡ç­¾æ ‡è¯†çš„æ—¶é—´åºåˆ—æ•°æ®æ¥ç»„æˆå¤šç»´çš„æ•°æ®æ¨¡å‹ã€‚ çµæ´»çš„æŸ¥è¯¢è¯­è¨€ï¼šåœ¨ Prometheus ä¸­ä½¿ç”¨å¼ºå¤§çš„æŸ¥è¯¢è¯­è¨€ PromSQL æ¥è¿›è¡ŒæŸ¥è¯¢ã€‚ ä¸ä¾èµ–åˆ†å¸ƒå¼å­˜å‚¨ï¼ŒPrometheus å•ä¸ªèŠ‚ç‚¹ä¹Ÿå¯ä»¥ç›´æ¥å·¥ä½œï¼Œæ”¯æŒæœ¬åœ°å­˜å‚¨ï¼ˆTSDBï¼‰å’Œè¿œç¨‹å­˜å‚¨çš„æ¨¡å¼ã€‚ æœåŠ¡ç«¯é‡‡é›†æ•°æ®ï¼šPrometheus åŸºäº HTTP pull æ–¹å¼å»å¯¹ä¸åŒçš„ç«¯é‡‡é›†æ—¶é—´åºåˆ—æ•°æ®ã€‚ å®¢æˆ·ç«¯ä¸»åŠ¨æ¨é€ï¼šæ”¯æŒé€šè¿‡ PushGateway ç»„ä»¶ä¸»åŠ¨æ¨é€æ—¶é—´åºåˆ—æ•°æ®ã€‚ Prometheus ä½œç”¨å’Œå·¥ä½œæ–¹å¼ï¼Œå¦‚ä¸‹å›¾ Prometheus å‰©ä¸‹çš„ç»„ä»¶å°±æ˜¯ç”¨æ¥é…åˆè¿™å¥—æœºåˆ¶çš„è¿è¡Œ Prometheus Serverï¼šPrometheus æœåŠ¡ç«¯ï¼Œç”¨äºæ”¶é›†æŒ‡æ ‡å’Œå­˜å‚¨æ—¶é—´åºåˆ—æ•°æ®ï¼Œå¹¶æä¾›ä¸€ç³»åˆ—çš„æŸ¥è¯¢å’Œè®¾ç½®æ¥å£ã€‚ Client Librariesï¼šå®¢æˆ·ç«¯åº“ï¼Œç”¨äºå¸®åŠ©éœ€è¦ç›‘æ§é‡‡é›†çš„æœåŠ¡æš´éœ² metrics handler ç»™ Prometheus serverï¼Œç›´æ¥è°ƒç”¨ promhttp æš´éœ²äº†ä¸€ä¸ª metrics æ¥å£ã€‚ Push Gatewayï¼šæ¨é€ç½‘å…³ï¼ŒPrometheus æœåŠ¡ç«¯ä»…æ”¯æŒ HTTP pull çš„é‡‡é›†æ–¹å¼ï¼Œè€Œæœ‰ä¸€äº›æŒ‡å­˜åœ¨çš„æ—¶é—´çŸ­ï¼ŒPrometheus æ¥ pull å‰å°±ç»“æŸäº†ã€‚åˆæˆ–æ˜¯è¯¥ç±»æŒ‡æ ‡ï¼Œå°±æ˜¯è¦å®¢æˆ·ç«¯è‡ªè¡Œä¸ŠæŠ¥çš„ï¼Œè¿™æ—¶å€™å°±å¯ä»¥é‡‡ç”¨ Push Gateway çš„æ–¹å¼ï¼Œå®¢æˆ·ç«¯å°†æŒ‡æ ‡ push åˆ° Push Gatewayï¼Œå†ç”± Prometheus Server ä» Pushgateway ä¸Š pull Exportersï¼šç”¨äºæš´éœ²å·²æœ‰çš„ç¬¬ä¸‰æ–¹æœåŠ¡çš„ metrics ç»™ Prometheus Server Alertmanagerï¼šå¯ä»¥æ ¹æ® Metrics ä¿¡æ¯çµæ´»åœ°è®¾ç½®æŠ¥è­¦ï¼Œä» Prometheus server ç«¯æ¥æ”¶åˆ° alerts åï¼Œä¼šè¿›è¡Œå»é‡ï¼Œåˆ†ç»„ï¼Œç„¶åè·¯ç”±åˆ°å¯¹åº”çš„ Receiverï¼Œå‘å‡ºæŠ¥è­¦ Grafanaï¼šå¯¹å¤–æš´éœ²å‡ºçš„ã€å¯ä»¥çµæ´»é…ç½®çš„ç›‘æ§æ•°æ®å¯è§†åŒ–ç•Œé¢ æŒ‰ç…§ Metrics æ•°æ®çš„æ¥æºï¼Œæ¥å¯¹ K8S çš„ç›‘æ§ä½“ç³»åšä¸€ä¸ªæ±‡æ€»ï¼š ç¬¬ä¸€ç§ Metricsï¼Œæ˜¯å®¿ä¸»æœºçš„ç›‘æ§æ•°æ®ã€‚è¿™éƒ¨åˆ†æ•°æ®çš„æä¾›ï¼Œéœ€è¦å€ŸåŠ©ä¸€ä¸ªç”± Prometheus ç»´æŠ¤çš„Node Exporter å·¥å…· ç¬¬äºŒç§ Metricsï¼Œæ˜¯æ¥è‡ªäº Kubernetes çš„ API Serverã€kubelet ç­‰ç»„ä»¶çš„ &#x2F;metrics APIã€‚é™¤äº†å¸¸è§„çš„ CPUã€å†…å­˜çš„ä¿¡æ¯å¤–ï¼Œè¿™éƒ¨åˆ†ä¿¡æ¯è¿˜ä¸»è¦åŒ…æ‹¬äº†å„ä¸ªç»„ä»¶çš„æ ¸å¿ƒç›‘æ§æŒ‡æ ‡ã€‚æ¯”å¦‚ï¼Œå¯¹äº API Server æ¥è¯´ï¼Œå®ƒå°±ä¼šåœ¨ &#x2F;metrics API é‡Œï¼Œæš´éœ²å‡ºå„ä¸ª Controller çš„å·¥ä½œé˜Ÿåˆ— ç¬¬ä¸‰ç§ Metricsï¼Œæ˜¯ Kubernetes ç›¸å…³çš„ç›‘æ§æ•°æ®ã€‚è¿™éƒ¨åˆ†æ•°æ®ï¼Œä¸€èˆ¬å«ä½œ Kubernetes æ ¸å¿ƒç›‘æ§æ•°æ®ï¼ˆcore metricsï¼‰ã€‚è¿™å…¶ä¸­åŒ…æ‹¬äº† Podã€Nodeã€å®¹å™¨ã€Service ç­‰ä¸»è¦ Kubernetes æ ¸å¿ƒæ¦‚å¿µçš„ Metricsã€‚ å…¶ä¸­ï¼Œå®¹å™¨ç›¸å…³çš„ Metrics ä¸»è¦æ¥è‡ªäº kubelet å†…ç½®çš„ cAdvisor æœåŠ¡ã€‚åœ¨ kubelet å¯åŠ¨åï¼ŒcAdvisor æœåŠ¡ä¹Ÿéšä¹‹å¯åŠ¨ï¼Œè€Œå®ƒèƒ½å¤Ÿæä¾›çš„ä¿¡æ¯ï¼Œå¯ä»¥ç»†åŒ–åˆ°æ¯ä¸€ä¸ªå®¹å™¨çš„ CPU ã€æ–‡ä»¶ç³»ç»Ÿã€å†…å­˜ã€ç½‘ç»œç­‰èµ„æºçš„ä½¿ç”¨æƒ…å†µã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œæåˆ°çš„ Kubernetes æ ¸å¿ƒç›‘æ§æ•°æ®ï¼Œå…¶å®ä½¿ç”¨çš„æ˜¯ Kubernetes çš„ä¸€ä¸ªéå¸¸é‡è¦çš„æ‰©å±•èƒ½åŠ›ï¼Œå«ä½œ Metrics Serverã€‚ å£°æ˜å¼ API å’Œ K8S æ§åˆ¶å™¨ å£°æ˜å¼ API æ˜¯ Kubernetes é¡¹ç›®ç¼–æ’èƒ½åŠ›â€œèµ–ä»¥ç”Ÿå­˜â€çš„æ ¸å¿ƒæ‰€åœ¨ é¦–å…ˆï¼Œæ‰€è°“â€œå£°æ˜å¼â€ï¼ŒæŒ‡çš„å°±æ˜¯æˆ‘åªéœ€è¦æäº¤ä¸€ä¸ªå®šä¹‰å¥½çš„ API å¯¹è±¡æ¥â€œå£°æ˜â€ï¼Œæˆ‘æ‰€æœŸæœ›çš„çŠ¶æ€æ˜¯ä»€ä¹ˆæ ·å­ å…¶æ¬¡ï¼Œâ€œå£°æ˜å¼ APIâ€å…è®¸æœ‰å¤šä¸ª API å†™ç«¯ï¼Œä»¥ PATCH çš„æ–¹å¼å¯¹ API å¯¹è±¡è¿›è¡Œä¿®æ”¹ï¼Œè€Œæ— éœ€å…³å¿ƒæœ¬åœ°åŸå§‹ YAML æ–‡ä»¶çš„å†…å®¹ æœ€åï¼Œä¹Ÿæ˜¯æœ€é‡è¦çš„ï¼Œæœ‰äº†ä¸Šè¿°ä¸¤ä¸ªèƒ½åŠ›ï¼ŒKubernetes é¡¹ç›®æ‰å¯ä»¥åŸºäºå¯¹ API å¯¹è±¡çš„å¢ã€åˆ ã€æ”¹ã€æŸ¥ï¼Œåœ¨å®Œå…¨æ— éœ€å¤–ç•Œå¹²é¢„çš„æƒ…å†µä¸‹ï¼Œå®Œæˆå¯¹â€œå®é™…çŠ¶æ€â€å’Œâ€œæœŸæœ›çŠ¶æ€â€çš„è°ƒè°ï¼ˆReconcileï¼‰è¿‡ç¨‹ å®é™…è¿ç”¨é¡¹ç›®ï¼š Istio é¡¹ç›®ä½¿ç”¨çš„ï¼Œæ˜¯ K8S ä¸­çš„ä¸€ä¸ªéå¸¸é‡è¦çš„åŠŸèƒ½ï¼Œå«ä½œ Dynamic Admission Controlï¼ˆåŠ¨æ€å…¥åœºæ§åˆ¶ï¼‰ï¼Œä¹Ÿå«ä½œï¼šInitializerï¼ˆåˆå§‹åŒ–å™¨ï¼‰ã€‚æä¾›äº†ä¸€ç§â€œçƒ­æ’æ‹”â€å¼çš„ Admission æœºåˆ¶ Kubernetes æ§åˆ¶å™¨ Kubernetesæ§åˆ¶å™¨çš„è¿›åŒ–ä¹‹æ—… https://leeif.me/2020/kubernetes-operator.htmlhttps://liei.cc/2020/kubernetes-operator.html GPU åœ¨å®¹å™¨äº‘ä¸­çš„æ–¹æ¡ˆåŠä½¿ç”¨æ ¸å¿ƒåŠŸèƒ½æ¨¡å—: GPU Share Scheduler Extender: åˆ©ç”¨ Kubernetes çš„è°ƒåº¦å™¨æ‰©å±•æœºåˆ¶ï¼Œè´Ÿè´£åœ¨å…¨å±€è°ƒåº¦å™¨ Filter å’Œ Bind çš„æ—¶å€™åˆ¤æ–­èŠ‚ç‚¹ä¸Šå•ä¸ª GPU å¡æ˜¯å¦èƒ½å¤Ÿæä¾›è¶³å¤Ÿçš„ GPU Memï¼Œå¹¶ä¸”åœ¨ Bind çš„æ—¶åˆ»å°† GPU çš„åˆ†é…ç»“æœé€šè¿‡ annotation è®°å½•åˆ° Pod Spec ä»¥ä¾›åç»­ Filter æ£€æŸ¥åˆ†é…ç»“æœã€‚ GPU Share Device Plugin: åˆ©ç”¨ Device Plugin æœºåˆ¶ï¼Œåœ¨èŠ‚ç‚¹ä¸Šè¢« Kubelet è°ƒç”¨è´Ÿè´£ GPU å¡çš„åˆ†é…ï¼Œä¾èµ– scheduler Extender åˆ†é…ç»“æœæ‰§è¡Œã€‚ å…·ä½“æµç¨‹ï¼š èµ„æºä¸ŠæŠ¥ GPU Share Device Pluginåˆ©ç”¨nvmlåº“æŸ¥è¯¢åˆ°GPUå¡çš„æ•°é‡å’Œæ¯å¼ GPUå¡çš„æ˜¾å­˜ï¼Œ é€šè¿‡ ListAndWatch() å°†èŠ‚ç‚¹çš„GPUæ€»æ˜¾å­˜ï¼ˆæ•°é‡ æ˜¾å­˜ï¼‰ä½œä¸ºå¦å¤– Extended Resource æ±‡æŠ¥ç»™ Kubeletï¼› Kubelet è¿›ä¸€æ­¥æ±‡æŠ¥ç»™ Kubernetes API Server æ‰©å±•è°ƒåº¦ GPU Share Scheduler Extender å¯ä»¥åœ¨åˆ†é… gpu-mem ç»™ Pod çš„åŒæ—¶å°†åˆ†é…ä¿¡æ¯ä»¥ annotation çš„å½¢å¼ä¿ç•™åœ¨ Pod spec ä¸­ï¼Œå¹¶ä¸”åœ¨è¿‡æ»¤æ—¶åˆ»æ ¹æ®æ­¤ä¿¡æ¯åˆ¤æ–­æ¯å¼ å¡æ˜¯å¦åŒ…å«è¶³å¤Ÿå¯ç”¨çš„ gpu-mem åˆ†é…ã€‚ èŠ‚ç‚¹ä¸Šè¿è¡Œ å½“Podå’ŒèŠ‚ç‚¹ç»‘å®šçš„äº‹ä»¶è¢«Kubeletæ¥æ”¶åˆ°åï¼ŒKubeletå°±ä¼šåœ¨èŠ‚ç‚¹ä¸Šåˆ›å»ºçœŸæ­£çš„Podå®ä½“ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­, Kubeletä¼šè°ƒç”¨GPU Share Device Pluginçš„ Allocate æ–¹æ³•, Allocate æ–¹æ³•çš„å‚æ•°æ˜¯Podç”³è¯·çš„gpu-memã€‚è€Œåœ¨ Allocate æ–¹æ³•ä¸­ï¼Œä¼šæ ¹æ®GPU Share Scheduler Extenderçš„è°ƒåº¦å†³ç­–è¿è¡Œå¯¹åº”çš„Pod"},{"title":"Linux","path":"/notes/linux/index.html","content":"Systemctl å®ˆæŠ¤è¿›ç¨‹Unit ä»‹ç» Systemd å¯ä»¥ç®¡ç†æ‰€æœ‰ç³»ç»Ÿèµ„æºã€‚ä¸åŒçš„èµ„æºç»Ÿç§°ä¸º Unitï¼ˆå•ä½ï¼‰ã€‚ systemctl list-units å‘½ä»¤å¯ä»¥æŸ¥çœ‹å½“å‰ç³»ç»Ÿçš„æ‰€æœ‰ Unit # åˆ—å‡ºæ­£åœ¨è¿è¡Œçš„ Unitsystemctl list-units# åˆ—å‡ºæ‰€æœ‰Unitï¼ŒåŒ…æ‹¬æ²¡æœ‰æ‰¾åˆ°é…ç½®æ–‡ä»¶çš„æˆ–è€…å¯åŠ¨å¤±è´¥çš„systemctl list-units --all# åˆ—å‡ºæ‰€æœ‰æ²¡æœ‰è¿è¡Œçš„ Unitsystemctl list-units --all --state=inactive# åˆ—å‡ºæ‰€æœ‰åŠ è½½å¤±è´¥çš„ Unitsystemctl list-units --failed# åˆ—å‡ºæ‰€æœ‰æ­£åœ¨è¿è¡Œçš„ã€ç±»å‹ä¸º service çš„ Unitsystemctl list-units --type=service systemctl status å‘½ä»¤ç”¨äºæŸ¥çœ‹ç³»ç»ŸçŠ¶æ€å’Œå•ä¸ª Unit çš„çŠ¶æ€ # æ˜¾ç¤ºç³»ç»ŸçŠ¶æ€systemctl status# æ˜¾ç¤ºå•ä¸ª Unit çš„çŠ¶æ€sysystemctl status bluetooth.service# æ˜¾ç¤ºè¿œç¨‹ä¸»æœºçš„æŸä¸ª Unit çš„çŠ¶æ€systemctl -H root@rhel7.example.com status httpd.serviceé™¤äº† status å‘½ä»¤ï¼Œsystemctl è¿˜æä¾›äº†ä¸‰ä¸ªæŸ¥è¯¢çŠ¶æ€çš„ç®€å•æ–¹æ³•ï¼Œä¸»è¦ä¾›è„šæœ¬å†…éƒ¨çš„åˆ¤æ–­è¯­å¥ä½¿ç”¨ã€‚# æ˜¾ç¤ºæŸä¸ª Unit æ˜¯å¦æ­£åœ¨è¿è¡Œsystemctl is-active application.service# æ˜¾ç¤ºæŸä¸ª Unit æ˜¯å¦å¤„äºå¯åŠ¨å¤±è´¥çŠ¶æ€systemctl is-failed application.service# æ˜¾ç¤ºæŸä¸ª Unit æœåŠ¡æ˜¯å¦å»ºç«‹äº†å¯åŠ¨é“¾æ¥systemctl is-enabled application.service æœ€å¸¸ç”¨çš„æ˜¯ä¸‹é¢è¿™äº›å‘½ä»¤ï¼Œç”¨äºå¯åŠ¨å’Œåœæ­¢ Unitï¼ˆä¸»è¦æ˜¯ serviceï¼‰ # ç«‹å³å¯åŠ¨ä¸€ä¸ªæœåŠ¡sudo systemctl start apache.service# ç«‹å³åœæ­¢ä¸€ä¸ªæœåŠ¡sudo systemctl stop apache.service# é‡å¯ä¸€ä¸ªæœåŠ¡sudo systemctl restart apache.service# æ€æ­»ä¸€ä¸ªæœåŠ¡çš„æ‰€æœ‰å­è¿›ç¨‹sudo systemctl kill apache.service# é‡æ–°åŠ è½½ä¸€ä¸ªæœåŠ¡çš„é…ç½®æ–‡ä»¶sudo systemctl reload apache.service# é‡è½½æ‰€æœ‰ä¿®æ”¹è¿‡çš„é…ç½®æ–‡ä»¶sudo systemctl daemon-reload# æ˜¾ç¤ºæŸä¸ª Unit çš„æ‰€æœ‰åº•å±‚å‚æ•°systemctl show httpd.service# æ˜¾ç¤ºæŸä¸ª Unit çš„æŒ‡å®šå±æ€§çš„å€¼systemctl show -p CPUShares httpd.service# è®¾ç½®æŸä¸ª Unit çš„æŒ‡å®šå±æ€§sudo systemctl set-property httpd.service CPUShares=500 Unit çš„é…ç½®æ–‡ä»¶ Systemd é»˜è®¤ä»ç›®å½• /etc/systemd/system/ è¯»å–é…ç½®æ–‡ä»¶ã€‚ä½†æ˜¯ï¼Œé‡Œé¢å­˜æ”¾çš„å¤§éƒ¨åˆ†æ–‡ä»¶éƒ½æ˜¯ç¬¦å·é“¾æ¥ï¼ŒæŒ‡å‘ç›®å½• /usr/lib/systemd/system/ï¼ŒçœŸæ­£çš„é…ç½®æ–‡ä»¶å­˜æ”¾åœ¨é‚£ä¸ªç›®å½• systemctl daemon-reload é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶ systemctl enable æ¿€æ´»å¼€æœºå¯åŠ¨ systemctl disable æ’¤é”€å¼€æœºå¯åŠ¨ Unit é…ç½®æ–‡ä»¶ç¤ºä¾‹# vi /lib/systemd/system/example.service[Unit]Description=exampleAfter=network.target[Install]WantedBy=multi-user.target[Service]Type=simpleUser=rootGroup=rootRestart=always# Prevent writes to /usr, /boot, and /etcProtectSystem=full# Doesn&#x27;t yet work properly with SELinux enabled# NoNewPrivileges=truePrivateDevices=trueWorkingDirectory=/optExecStart=/opt/example --http-port=:8080 --env=pro --apollo-appid=example --apollo-url=http://apollo.example.com:80 --apollo-cluster=exampleKillMode=processKillSignal=SIGTERM# Don&#x27;t want to see an automated SIGKILL everSendSIGKILL=noRestartSec=1sUMask=007------------------------- å®ˆæŠ¤è¿›ç¨‹æ—¥å¿—ç®¡ç†Unit æ—¥å¿—å¸¸ç”¨æ“ä½œ# æŸ¥çœ‹æ‰€æœ‰æ—¥å¿—ï¼ˆé»˜è®¤æƒ…å†µä¸‹ ï¼Œåªä¿å­˜æœ¬æ¬¡å¯åŠ¨çš„æ—¥å¿—ï¼‰sudo journalctl# æŸ¥çœ‹å†…æ ¸æ—¥å¿—ï¼ˆä¸æ˜¾ç¤ºåº”ç”¨æ—¥å¿—ï¼‰sudo journalctl -k# æŸ¥çœ‹ç³»ç»Ÿæœ¬æ¬¡å¯åŠ¨çš„æ—¥å¿—sudo journalctl -bsudo journalctl -b -0# æŸ¥çœ‹ä¸Šä¸€æ¬¡å¯åŠ¨çš„æ—¥å¿—ï¼ˆéœ€æ›´æ”¹è®¾ç½®ï¼‰sudo journalctl -b -1# æŸ¥çœ‹æŒ‡å®šæ—¶é—´çš„æ—¥å¿—sudo journalctl --since=&quot;2012-10-30 18:17:16&quot;sudo journalctl --since &quot;20 min ago&quot;sudo journalctl --since yesterdaysudo journalctl --since &quot;2015-01-10&quot; --until &quot;2015-01-11 03:00&quot;sudo journalctl --since 09:00 --until &quot;1 hour ago&quot;# æ˜¾ç¤ºå°¾éƒ¨çš„æœ€æ–°10è¡Œæ—¥å¿—sudo journalctl -n# æ˜¾ç¤ºå°¾éƒ¨æŒ‡å®šè¡Œæ•°çš„æ—¥å¿—sudo journalctl -n 20# å®æ—¶æ»šåŠ¨æ˜¾ç¤ºæœ€æ–°æ—¥å¿—sudo journalctl -f# æŸ¥çœ‹æŒ‡å®šæœåŠ¡çš„æ—¥å¿—sudo journalctl /usr/lib/systemd/systemd# æŸ¥çœ‹æŒ‡å®šè¿›ç¨‹çš„æ—¥å¿—sudo journalctl _PID=1# æŸ¥çœ‹æŸä¸ªè·¯å¾„çš„è„šæœ¬çš„æ—¥å¿—sudo journalctl /usr/bin/bash# æŸ¥çœ‹æŒ‡å®šç”¨æˆ·çš„æ—¥å¿—sudo journalctl _UID=33 --since today# æŸ¥çœ‹æŸä¸ª Unit çš„æ—¥å¿—sudo journalctl -u nginx.servicesudo journalctl -u nginx.service --since today# å®æ—¶æ»šåŠ¨æ˜¾ç¤ºæŸä¸ª Unit çš„æœ€æ–°æ—¥å¿—sudo journalctl -u nginx.service -f# åˆå¹¶æ˜¾ç¤ºå¤šä¸ª Unit çš„æ—¥å¿—journalctl -u nginx.service -u php-fpm.service --since today# æŸ¥çœ‹æŒ‡å®šä¼˜å…ˆçº§ï¼ˆåŠå…¶ä»¥ä¸Šçº§åˆ«ï¼‰çš„æ—¥å¿—ï¼Œå…±æœ‰8çº§# 0: emerg# 1: alert# 2: crit# 3: err# 4: warning# 5: notice# 6: info# 7: debugsudo journalctl -p err -b# ä»¥ JSON æ ¼å¼ï¼ˆå•è¡Œï¼‰è¾“å‡ºsudo journalctl -b -u nginx.service -o json# ä»¥ JSON æ ¼å¼ï¼ˆå¤šè¡Œï¼‰è¾“å‡ºï¼Œå¯è¯»æ€§æ›´å¥½sudo journalctl -b -u nginx.serviceqq -o json-pretty# æ˜¾ç¤ºæ—¥å¿—å æ®çš„ç¡¬ç›˜ç©ºé—´sudo journalctl --disk-usage# æŒ‡å®šæ—¥å¿—æ–‡ä»¶å æ®çš„æœ€å¤§ç©ºé—´sudo journalctl --vacuum-size=1G# æŒ‡å®šæ—¥å¿—æ–‡ä»¶ä¿å­˜å¤šä¹…sudo journalctl --vacuum-time=1years æ—¥å¿—åˆ‡å‰²è½¬å­˜sudo du -ah|grep messages sudo rm messages-202101*sudo vim /etc/logrotate.d/messagelog // æ–°å»ºmessagelogé…ç½®/var/log/messages&#123; size 2000000 // 2G rotate 4 // ä¿å­˜4ä»½ copytruncate compress&#125;sudo vim /etc/logrotate.d/syslog // æ³¨é‡Šå¼•ç”¨/var/log/messagessudo crontab -e // æ–°å¢crontab*/30 * * * * sudo /usr/sbin/logrotate /etc/logrotate.conf sudo crontab -l // å‚çœ‹crontab"},{"title":"ä¸´æ—¶è®°å½•","path":"/notes/record/index.html","content":"æ¯æ—¥æ¥è§¦åˆ°çš„çŸ¥è¯†ç‚¹ï¼Œä¸ç³»ç»Ÿï¼Œæ¯”è¾ƒå‡Œä¹±ï¼Œåªæ˜¯è®°å½• 2020-08-13Uber çš„åˆ†å¸ƒå¼è¿½è¸ªç³»ç»Ÿ Jaeger2019-09-19nohupã€‚ä½¿ç”¨ nohup å‘½ä»¤è®©ç¨‹åºåœ¨å…³é—­çª—å£ï¼ˆåˆ‡æ¢ SSH è¿æ¥ï¼‰çš„æ—¶å€™ç¨‹åºè¿˜èƒ½ç»§ç»­åœ¨åå°è¿è¡Œã€‚å¦‚ï¼šnohup ./caster &amp; or nohup ./caster &gt;/dev/null 2&gt;&amp;1 &amp; 2019-08-29DSLï¼ˆDomain Specific Language é¢†åŸŸç‰¹å®šè¯­è¨€ï¼‰ &amp; GPLï¼ˆGeneral Purpose Language é€šç”¨ç¼–ç¨‹è¯­è¨€ï¼‰ 2019-08-28ç¼“å­˜ä¼˜åŒ–ï¼Œå¸¸è§ç¼“å­˜ç®—æ³• &amp; å¿«ç…§ä¸å¤‡ä»½çš„åŒºåˆ«ï¼Œå¸¸è§å¿«ç…§æœºåˆ¶ cow å’Œ row2019-08-27çŠ¶æ€æœºï¼Œæœ‰åŠ©äºç¼–ç å®ç°ï¼Œæœ‰é™çŠ¶æ€æœº FSM çš„åŸç†ä¸ Go çš„å®ç°"},{"title":"å¸¸ç”¨ Shell","path":"/notes/shell/index.html","content":"docker clikill -9 $(ps -ef|grep caster|awk &#x27;NR==1 &#123;print $3&#125;&#x27;)docker rmi $(docker images | grep &#x27;&lt;none&gt;&#x27;| awk &#x27;&#123;print $3&#125;&#x27;)docker rmi $(docker images | grep &#x27;&lt;none&gt;&#x27;| awk &#x27;&#123;next&#125;&#123;print $3&#125;&#x27;) umount $(df -h|grep danaos|awk &#x27;&#123;print $6&#125;&#x27;)shuf -n 1000000 alluser_id | awk &#x27;&#123;print $2&#125;&#x27; &gt; test_random_1000000awk &#x27;END&#123;print NR&#125;&#x27; test_random_1000000docker inspect --format &#x27;&#123;&#123; .NetworkSettings.IPAddress &#125;&#125;&#x27; centosdocker run -itd --name=centos --privileged=true -v /sys/fs/cgroup:/sys/fs/cgroup -p 8888:8888 centos:centos7 /usr/sbin/init å¼€é€šé˜²ç«å¢™ç«¯å£iptables -I INPUT -p tcp --dport 8888 -j ACCEPT å…è®¸è¿œç¨‹ä¸»æœºè®¿é—®æœ¬æœºçš„ 80 ç«¯å£iptables -Fiptables -Xiptables -A INPUT -p tcp --dport 80 -j acceptiptables -A INPUT -p tcp -j REJECT# æˆ–è€…iptables -A INPUT -m state --state NEW-m tcp -p tcp --dport 80 -j ACCEPT æŸ¥çœ‹æœ€å¤§ç©ºé—´å ç”¨ç›®å½•sudo du -h --exclude=&quot;mnt*&quot; --exclude=&quot;proc*&quot; -d 1 / ç›‘æ§ linux ç£ç›˜æ ¹åˆ†åŒº æ‰“å°æ ¹åˆ†åŒºå¤§å° # æ³¨è§£ï¼šawk â€˜&#123;print $5&#125;â€™æ„æ€æ˜¯æ‰“å°ç¬¬ 5 ä¸ªåŸŸï¼Œ-F çš„æ„æ€ä¸ºåˆ†éš”ï¼Œä¾‹å¦‚ä»¥ % åˆ†éš”ï¼Œç®€å•æ„æ€å°±æ˜¯å»æ‰ç™¾åˆ†å·ï¼Œawk â€“F. â€˜&#123;print $1&#125;â€™åˆ†éš”ç‚¹. å·df -h |sed -n &#x27;//$/p&#x27;|awk &#x27;&#123;print $5&#125;&#x27;|awk â€“F â€%â€ &#x27;&#123;print $1&#125;&#x27; if æ¡ä»¶åˆ¤æ–­è¯¥å¤§å°æ˜¯å¦å¤§äº 90ï¼Œå¦‚æœå¤§äº 90 åˆ™å‘é€é‚®ä»¶æŠ¥è­¦ while sleep 5mdo for i in `df -h |sed -n &#x27;//$/p&#x27; |awk &#x27;&#123;print $5&#125;&#x27; |sed &#x27;s/%//g&#x27;` do echo $i if [$i -ge 90];then echo â€œMore than 90% Linux of disk space ,Please LinuxSA Check Linux Disk !â€ |mail -s â€œWarn Linux / Parts is $i%â€ XXX@XXX.XX fi donedone ç½‘ç»œæŠ“åŒ… tcpdump# æŠ“å– 56.7 é€šè¿‡ 80 è¯·æ±‚çš„æ•°æ®åŒ…ã€‚tcpdump -nn host 192.168.56.7 and port 80 # 80 æ’é™¤ 0.22 80 ç«¯å£ï¼tcpdump -nn host 192.168.56.7 or ! host 192.168.0.22 and port # tcp/ip 7 å±‚åè®®ç‰©ç†å±‚â€“æ•°æ®é“¾è·¯å±‚ - ç½‘ç»œå±‚ - ä¼ è¾“å±‚ - ä¼šè¯å±‚ - è¡¨ç¤ºå±‚ - åº”ç”¨å±‚ã€‚ ä½¿ç”¨ snmpd æŠ“å–ç‰ˆæœ¬ä¸º v2 çš„ cacti æ•°æ®æ–¹å¼snmpwalk -v2c -c public 192.168.0.241 CPU æ»¡è½½æµ‹è¯•ç”¨ä¾‹# ç”±äºè¿ç»­æ‰§è¡Œï¼®ä¸ª (ï¼®æ˜¯CPUä¸ªæ•°) çš„ dd å‘½ä»¤, ä¸”ä½¿ç”¨ç‡ä¸º100%,ã€€è¿™æ—¶è°ƒåº¦å™¨ä¼šè°ƒåº¦æ¯ä¸ª dd å‘½ä»¤åœ¨ä¸åŒçš„ CPU ä¸Šå¤„ç†ï¼›æœ€ç»ˆå°±å®ç°æ‰€æœ‰ CPU å ç”¨ç‡ 100%for i in `seq 1 $(cat /proc/cpuinfo |grep &quot;physical id&quot; |wc -l)`; do dd if=/dev/zero of=/dev/null &amp; done è¯´æ˜: cat /proc/cpuinfo |grep &quot;physical id&quot; | wc -l å¯ä»¥è·å¾— CPU çš„ä¸ªæ•°,ã€€æˆ‘ä»¬å°†å…¶è¡¨ç¤ºä¸º N. seq 1 N ç”¨æ¥ç”Ÿæˆï¼‘åˆ°ï¼®ä¹‹é—´çš„æ•°å­— for i in seq 1 N; å°±æ˜¯å¾ªç¯æ‰§è¡Œå‘½ä»¤, ä»ï¼‘åˆ°ï¼® dd if=/dev/zero of=/dev/null æ‰§è¡Œ dd å‘½ä»¤,ã€€è¾“å‡ºåˆ° /dev/null, å®é™…ä¸Šåªå ç”¨ CPU,ã€€æ²¡æœ‰ IO æ“ä½œ. å¦å¤–ï¼Œä¸Šè¿°ç¨‹åºçš„ç»“æŸå¯ä»¥ä½¿ç”¨ï¼š fg åæŒ‰ ctrl + C (å› ä¸ºè¯¥å‘½ä»¤æ˜¯æ”¾åœ¨åå°æ‰§è¡Œ) pkill -9 dd æŸ¥æ‰¾å½“å‰ç›®å½•ä¸‹ä»¥ .tar çš„æ–‡ä»¶ç§»åŠ¨åˆ°æŒ‡å®šç›®å½•find . -name â€œ*.tarâ€ -exec mv &#123;&#125; ./backup/ # æ³¨è§£ï¼šfind â€“name ä¸»è¦ç”¨äºæŸ¥æ‰¾æŸä¸ªæ–‡ä»¶åå­—ï¼Œ-exec ã€xargs å¯ä»¥ç”¨æ¥æ‰¿æ¥å‰é¢çš„ç»“æœï¼Œç„¶åå°†è¦æ‰§è¡Œçš„åŠ¨ä½œï¼Œä¸€èˆ¬è·Ÿ find åœ¨ä¸€èµ·ç”¨çš„å¾ˆå¤šï¼Œfind ä½¿ç”¨æˆ‘ä»¬å¯ä»¥å»¶ä¼¸ - mtime æŸ¥æ‰¾ä¿®æ”¹æ—¶é—´ã€-type æ˜¯æŒ‡å®šå¯¹è±¡ç±»å‹ï¼ˆå¸¸è§åŒ…æ‹¬ f ä»£è¡¨æ–‡ä»¶ã€d ä»£è¡¨ç›®å½•ï¼‰ï¼Œ-size æŒ‡å®šå¤§å°ï¼Œä¾‹å¦‚ç»å¸¸ç”¨åˆ°çš„ï¼šæŸ¥æ‰¾å½“å‰ç›®å½• 30 å¤©ä»¥å‰å¤§äº 100M çš„ LOG æ–‡ä»¶å¹¶åˆ é™¤find . -name &quot;*.log&quot; â€“mtime +30 â€“typef â€“size +100M |xargs rm â€“rf &#123;&#125; æ‰¹é‡è§£å‹å½“å‰ç›®å½•ä¸‹ .zip çš„æ‰€æœ‰æ–‡ä»¶åˆ°æŒ‡å®šç›®å½•# æ³¨è§£ï¼šforI in ï¼ˆcommandï¼‰;do â€¦ done ä¸º for å¾ªç¯çš„ä¸€ä¸ªå¸¸ç”¨æ ¼å¼ï¼Œå…¶ä¸­ I ä¸ºå˜é‡ï¼Œå¯ä»¥è‡ªå·±æŒ‡å®šfor i in `find . â€“name â€œ*.zipâ€â€“type f `do unzip â€“d $i /data/www/img/done åˆ¤æ–­ç›®å½•æ˜¯å¦å­˜åœ¨# æ³¨è§£ï¼šifâ€¦;then â€¦else ..fiï¼šä¸º if æ¡ä»¶è¯­å¥,! å¹å·è¡¨ç¤ºåä¹‰ â€œä¸å­˜åœ¨ â€œï¼Œ-d ä»£è¡¨ç›®å½•ã€‚if [! â€“d /data/backup/];then Mkdirâ€“p /data/backup/else echo &quot;The Directory alreadyexists,please exit&quot;fi nginx æ—¥å¿—ç»Ÿè®¡å‰10ä¸ª IPcd /home/logs/nginx/default# æ³¨è§£ï¼šsort æ’åºã€uniqï¼ˆæ£€æŸ¥åŠåˆ é™¤æ–‡æœ¬æ–‡ä»¶ä¸­é‡å¤å‡ºç°çš„è¡Œåˆ— ï¼‰sort -m -k 4 -o access.logok access.1 access.2 access.3 ..... cat access.log |awk &#x27;&#123;print $1&#125;&#x27;|sort -n|uniq -c|sort -nr |head -10 æ‰“å°å‡ºä¸€ä¸ªæ–‡ä»¶é‡Œé¢æœ€å¤§å’Œæœ€å°å€¼cat a.txt |sort -nr|awk â€˜&#123;&#125;END&#123;print&#125; NR==1â€²cat a.txt |sort -nr |awk â€˜END&#123;print&#125; NR==1â€²# è¿™ä¸ªæ‰æ˜¯çœŸæ­£çš„æ‰“å°æœ€å¤§æœ€å°å€¼ï¼šsed â€˜s/ / /gâ€™ a.txt |sort -nr|sed -n â€™1p;$pâ€™ æŸ¥æ‰¾3å¤©å‰åˆ›å»ºä¸”åç¼€æ˜¯ \\*.log çš„æ–‡ä»¶å¹¶åˆ é™¤find . -mtime +3 -name &quot;*.log&quot; |xargs rm -rf &#123;&#125; ; å°†æŸç›®å½•ä¸‹å¤§äº 100k çš„æ–‡ä»¶ç§»åŠ¨è‡³ /tmp ä¸‹find . -size +100k -exec mv &#123;&#125; /tmp ; sed å¸¸ç”¨å‘½ä»¤# å¦‚ä½•å»æ‰è¡Œé¦–çš„. å­—ç¬¦: sed -i &#x27;s/^.//g&#x27; test.txt# åœ¨è¡Œé¦–æ·»åŠ ä¸€ä¸ª a å­—ç¬¦: sed &#x27;s/^/a/g&#x27; test.txt# åœ¨è¡Œå°¾æ·»åŠ ä¸€ä¸ª a å­—ç¬¦: sed &#x27;s/$/a/&#x27; tets.txt# åœ¨ç‰¹å®šè¡Œåæ·»åŠ ä¸€ä¸ª c å­—ç¬¦: sed &#x27;/wuguangke/ac&#x27; test.txt#åœ¨è¡Œå‰åŠ å…¥ä¸€ä¸ª c å­—ç¬¦: sed &#x27;/wuguangke/ic&#x27; test.txt# ä¿®æ”¹æ–‡æœ¬ä¸­ä»¥ jk ç»“å°¾çš„æ›¿æ¢æˆ yzsed -e â€˜s/jk$/yz/gâ€™ b.txt# sed å†’å·æ–¹å¼ sed -i â€˜s:/tmp:/tmp/abc/:gâ€™test.txt # æ„æ€æ˜¯å°† /tmp æ”¹æˆ /tmp/abc/"},{"title":"Windows","path":"/notes/windows/index.html","content":"ğŸ“¢&nbsp;å…¬å‘Šé€šçŸ¥å·²æ•´ç†è¿ç§»è‡³ ä¸“æ &#x2F;æ—¶é—´èƒ¶å›Š&#x2F;Windows å¸¸è§é—®é¢˜"},{"title":"å‰è¨€","path":"/wiki/capsules/index.html","content":"å±é™©ï¼Œè¯·ä¸è¦æ‰“å¼€è¿™ä¸ªè­¦å‘Šï¼ŒçœŸçš„å¾ˆå±é™©æœ€åä¸€æ¬¡è­¦å‘Šï¼Œåƒä¸‡ä¸è¦æ‰“å¼€è¿™ä¸ªä¸è¦è¯´æˆ‘æ²¡æœ‰è­¦å‘Šè¿‡ä½ "},{"title":"å®‰è£…ä¸é…ç½®","path":"/wiki/git/index.html","content":"git InstallLinuxWindowsMacä¸‹è½½åœ°å€https://git-scm.com/download/linuxå®‰è£…æŒ‡å®šç³»ç»Ÿçš„ä¾èµ–åŒ…ï¼šCentos/RedHat$ yum install curl-devel expat-devel gettext-devel \\ openssl-devel zlib-develDebian/Ubuntu$ apt-get install libcurl4-gnutls-dev libexpat1-dev gettext \\ libz-dev libssl-devè§£å‹å®‰è£…ä¸‹è½½çš„æºç åŒ…ï¼š$ tar -zxf git-1.7.2.2.tar.gz$ cd git-1.7.2.2$ make prefix=/usr/local all$ sudo make prefix=/usr/local installä½¿ç”¨ç»ˆç«¯æŒ‡ä»¤å®‰è£…Debian/Ubuntu$ apt-get install libcurl4-gnutls-dev libexpat1-dev gettext \\ libz-dev libssl-dev$ apt-get install git$ git --versiongit version 1.8.1.2CentOS/RedHat$ yum install curl-devel expat-devel gettext-devel \\ openssl-devel zlib-devel$ yum -y install git-core$ git --versiongit version 1.7.1ä¸‹è½½åœ°å€https://gitforwindows.org/å®Œæˆå®‰è£…ä¹‹åï¼Œå°±å¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œçš„ git å·¥å…·ï¼ˆå·²ç»è‡ªå¸¦äº† ssh å®¢æˆ·ç«¯ï¼‰äº†ï¼Œå¦å¤–è¿˜æœ‰ä¸€ä¸ªå›¾å½¢ç•Œé¢çš„ Git é¡¹ç›®ç®¡ç†å·¥å…·ã€‚åœ¨å¼€å§‹èœå•é‡Œæ‰¾åˆ° Git -&gt; Git Bashï¼Œä¼šå¼¹å‡º Git å‘½ä»¤çª—å£ï¼Œä½ å¯ä»¥åœ¨è¯¥çª—å£è¿›è¡Œ Git æ“ä½œã€‚ä¸‹è½½åœ°å€https://git-scm.com/download/macMac è‡ªå¸¦ git å¹¶ä¸”éšç€ç³»ç»Ÿç‰ˆæœ¬çš„æ›´æ–°ï¼Œè‡ªå¸¦çš„ git ä¹Ÿä¼šå‡çº§åˆ°æœ€æ–°ï¼Œä¸€èˆ¬æ— éœ€æ‰‹åŠ¨å®‰è£…ã€‚ é…ç½®Git æä¾›äº†ä¸€ä¸ªå«åš git config çš„å·¥å…·ï¼Œä¸“é—¨ç”¨æ¥é…ç½®æˆ–è¯»å–ç›¸åº”çš„å·¥ä½œç¯å¢ƒå˜é‡ã€‚è¿™äº›ç¯å¢ƒå˜é‡ï¼Œå†³å®šäº† Git åœ¨å„ä¸ªç¯èŠ‚çš„å…·ä½“å·¥ä½œæ–¹å¼å’Œè¡Œä¸ºã€‚è¿™äº›å˜é‡å¯ä»¥å­˜æ”¾åœ¨ä»¥ä¸‹ä¸‰ä¸ªä¸åŒçš„åœ°æ–¹ï¼š /etc/gitconfig æ–‡ä»¶ï¼šç³»ç»Ÿä¸­å¯¹æ‰€æœ‰ç”¨æˆ·éƒ½æ™®éé€‚ç”¨çš„é…ç½®ã€‚è‹¥ä½¿ç”¨ git config æ—¶ç”¨ --system é€‰é¡¹ï¼Œè¯»å†™çš„å°±æ˜¯è¿™ä¸ªæ–‡ä»¶ã€‚ ~/.gitconfig æ–‡ä»¶ï¼šç”¨æˆ·ç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶åªé€‚ç”¨äºè¯¥ç”¨æˆ·ã€‚è‹¥ä½¿ç”¨ git config æ—¶ç”¨ --global é€‰é¡¹ï¼Œè¯»å†™çš„å°±æ˜¯è¿™ä¸ªæ–‡ä»¶ã€‚ å½“å‰é¡¹ç›®çš„ Git ç›®å½•ä¸­çš„é…ç½®æ–‡ä»¶ï¼ˆä¹Ÿå°±æ˜¯å·¥ä½œç›®å½•ä¸­çš„ .git/config æ–‡ä»¶ï¼‰ï¼šè¿™é‡Œçš„é…ç½®ä»…ä»…é’ˆå¯¹å½“å‰é¡¹ç›®æœ‰æ•ˆã€‚æ¯ä¸€ä¸ªçº§åˆ«çš„é…ç½®éƒ½ä¼šè¦†ç›–ä¸Šå±‚çš„ç›¸åŒé…ç½®ï¼Œæ‰€ä»¥ .git/config é‡Œçš„é…ç½®ä¼šè¦†ç›– /etc/gitconfig ä¸­çš„åŒåå˜é‡ã€‚ ç”¨æˆ·ä¿¡æ¯$ git config --global user.name xaoxuu$ git config --global user.email git@xaoxuu.com å¦‚æœç”¨äº† --global é€‰é¡¹ï¼Œé‚£ä¹ˆæ›´æ”¹çš„é…ç½®æ–‡ä»¶å°±æ˜¯ä½äºä½ ç”¨æˆ·ä¸»ç›®å½•ä¸‹çš„é‚£ä¸ªï¼Œä»¥åä½ æ‰€æœ‰çš„é¡¹ç›®éƒ½ä¼šé»˜è®¤ä½¿ç”¨è¿™é‡Œé…ç½®çš„ç”¨æˆ·ä¿¡æ¯ã€‚ å¦‚æœè¦åœ¨æŸä¸ªç‰¹å®šçš„é¡¹ç›®ä¸­ä½¿ç”¨å…¶ä»–åå­—æˆ–è€…ç”µé‚®ï¼Œåªè¦å»æ‰ --global é€‰é¡¹é‡æ–°é…ç½®å³å¯ï¼Œæ–°çš„è®¾å®šä¿å­˜åœ¨å½“å‰é¡¹ç›®çš„ .git/config æ–‡ä»¶é‡Œã€‚ æŸ¥çœ‹é…ç½®ä¿¡æ¯$ git config --listhttp.postbuffer=2Muser.name=xaoxuuuser.email=git@xaoxuu.com windowsä¸‹ git-bash ç¾åŒ– å°½ç®¡ç°åœ¨ wsl+linux èƒ½ç©å‡ºèŠ±æ¥ï¼Œä½†æ˜¯ä»¥å‰éƒ½æ˜¯ babun+git-bash ä¸ºä¸»åŠ›çš„ï¼Œé‚£ä¸ç¾åŒ–ä¸‹ï¼Œwindows ä¸‹çš„ç»ˆç«¯éƒ½æ²¡æ³•çœ‹ï¼Œå°±ç®—ç°åœ¨è¦æ˜¯ä¸å°å¿ƒåˆ‡åˆ° git-bash ï¼Œè€Œä¸æƒ³å‡ºç°æ¶å¿ƒçš„å‰²è£‚æ„Ÿ~ å…·ä½“é…ç½®.minttyrc å­—ä½“å’Œé…è‰²æ–¹æ¡ˆå†è´¦æˆ·ç›®å½•ä¸‹æ–°å»º ~/.minttyrc æ–‡ä»¶Columns=106Rows=58Font=ConsolasFontHeight=13CursorType=blockCursorBlinks=noTransparency=offBoldAsFont=yesAllowBlinking=yesScrollbar=noneScrollbackLines=200ClickTargetMod=offComposeKey=shiftForegroundColour=119,80,103BackgroundColour=249,241,233CursorColour=0,184,174Black=194,168,144BoldBlack=194,168,144Red=255,43,89BoldRed=255,43,89Green=0,127,192BoldGreen=0,127,192Yellow=151,185,1BoldYellow=151,185,1Blue=248,130,20BoldBlue=248,130,20Magenta=177,54,91BoldMagenta=177,54,91Cyan=20,77,121BoldCyan=20,77,121White=0,184,174BoldWhite=0,184,174ClipShortcuts=noFontWeight=700FontIsBold=yesLanguage=zh_CNPrinter=Generic 36C-9SeriesPCLZoomShortcuts=noAltFnShortcuts=noBellType=0OpaqueWhenFocused=nogit-prompt.sh çŠ¶æ€æç¤ºè„šæœ¬.æ›¿æ¢å®‰è£…ç›®å½•ä¸‹çš„ /etc/profile åŒåè„šæœ¬å³å¯if test -f /etc/profile.d/git-sdk.shthen TITLEPREFIX=SDK-$&#123;MSYSTEM#MINGW&#125;else TITLEPREFIX=$MSYSTEMfiif test -f ~/.config/git/git-prompt.shthen . ~/.config/git/git-prompt.shelse PS1=&#x27;\\[\\033]0;$TITLEPREFIX:$PWD\\007\\]&#x27; # set window title PS1=&quot;$PS1&quot;&#x27; &#x27; # new line PS1=&quot;$PS1&quot;&#x27;\\[\\033[1;32m\\]&#x27; # change to green # PS1=&quot;$PS1&quot;&#x27;\\u@\\h &#x27; # user@host&lt;space&gt; PS1=&quot;$PS1&quot;&#x27;\\u &#x27; # user@host&lt;space&gt; PS1=&quot;$PS1&quot;&#x27;\\[\\033[1;31m\\]&#x27; # PS1=&quot;$PS1&quot;&#x27;&#123;@v@/~&#125; &#x27; PS1=&quot;$PS1&quot;&#x27;\\[\\033[1;35m\\]&#x27; # change to purple # PS1=&quot;$PS1&quot;&#x27;$MSYSTEM &#x27; # show MSYSTEM PS1=&quot;$PS1&quot;&#x27;&quot;\\t&quot; &#x27; # show TIME PS1=&quot;$PS1&quot;&#x27;\\[\\033[1;33m\\]&#x27; # change to brownish yellow PS1=&quot;$PS1&quot;&#x27;\\W&#x27; # current working directory if test -z &quot;$WINELOADERNOEXEC&quot; then GIT_EXEC_PATH=&quot;$(git --exec-path 2&gt;/dev/null)&quot; COMPLETION_PATH=&quot;$&#123;GIT_EXEC_PATH%/libexec/git-core&#125;&quot; COMPLETION_PATH=&quot;$&#123;COMPLETION_PATH%/lib/git-core&#125;&quot; COMPLETION_PATH=&quot;$COMPLETION_PATH/share/git/completion&quot; if test -f &quot;$COMPLETION_PATH/git-prompt.sh&quot; then . &quot;$COMPLETION_PATH/git-completion.bash&quot; . &quot;$COMPLETION_PATH/git-prompt.sh&quot; PS1=&quot;$PS1&quot;&#x27;\\[\\033[36m\\]&#x27; # change color to cyan PS1=&quot;$PS1&quot;&#x27;`__git_ps1`&#x27; # bash function fi fi PS1=&quot;$PS1&quot;&#x27;\\[\\033[37m\\]&#x27; # change color # PS1=&quot;$PS1&quot;&#x27; &#x27; # new line PS1=&quot;$PS1&quot;&#x27; &gt;&gt;&gt; &#x27; # prompt: always $fiMSYS2_PS1=&quot;$PS1&quot; # for detection by MSYS2 SDK&#x27;s bash.basrcå®Œæˆä¸Šè¿°ä¸¤æ­¥åï¼Œé‡å¯å³å¯ï¼Œæ•ˆæœå¦‚ä¸‹ï¼Œå¯æ ¹æ®è‡ªå·±å£å‘³è¿›è¡Œè°ƒèŠ‚ ä½¿ç”¨ SSH è¿æ¥åˆ° GitHubç”Ÿæˆæ–° SSH å¯†é’¥ ssh-keygen -t rsa -C user@example.com å…¶ä¸­ user@example.com å¯¹åº” Git çš„é‚®ç®±åœ°å€ ssh-agent æ˜¯ä¸€ç§æ§åˆ¶ç”¨æ¥ä¿å­˜å…¬é’¥èº«ä»½éªŒè¯æ‰€ä½¿ç”¨çš„ç§é’¥çš„ç¨‹åºï¼Œå…¶å® ssh-agent å°±æ˜¯ä¸€ä¸ªå¯†é’¥ç®¡ç†å™¨ï¼Œè¿è¡Œ ssh-agent ä»¥åï¼Œä½¿ç”¨ ssh-add å°†ç§é’¥äº¤ç»™ ssh-agent ä¿ç®¡ï¼Œå…¶ä»–ç¨‹åºéœ€è¦èº«ä»½éªŒè¯çš„æ—¶å€™å¯ä»¥å°†éªŒè¯ç”³è¯·äº¤ç»™ ssh-agent æ¥å®Œæˆæ•´ä¸ªè®¤è¯è¿‡ç¨‹ã€‚ eval &quot;$(ssh-agent -s)&quot; æ·»åŠ ç”Ÿæˆçš„ SSH key åˆ° ssh-agentï¼š ssh-add ~/.ssh/id_rsa è¦é…ç½® GitHub å¸æˆ·ä½¿ç”¨æ–°çš„ï¼ˆæˆ–ç°æœ‰ï¼‰SSH å¯†é’¥ï¼Œæ‚¨è¿˜éœ€è¦å°†å…¶æ·»åŠ åˆ° GitHub å¸æˆ·ã€‚è¿™ä¸ªç½‘ä¸Šæœ‰å¤§é‡çš„æ•™ç¨‹è¿™é‡Œå°±ä¸èµ˜è¿°äº†ï¼Œåç»­ä¹Ÿä¼šè®²åˆ°å¤š git è´¦æˆ·ç®¡ç†ã€‚"},{"title":"pacman","path":"/wiki/capsules/commands/pacman.html","content":"ä»‹ç»arclinux ä¸­çš„è½¯ä»¶ç®¡ç†å·¥å…·ï¼Œå¯ä»¥ç›´æ¥ä»ç½‘ç»œä¸Šçš„è½¯ä»¶ä»“åº“ä¸‹è½½å®‰è£…åŠåˆ é™¤è½¯ä»¶ï¼Œè‡ªåŠ¨å¤„ç†ä¾èµ–å…³ç³»ï¼Œç±»ä¼¼ubuntuä¸­çš„apt-get å®‰è£…è½¯ä»¶pacman -S è½¯ä»¶å: å®‰è£…è½¯ä»¶ä¹Ÿå¯ä»¥åŒæ—¶å®‰è£…å¤šä¸ªåŒ…ï¼Œåªéœ€ä»¥ç©ºæ ¼åˆ†éš”åŒ…åå³å¯pacman -S --needed è½¯ä»¶å1 è½¯ä»¶å2: å®‰è£…è½¯ä»¶ï¼Œä½†ä¸é‡æ–°å®‰è£…å·²ç»æ˜¯æœ€æ–°çš„è½¯ä»¶pacman -Sy è½¯ä»¶å: å®‰è£…è½¯ä»¶å‰ï¼Œå…ˆä»è¿œç¨‹ä»“åº“ä¸‹è½½è½¯ä»¶åŒ…æ•°æ®åº“(æ•°æ®åº“å³æ‰€æœ‰è½¯ä»¶åˆ—è¡¨)pacman -Sv è½¯ä»¶å: åœ¨æ˜¾ç¤ºä¸€äº›æ“ä½œä¿¡æ¯åæ‰§è¡Œå®‰è£…pacman -Sw è½¯ä»¶å: åªä¸‹è½½è½¯ä»¶åŒ…ï¼Œä¸å®‰è£…pacman -U è½¯ä»¶å.pkg.tar.gz: å®‰è£…æœ¬åœ°è½¯ä»¶åŒ…pacman -U http://www.example.com/repo/example.pkg.tar.xz: å®‰è£…ä¸€ä¸ªè¿œç¨‹åŒ…ï¼ˆä¸åœ¨ pacman é…ç½®çš„æºé‡Œé¢ï¼‰ æ›´æ–°ç³»ç»Ÿpacman -Sy: ä»æœåŠ¡å™¨ä¸‹è½½æ–°çš„è½¯ä»¶åŒ…æ•°æ®åº“ï¼ˆå®é™…ä¸Šå°±æ˜¯ä¸‹è½½è¿œç¨‹ä»“åº“æœ€æ–°è½¯ä»¶åˆ—è¡¨åˆ°æœ¬åœ°ï¼‰pacman -Su: å‡çº§æ‰€æœ‰å·²å®‰è£…çš„è½¯ä»¶åŒ… pacman å¯ä»¥ç”¨ä¸€ä¸ªå‘½ä»¤å°±å¯ä»¥å‡çº§æ•´ä¸ªç³»ç»Ÿï¼ŒèŠ±è´¹çš„æ—¶é—´å–å†³äºç³»ç»Ÿæœ‰å¤šè€è¿™ä¸ªå‘½ä»¤ä¼šåŒæ­¥éæœ¬åœ°(local)è½¯ä»¶ä»“åº“å¹¶å‡çº§ç³»ç»Ÿçš„è½¯ä»¶åŒ…: pacman -Syu åœ¨ Arch linux ä¸­ï¼Œåªæ”¯æŒç³»ç»Ÿå®Œæ•´å‡çº§ï¼Œä¸æ”¯æŒéƒ¨åˆ†å‡çº§ã€‚pacman -Syu ä¹Ÿä¼šå‡çº§æ•´ä¸ªç³»ç»Ÿï¼Œå®‰è£…å®Œæˆç›®å½•å ç”¨ç©ºé—´ç«‹é©¬å˜å¤§å¾ˆå¤šï¼›å¦‚æœå‡çº§æ—¶ï¼Œç½‘ç»œæ¯”è¾ƒæ…¢ï¼Œè§‰å¾—æ—¢æµªè´¹æ—¶é—´åˆæµªè´¹ç¡¬ç›˜ï¼Œå®åœ¨ä¸æƒ³å‡çº§é‚£ä¹ˆå¤šä¸œè¥¿ï¼Œå¯ä»¥é€ä¸ªè½¯ä»¶åŒ…å‡çº§ï¼Œç”¨ä¸‹é¢å‘½ä»¤å¯ä»¥å‡çº§æ ¸å¿ƒåŒ…: pacman -S --needed filesystem msys2-runtime bash libreadline libiconv libarchive libgpgme libcurl pacman ncurses libintl å¸è½½è½¯ä»¶pacman -R è½¯ä»¶å: è¯¥å‘½ä»¤å°†åªåˆ é™¤åŒ…ï¼Œä¿ç•™å…¶å…¨éƒ¨å·²ç»å®‰è£…çš„ä¾èµ–å…³ç³»pacman -Rv è½¯ä»¶å: åˆ é™¤è½¯ä»¶ï¼Œå¹¶æ˜¾ç¤ºè¯¦ç»†çš„ä¿¡æ¯pacman -Rs è½¯ä»¶å: åˆ é™¤è½¯ä»¶ï¼ŒåŒæ—¶åˆ é™¤æœ¬æœºä¸Šåªæœ‰è¯¥è½¯ä»¶ä¾èµ–çš„è½¯ä»¶pacman -Rsc è½¯ä»¶å: åˆ é™¤è½¯ä»¶ï¼Œå¹¶åˆ é™¤æ‰€æœ‰ä¾èµ–è¿™ä¸ªè½¯ä»¶çš„ç¨‹åºï¼Œæ…ç”¨pacman -Ru è½¯ä»¶å: åˆ é™¤è½¯ä»¶,åŒæ—¶åˆ é™¤ä¸å†è¢«ä»»ä½•è½¯ä»¶æ‰€éœ€è¦çš„ä¾èµ– æœç´¢è½¯ä»¶pacman -Ss å…³é”®å­—: åœ¨ä»“åº“ä¸­æœç´¢å«å…³é”®å­—çš„è½¯ä»¶åŒ…ï¼ˆæœ¬åœ°å·²å®‰è£…çš„ä¼šæ ‡è®°ï¼‰pacman -Sl &lt;repo&gt;: - æ˜¾ç¤ºè½¯ä»¶ä»“åº“ä¸­æ‰€æœ‰è½¯ä»¶çš„åˆ—è¡¨ - å¯ä»¥çœç•¥ï¼Œé€šå¸¸è¿™æ ·ç”¨:`pacman -Sl | å…³é”®å­—`pacman -Qs å…³é”®å­—: æœç´¢å·²å®‰è£…çš„è½¯ä»¶åŒ…pacman -Qu: åˆ—å‡ºæ‰€æœ‰å¯å‡çº§çš„è½¯ä»¶åŒ…pacman -Qt: åˆ—å‡ºä¸è¢«ä»»ä½•è½¯ä»¶è¦æ±‚çš„è½¯ä»¶åŒ… å‚æ•°åŠ q å¯ä»¥ç®€æ´æ–¹å¼æ˜¾ç¤ºç»“æœï¼Œæ¯”å¦‚ pacman -Ssq gcc ä¼šæ¯” pacman -Ss gcc æ˜¾ç¤ºçš„å¥½çœ‹ä¸€äº› pacman -Sl | gcc è·Ÿ pacman -Ssq gcc å¾ˆæ¥è¿‘ï¼Œä½†æ˜¯ä¼šå°‘ä¸€äº›å’Œgccæœ‰å…³ä½†è½¯ä»¶åä¸åŒ…å«gccçš„åŒ… æŸ¥è¯¢è½¯ä»¶ä¿¡æ¯pacman -Q è½¯ä»¶å: æŸ¥çœ‹è½¯ä»¶åŒ…æ˜¯å¦å·²å®‰è£…ï¼Œå·²å®‰è£…åˆ™æ˜¾ç¤ºè½¯ä»¶åŒ…åç§°å’Œç‰ˆæœ¬pacman -Qi è½¯ä»¶å: æŸ¥çœ‹æŸä¸ªè½¯ä»¶åŒ…ä¿¡æ¯ï¼Œæ˜¾ç¤ºè¾ƒä¸ºè¯¦ç»†çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬æè¿°ã€æ„æ¶ã€ä¾èµ–ã€å¤§å°ç­‰ç­‰pacman -Ql è½¯ä»¶å: åˆ—å‡ºè½¯ä»¶åŒ…å†…æ‰€æœ‰æ–‡ä»¶ï¼ŒåŒ…æ‹¬è½¯ä»¶å®‰è£…çš„æ¯ä¸ªæ–‡ä»¶ã€æ–‡ä»¶å¤¹çš„åç§°å’Œè·¯å¾„ è½¯ä»¶åŒ…ç»„pacman -Sg: åˆ—å‡ºè½¯ä»¶ä»“åº“ä¸Šæ‰€æœ‰çš„è½¯ä»¶åŒ…ç»„pacman -Qg: åˆ—å‡ºæœ¬åœ°å·²ç»å®‰è£…çš„è½¯ä»¶åŒ…ç»„å’Œå­åŒ…pacman -Sg è½¯ä»¶åŒ…ç»„: æŸ¥çœ‹æŸè½¯ä»¶åŒ…ç»„æ‰€åŒ…å«çš„æ‰€æœ‰è½¯ä»¶åŒ…pacman -Qg è½¯ä»¶åŒ…ç»„: å’Œpacman -Sg è½¯ä»¶åŒ…ç»„å®Œå…¨ä¸€æ · å¾ˆå¤šäººå»ºè®®é€šè¿‡å®‰è£…è½¯ä»¶ç»„æ¥å®‰è£…å·¥å…·é“¾ï¼Œä¾‹å¦‚: pacman -S mingw-w64-x86_64-toolchainpacman -S mingw-w64-i686-toolchainpacman -S mingw-w64-x86_64-qt5pacman -S base-devel ä½†æ˜¯è¿™æ ·æ¯”è¾ƒæµªè´¹ç©ºé—´å®é™…ä¸Šå¦‚æœæŠŠ gcc, qt, clang ç­‰å®‰è£…ä¸Šï¼Œmsys2 å°±è¦å æ‰è¶…è¿‡10Gçš„ç¡¬ç›˜ç©ºé—´ï¼Œæ‰€ä»¥ä¸ªäººå¾ˆå°‘ç›´æ¥å®‰è£…è½¯ä»¶ç»„ æ¸…ç†ç¼“å­˜pacman -Sc: æ¸…ç†æœªå®‰è£…çš„åŒ…æ–‡ä»¶ï¼ŒåŒ…æ–‡ä»¶ä½äº /var/cache/pacman/pkg/ ç›®å½•pacman -Scc: æ¸…ç†æ‰€æœ‰çš„ç¼“å­˜æ–‡ä»¶ æœ€å¸¸ç”¨çš„pacmanå‘½ä»¤pacman -Syu: å‡çº§ç³»ç»ŸåŠæ‰€æœ‰å·²ç»å®‰è£…çš„è½¯ä»¶pacman -S è½¯ä»¶å: å®‰è£…è½¯ä»¶ä¹Ÿå¯ä»¥åŒæ—¶å®‰è£…å¤šä¸ªåŒ…ï¼Œåªéœ€ä»¥ç©ºæ ¼åˆ†éš”åŒ…åå³å¯pacman -Rs è½¯ä»¶å: åˆ é™¤è½¯ä»¶ï¼ŒåŒæ—¶åˆ é™¤æœ¬æœºä¸Šåªæœ‰è¯¥è½¯ä»¶ä¾èµ–çš„è½¯ä»¶pacman -Ru è½¯ä»¶å: åˆ é™¤è½¯ä»¶ï¼ŒåŒæ—¶åˆ é™¤ä¸å†è¢«ä»»ä½•è½¯ä»¶æ‰€éœ€è¦çš„ä¾èµ–pacman -Ssq å…³é”®å­—: åœ¨ä»“åº“ä¸­æœç´¢å«å…³é”®å­—çš„è½¯ä»¶åŒ…ï¼Œå¹¶ç”¨ç®€æ´æ–¹å¼æ˜¾ç¤ºpacman -Qs å…³é”®å­—: æœç´¢å·²å®‰è£…çš„è½¯ä»¶åŒ…pacman -Qi è½¯ä»¶å: æŸ¥çœ‹æŸä¸ªè½¯ä»¶åŒ…ä¿¡æ¯ï¼Œæ˜¾ç¤ºè½¯ä»¶ç®€ä»‹,æ„æ¶,ä¾èµ–,å¤§å°ç­‰è¯¦ç»†ä¿¡æ¯pacman -Sg: åˆ—å‡ºè½¯ä»¶ä»“åº“ä¸Šæ‰€æœ‰çš„è½¯ä»¶åŒ…ç»„pacman -Sg è½¯ä»¶åŒ…ç»„: æŸ¥çœ‹æŸè½¯ä»¶åŒ…ç»„æ‰€åŒ…å«çš„æ‰€æœ‰è½¯ä»¶åŒ…pacman -Sc: æ¸…ç†æœªå®‰è£…çš„åŒ…æ–‡ä»¶ï¼ŒåŒ…æ–‡ä»¶ä½äº /var/cache/pacman/pkg/ ç›®å½•pacman -Scc: æ¸…ç†æ‰€æœ‰çš„ç¼“å­˜æ–‡ä»¶"},{"title":"Capslock+","path":"/wiki/capsules/keys/capslock+.html","content":"https://capslox.com/capslock-plus/"},{"title":"linux shell(bash)","path":"/wiki/capsules/keys/shell.html","content":"Linuxçš„ç¼ºçœShellæ˜¯Bashç†Ÿç»ƒè¿ç”¨ä¸‹é¢çš„å¿«æ·é”®å°†å¯¹æé«˜Bashçš„æ“ä½œæœ‰å¾ˆå¤šå¥½å¤„ã€‚å¦‚æœä½ ç”¨è¿‡Emacsçš„è¯ï¼Œä½ ä¼šå‘ç°å®ƒä»¬çš„å¾ˆå¤šæ“ä½œéƒ½æ˜¯ç›¸åŒçš„ï¼Œå› ä¸ºBashé»˜è®¤ä½¿ç”¨çš„æ˜¯EmacsæŒ‰é”®ç»‘å®šï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥ä¿®æ”¹ä¸ºå…¶ä»–çš„æ–¹å¼ï¼Œæ¯”å¦‚viç»‘å®šã€‚æœ¬æ–‡æ€»ç»“äº†shellåœ¨EmacsæŒ‰é”®ç»‘å®šä¸‹çš„å¿«æ·é”®ä½¿ç”¨æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯shellé»˜è®¤å¿«æ·é”®ã€‚å…¥é—¨ç”¨æˆ·å¯ä»¥å‚è€ƒæœ¬æ–‡ï¼Œä¹Ÿå¯ä»¥æŠŠæœ¬æ–‡ä½œä¸ºä¸€ä¸ªå‚è€ƒå¤‡å¿˜æ–‡æ¡£ Bash é»˜è®¤ä¸º emacs ç¼–è¾‘æ¨¡å¼ã€‚å¦‚æœä½ çš„ Bash ä¸åœ¨ emacs ç¼–è¾‘æ¨¡å¼ï¼Œå¯é€šè¿‡ set -o emacs è®¾ç½® æ§åˆ¶å‘½ä»¤Ctrl + lï¼šæ¸…å±ï¼ˆä¸clearå‘½ä»¤æ•ˆæœç›¸åŒï¼‰Ctrl + oï¼šæ‰§è¡Œå½“å‰å‘½ä»¤ï¼Œå¹¶é€‰æ‹©ä¸Šä¸€æ¡å‘½ä»¤Ctrl + sï¼šé˜»æ­¢å±å¹•è¾“å‡º(å½“å‰æ­£åœ¨æ‰§è¡Œçš„å‘½ä»¤ä¸åœ¨æ‰“å°ä¿¡æ¯)Ctrl + qï¼šå…è®¸å±å¹•è¾“å‡º(ä½¿ç”¨Ctrl+så‘½ä»¤åï¼Œå¯ä»¥ç”¨Ctrl+qæ¢å¤)Ctrl + cï¼šç»ˆæ­¢å½“å‰æ­£åœ¨æ‰§è¡Œçš„å‘½ä»¤Ctrl + zï¼šæŒ‚èµ·å‘½ä»¤ï¼ŒæŠŠå½“å‰è¿›ç¨‹è½¬åˆ°åå°è¿è¡Œï¼Œä½¿ç”¨fgå‘½ä»¤æ¢å¤ã€‚Ctrl + d : é€€å‡ºå½“å‰ Shell ^Sã€^Qã€^Cã€^Z æ˜¯ç”±ç»ˆç«¯è®¾å¤‡å¤„ç†çš„ï¼Œå¯ç”¨ stty å‘½ä»¤è®¾ç½®ã€‚ ç¼–è¾‘å‘½ä»¤å…‰æ ‡ç§»åŠ¨Ctrl + a ï¼šç§»åˆ°å‘½ä»¤è¡Œé¦–Ctrl + e ï¼šç§»åˆ°å‘½ä»¤è¡Œå°¾Ctrl + f ï¼šå‰ç§»ï¼ˆå‘å³ç§»åŠ¨ï¼‰ä¸€ä¸ªå­—ç¬¦Ctrl + b ï¼šåé€€ï¼ˆå‘å·¦ç§»åŠ¨ï¼‰ä¸€ä¸ªå­—ç¬¦Alt + f ï¼šå‰ç§»ï¼ˆå‘å³ç§»åŠ¨ï¼‰ä¸€ä¸ªå•è¯Alt + b ï¼šåé€€ï¼ˆå‘å·¦ç§»åŠ¨ï¼‰ä¸€ä¸ªå•è¯Ctrl + xxï¼šåœ¨å‘½ä»¤è¡Œé¦–å’Œå…‰æ ‡ä¹‹é—´ç§»åŠ¨ æ–‡æœ¬ä¿®æ”¹è¡¥å…¨ã€åˆ é™¤ã€ç²˜è´´tab : è‡ªåŠ¨è¡¥å…¨å‘½ä»¤Ctrl + u ï¼šä»å…‰æ ‡å¤„åˆ é™¤è‡³å‘½ä»¤è¡Œé¦–Ctrl + k ï¼šä»å…‰æ ‡å¤„åˆ é™¤è‡³å‘½ä»¤è¡Œå°¾Ctrl + w ï¼šä»å…‰æ ‡å¤„åˆ é™¤è‡³å­—é¦–Alt + d ï¼šä»å…‰æ ‡å¤„åˆ é™¤è‡³å­—å°¾Ctrl + d ï¼šåˆ é™¤å…‰æ ‡å¤„ï¼ˆæˆ–å…‰æ ‡åï¼‰çš„å­—ç¬¦ï¼ˆå¦‚æœå…‰æ ‡å‰åéƒ½æ²¡æœ‰å­—ç¬¦ï¼Œå³å‘½ä»¤è¡Œä¸ºç©ºçš„æ—¶å€™ï¼Œåˆ™ä¼šé€€å‡ºshellï¼‰Ctrl + h ï¼šåˆ é™¤å…‰æ ‡å‰çš„å­—ç¬¦(ä¸backspaceé”®ç›¸åŒ)Alt + Backspaceï¼šä¸ Ctrl + w ç±»ä¼¼ï¼Œåˆ†éš”ç¬¦æœ‰äº›å·®åˆ«Ctrl + y ï¼šç²˜è´´è‡³å…‰æ ‡å æ”¹å˜å¤§å°å†™Alt + c ï¼šä»å…‰æ ‡å¤„æ›´æ”¹ä¸ºé¦–å­—æ¯å¤§å†™çš„å•è¯Alt + u ï¼šä»å…‰æ ‡å¤„æ›´æ”¹ä¸ºå…¨éƒ¨å¤§å†™çš„å•è¯Alt + l ï¼šä»å…‰æ ‡å¤„æ›´æ”¹ä¸ºå…¨éƒ¨å°å†™çš„å•è¯ äº¤æ¢å­—ç¬¦ã€å•è¯ä½ç½®Ctrl + t ï¼šäº¤æ¢å…‰æ ‡å¤„å’Œä¹‹å‰çš„å­—ç¬¦ï¼ˆESC+tç›¸åŒï¼‰Alt + t ï¼šäº¤æ¢å…‰æ ‡å¤„å’Œä¹‹å‰çš„å•è¯ é‡æ–°æ‰§è¡Œå‘½ä»¤Ctrl + pï¼šå†å²ä¸­çš„ä¸Šä¸€æ¡å‘½ä»¤Ctrl + nï¼šå†å²ä¸­çš„ä¸‹ä¸€æ¡å‘½ä»¤Alt + .ï¼šä½¿ç”¨ä¸Šä¸€æ¡å‘½ä»¤çš„æœ€åä¸€ä¸ªå‚æ•°ï¼ˆä¼šç›´æ¥åœ¨å½“å‰å…‰æ ‡ä½ç½®æ˜¾ç¤ºï¼‰Ctrl + rï¼šæœç´¢ä¹‹å‰ä½¿ç”¨è¿‡çš„å‘½ä»¤Ctrl + gï¼šä»å†å²æœç´¢æ¨¡å¼é€€å‡º Bang (!) å‘½ä»¤Bang å‘½ä»¤ç®—ä¸ä¸Šå¿«æ·é”®é”®ï¼Œä½†æ˜¯ä½¿ç”¨å¯ä»¥å¿«æ·çš„è¿›è¡Œä¸€äº›æ“ä½œï¼Œæ¯”å¦‚é‡æ–°æ‰§è¡Œä¹‹å‰å‘½ä»¤ã€ä¿®æ”¹ä¸Šä¸€æ¡å‘½ä»¤å¹¶æ‰§è¡Œç­‰ç­‰ã€‚ !!ï¼šæ‰§è¡Œä¸Šä¸€æ¡å‘½ä»¤!ccï¼šæ‰§è¡Œæœ€è¿‘çš„ä»¥ccå¼€å¤´çš„å‘½ä»¤ï¼Œå¦‚!lä¼šæ‰§è¡Œlså‘½ä»¤!$ï¼šæ‰“å°ä¸Šä¸€æ¡å‘½ä»¤çš„æœ€åä¸€ä¸ªå‚æ•°ï¼Œå¹¶å›è½¦æ‰§è¡Œã€‚ä¸Alt + .ç›¸ä¼¼ï¼Œä½†æ˜¯ä¼šè‡ªåŠ¨æ‰§è¡Œ!*ï¼šä¸Šä¸€æ¡å‘½ä»¤çš„æ‰€æœ‰å‚æ•°!cc:pï¼šä»…æ‰“å°ä»¥!ccçš„è¾“å‡ºï¼Œä½†ä¸æ‰§è¡Œï¼Œå¦‚!l:pä¼šæ˜¾ç¤ºls!$:pï¼šæ‰“å°è¾“å‡º!$çš„è¾“å‡º!*:pï¼šæ‰“å°è¾“å‡º!*çš„è¾“å‡º^blahï¼šåˆ é™¤ä¸Šä¸€æ¡å‘½ä»¤ä¸­ç¬¬ä¸€ä¸ªblahï¼Œç„¶åæ‰§è¡Œ^blah^fooï¼šå°†ä¸Šä¸€æ¡å‘½ä»¤ä¸­çš„ blah æ›¿æ¢ä¸º fooï¼Œç„¶åæ‰§è¡Œ^blah^foo^ï¼šå°†ä¸Šä¸€æ¡å‘½ä»¤ä¸­æ‰€æœ‰çš„ blah éƒ½æ›¿æ¢ä¸º fooï¼Œç„¶åæ‰§è¡Œ"},{"title":"Visual Studio Code","path":"/wiki/capsules/keys/vscode.html","content":"æŒ‰ Press åŠŸèƒ½ Function Ctrl + Shift + Pï¼ŒF1 æ˜¾ç¤ºå‘½ä»¤é¢æ¿ Show Command Palette Ctrl + P å¿«é€Ÿæ‰“å¼€ Quick Open Ctrl + Shift + N æ–°çª—å£ &#x2F; å®ä¾‹ New window&#x2F;instance Ctrl + Shift + W å…³é—­çª—å£ &#x2F; å®ä¾‹ Close window&#x2F;instance åŸºç¡€ç¼–è¾‘ Basic editing æŒ‰ Press åŠŸèƒ½ Function Ctrl+X å‰ªåˆ‡è¡Œï¼ˆç©ºé€‰å®šï¼‰ Cut line (empty selection) Ctrl+C å¤åˆ¶è¡Œï¼ˆç©ºé€‰å®šï¼‰Copy line (empty selection) Alt+ â†‘ &#x2F; â†“ å‘ä¸Š &#x2F; å‘ä¸‹ç§»åŠ¨è¡Œ Move line up&#x2F;down Shift+Alt + â†“ &#x2F; â†‘ å‘ä¸Š &#x2F; å‘ä¸‹å¤åˆ¶è¡Œ Copy line up&#x2F;down Ctrl+Shift+K åˆ é™¤è¡Œ Delete line Ctrl+Enter åœ¨ä¸‹é¢æ’å…¥è¡Œ Insert line below Ctrl+Shift+Enter åœ¨ä¸Šé¢æ’å…¥è¡Œ Insert line above Ctrl+Shift+\\ è·³åˆ°åŒ¹é…çš„æ‹¬å· Jump to matching bracket Ctrl+] &#x2F; [ ç¼©è¿› &#x2F; ç¼©è¿›è¡Œ Indent&#x2F;outdent line Home è½¬åˆ°è¡Œé¦– Go to beginning of line End è½¬åˆ°è¡Œå°¾ Go to end of line Ctrl+Home è½¬åˆ°æ–‡ä»¶å¼€å¤´ Go to beginning of file Ctrl+End è½¬åˆ°æ–‡ä»¶æœ«å°¾ Go to end of file Ctrl+â†‘ &#x2F; â†“ å‘ä¸Š &#x2F; å‘ä¸‹æ»šåŠ¨è¡Œ Scroll line up&#x2F;down Alt+PgUp &#x2F; PgDown å‘ä¸Š &#x2F; å‘ä¸‹æ»šåŠ¨é¡µé¢ Scroll page up&#x2F;down Ctrl+Shift+[ æŠ˜å ï¼ˆæŠ˜å ï¼‰åŒºåŸŸ Fold (collapse) region Ctrl+Shift+] å±•å¼€ï¼ˆæœªæŠ˜å ï¼‰åŒºåŸŸ Unfold (uncollapse) region Ctrl+K Ctrl+[ æŠ˜å ï¼ˆæœªæŠ˜å ï¼‰æ‰€æœ‰å­åŒºåŸŸ Fold (collapse) all subregions Ctrl+K Ctrl+] å±•å¼€ï¼ˆæœªæŠ˜å ï¼‰æ‰€æœ‰å­åŒºåŸŸ Unfold (uncollapse) all subregions Ctrl+K Ctrl+0 æŠ˜å ï¼ˆæŠ˜å ï¼‰æ‰€æœ‰åŒºåŸŸ Fold (collapse) all regions Ctrl+K Ctrl+J å±•å¼€ï¼ˆæœªæŠ˜å ï¼‰æ‰€æœ‰åŒºåŸŸ Unfold (uncollapse) all regions Ctrl+K Ctrl+C æ·»åŠ è¡Œæ³¨é‡Š Add line comment Ctrl+K Ctrl+U åˆ é™¤è¡Œæ³¨é‡Š Remove line comment Ctrl+&#x2F; åˆ‡æ¢è¡Œæ³¨é‡Š Toggle line comment Shift+Alt+A åˆ‡æ¢å—æ³¨é‡Š Toggle block comment Alt+Z åˆ‡æ¢æ¢è¡Œ Toggle word wrap å¯¼èˆª Navigation æŒ‰ Press åŠŸèƒ½ Function Ctrl + T æ˜¾ç¤ºæ‰€æœ‰ç¬¦å· Show all Symbols Ctrl + G è½¬åˆ°è¡Œâ€¦ Go to Lineâ€¦ Ctrl + P è½¬åˆ°æ–‡ä»¶â€¦ Go to Fileâ€¦ Ctrl + Shift + O è½¬åˆ°ç¬¦å·â€¦ Go to Symbolâ€¦ Ctrl + Shift + M æ˜¾ç¤ºé—®é¢˜é¢æ¿ Show Problems panel F8 è½¬åˆ°ä¸‹ä¸€ä¸ªé”™è¯¯æˆ–è­¦å‘Š Go to next error or warning Shift + F8 è½¬åˆ°ä¸Šä¸€ä¸ªé”™è¯¯æˆ–è­¦å‘Š Go to previous error or warning Ctrl + Shift + Tab å¯¼èˆªç¼–è¾‘å™¨ç»„å†å²è®°å½• Navigate editor group history Alt + â†&#x2F;â†’ è¿”å› &#x2F; å‰è¿› Go back &#x2F; forward Ctrl + M åˆ‡æ¢é€‰é¡¹å¡ç§»åŠ¨ç„¦ç‚¹ Toggle Tab moves focus æœç´¢å’Œæ›¿æ¢ Search and replace æŒ‰ Press åŠŸèƒ½ Function Ctrl + F æŸ¥æ‰¾ Find Ctrl + H æ›¿æ¢ Replace F3 &#x2F; Shift + F3 æŸ¥æ‰¾ä¸‹ä¸€ä¸ª &#x2F; ä¸Šä¸€ä¸ª Find next&#x2F;previous Alt + Enter é€‰æ‹©æŸ¥æ‰¾åŒ¹é…çš„æ‰€æœ‰å‡ºç° Select all occurences of Find match Ctrl + D å°†é€‰æ‹©æ·»åŠ åˆ°ä¸‹ä¸€ä¸ªæŸ¥æ‰¾åŒ¹é… Add selection to next Find match Ctrl + K Ctrl + D å°†æœ€åä¸€ä¸ªé€‰æ‹©ç§»è‡³ä¸‹ä¸€ä¸ªæŸ¥æ‰¾åŒ¹é…é¡¹ Move last selection to next Find match Alt + C &#x2F; R &#x2F; W åˆ‡æ¢åŒºåˆ†å¤§å°å†™ &#x2F; æ­£åˆ™è¡¨è¾¾å¼ &#x2F; æ•´ä¸ªè¯ Toggle case-sensitive &#x2F; regex &#x2F; whole word å¤šå…‰æ ‡å’Œé€‰æ‹© Multi-cursor and selection æŒ‰ Press åŠŸèƒ½ Function Alt + å•å‡» æ’å…¥å…‰æ ‡ Insert cursor Ctrl + Alt +â†‘&#x2F;â†“ åœ¨ä¸Š &#x2F; ä¸‹æ’å…¥å…‰æ ‡ Insert cursor above &#x2F; below Ctrl + U æ’¤æ¶ˆä¸Šä¸€ä¸ªå…‰æ ‡æ“ä½œ Undo last cursor operation Shift + Alt + I åœ¨é€‰å®šçš„æ¯ä¸€è¡Œçš„æœ«å°¾æ’å…¥å…‰æ ‡ Insert cursor at end of each line selected Ctrl + I é€‰æ‹©å½“å‰è¡Œ Select current line Ctrl + Shift + L é€‰æ‹©å½“å‰é€‰æ‹©çš„æ‰€æœ‰å‡ºç° Select all occurrences of current selection Ctrl + F2 é€‰æ‹©å½“å‰å­—çš„æ‰€æœ‰å‡ºç° Select all occurrences of current word Shift + Alt + â†’ å±•å¼€é€‰æ‹© Expand selection Shift + Alt + â† ç¼©å°é€‰æ‹© Shrink selection Shift + Alt + ï¼ˆæ‹–åŠ¨é¼ æ ‡ï¼‰ åˆ—ï¼ˆæ¡†ï¼‰é€‰æ‹© Column (box) selection Ctrl + Shift + Alt +ï¼ˆç®­å¤´é”®ï¼‰ åˆ—ï¼ˆæ¡†ï¼‰é€‰æ‹© Column (box) selection Ctrl + Shift + Alt + PgUp &#x2F; PgDown åˆ—ï¼ˆæ¡†ï¼‰é€‰æ‹©é¡µä¸Š &#x2F; ä¸‹ Column (box) selection page up&#x2F;down ä¸°å¯Œçš„è¯­è¨€ç¼–è¾‘ Rich languages editing æŒ‰ Press åŠŸèƒ½ Function Ctrl + ç©ºæ ¼ è§¦å‘å»ºè®® Trigger suggestion Ctrl + Shift + Space è§¦å‘å™¨å‚æ•°æç¤º Trigger parameter hints Tab Emmet å±•å¼€ç¼©å†™ Emmet expand abbreviation Shift + Alt + F æ ¼å¼åŒ–æ–‡æ¡£ Format document Ctrl + K Ctrl + F æ ¼å¼é€‰å®šåŒºåŸŸ Format selection F12 è½¬åˆ°å®šä¹‰ Go to Definition Alt + F12 Peek å®šä¹‰ Peek Definition Ctrl + K F12 æ‰“å¼€å®šä¹‰åˆ°è¾¹ Open Definition to the side Ctrl + . å¿«é€Ÿè§£å†³ Quick Fix Shift + F12 æ˜¾ç¤ºå¼•ç”¨ Show References F2 é‡å‘½åç¬¦å· Rename Symbol Ctrl + Shift + . &#x2F;ï¼Œ æ›¿æ¢ä¸ºä¸‹ä¸€ä¸ª &#x2F; ä¸Šä¸€ä¸ªå€¼ Replace with next&#x2F;previous value Ctrl + K Ctrl + X ä¿®å‰ªå°¾éšç©ºæ ¼ Trim trailing whitespace Ctrl + K M æ›´æ”¹æ–‡ä»¶è¯­è¨€ Change file language ç¼–è¾‘å™¨ç®¡ç† Editor management æŒ‰ Press åŠŸèƒ½ Function Ctrl+F4, Ctrl+W å…³é—­ç¼–è¾‘å™¨ Close editor Ctrl+K F å…³é—­æ–‡ä»¶å¤¹ Close folder Ctrl+\\ æ‹†åˆ†ç¼–è¾‘å™¨ Split editor Ctrl+ 1 &#x2F; 2 &#x2F; 3 èšç„¦åˆ°ç¬¬ 1ï¼Œç¬¬ 2 æˆ–ç¬¬ 3 ç¼–è¾‘å™¨ç»„ Focus into 1st, 2nd or 3rd editor group Ctrl+K Ctrl+ â†&#x2F;â†’ èšç„¦åˆ°ä¸Šä¸€ä¸ª &#x2F; ä¸‹ä¸€ä¸ªç¼–è¾‘å™¨ç»„ Focus into previous&#x2F;next editor group Ctrl+Shift+PgUp &#x2F; PgDown å‘å·¦ &#x2F; å‘å³ç§»åŠ¨ç¼–è¾‘å™¨ Move editor left&#x2F;right Ctrl+K â† &#x2F; â†’ ç§»åŠ¨æ´»åŠ¨ç¼–è¾‘å™¨ç»„ Move active editor group æ–‡ä»¶ç®¡ç† File management æŒ‰ Press åŠŸèƒ½ Function Ctrl+N æ–°æ–‡ä»¶ New File Ctrl+O æ‰“å¼€æ–‡ä»¶â€¦ Open Fileâ€¦ Ctrl+S ä¿å­˜ Save Ctrl+Shift+S å¦å­˜ä¸ºâ€¦ Save Asâ€¦ Ctrl+K S å…¨éƒ¨ä¿å­˜ Save All Ctrl+F4 å…³é—­ Close Ctrl+K Ctrl+W å…³é—­æ‰€æœ‰ Close All Ctrl+Shift+T é‡æ–°æ‰“å¼€å…³é—­çš„ç¼–è¾‘å™¨ Reopen closed editor Ctrl+K è¾“å…¥ä¿æŒæ‰“å¼€ Enter Keep Open Ctrl+Tab æ‰“å¼€ä¸‹ä¸€ä¸ª Open next Ctrl+Shift+Tab æ‰“å¼€ä¸Šä¸€ä¸ª Open previous Ctrl+K P å¤åˆ¶æ´»åŠ¨æ–‡ä»¶çš„è·¯å¾„ Copy path of active file Ctrl+K R æ˜¾ç¤ºèµ„æºç®¡ç†å™¨ä¸­çš„æ´»åŠ¨æ–‡ä»¶ Reveal active file in Explorer Ctrl+K O æ˜¾ç¤ºæ–°çª—å£ &#x2F; å®ä¾‹ä¸­çš„æ´»åŠ¨æ–‡ä»¶ Show active file in new window&#x2F;instance æ˜¾ç¤º Display æŒ‰ Press åŠŸèƒ½ Function F11 åˆ‡æ¢å…¨å± Toggle full screen Shift+Alt+1 åˆ‡æ¢ç¼–è¾‘å™¨å¸ƒå±€ Toggle editor layout Ctrl+ &#x3D; &#x2F; - æ”¾å¤§ &#x2F; ç¼©å° Zoom in&#x2F;out Ctrl+B åˆ‡æ¢ä¾§æ å¯è§æ€§ Toggle Sidebar visibility Ctrl+Shift+E æ˜¾ç¤ºæµè§ˆå™¨ &#x2F; åˆ‡æ¢ç„¦ç‚¹ Show Explorer &#x2F; Toggle focus Ctrl+Shift+F æ˜¾ç¤ºæœç´¢ Show Search Ctrl+Shift+G æ˜¾ç¤º Git Show Git Ctrl+Shift+D æ˜¾ç¤ºè°ƒè¯• Show Debug Ctrl+Shift+X æ˜¾ç¤ºæ‰©å±• Show Extensions Ctrl+Shift+H æ›¿æ¢æ–‡ä»¶ Replace in files Ctrl+Shift+J åˆ‡æ¢æœç´¢è¯¦ç»†ä¿¡æ¯ Toggle Search details Ctrl+Shift+C æ‰“å¼€æ–°å‘½ä»¤æç¤ºç¬¦ &#x2F; ç»ˆç«¯ Open new command prompt&#x2F;terminal Ctrl+Shift+U æ˜¾ç¤ºè¾“å‡ºé¢æ¿ Show Output panel Ctrl+Shift+V åˆ‡æ¢ Markdown é¢„è§ˆ Toggle Markdown preview Ctrl+K V ä»æ—è¾¹æ‰“å¼€ Markdown é¢„è§ˆ Open Markdown preview to the side è°ƒè¯• Debug æŒ‰ Press åŠŸèƒ½ Function F9 åˆ‡æ¢æ–­ç‚¹ Toggle breakpoint F5 å¼€å§‹ &#x2F; ç»§ç»­ Start&#x2F;Continue Shift+F5 åœæ­¢ Stop F11 &#x2F; Shift+F11 ä¸‹ä¸€æ­¥ &#x2F; ä¸Šä¸€æ­¥ Step into&#x2F;out F10 è·³è¿‡ Step over Ctrl+K Ctrl+I æ˜¾ç¤ºæ‚¬åœ Show hover é›†æˆç»ˆç«¯ Integrated terminal æŒ‰ Press åŠŸèƒ½ Function Ctrl+&#96; æ˜¾ç¤ºé›†æˆç»ˆç«¯ Show integrated terminal Ctrl+Shift+&#96; åˆ›å»ºæ–°ç»ˆç«¯ Create new terminal Ctrl+Shift+C å¤åˆ¶é€‰å®š Copy selection Ctrl+Shift+V ç²˜è´´åˆ°æ´»åŠ¨ç«¯å­ Paste into active terminal Ctrl+â†‘ &#x2F; â†“ å‘ä¸Š &#x2F; å‘ä¸‹æ»šåŠ¨ Scroll up&#x2F;down Shift+PgUp &#x2F; PgDown å‘ä¸Š &#x2F; å‘ä¸‹æ»šåŠ¨é¡µé¢ Scroll page up&#x2F;down Ctrl+Home &#x2F; End æ»šåŠ¨åˆ°é¡¶éƒ¨ &#x2F; åº•éƒ¨ Scroll to top&#x2F;bottom"},{"title":"WSL2 & Arch","path":"/wiki/capsules/list/archwsl.html","content":"å®‰è£… Arch è¿›å…¥ ArchWSL ä»“åº“ä¸‹è½½æœ€æ–° release ä¸­çš„ zip åŒ… å»ºè®®é€‰æ‹©æ—  online åç¼€çš„åŒ… æ•°æ®æ–‡ä»¶å’Œå¤šç‰ˆæœ¬åœ¨ release ä¸‹è½½æœ€æ–°ç‰ˆçš„ Arch.zipè§£å‹åˆ° C ç›˜æ ¹ç›®å½•ï¼Œ(ä¸€å®šè¦åœ¨ C ç›˜ï¼Œå…¶ä»–ä½ç½®ä¹Ÿå¯ä»¥)ï¼Œä½†æ˜¯ä½ è¦æœ‰è¯¥ç›®å½•çš„è¯»å†™æƒé™ï¼Œæ‰€ä»¥ä¸èƒ½æ”¾åˆ° Program Files ç­‰ç›®å½•ä¸­åŒå‡»è§£å‹å¥½çš„ Arch.exe è¿›è¡Œå®‰è£…ï¼Œè¿™ä¸ª .exe çš„åå­— å°±æ˜¯è¦åˆ›å»ºçš„ WSL å®ä¾‹çš„åå­—ï¼Œæ”¹ä¸åŒçš„åå­—å°±èƒ½åˆ›å»ºå¤šä¸ª Arch WSL ArchWSL å¸¸ç”¨å‘½ä»¤åœ¨ç»ˆç«¯ä¸­è¿›å…¥ Arch.exe æ‰€åœ¨çš„ç›®å½•ï¼Œè¿è¡Œ .\\Arch.exe help å¯æŸ¥çœ‹è¯¦ç»†å‘½ä»¤è¯´æ˜; å¤‡ä»½ # å¤‡ä»½æ ¼å¼å‚æ•°å¯é€‰ï¼štar tgz vhdx vhdxgz reg.\\Arch.exe backup --tar æ¢å¤ .\\Arch.exe install /to/file/path/backup.tar å¸è½½ .\\Arch.exe clean é…ç½® Archç»è¿‡ä¸Šé¢çš„å®‰è£…åï¼Œç°åœ¨åˆ° terminal ä¸­è¾“å…¥ wsl è¿è¡Œå³å¯;å¦‚æœå·²ç»åœ¨ä½¿ç”¨å…¶ä»–çš„wslç³»ç»Ÿäº†ï¼Œé‚£ä¹ˆæ­¤æ—¶ç›´æ¥è¾“å…¥wsl å¹¶ä¸èƒ½å¯åŠ¨åˆšåˆšæ–°å®‰è£…çš„Archï¼Œéœ€è¦åœ¨ç»ˆç«¯ä¸­æ‰“å¼€ä¸Šé¢å®‰è£…ï¼ˆå«æœ‰ Arch.exeï¼‰æ—¶çš„ç›®å½•ï¼Œè¾“å…¥ .\\Arch.exe è¿›è¡Œè¿è¡Œï¼›æˆ–è€…ä¿®æ”¹é»˜è®¤çš„ WSL ä¸ºåˆšåˆšå®‰è£…çš„ Arch ï¼Œå¯å‚è€ƒï¼šè®¾ç½®é»˜è®¤ Linux å‘è¡Œç‰ˆ | WSL çš„åŸºæœ¬å‘½ä»¤ | Microsoft Docs åˆ›å»ºç”¨æˆ·é»˜è®¤ä½¿ç”¨ root ç”¨æˆ· ï¼Œè·³è¿‡ å¯¼å…¥å¯†é’¥(é‡è¦)# åˆå§‹åŒ–å¯†é’¥ç¯ &amp;&amp; éªŒè¯ä¸»å¯†é’¥ &amp;&amp; æ›´æ–°å¯†é’¥sudo pacman-key --init sudo pacman-key --populate archlinux sudo pacman-key --refresh-keys é…ç½®è½¯ä»¶ä»“åº“Arch Linux è½¯ä»¶ä»“åº“å›½å†…é•œåƒç¼–è¾‘ /etc/pacman.d/mirrorlistï¼Œé‡Œé¢æœ‰æ³¨é‡Šäº†çš„ China çš„é•œåƒ(é€‰æ‹© https)ï¼Œé€‰ä¸€ä¸ªä½ å–œæ¬¢çš„å–æ¶ˆæ³¨é‡Šå°±å¯ä»¥äº†ã€‚ vim /etc/pacman.d/mirrorlist å…¶ä»–è·Ÿé•œåƒæœ‰å…³çš„å¯ä»¥çœ‹è¿™é‡Œï¼šhttps://wiki.archlinux.org/index.php/Mirrors_(ç®€ä½“ä¸­æ–‡) æ·»åŠ  ArchlinuxCN æº Arch Linux ä¸­æ–‡ç¤¾åŒºä»“åº“ æ˜¯ç”± Arch Linux ä¸­æ–‡ç¤¾åŒºé©±åŠ¨çš„éå®˜æ–¹ç”¨æˆ·ä»“åº“ã€‚åŒ…å«ä¸­æ–‡ç”¨æˆ·å¸¸ç”¨è½¯ä»¶ã€å·¥å…·ã€å­—ä½“ &#x2F; ç¾åŒ–åŒ…ç­‰ã€‚ å®˜æ–¹ä»“åº“åœ°å€ï¼šhttp://repo.archlinuxcn.org echo &quot;[archlinuxcn]Server = https://mirrors.tuna.tsinghua.edu.cn/archlinuxcn/x86_64&quot; &gt;&gt; /etc/pacman.conf åŸºç¡€ç¯å¢ƒæ›´æ–°# å®‰è£…archlinuxcnè¯ä¹¦sudo pacman -Syy archlinuxcn-keyring# æ›´æ–°è½¯ä»¶æº# sudo pacman -Syyu --noconfirm ä¸æç¤ºç¡®è®¤å¯¹è¯sudo pacman -Syyu å…¶å®ƒé…ç½®ä¸‹è½½é•œåƒï¼ˆæ¨èï¼‰åˆ©ç”¨ Reflectorï¼Œè‡ªåŠ¨ç”Ÿæˆï¼Œç”Ÿæˆæ—¶å¯è®¾ç½®è¿‡æ»¤æ¡ä»¶ sudo pacman -S reflector å®‰è£…æˆåŠŸåï¼Œæ‰§è¡Œä¸‹é¢è¿™æ¡å‘½ä»¤ï¼›æ„æ€æ˜¯åœ°å€ä¸ºä¸­å›½ã€æœ€è¿‘12å°æ—¶æ´»è·ƒã€httpsåè®®ã€é€Ÿåº¦æ’åºã€ç”Ÿæˆé•œåƒæ–‡ä»¶ sudo reflector --country China --age 12 --protocol https --sort rate --save /etc/pacman.d/mirrorlist å®Œæˆåå¯ä»¥è¾“å…¥ä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹ç”Ÿæˆçš„é•œåƒåˆ—è¡¨ cat /etc/pacman.d/mirrorlist å®‰è£…å¸¸ç”¨å·¥å…·pacman -S which openssh git zsh tree wget unzip å®‰è£… AURpacman -S paru zsh é…ç½®å®‰è£…å‰ç½®å·¥å…· pacman -S lua exa fzf zshä¼šè‡ªåŠ¨ä¸‹è½½zinitä»¥åŠzshæ’ä»¶,ç”±äºé€Ÿåº¦è¾ƒæ…¢ï¼Œæ¨èä½¿ç”¨ä»£ç†ï¼š proxychains zsh .zshrc é…ç½®# ä¿®å¤emacsä¸­ä¸èƒ½è¾“å…¥ä¸­æ–‡# LC_CTYPE=&quot;zh_CN.utf8&quot;# ç§»é™¤é‡å¤çš„å‘½ä»¤å†å²setopt HIST_IGNORE_ALL_DUPS# å–æ¶ˆzshåœ¨è¾“å‡ºä¸ä»¥æ¢è¡Œç¬¦ç»“å°¾çš„å†…å®¹æ˜¯åœ¨å…¶åæ·»åŠ ç™¾åˆ†å·å¹¶å¦å…¶ä¸€è¡Œçš„ç‰¹æ€§# unsetopt prompt_cr prompt_sp# è®¾ç½®å¯ä»¥ä½¿ç”¨é€šé…ç¬¦setopt nonomatch# å…è¾“å…¥cdè¿›å…¥ç›®å½•setopt auto_cd###################### ZINIT ######################### Added by Zinit&#x27;s installerif [[ ! -f $HOME/.local/share/zinit/zinit.git/zinit.zsh ]]; then print -P &quot;%F&#123;33&#125; %F&#123;220&#125;Installing %F&#123;33&#125;ZDHARMA-CONTINUUM%F&#123;220&#125; Initiative Plugin Manager (%F&#123;33&#125;zdharma-continuum/zinit%F&#123;220&#125;)â€¦%f&quot; command mkdir -p &quot;$HOME/.local/share/zinit&quot; &amp;&amp; command chmod g-rwX &quot;$HOME/.local/share/zinit&quot; command git clone https://github.com/zdharma-continuum/zinit &quot;$HOME/.local/share/zinit/zinit.git&quot; &amp;&amp; \\ print -P &quot;%F&#123;33&#125; %F&#123;34&#125;Installation successful.%f%b&quot; || \\ print -P &quot;%F&#123;160&#125; The clone has failed.%f%b&quot;fisource &quot;$HOME/.local/share/zinit/zinit.git/zinit.zsh&quot;autoload -Uz _zinit(( $&#123;+_comps&#125; )) &amp;&amp; _comps[zinit]=_zinit### End of Zinit&#x27;s installer chunk# Load a few important annexes, without Turbozinit light-mode for \\ zdharma-continuum/zinit-annex-as-monitor \\ zdharma-continuum/zinit-annex-bin-gem-node \\ zdharma-continuum/zinit-annex-patch-dl \\ zdharma-continuum/zinit-annex-rust##### autosuggestionszinit ice wait&quot;0a&quot; lucid atload&quot;_zsh_autosuggest_start&quot;zinit light zsh-users/zsh-autosuggestions##### completionszinit ice wait&quot;0b&quot; lucid blockf atpull&#x27;zinit creinstall -q .&#x27;zinit light zsh-users/zsh-completions##### syntax highlightingzinit ice wait&quot;0c&quot; lucid atinit&quot;zicompinit; zicdreplay&quot;zinit light zdharma-continuum/fast-syntax-highlighting##### z.luazinit ice lucid wait=&#x27;0d&#x27;zinit light skywind3000/z.lua##### fzf-tabzinit ice wait&quot;0f&quot; lucid atinit&quot;zicompinit; zicdreplay&quot;zinit light Aloxaf/fzf-tab# colorzstyle &#x27;:fzf-tab:*&#x27; default-color $&#x27;\\033[38;5;79m&#x27;# disable sort when completing `git checkout`zstyle &#x27;:completion:*:git-checkout:*&#x27; sort false# set descriptions format to enable group supportzstyle &#x27;:completion:*:descriptions&#x27; format &#x27;[%d]&#x27;# set list-colors to enable filename colorizingzstyle &#x27;:completion:*&#x27; list-colors $&#123;(s.:.)LS_COLORS&#125;# preview directory&#x27;s content with exa when completingzstyle &#x27;:fzf-tab:complete:*&#x27; fzf-preview &#x27;exa -1 --color=always $realpath&#x27;# switch group using `,` and `.`zstyle &#x27;:fzf-tab:*&#x27; switch-group &#x27;,&#x27; &#x27;.&#x27;##### history searchzinit ice wait&quot;0b&quot; lucid atload&#x27;bindkey &quot;$terminfo[kcuu1]&quot; history-substring-search-up; bindkey &quot;$terminfo[kcud1]&quot; history-substring-search-down&#x27;zinit light zsh-users/zsh-history-substring-searchbindkey &#x27;^A&#x27; history-substring-search-upbindkey &#x27;^Z&#x27; history-substring-search-down##### Load Oh MY Zsh Pluginszinit snippet OMZ::plugins/git/git.plugin.zshzinit snippet OMZ::lib/history.zsh###################### STARSHIP ######################eval &quot;$(starship init zsh)&quot;# The environment for GOLANGexport GOROOT=/usr/lib/goexport GOPATH=/home/goexport PATH=$PATH:$GOROOT/bin:$GOPATH/binexport GOPROXY=https://goproxy.cn,directexport GOPRIVATE=git.ztosys.com# The environment for RUSTexport RUSTUP_DIST_SERVER=https://mirrors.sjtug.sjtu.edu.cn/rust-staticexport RUSTUP_UPDATE_ROOT=https://mirrors.sjtug.sjtu.edu.cn/rust-static/rustup# Aliasalias l=&quot;ls -alh --color&quot;alias ls=&quot;ls --color&quot;alias ll=&quot;ls -lh --color&quot;alias c=&#x27;clear&#x27;alias cda=&#x27;cd /mnt/c/Users/Administrator/&#x27;alias cdg=&#x27;cd /home/go/src/&#x27;alias cdr=&#x27;cd /home/rust&#x27;alias cdt=&#x27;cd /home/ts&#x27;alias ex=&#x27;explorer.exe .&#x27;alias tailf=&#x27;tail -f&#x27;alias gcn=&#x27;git config user.name &quot;lliei&quot;&#x27;alias gce=&#x27;git config user.email &quot;i@liei.cc&quot;&#x27;alias gczn=&#x27;git config user.name &quot;lilei1215&quot;&#x27;alias gcze=&#x27;git config user.email &quot;lilei1215@zto.ldap&quot;&#x27;source /usr/share/nvm/init-nvm.sh æ’ä»¶æ›´æ–° zinit update --all zinitæ¡†æ¶å‡çº§ zinit slef-update"},{"title":"Windows å¸¸è§é—®é¢˜","path":"/wiki/capsules/list/windows.html","content":"WSL2 å›ºå®šé™æ€IPåŸºäºè¯¥ issuecomment çš„æ€è·¯ï¼Œå®ç°é™æ€IPçš„æ–¹æ¡ˆï¼›åœ¨ WSL2 Linuxä¸­åˆ›å»ºä¸€ä¸ªè„šæœ¬æ–‡ä»¶ vim $HOME/.config/static-ip.sh static-ip.sh#!/bin/bash/mnt/c/WINDOWS/system32/netsh.exe interface ip show addresses &quot;vEthernet (WSL)&quot; | /mnt/c/WINDOWS/system32/findstr.exe /C:&quot;172.18.18.1&quot; &gt; /dev/nullif [ $? == 1 ]; then /mnt/c/WINDOWS/system32/netsh.exe interface ip add address &quot;vEthernet (WSL)&quot; address=172.18.18.1/24fiip addr show eth0 | grep -s &quot;172.18.18.100/24&quot; &gt; /dev/nullif [ $? == 1 ]; then ip addr add 172.18.18.100/24 broadcast 172.18.18.255 dev eth0 label eth0:1fi æ³¨æ„è¿™æ®µè„šæœ¬ç»™ Windows ç«¯çš„ vEthernet (WSL) æ·»åŠ IPv4 172.18.18.1ï¼Œç»™ Linux ç«¯çš„ eth0 æ·»åŠ IPv4 172.18.18.1ï¼›åœ¨ä½¿ç”¨å‰ï¼Œè¯·æŒ‰éœ€è°ƒæ•´ç½‘ç»œæ¥å£çš„åç§°å’ŒIPåœ°å€åœ¨ WSL2 å¯åŠ¨çš„æ—¶å€™æ‰§è¡Œè¯¥è„šæœ¬ vim /etc/profile æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š ä½¿ç”¨é™æ€IPWindows ç«¯é™æ€IP 172.18.18.1WSL2 Linux ç«¯é™æ€IP 172.18.18.100å¸¸è§é—®é¢˜ win11 èƒ½å¤Ÿ ping é€š wsl2ï¼Œä½†æ˜¯ wsl2 æ— æ³• ping é€š win11ï¼›ç»åˆ†æä¸»è¦æ˜¯ win11 é˜²ç«å¢™çš„åŸå› ï¼›å¯åœ¨ win11 ä¸­ æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤(ç®¡ç†å‘˜è¿è¡Œ powershell æˆ– cmd )ï¼š New-NetFirewallRule -DisplayName &quot;WSL&quot; -Direction Inbound -InterfaceAlias &quot;vEthernet (WSL)&quot; -Action Allowé‡Šæ”¾ WSL å ç”¨çš„ç¡¬ç›˜ç©ºé—´WSL ä½¿ç”¨è™šæ‹Ÿç¡¬ç›˜(VHD)å­˜å‚¨ linux ä¸‹çš„æ–‡ä»¶ï¼Œéšç€Linuxä¸‹æ–‡ä»¶è¶Šæ¥è¶Šå¤šï¼Œå ç”¨ç©ºé—´ä¹Ÿä¼šä¸æ–­å¢é•¿ï¼Œä¸è¿‡æœ‰ä¸ªæœ€å¤§é™åˆ¶ 256Gã€‚ä½†æ˜¯ï¼Œåœ¨ Linux ä¸­å‡å°‘æ–‡ä»¶å ç”¨ï¼ŒWSL å´æ²¡æœ‰ç›¸åº”çš„å‡å°‘ç¡¬ç›˜ç©ºé—´çš„å ç”¨ã€‚æ‰€ä»¥ä¸ºäº†é¿å…ç¢°åˆ° 256G çš„é™åˆ¶ï¼Œæˆ–è€…ç¡¬ç›˜ç©ºé—´å‘Šè­¦ï¼Œåœ¨åˆ é™¤æ‰ linux ä¸‹çš„æ–‡ä»¶åï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨é‡Šæ”¾è¿™éƒ¨åˆ†ç©ºé—´ï¼›è¦æ‰¾åˆ°ä½¿ç”¨çš„çš„vhdæ–‡ä»¶è·¯å¾„ æ‰“å¼€ PowerShell, æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼šwsl --shutdowndiskpart# open window Diskpartselect vdisk file=&quot;C:\\Users\\Administrator\\Data\\Arch\\ext4.vhdx&quot;attach vdisk readonlycompact vdiskdetach vdiskexitWSL2 Input/output errorè§£å†³æ–¹æ¡ˆ 1ï¼š é‡å¯ wslwsl --shutdownwslè§£å†³æ–¹æ¡ˆ 2ï¼š é‡æ–°æŒ‚è½½ C ç›˜sudo umount /mnt/csudo mount -t drvfs C:\\\\ /mnt/cç¦æ­¢æŒ‡å®šç¨‹åºè”ç½‘ä½¿ç”¨å‘½ä»¤è¡Œå»ºç«‹é˜²ç«å¢™è§„åˆ™ï¼Œä»¥ç¦æ­¢ STC-ISP è”ç½‘ä¸ºä¾‹ï¼šnetsh advfirewall firewall add rule name=&quot;stc-isp-15xx-v6.86_NewLogo&quot; dir=out program=&quot;C:\\Users\\Administrator\\Desktop\\stc-isp-15xx-v6.86_NewLogo.exe&quot; action=block æ¢å¤å…è®¸è”ç½‘ï¼šnetsh advfirewall firewall set rule name=&quot;stc-isp-15xx-v6.86_NewLogo&quot; new enable=noå›è½¦ç¡®å®šåç«‹å³ç”Ÿæ•ˆï¼›åœ¨æ§åˆ¶é¢æ¿ -&gt; windows é˜²ç«å¢™ -&gt; é«˜çº§è®¾ç½® -&gt; å‡ºç«™è®¾ç½® é‡Œå°±å‡ºç°äº†è¿™æ¡æ–°å¢é¡¹ç›®Chromeï¼ˆCentBrowserï¼‰å¹³æ»‘æ»šåŠ¨è®¾ç½®ä¸€ç›´ä»¥æ¥å¯¹ Microsoft EDGE çš„å¹³æ»‘æ»šåŠ¨çš„æ•ˆæœå¾ˆç¾¡æ…•ï¼Œè€Œ Chrome çš„ Smooth Scrolling å¤ªç³Ÿç³•ï¼Œç ”ç©¶äº†å‡ å¤©ï¼Œç»è¿‡æ‘¸ç´¢ç»ˆäºå‘ç°äº†å…¶å® Chromeï¼ˆCentBrowserï¼‰ä¹Ÿæœ‰è¿™ä¸ªè®¾ç½®ï¼Œåªæ˜¯é»˜è®¤æ²¡æœ‰å¼€å¯ç½¢äº†ã€‚åœ¨ chrome://flags ä¸­å°† Impulse-style scroll animationsPercent-based Scrollingè¿™ä¸¤ä¸ªè®¾ç½®æˆ Enable å°±è¡Œäº†ï¼Œæ¯”ä»»ä½•æ’ä»¶éƒ½è¦å¥½ç”¨ï¼ŒåŸç”Ÿæ”¯æŒï¼æ³¨æ„Smooth Scrolling è¿˜æ˜¯ Default å°±è¡Œï¼Œä¸éœ€è¦ä¿®æ”¹å¼€å¯æµè§ˆå™¨å¤šçº¿ç¨‹ä¸‹è½½é€‰é¡¹å°½ç®¡æ²¡æœ‰ IDM ç­‰ä¸“é—¨çš„ä¸‹è½½è½¯ä»¶é‚£ä¹ˆä¸“ä¸šå¼ºå¤§ï¼Œä½†åœ¨å¼€å¯å¤šçº¿ç¨‹ä¸‹è½½é€‰é¡¹ä¹‹åï¼Œåªè¦æœåŠ¡å™¨æ”¯æŒå¤šçº¿ç¨‹ï¼Œé‚£ä¹ˆç›´æ¥ä½¿ç”¨æµè§ˆå™¨ä¸‹è½½æ–‡ä»¶å°±èƒ½è·å¾—æ¯”åŸå…ˆæ›´å¿«çš„é€Ÿåº¦ChromeEdge (Chromium å†…æ ¸)åœ°å€æ è¾“å…¥å¹¶å›è½¦ï¼šchrome://flags/#enable-parallel-downloadingç„¶åä½ å°±èƒ½çœ‹åˆ°å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåªéœ€å°†é»˜è®¤çš„ Default æ”¹æˆ Enabled å³å¯ï¼ç„¶åç‚¹å‡» Relaunch é‡å¯æµè§ˆå™¨ï¼Œå¤šçº¿ç¨‹ä¸‹è½½çš„é€‰é¡¹å°±ç”Ÿæ•ˆäº†ï¼Œè¿™æ—¶å°±å¯ä»¥æ‰¾ä¸ªæ–‡ä»¶å»è¯•è¯•é€Ÿåº¦äº†åœ°å€æ è¾“å…¥å¹¶å›è½¦ï¼šedge://flags/#enable-parallel-downloadingç„¶åä½ å°±èƒ½çœ‹åˆ°å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåªéœ€å°†é»˜è®¤çš„ Default æ”¹æˆ Enabled å³å¯ï¼ç„¶åç‚¹å‡» Relaunch é‡å¯æµè§ˆå™¨ï¼Œå¤šçº¿ç¨‹ä¸‹è½½çš„é€‰é¡¹å°±ç”Ÿæ•ˆäº†ï¼Œè¿™æ—¶å°±å¯ä»¥æ‰¾ä¸ªæ–‡ä»¶å»è¯•è¯•é€Ÿåº¦äº†æµè§ˆå™¨å¼€å¯ç»ˆæé»‘æš—æ¨¡å¼ä½¿ç”¨æ‰©å±•ä¸ä½¿ç”¨æ‰©å±•ï¼ˆæ¨èï¼‰Dark ReaderMidnight Lizardæµè§ˆå™¨åœ°å€æ è¾“å…¥ edge://flags or chrome://flagsä½¿ç”¨æœ€ä¸Šæ–¹çš„æœç´¢å…³é”®å­— darkï¼Œå°† Auto Dark Mode for Web Contents é€‰é¡¹è®¾ç½®ä¸º Enabled with selective inversion of non-image elementsï¼Œä¹Ÿå¯ä»¥å°è¯•å…¶ä»–é€‰é¡¹é‡å¯æµè§ˆå™¨ï¼Œå³å¯ã€‚é…ç½® WSL2 ä½¿ç”¨ä»£ç†ä¸Šç½‘å°†å®¿ä¸»æœºçš„ä»£ç†å…±äº«ç»™è¿™ä¸ªå±€åŸŸç½‘ä¸‹çš„å…¶ä»–è®¾å¤‡ï¼Œä»¥ Clash ä¸ºä¾‹ï¼Œæ‰“å¼€ Allow LAN é€‰é¡¹WSL2 ä¸‹æ“ä½œï¼š## è·å–ä¸»æœº IP## ä¸»æœº IP ä¿å­˜åœ¨ /etc/resolv.conf ä¸­export hostip=$(cat /etc/resolv.conf |grep -oP &#x27;(?&lt;=nameserver\\ ).*&#x27;)## è®¾ç½®ä»£ç†export all_proxy=&quot;socks5://$&#123;hostip&#125;:7890&quot;## éªŒè¯curl google.comç®€åŒ–ä¸Šè¿°è®¾ç½®ï¼Œåœ¨ ~&#x2F;.zshrc ä¸­æ·»åŠ çš„ä»¥ä¸‹é…ç½®export hostip=$(cat /etc/resolv.conf |grep -oP &#x27;(?&lt;=nameserver\\ ).*&#x27;)alias setss=&#x27;export ALL_PROXY=&quot;socks5://$&#123;hostip&#125;:7890&quot;&#x27;alias unsetss=&#x27;unset ALL_PROXY&#x27;å¦‚æœwslè¿æ¥ä¸åˆ°ä¸»æœºï¼ˆpingä¸é€šçš„è¯ï¼‰ï¼Œç›´æ¥æ”¾å¼€ vEthernet (WSL) è¿™å¼ ç½‘å¡çš„é˜²ç«å¢™ï¼Œåœ¨ powershell ä¸Šæ‰§è¡Œï¼šNew-NetFirewallRule -DisplayName &quot;WSL&quot; -Direction Inbound -InterfaceAlias &quot;vEthernet (WSL)&quot; -Action Allow"},{"title":"æ­å»ºå…è´¹ CDN","path":"/wiki/git/cdn/index.html","content":"ç™¾åº¦ç™¾ç§‘CDN çš„å…¨ç§°æ˜¯ Content Delivery Networkï¼Œå³å†…å®¹åˆ†å‘ç½‘ç»œã€‚CDN æ˜¯æ„å»ºåœ¨ç½‘ç»œä¹‹ä¸Šçš„å†…å®¹åˆ†å‘ç½‘ç»œï¼Œä¾é éƒ¨ç½²åœ¨å„åœ°çš„è¾¹ç¼˜æœåŠ¡å™¨ï¼Œé€šè¿‡ä¸­å¿ƒå¹³å°çš„è´Ÿè½½å‡è¡¡ã€å†…å®¹åˆ†å‘ã€è°ƒåº¦ç­‰åŠŸèƒ½æ¨¡å—ï¼Œä½¿ç”¨æˆ·å°±è¿‘è·å–æ‰€éœ€å†…å®¹ï¼Œé™ä½ç½‘ç»œæ‹¥å¡ï¼Œæé«˜ç”¨æˆ·è®¿é—®å“åº”é€Ÿåº¦å’Œå‘½ä¸­ç‡ã€‚CDN çš„å…³é”®æŠ€æœ¯ä¸»è¦æœ‰å†…å®¹å­˜å‚¨å’Œåˆ†å‘æŠ€æœ¯ã€‚ æ–°å»º Github Repository å°±å¸¸è§„çš„æ–°å»º Github ä»“åº“ï¼Œä½œä¸ºå†…å®¹å­˜å‚¨ï¼›æœ€å¥½éƒ½ä½¿ç”¨å‘½ä»¤è¡Œæ“ä½œï¼Œä¸ç†Ÿæ‚‰çš„è‡ªå·±å»æŸ¥ï¼Œè¿™æ˜¯æœ€åŸºç¡€çš„ï¼Œä¹–å“¦ï¼æˆ‘å°±ä¸è¯´äº† é€šè¿‡ jsDelivr å¼•ç”¨èµ„æºjsDelivr æ˜¯ä»€ä¹ˆï¼ŸjsDelivr ç”± ProspectOne ç»´æŠ¤çš„å…¬å…±åº“ï¼Œä½¿ç”¨çš„èåˆ CDN æŠ€æœ¯ï¼Œç”± Cloudflareã€Fastlyã€StackPathã€QUANTIL ç­‰ CDN ä¾›åº”å•†æä¾›äº†å…¨çƒè¶…è¿‡ 750 ä¸ª CDN èŠ‚ç‚¹ã€‚æœ€é‡è¦çš„æ˜¯ï¼ŒjsDelivr åœ¨ä¸­å›½å¤§é™†ä¹Ÿæ‹¥æœ‰è¶…è¿‡æ•°ç™¾ä¸ªèŠ‚ç‚¹ï¼Œå› ä¸º jsDelivr æ‹¥æœ‰æ­£è§„çš„ ICP å¤‡æ¡ˆï¼Œè§£å†³äº†ä¸­å›½å¤§é™†çš„è®¿é—®é€Ÿåº¦ä¼˜åŒ–ï¼Œå®ç°çœŸæ­£çš„å…¨çƒæé€Ÿä½å»¶è¿Ÿä½“éªŒã€‚jsDelivr æ˜¯å…è´¹çš„ã€ä¸é™åˆ¶å¸¦å®½çš„ï¼Œå¯ä»¥åŠ é€Ÿ NPMã€Github å†…çš„æ–‡ä»¶ã€‚ ä½¿ç”¨æ–¹æ³• æ ¹æ®ç‰ˆæœ¬å·https://cdn.jsdelivr.net/gh/Username/YourRepoName@Version/FilePath æ ¹æ® Commit Hash æäº¤è®°å½•https://cdn.jsdelivr.net/gh/Username/YourRepoName@CommitHash/FilePath è·å–æœ€æ–°æäº¤https://cdn.jsdelivr.net/gh/Username/YourRepoName/FilePath ä¸¾ä¸ªä¾‹å­ ğŸŒhttps://cdn.jsdelivr.net/gh/leeifme/oss-aliyun-cli@0.1.0/README.mdhttps://cdn.jsdelivr.net/gh/leeifme/oss-aliyun-cli@1d86a902394f556f954142125746f5b7c014c6bd/README.mdhttps://cdn.jsdelivr.net/gh/leeifme/oss-aliyun-cli/README.m ä»£ç å‹ç¼© jsDelivr è¿˜æä¾›äº†ä»£ç å‹ç¼©æœåŠ¡ï¼Œæ¯”å¦‚å°† JS&#x2F;CSS çš„ä»£ç å‹ç¼©ï¼Œä¼˜åŒ–è®¿é—®é€Ÿåº¦ã€‚åªæ˜¯å‰å‡ æ¬¡è®¿é—®ä¼šæ‰§è¡Œå‹ç¼©æ“ä½œï¼Œé€Ÿåº¦æ¯”è¾ƒæ…¢ã€‚åé¢å°±ä¼šå°†æ–‡ä»¶ç¼“å­˜ï¼Œé€Ÿåº¦ä¸ä¼šå†æ…¢äº†ã€‚ç›´æ¥å°†è®¿é—®é“¾æ¥çš„æ–‡ä»¶åç¼€æ”¹æˆ .min.js å³å¯ã€‚ä¾‹å¦‚ï¼š https://cdn.jsdelivr.net/gh/jquery/jquery@3.2.1/src/example.min.js"},{"title":"git-flow çš„å·¥ä½œæµç¨‹","path":"/wiki/git/git-flow/index.html","content":"å‰è¨€ å½“åœ¨å›¢é˜Ÿå¼€å‘ä¸­ä½¿ç”¨ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿæ—¶ï¼Œå•†å®šä¸€ä¸ªç»Ÿä¸€çš„å·¥ä½œæµç¨‹æ˜¯è‡³å…³é‡è¦çš„ã€‚ Git çš„ç¡®å¯ä»¥åœ¨å„ä¸ªæ–¹é¢åšå¾ˆå¤šäº‹æƒ…ï¼Œç„¶è€Œï¼Œå¦‚æœåœ¨ä½ çš„å›¢é˜Ÿä¸­è¿˜æ²¡æœ‰èƒ½å½¢æˆä¸€ä¸ªç‰¹å®šæœ‰æ•ˆçš„å·¥ä½œæµç¨‹ï¼Œé‚£ä¹ˆæ··ä¹±å°±å°†æ˜¯ä¸å¯é¿å…çš„ã€‚ git-flow å°±æ˜¯å½“å‰éå¸¸æµè¡Œä¸”è¡Œä¹‹æœ‰æ•ˆçš„å·¥ä½œæµç¨‹ï¼Œ æ˜¯ä¸€ä¸ª Git æ‰©å±•é›†ï¼ŒæŒ‰ Vincent Driessen çš„åˆ†æ”¯æ¨¡å‹æä¾›é«˜å±‚æ¬¡çš„åº“æ“ä½œï¼Œå¹¶ä¸”æä¾›äº†æå…¶å‡ºè‰²çš„å‘½ä»¤å¸®å¿™ä»¥åŠè¾“å‡ºæç¤ºï¼Œæœ¬æ–‡ä¸­æœ‰æ¼”ç¤ºæ“ä½œï¼Œå¯ä»¥ä»”ç»†é˜…è¯»å¹¶è§‚å¯Ÿå‘ç”Ÿäº†ä»€ä¹ˆäº‹æƒ… git-flow å®‰è£…å®‰è£…æŒ‡å—ï¼šhttps://github.com/petervanderdoes/gitflow-avh/wiki/Installation å‡†å¤‡å·¥ä½œï¼ˆWindowsï¼‰æŒ‰ç…§å®˜æ–¹ç»™å‡ºçš„å®‰è£…æ–¹æ³•ï¼Œä¾æ¬¡ç‚¹å‡»ä¸‰ä¸ªé“¾æ¥ï¼š util-linux package libintl libiconv ä¸‰ä¸ªè¦ä¸‹è½½çš„éƒ½æ˜¯ Binaries çš„ zip æ ¼å¼æ–‡ä»¶ï¼Œä¸‹è½½å®Œååªéœ€è¦æŠŠå„è‡ª bin ç›®å½•ä¸‹çš„å¯¹åº”æ–‡ (getopt.exeï¼Œlibintl3.dllï¼Œlibiconv2.dll ) ä»¶å¤åˆ¶åˆ° git å®‰è£…ç›®å½•çš„ bin ç›®å½•ä¸‹å³å¯, å…¶ä»–çš„éƒ½ä¸éœ€è¦ï¼Œç‰ˆæœ¬å’Œè·¯å¾„æ ¹æ®è‡ªå·±çš„æƒ…å†µè€Œå®š Clone the git-flowæ‰“å¼€ Git Bash æ‰§è¡Œï¼š $ git config --global url.&quot;https://github&quot;.insteadOf git://github å¦‚æœä¸æ‰§è¡Œè¿™æ¡å‘½ä»¤ï¼Œç›´æ¥æ‰§è¡Œä¸‹é¢å‘½ä»¤çš„è¯ï¼Œclone ä¼šå‡ºç°å¡ä½ç°è±¡ $ git clone --recursive git://github.com/nvie/gitflow.git æ‰“å¼€powershellï¼ˆä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œï¼‰ï¼Œ cd åˆ°ä¸‹è½½ gitflow çš„ç›®å½•ä¸‹ PS C:\\Users\\Administrator&gt; cd .\\gitflow\\PS C:\\Users\\Administrator\\gitflow&gt; .\\contrib\\msysgit-install.cmd &quot;C:\\Program Files\\Software\\Git&quot;# &quot;C:\\Program Files\\Software\\Git&quot; æ ¹æ®å®‰è£… git çš„å®‰è£…ç›®å½•è¿›è¡Œè°ƒæ•´ æµ‹è¯•æ˜¯å¦å®‰è£…æˆåŠŸï¼Œæ‰“å¼€ Git Bash Administrator at 14:56:56 / $ git flow helpusage: git flow &lt;subcommand&gt;Available subcommands are: init Initialize a new git repo with support for the branching model. feature Manage your feature branches. bugfix Manage your bugfix branches. release Manage your release branches. hotfix Manage your hotfix branches. support Manage your support branches. version Shows version information. config Manage your git-flow configuration. log Show log deviating from base branch.Try &#x27;git flow &lt;subcommand&gt; help&#x27; for details. git-flow ä½¿ç”¨å¼€å‘æ–°åŠŸèƒ½ ( Feature )éœ€æ±‚ï¼šæ·»åŠ ä¸€ä¸ª README.md æ–‡ä»¶ï¼Œå¹¶æ·»åŠ å†…å®¹ åˆ›å»º my-feature åˆ†æ”¯ Administrator at 16:04:03 Go-fun (develop) $ git flow feature start my-featureSwitched to a new branch &#x27;feature/my-feature&#x27;Summary of actions:- A new branch &#x27;feature/my-feature&#x27; was created, based on &#x27;develop&#x27;- You are now on branch &#x27;feature/my-feature&#x27;Now, start committing on your feature. When done, use: git flow feature finish my-feature Administrator at 16:04:51 Go-fun (feature/my-feature) $ æ ¹æ®æç¤ºï¼Œæˆ‘ä»¬çŸ¥é“ä¸€ä¸ªæ–°çš„åˆ†æ”¯ featureï¼my-feature åŸºäº develop åˆ†æ”¯åˆ›å»ºå¥½äº†, å¹¶ä¸”ç›®å‰æˆ‘ä»¬æ‰€åœ¨çš„åˆ†æ”¯ä¸º featureï¼my-featureï¼Œå¯ä»¥æŸ¥çœ‹ä¸‹åˆ†æ”¯æƒ…å†µ $ git branch develop* feature/my-feature master åœ¨ feature/my-feature åˆ†æ”¯æ–°å»ºä¸€ä¸ª README.md å¹¶æäº¤ $ vi README.md$ git add README.md$ git commit -m &quot;create README.md&quot;[feature/my-feature e783fdf] create README.md1 file changed, 1 insertion(+)create mode 100644 README.md å®Œæˆ feature åˆ†æ”¯åˆå¹¶ æ ¹æ®ä¹‹å‰åˆ›å»ºåˆ†æ”¯çš„æç¤ºå¯çŸ¥ï¼Œåœ¨å®Œæˆæ–°åŠŸèƒ½çš„å¼€å‘åï¼Œå¯ä½¿ç”¨ git flow feature finish &lt;name&gt; æäº¤åˆå¹¶ $ git flow feature finish my-featureSwitched to branch &#x27;develop&#x27;Updating bde3a64..e783fdfFast-forward README.md | 1 + 1 file changed, 1 insertion(+) create mode 100644 README.mdDeleted branch feature/my-feature (was e783fdf).Summary of actions:- The feature branch &#x27;feature/my-feature&#x27; was merged into &#x27;develop&#x27;- Feature branch &#x27;feature/my-feature&#x27; has been locally deleted- You are now on branch &#x27;develop&#x27; æ ¹æ®æç¤ºï¼Œæˆ‘ä»¬çœ‹åˆ°äº† git flow feature finish my-feature è¿™æ¡è¯­å¥çš„ä½œç”¨ã€‚ feature/my-feature åˆ†æ”¯è¢« merge åˆ°äº† develop åˆ†æ”¯ æœ¬åœ° feature/my-feature åˆ†æ”¯è¢«åˆ é™¤ï¼Œç°åœ¨æˆ‘ä»¬å¤„äº develop åˆ†æ”¯ å‚çœ‹åˆ†æ”¯æƒ…å†µï¼š $ git branch* develop master ä¸ä½¿ç”¨ git-flow åœ¨ä¸ä½¿ç”¨ git-flow å·¥å…·çš„æƒ…å†µä¸‹ï¼Œæ€ä¹ˆå®ç° æ–°å»ºä¸€ä¸ªåˆ†æ”¯ $ git checkout -b my-feature develop å½“å¼€å‘å®Œæˆåï¼Œåˆå¹¶åˆ†æ”¯ã€‚ $ git merge --no-ff my-featureAlready up-to-date. åˆ é™¤æœ¬åœ° my-feature åˆ†æ”¯ $ git branch -d my-feature æäº¤æ›´æ”¹åˆ°è¿œç¨‹ develop åˆ†æ”¯ $ git push origin develop æ¯”è¾ƒä¸¤ç§æ–¹å¼å°±ä¼šå‘ç°ï¼Œgit flow æ–¹ä¾¿äº†åˆ†æ”¯çš„ç®¡ç†, ä½¿ç”¨ä¸Šæ›´ä¸ºç®€å• å‘å¸ƒç‰ˆæœ¬ ( Release )éœ€æ±‚ï¼šæ·»åŠ ä¸€ä¸ª README.md æ–‡ä»¶ï¼Œå¹¶æ·»åŠ ç‰ˆæœ¬å·ä¸æ—¥æœŸ åˆ›å»º release 1.0 åˆ†æ”¯ Administrator at 17:37:59 Go-fun (develop) $ git flow release start 1.0Switched to a new branch &#x27;release/1.0&#x27;Summary of actions:- A new branch &#x27;release/1.0&#x27; was created, based on &#x27;develop&#x27;- You are now on branch &#x27;release/1.0&#x27;Follow-up actions:- Bump the version number now!- Start committing last-minute fixes in preparing your release- When done, run: git flow release finish &#x27;1.0&#x27;Administrator at 17:38:07 Go-fun (release/1.0) $ æ ¹æ®æç¤ºï¼Œæµç¨‹å’Œåˆ›å»º feature åˆ†æ”¯å·®ä¸å¤šï¼ŒæŸ¥çœ‹åˆ†æ”¯æƒ…å†µ $ git branch develop master* release/1.0 æ·»åŠ ä¿®æ”¹æ–‡ä»¶åˆ°æš‚å­˜åŒº $ git add README.md$ git commit -m &quot;update version to 1.0&quot; å®Œæˆ release 1.0 åˆ†æ”¯ Administrator at 19:00:28 Go-fun (release/1.0) $ git flow release finish 1.0Switched to branch &#x27;master&#x27;Your branch is up to date with &#x27;origin/master&#x27;.Merge made by the &#x27;recursive&#x27; strategy. README.md | 5 ++++- 1 file changed, 4 insertions(+), 1 deletion(-)Already on &#x27;master&#x27;Your branch is ahead of &#x27;origin/master&#x27; by 2 commits. (use &quot;git push&quot; to publish your local commits)Switched to branch &#x27;develop&#x27;Merge made by the &#x27;recursive&#x27; strategy. README.md | 5 ++++- 1 file changed, 4 insertions(+), 1 deletion(-)Deleted branch release/1.0 (was 922692f).Summary of actions:- Release branch &#x27;release/1.0&#x27; has been merged into &#x27;master&#x27;- The release was tagged &#x27;1.0&#x27;- Release tag &#x27;1.0&#x27; has been back-merged into &#x27;develop&#x27;- Release branch &#x27;release/1.0&#x27; has been locally deleted- You are now on branch &#x27;develop&#x27; æ ¹æ®ä¸Šå›¾çš„æç¤ºï¼Œå‘ç°è¿™ä¸€æ­¥åšäº†å¦‚ä¸‹çš„äº‹æƒ…ã€‚ release/1.0 åˆ†æ”¯å·²ç»è¢« merge åˆ°äº† master åˆ†æ”¯ ç‰ˆæœ¬è¢«æ‰“ä¸Š tag 1.0 elease/1.0 è¢« merge åˆ°äº† develop åˆ†æ”¯ æœ¬åœ° release/1.0 è¢«åˆ é™¤ åˆ‡æ¢åˆ†æ”¯åˆ° develop æ›´æ–°è¿œç¨‹åˆ†æ”¯ $ git push origin master$ git push origin develop$ git push --tags ä¸ä½¿ç”¨ git-flow åˆ›å»º release-1.0 åˆ†æ”¯ $ git checkout -b release-1.0 developSwitched to a new branch &#x27;release-1.0&#x27; æäº¤åˆ°åˆ†æ”¯ release-1.0 $ git commit -am &quot;Bumped version number to 1.0&quot; åˆ‡æ¢åˆ†æ”¯åˆ° master $ git checkout master åˆå¹¶ release-1.0 åˆ° develop åˆ†æ”¯ $ git merge --no-ff release-1.0 æ‰“ä¸Šæ ‡ç­¾ (tag) $ git tag -a 1.0 -am &quot;message&quot; åˆ‡æ¢åˆ° develop åˆ†æ”¯ï¼Œå¹¶åˆå¹¶åˆ° develop åˆ†æ”¯ã€‚ $ git checkout develop$ git merge --no-ff release-1.0 åˆ é™¤æœ¬åœ°åˆ†æ”¯ realse-1.0 $ git branch -d release-1.0 æ›´æ–°è¿œç¨‹åˆ†æ”¯ $ git push origin master$ git push origin develop$ git push --tags å¦‚æœè¯´åœ¨å¼€å‘æ–°åŠŸèƒ½çš„æ—¶å€™ä½ æ²¡ä½“ä¼šåˆ° git flow çš„ä¼˜ç‚¹ï¼Œé‚£ä¹ˆåœ¨ release ç‰ˆæœ¬çš„æ—¶å€™ï¼Œå°±èƒ½å¾ˆæ˜æ˜¾åœ°æ„Ÿå—åˆ° git flow çš„ä¼˜åŠ¿ ç´§æ€¥ä¿®å¤ ( Hotfix )git flow åŸºäº master åˆ†æ”¯ï¼Œç”¨äºç´§æ€¥ä¿®å¤ï¼Œä¿®æ”¹å®Œæˆåè¦ merge åˆ° masterï¼Œdevelop åˆ†æ”¯ ä½¿ç”¨ git-flow $ git flow hotfix start 1.0.1 ä¸ä½¿ç”¨ git-flow $ git checkout -b hotfix-1.2.1 master å…¶ä»–æ­¥éª¤ä¸åœ¨ release å¼€å‘ç›¸åŒï¼ŒåŒæ ·ä¸è¦å¿˜äº†åœ¨ master åˆ†æ”¯æ‰“ä¸Š tag"},{"title":"ä¿®æ”¹æ“ä½œ","path":"/wiki/git/modify/index.html","content":"å·¥ä½œåŒºå’Œç‰ˆæœ¬åº“ å·¥ä½œåŒºï¼š å°±æ˜¯ä½ ç”µè„‘æ–‡ä»¶å¤¹èƒ½çœ‹åˆ°çš„ç›®å½•ï¼Œå°±å¦‚æˆ‘åˆ›å»ºçš„testæ–‡ä»¶å¤¹å°±æ˜¯ä¸€ä¸ªå·¥ä½œåŒº leeif@leeif MINGW64 /e/git/test (master)$ lsgit.txt index.html README.md ç‰ˆæœ¬åº“(Repository)ï¼š å·¥ä½œåŒºæœ‰ä¸€ä¸ªéšè—çš„ç›®å½•æ–‡ä»¶ .git ï¼Œè¿™ä¸ªè™½ç„¶åœ¨å·¥ä½œåŒºç›®å½•ä¸‹ï¼Œä½†ä¸ç®—åœ¨å·¥ä½œåŒºï¼Œè€Œæ˜¯ Git çš„ç‰ˆæœ¬åº“ã€‚Git çš„ç‰ˆæœ¬åº“é‡Œå­˜äº†å¾ˆå¤šä¸œè¥¿ï¼Œå…¶ä¸­æœ€é‡è¦çš„å°±æ˜¯ç§°ä¸ºstageï¼ˆæˆ–è€…å«indexï¼‰çš„æš‚å­˜åŒºï¼Œè¿˜æœ‰Gitä¸ºæˆ‘ä»¬è‡ªåŠ¨åˆ›å»ºçš„ç¬¬ä¸€ä¸ªåˆ†æ”¯ masterï¼Œä»¥åŠæŒ‡å‘ master çš„ä¸€ä¸ªæŒ‡é’ˆå« HEAD ã€‚ ä¸Šä¸€ç¯‡è®²äº†æˆ‘ä»¬æŠŠæ–‡ä»¶å¾€Gitç‰ˆæœ¬åº“é‡Œæ·»åŠ çš„æ—¶å€™ï¼Œæ˜¯åˆ†ä¸¤æ­¥æ‰§è¡Œçš„ï¼š ç”¨ git add æŠŠæ–‡ä»¶æ·»åŠ è¿›å»ï¼Œå®é™…ä¸Šå°±æ˜¯æŠŠæ–‡ä»¶ä¿®æ”¹æ·»åŠ åˆ°æš‚å­˜åŒºï¼› ç”¨ git commit æäº¤æ›´æ”¹ï¼Œå®é™…ä¸Šå°±æ˜¯æŠŠæš‚å­˜åŒºçš„æ‰€æœ‰å†…å®¹æäº¤åˆ°å½“å‰åˆ†æ”¯ã€‚ å› ä¸ºæˆ‘ä»¬åˆ›å»ºGitç‰ˆæœ¬åº“æ—¶ï¼ŒGitè‡ªåŠ¨ä¸ºæˆ‘ä»¬åˆ›å»ºäº†å”¯ä¸€ä¸€ä¸ª master åˆ†æ”¯ï¼Œæ‰€ä»¥ï¼Œç°åœ¨ï¼Œgit commit å°±æ˜¯å¾€ master åˆ†æ”¯ä¸Šæäº¤æ›´æ”¹ã€‚ ä½ å¯ä»¥ç®€å•ç†è§£ä¸ºï¼Œéœ€è¦æäº¤çš„æ–‡ä»¶ä¿®æ”¹é€šé€šæ”¾åˆ°æš‚å­˜åŒºï¼Œç„¶åï¼Œä¸€æ¬¡æ€§æäº¤æš‚å­˜åŒºçš„æ‰€æœ‰ä¿®æ”¹ã€‚ okï¼Œæˆ‘ä»¬å®è·µä¸€ä¸‹ï¼š é¦–å…ˆæ–°å»ºä¸€ä¸ªæ–‡ä»¶ test.txt ï¼Œç„¶åå¯¹ git.exe è¿›è¡Œä¿®æ”¹ï¼Œ $ git diff git.txtdiff --git a/git.txt b/git.txtindex 97fe984..a537f08 100644--- a/git.txt+++ b/git.txt@@ -2,4 +2,6 @@ Git is a version control system. Git is free software. Git is a distributed version control system.-Git is free software.\\ No newline at end of file+Git is free software.++add test add test\\ No newline at end of file ç„¶åæˆ‘ä»¬ç”¨ git status æŸ¥çœ‹ä¸€ä¸‹çŠ¶æ€ï¼š $ git statusOn branch masterYour branch is ahead of &#x27;origin/master&#x27; by 3 commits. (use &quot;git push&quot; to publish your local commits)Changes not staged for commit: (use &quot;git add &lt;file&gt;...&quot; to update what will be committed) (use &quot;git checkout -- &lt;file&gt;...&quot; to discard changes in working directory) modified: git.txtUntracked files: (use &quot;git add &lt;file&gt;...&quot; to include in what will be committed) test.txt Gitéå¸¸æ¸…æ¥šåœ°å‘Šè¯‰æˆ‘ä»¬ï¼Œgit.txt è¢«ä¿®æ”¹äº†ï¼Œè€Œ test.txt è¿˜ä»æ¥æ²¡æœ‰è¢«æ·»åŠ è¿‡ï¼Œæ‰€ä»¥å®ƒçš„çŠ¶æ€æ˜¯ Untracked ç°åœ¨ï¼Œä½¿ç”¨ä¸¤æ¬¡å‘½ä»¤ git add ï¼ŒæŠŠ git.txt å’Œ test.txt éƒ½æ·»åŠ åï¼Œç”¨ git status å†æŸ¥çœ‹ä¸€ä¸‹ï¼š $ git statusOn branch masterYour branch is ahead of &#x27;origin/master&#x27; by 3 commits. (use &quot;git push&quot; to publish your local commits)Changes to be committed: (use &quot;git reset HEAD &lt;file&gt;...&quot; to unstage) modified: git.txt new file: test.txt æ‰€ä»¥ï¼Œæš‚å­˜åŒºçš„çŠ¶æ€å°±å˜æˆè¿™æ ·äº†ï¼š git add å‘½ä»¤å®é™…ä¸Šå°±æ˜¯æŠŠè¦æäº¤çš„æ‰€æœ‰ä¿®æ”¹æ”¾åˆ°æš‚å­˜åŒºï¼ˆStageï¼‰ï¼Œç„¶åï¼Œæ‰§è¡Œ git commit å°±å¯ä»¥ä¸€æ¬¡æ€§æŠŠæš‚å­˜åŒºçš„æ‰€æœ‰ä¿®æ”¹æäº¤åˆ°åˆ†æ”¯ã€‚ $ git commit -m &quot;updata&amp;test &quot;[master 0fbc057] updata&amp;test 3 files changed, 5 insertions(+), 1 deletion(-) create mode 100644 test.txt åœ¨æ£€æŸ¥ä¸‹çŠ¶æ€ï¼Œå¦‚æœä½ æ²¡åœ¨å¯¹å·¥ä½œåŒºæ–‡ä»¶è¿›è¡Œä¿®æ”¹çš„è¯ï¼Œå·¥ä½œåŒºè¿”å›çš„çŠ¶æ€å°±æ˜¯ clean $ git statusOn branch masterYour branch is ahead of &#x27;origin/master&#x27; by 4 commits. (use &quot;git push&quot; to publish your local commits)nothing to commit, working tree clean ç°åœ¨ç‰ˆæœ¬åº“å˜æˆäº†è¿™æ ·ï¼Œæš‚å­˜åŒºå°±æ²¡æœ‰ä»»ä½•å†…å®¹äº†ï¼š å°ç»“ï¼šæš‚å­˜åŒºæ˜¯Gitéå¸¸é‡è¦çš„æ¦‚å¿µï¼Œå¼„æ˜ç™½äº†æš‚å­˜åŒºï¼Œå°±å¼„æ˜ç™½äº†Gitçš„å¾ˆå¤šæ“ä½œåˆ°åº•å¹²äº†ä»€ä¹ˆ! ç®¡ç†ä¿®æ”¹ä¸ºä»€ä¹ˆGitæ¯”å…¶ä»–ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿè®¾è®¡å¾—ä¼˜ç§€ï¼Œå› ä¸ºGitè·Ÿè¸ªå¹¶ç®¡ç†çš„æ˜¯ä¿®æ”¹ï¼Œè€Œéæ–‡ä»¶ã€‚ æ¯æ¬¡ä¿®æ”¹ï¼Œå¦‚æœä¸ add åˆ°æš‚å­˜åŒºï¼Œé‚£å°±ä¸ä¼šåŠ å…¥åˆ° commit ä¸­ã€‚ ä¾‹å¦‚ï¼š æˆ‘ä»¬å¯¹ git.txt è¿›è¡Œä¸¤æ¬¡ä¿®æ”¹ï¼Œå¹¶åœ¨ä¿®æ”¹ä¹‹é—´è¿›è¡Œå¦‚ä¸‹æŒ‡ä»¤æ“ä½œï¼š ç¬¬ä¸€æ¬¡ä¿®æ”¹ -&gt; git add -&gt; ç¬¬äºŒæ¬¡ä¿®æ”¹ -&gt; git commitï¼› æ²¡é”™ï¼Œæˆ‘ä»¬ä¼šå‘ç°ç¬¬äºŒæ¬¡ä¿®æ”¹æ²¡æœ‰è¢«æäº¤ã€‚æˆ‘ä»¬å‰é¢è®²äº†ï¼ŒGitç®¡ç†çš„æ˜¯ä¿®æ”¹ï¼Œå½“ä½ ç”¨git addå‘½ä»¤åï¼Œåœ¨å·¥ä½œåŒºçš„ç¬¬ä¸€æ¬¡ä¿®æ”¹è¢«æ”¾å…¥æš‚å­˜åŒºï¼Œå‡†å¤‡æäº¤ï¼Œä½†æ˜¯ï¼Œåœ¨å·¥ä½œåŒºçš„ç¬¬äºŒæ¬¡ä¿®æ”¹å¹¶æ²¡æœ‰æ”¾å…¥æš‚å­˜åŒºï¼Œæ‰€ä»¥ï¼Œgit commitåªè´Ÿè´£æŠŠæš‚å­˜åŒºçš„ä¿®æ”¹æäº¤äº†ï¼Œä¹Ÿå°±æ˜¯ç¬¬ä¸€æ¬¡çš„ä¿®æ”¹è¢«æäº¤äº†ï¼Œç¬¬äºŒæ¬¡çš„ä¿®æ”¹ä¸ä¼šè¢«æäº¤ã€‚ é‚£æ€ä¹ˆæäº¤ç¬¬äºŒæ¬¡ä¿®æ”¹å‘¢ï¼Ÿä½ å¯ä»¥ç»§ç»­ git add å† git commit ï¼Œä¹Ÿå¯ä»¥åˆ«ç€æ€¥æäº¤ç¬¬ä¸€æ¬¡ä¿®æ”¹ï¼Œå…ˆ git add ç¬¬äºŒæ¬¡ä¿®æ”¹ï¼Œå† git commit ï¼Œå°±ç›¸å½“äºæŠŠä¸¤æ¬¡ä¿®æ”¹åˆå¹¶åä¸€å—æäº¤äº†ï¼š ç¬¬ä¸€æ¬¡ä¿®æ”¹ -&gt; git add -&gt; ç¬¬äºŒæ¬¡ä¿®æ”¹ -&gt; git add -&gt; git commit æ³¨ï¼šæäº¤åï¼Œç”¨ git diff HEAD -- readme.txt å‘½ä»¤å¯ä»¥æŸ¥çœ‹å·¥ä½œåŒºå’Œç‰ˆæœ¬åº“é‡Œé¢æœ€æ–°ç‰ˆæœ¬çš„åŒºåˆ« æ’¤é”€ä¿®æ”¹æ¯ä¸ªäººéƒ½ä¼šçŠ¯é”™ï¼Œä½†é‡ç‚¹åœ¨äºä½ èƒ½ä¸èƒ½åŠæ—¶æ”¹æ­£ï¼ŒGitå½“ç„¶ä¹ŸçŸ¥é“è¿™ä¸€ç‚¹ï¼Œæ‰€ä»¥å®ƒç»™äº†æˆ‘ä»¬æ’¤é”€ä¿®æ”¹è¿™ä¸ªæœºä¼šã€‚ ç¬¬ä¸€ç§æƒ…å†µï¼Œåœ¨æ²¡ git add æäº¤åˆ°æš‚å­˜åŒºæ—¶ï¼Œæ’¤é”€ä¿®æ”¹ æˆ‘å¯¹ git.txt å¢åŠ äº†ä¸€æ¡é”™è¯¯ä¿¡æ¯ï¼Œä½¿ç”¨ git diff æŸ¥çœ‹ä¸€ä¸‹ï¼š $ git diff HEAD -- git.txtdiff --git a/git.txt b/git.txtindex a537f08..246dfe2 100644--- a/git.txt+++ b/git.txt@@ -4,4 +4,6 @@ Git is free software. Git is a distributed version control system. Git is free software. add test add test++Add an error message\\ No newline at end of file æˆ‘ä»¬å†ç”¨ git status æŸ¥çœ‹ä¸€ä¸‹çŠ¶æ€ï¼š $ git statusOn branch masterYour branch is ahead of &#x27;origin/master&#x27; by 4 commits. (use &quot;git push&quot; to publish your local commits)Changes not staged for commit: (use &quot;git add &lt;file&gt;...&quot; to update what will be committed) (use &quot;git checkout -- &lt;file&gt;...&quot; to discard changes in working directory) modified: git.txtno changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;) å¯ä»¥å‘ç°ï¼ŒGitä¼šå‘Šè¯‰ä½ ï¼Œgit checkout -- file å¯ä»¥ä¸¢å¼ƒå·¥ä½œåŒºçš„ä¿®æ”¹ okï¼Œ æˆ‘ä»¬è¯•ä¸€ä¸‹ï¼Œæ‰§è¡Œï¼š $ git checkout -- git.txt ç„¶åï¼ŒæŸ¥çœ‹æ–‡ä»¶ git.txt: $ cat git.txtGit is a version control system.Git is free software.Git is a distributed version control system.Git is free software.add test add test å—¯ï¼Œæœ€åä¸€è¡Œ Add an error message æœç„¶æ’¤é”€äº† ç¬¬äºŒç§æƒ…å†µï¼Œä½ æŠŠä¿®æ”¹æ–‡ä»¶æäº¤åˆ°äº†æš‚å­˜åŒºï¼Œä½†åœ¨git commitä¹‹å‰ æˆ‘ä»¬ç»™ git.txt æ·»åŠ  Add a second error messageï¼Œå¹¶æ‰§è¡Œ git add æäº¤åˆ°æš‚å­˜åŒºï¼Œç”¨ git staus å‚çœ‹ä»¥ä¸‹çŠ¶æ€ï¼š $ $ git status (use &quot;git push&quot; to publish your local commits)Changes to be committed: (use &quot;git reset HEAD &lt;file&gt;...&quot; to unstage) modified: git.txtbash: $: command not found å¯ä»¥çœ‹åˆ°ï¼ŒGitåŒæ ·å‘Šè¯‰æˆ‘ä»¬ï¼Œç”¨å‘½ä»¤ git reset HEAD file å¯ä»¥æŠŠæš‚å­˜åŒºçš„ä¿®æ”¹æ’¤é”€æ‰ï¼ˆunstageï¼‰ï¼Œé‡æ–°æ”¾å›å·¥ä½œåŒºï¼š $ git reset HEAD git.txtUnstaged changes after reset:M git.txt git reset å‘½ä»¤æ—¢å¯ä»¥å›é€€ç‰ˆæœ¬ï¼Œä¹Ÿå¯ä»¥æŠŠæš‚å­˜åŒºçš„ä¿®æ”¹å›é€€åˆ°å·¥ä½œåŒºã€‚å½“æˆ‘ä»¬ç”¨ HEAD æ—¶ï¼Œè¡¨ç¤ºæœ€æ–°çš„ç‰ˆæœ¬ã€‚ ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥æ‰§è¡Œ git status æŸ¥çœ‹çŠ¶æ€å‘ç°ï¼Œæš‚å­˜åŒºæ˜¯å¹²å‡€çš„ï¼Œè€Œå·¥ä½œåŒºæœ‰ä¿®æ”¹ï¼Œå…¶å®ï¼Œç°åœ¨å°±å›åˆ°äº†æˆ‘ä»¬ä¸Šé¢ç¬¬ä¸€ç§æƒ…å†µäº†ï¼Œæ‰§è¡Œ git checkout -- git.txt åï¼ŒæŸ¥çœ‹çŠ¶æ€ï¼Œå‘ç°å·¥ä½œåŒºä¹Ÿå¹²å‡€äº†ï¼Œä¹Ÿå°±è¾¾åˆ°æ’¤é”€ä¿®æ”¹çš„ç›®çš„äº†ã€‚ $ cat git.txtGit is a version control system.Git is free software.Git is a distributed version control system.Git is free software.add test add test å°ç»“: åœºæ™¯1ï¼šå½“ä½ æ”¹ä¹±äº†å·¥ä½œåŒºæŸä¸ªæ–‡ä»¶çš„å†…å®¹ï¼Œæƒ³ç›´æ¥ä¸¢å¼ƒå·¥ä½œåŒºçš„ä¿®æ”¹æ—¶ï¼Œç”¨å‘½ä»¤git checkout â€“ fileã€‚ åœºæ™¯2ï¼šå½“ä½ ä¸ä½†æ”¹ä¹±äº†å·¥ä½œåŒºæŸä¸ªæ–‡ä»¶çš„å†…å®¹ï¼Œè¿˜æ·»åŠ åˆ°äº†æš‚å­˜åŒºæ—¶ï¼Œæƒ³ä¸¢å¼ƒä¿®æ”¹ï¼Œåˆ†ä¸¤æ­¥ï¼Œç¬¬ä¸€æ­¥ç”¨å‘½ä»¤git reset HEAD fileï¼Œå°±å›åˆ°äº†åœºæ™¯1ï¼Œç¬¬äºŒæ­¥æŒ‰åœºæ™¯1æ“ä½œã€‚ åœºæ™¯3ï¼šå·²ç»æäº¤äº†ä¸åˆé€‚çš„ä¿®æ”¹åˆ°ç‰ˆæœ¬åº“æ—¶ï¼Œæƒ³è¦æ’¤é”€æœ¬æ¬¡æäº¤ï¼Œå‚è€ƒä¸Šä¸€ç¯‡ï¼Œä¸è¿‡å‰ææ˜¯æ²¡æœ‰æ¨é€åˆ°è¿œç¨‹åº“ã€‚ åˆ é™¤æ–‡ä»¶åœ¨Gitä¸­ï¼Œåˆ é™¤ä¹Ÿæ˜¯ä¸€ä¸ªä¿®æ”¹æ“ä½œï¼Œæˆ‘ä»¬å®éªŒä¸€ä¸‹ï¼Œä¹‹å‰æ·»åŠ ä¸€ä¸ªæ–°æ–‡ä»¶test.txtåˆ°Gitå¹¶ä¸”è¿›è¡Œäº† git commit æäº¤æ“ä½œï¼Œå¯ä»¥çœ‹ä¸‹ logï¼š $ git log --pretty=oneline0fbc057e11b4ba59f3700a79d760e5af927a6a65 updata&amp;test //æ·»åŠ text.txtæ–‡ä»¶9152d920e48515d79a32824efcbe14b3665a3e6d add distributedf78f60960e2d59bd6fdc1a069e840c6d1f1c2566 add txt01ce8dd6733f7f78e7611ef72f2a092417de0bca updata homepage4db229de25fb4d0c325c98df9263b2c3d4d4607f add homepage6010c7e80796b40d89e1135bc2c86ac217274015 initial commit ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬é€šå¸¸ç›´æ¥åœ¨æ–‡ä»¶ç®¡ç†å™¨ä¸­æŠŠæ²¡ç”¨çš„æ–‡ä»¶åˆ äº†ï¼Œæˆ–è€…ç”¨ rm å‘½ä»¤åˆ äº†ï¼š $ rm test.txt# æŸ¥çœ‹ç›®å½• å·²ç»æ²¡äº†test,txtæ–‡ä»¶$ lsgit.txt index.html README.md ä¹ æƒ¯æ€§æŸ¥çœ‹ä¸‹çŠ¶æ€ï¼š $ git statusOn branch masterYour branch is ahead of &#x27;origin/master&#x27; by 4 commits. (use &quot;git push&quot; to publish your local commits)Changes not staged for commit: (use &quot;git add/rm &lt;file&gt;...&quot; to update what will be committed) (use &quot;git checkout -- &lt;file&gt;...&quot; to discard changes in working directory) deleted: test.txtno changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;) å‘ç°Gitå·²ç»çŸ¥é“æˆ‘ä»¬è¿›è¡Œäº†åˆ é™¤æ“ä½œã€‚ ç°åœ¨ä¼šå‡ºç°ä¸¤ç§æƒ…å†µï¼š ä¸€ç§æƒ…å†µå°±æ˜¯æ‰§è¡Œ rm å‘½ä»¤åï¼Œå‘ç°æ–‡ä»¶åˆ é™¤é”™è¯¯äº†ï¼Œä½†å¥½åœ¨ç‰ˆæœ¬åº“é‡Œè¿˜æœ‰ï¼Œæ‰€ä»¥å¯ä»¥å¾ˆè½»æ¾çš„æŠŠè¯¯åˆ çš„æ–‡ä»¶æ¢å¤åˆ°æœ€æ–°ç‰ˆæœ¬ï¼š $ git checkout -- test.txt git checkoutå…¶å®æ˜¯ç”¨ç‰ˆæœ¬åº“é‡Œçš„ç‰ˆæœ¬æ›¿æ¢å·¥ä½œåŒºçš„ç‰ˆæœ¬ï¼Œæ— è®ºå·¥ä½œåŒºæ˜¯ä¿®æ”¹è¿˜æ˜¯åˆ é™¤ï¼Œéƒ½å¯ä»¥â€œä¸€é”®è¿˜åŸâ€ã€‚ å¦ä¸€ç§æƒ…å†µç¡®å®šè¿›è¡Œåˆ é™¤æ“ä½œï¼Œå¹¶éœ€è¦ä»ç‰ˆæœ¬åº“ä¸­åˆ é™¤è¯¥æ–‡ä»¶ã€‚å› æ­¤ï¼Œéœ€è¦ä½¿ç”¨ git rm å‘½ä»¤ï¼Œå¹¶æ‰§è¡Œ git commit æäº¤æ“ä½œï¼š $ git rm test.txtrm &#x27;test.txt&#x27;$ git commit -m &quot;deleted test&quot;[master a15cd98] deleted test 1 file changed, 0 insertions(+), 0 deletions(-) delete mode 100644 test.txt ç°åœ¨ï¼Œæ–‡ä»¶å°±ä»ç‰ˆæœ¬åº“ä¸­ä¹Ÿåˆ é™¤äº†ï¼Œå°±æ­¤æ¶ˆå¤±ä¸è§~~~ å‘½ä»¤git rmç”¨äºåˆ é™¤ä¸€ä¸ªæ–‡ä»¶ã€‚å¦‚æœä¸€ä¸ªæ–‡ä»¶å·²ç»è¢«æäº¤åˆ°ç‰ˆæœ¬åº“ï¼Œé‚£ä¹ˆä½ æ°¸è¿œä¸ç”¨æ‹…å¿ƒè¯¯åˆ ï¼Œä½†æ˜¯è¦å°å¿ƒï¼Œä½ åªèƒ½æ¢å¤æ–‡ä»¶åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œä½ ä¼šä¸¢å¤±æœ€è¿‘ä¸€æ¬¡æäº¤åä½ ä¿®æ”¹çš„å†…å®¹ã€‚"},{"title":"ç‰ˆæœ¬æ§åˆ¶","path":"/wiki/git/version-control/index.html","content":"åˆ›å»ºç‰ˆæœ¬åº“æŠŠæ–‡ä»¶æ·»åŠ åˆ°ç‰ˆæœ¬åº“ï¼š é€šè¿‡ git init å‘½ä»¤æŠŠè¿™ä¸ªç›®å½•å˜æˆGitå¯ä»¥ç®¡ç†çš„ä»“åº“$ git initInitialized empty Git repository in E:/git/test/.git/ ç”¨å‘½ä»¤ git add å‘Šè¯‰Gitï¼ŒæŠŠæ–‡ä»¶æ·»åŠ åˆ°ä»“åº“$ git add README.md ç”¨å‘½ä»¤ git commit å‘Šè¯‰Gitï¼ŒæŠŠæ–‡ä»¶æäº¤åˆ°ä»“åº“$ git commit -m &quot;initial commit&quot;[master (root-commit) 6010c7e] initial commit 1 file changed, 7 insertions(+) create mode 100644 README.md å¦å¤–ï¼šåˆå§‹åˆ›å»ºä¸€ä¸ª github ä»“åº“æ—¶ï¼Œgithub ä¼šç»™ä¸€äº›å‘½ä»¤ä½ å»åˆ›å»ºgitæœ¬åœ°é¡¹ç›®. git remote add origin https://github.com/leeifme/test.git è¿™é‡Œçš„originä»…ä»…æ˜¯ä¸€ä¸ªåå­—ï¼Œä½ å¯ä»¥æŠŠ origin å‘½åä¸º test git remote add test https://github.com/leeifme/test.git, ä»¥åå°±å¯ä»¥ç”¨ git push text master äº† git push -u origin master , è¿™é‡Œå°±æ˜¯æŠŠ masterï¼ˆé»˜è®¤ git åˆ†æ”¯ï¼‰æ¨é€åˆ° originï¼Œ -uä¹Ÿå°±æ˜¯--set-upstream, ä»£è¡¨çš„æ˜¯æ›´æ–°é»˜è®¤æ¨é€çš„åœ°æ–¹ï¼Œè¿™é‡Œå°±æ˜¯é»˜è®¤ä»¥ågit pullå’Œgit pushæ—¶ï¼Œéƒ½æ˜¯æ¨é€å’Œæ‹‰è‡ª origin ã€‚ ç‰ˆæœ¬å›é€€ git status å‘½ä»¤å¯ä»¥è®©æˆ‘ä»¬æ—¶åˆ»æŒæ¡ä»“åº“å½“å‰çš„çŠ¶æ€ git diff é¡¾åæ€ä¹‰å°±æ˜¯æŸ¥çœ‹difference(ä¿®æ”¹å†…å®¹) å¦‚æœ git status å‘Šè¯‰ä½ æœ‰æ–‡ä»¶è¢«ä¿®æ”¹è¿‡ï¼Œç”¨ git diff å¯ä»¥æŸ¥çœ‹ä¿®æ”¹å†…å®¹ã€‚ å¦‚ä½•å›é€€å’Œæ’¤å›æ“ä½œï¼š å…ˆç”¨ git log å‘½ä»¤æ˜¾ç¤ºä»æœ€è¿‘åˆ°æœ€è¿œçš„ git commit æäº¤æ—¥å¿— $ git logcommit f78f60960e2d59bd6fdc1a069e840c6d1f1c2566Author: **********************Date: Thu Jun 15 01:24:55 2017 +0800 add txtcommit 01ce8dd6733f7f78e7611ef72f2a092417de0bcaAuthor: **********************Date: Thu Jun 15 01:23:51 2017 +0800 updata homepagecommit 4db229de25fb4d0c325c98df9263b2c3d4d4607fAuthor: **********************Date: Thu Jun 15 01:14:33 2017 +0800 add homepagecommit 6010c7e80796b40d89e1135bc2c86ac217274015Author: **********************Date: Thu Jun 15 01:03:15 2017 +0800 initial commit æ³¨ï¼š è¿™æ ·è¾“å‡ºä¿¡æ¯å¤ªå¤šï¼Œçœ‹å¾—çœ¼èŠ±ç¼­ä¹±çš„ï¼Œå¯ä»¥è¯•è¯•åŠ ä¸Š --pretty=oneline å‚æ•° $ git log --pretty=oneline9152d920e48515d79a32824efcbe14b3665a3e6d add distributedf78f60960e2d59bd6fdc1a069e840c6d1f1c2566 add txt01ce8dd6733f7f78e7611ef72f2a092417de0bca updata homepage4db229de25fb4d0c325c98df9263b2c3d4d4607f add homepage6010c7e80796b40d89e1135bc2c86ac217274015 initial commit å›é€€ç‰ˆæœ¬ï¼Œä½¿ç”¨git resetå‘½ä»¤ã€‚åœ¨Gitä¸­ï¼Œç”¨HEADè¡¨ç¤ºå½“å‰ç‰ˆæœ¬ï¼Œä¹Ÿå°±æ˜¯æœ€æ–°çš„æäº¤3628164...882e1e0ï¼ˆæ³¨æ„æˆ‘çš„æäº¤IDå’Œä½ çš„è‚¯å®šä¸ä¸€æ ·ï¼‰ï¼Œä¸Šä¸€ä¸ªç‰ˆæœ¬å°±æ˜¯HEAD^ï¼Œä¸Šä¸Šä¸€ä¸ªç‰ˆæœ¬å°±æ˜¯HEAD^^ï¼Œå½“ç„¶å¾€ä¸Š100ä¸ªç‰ˆæœ¬å†™100ä¸ª^æ¯”è¾ƒå®¹æ˜“æ•°ä¸è¿‡æ¥ï¼Œæ‰€ä»¥å†™æˆHEAD~100ã€‚ $ git reset --hard HEAD^HEAD is now at f78f609 add txt //æ³¨æ„çœ‹commitID â€‹ åæ‚”å›é€€ï¼Œæƒ³æ¢å¤ç‰ˆæœ¬ï¼Œæ€ä¹ˆåŠï¼Ÿåªè¦çŸ¥é“commitIDå°±å¥½ï¼Œæ€ä¹ˆæ‰¾ï¼Ÿ Gitå¾ˆäººæ€§åŒ–çš„æä¾›äº†ä¸€ä¸ªå‘½ä»¤git reflogç”¨æ¥è®°å½•ä½ çš„æ¯ä¸€æ¬¡å‘½ä»¤ï¼š $ git reflogf78f609 HEAD@&#123;0&#125;: reset: moving to HEAD^9152d92 HEAD@&#123;1&#125;: commit: add distributedf78f609 HEAD@&#123;2&#125;: commit: add txt01ce8dd HEAD@&#123;3&#125;: commit: updata homepage4db229d HEAD@&#123;4&#125;: commit: add homepage6010c7e HEAD@&#123;5&#125;: commit (initial): initial commit çŸ¥é“commitIDå,ç”±äºHEADæŒ‡å‘çš„ç‰ˆæœ¬å°±æ˜¯å½“å‰ç‰ˆæœ¬ï¼Œå› æ­¤ï¼ŒGitå…è®¸æˆ‘ä»¬åœ¨ç‰ˆæœ¬çš„å†å²ä¹‹é—´ç©¿æ¢­ï¼Œä½¿ç”¨å‘½ä»¤git reset --hard commit_id $ git reset --hard 9152d92HEAD is now at 9152d92 add distributed æˆ‘ä»¬å¯ä»¥å†çœ‹ä¸‹ç‰ˆæœ¬æ—¥å¿—ï¼ŒæŸ¥çœ‹æ˜¯å¦å›åˆ°commitID = 9152d92çš„ç‰ˆæœ¬ï¼š $ git log --pretty=oneline9152d920e48515d79a32824efcbe14b3665a3e6d add distributedf78f60960e2d59bd6fdc1a069e840c6d1f1c2566 add txt01ce8dd6733f7f78e7611ef72f2a092417de0bca updata homepage4db229de25fb4d0c325c98df9263b2c3d4d4607f add homepage6010c7e80796b40d89e1135bc2c86ac217274015 initial commit"},{"title":"ä½¿ç”¨æ ‡ç­¾æ’ä»¶å¢å¼ºé˜…è¯»ä½“éªŒ","path":"/wiki/stellar/tag-plugins/index.html","content":"Stellar çš„æ ‡ç­¾æ’ä»¶å’Œ Hexo å®˜æ–¹çš„æ ‡ç­¾æ’ä»¶ä¸€æ ·ä½¿ç”¨ç©ºæ ¼åˆ†éš”å¤šä¸ªå‚æ•°ï¼Œæ‰€ä»¥å¦‚æœå‚æ•°å†…å®¹ä¸­éœ€è¦å‡ºç°çš„ç©ºæ ¼è¢«æ„å¤–åˆ†éš”å¼€äº†çš„æ—¶å€™ï¼Œè¯·ä½¿ç”¨ &amp;nbsp; ä»£æ›¿ã€‚ä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œæœ¬æ–‡æ¡£è¯­æ³•æ ¼å¼ä¸­çš„å¯é€‰å‚æ•°ç”¨æ–¹æ‹¬å·æ‹¬èµ·æ¥ï¼Œé”®å€¼å¯¹å‚æ•°ç”¨å†’å·åˆ†éš”å¼€ï¼Œä¾‹å¦‚ï¼š &#123;% image src [description] [download:bool/string] %&#125; å°±è¡¨æ˜ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å›¾ç‰‡é“¾æ¥ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å›¾ç‰‡æè¿°ï¼Œè€Œ download æ˜¯å¯é€‰å‚æ•°ï¼Œå¹¶ä¸”å€¼æ˜¯å¸ƒå°”æˆ–å­—ç¬¦ä¸²ç±»å‹ï¼Œç¬¬äºŒä¸‰ä¸ªå‚æ•°ä¸ºå¯é€‰å‚æ•°ã€‚ äº†è§£å‚æ•°è§£æè§„åˆ™ä»¥å›¾ç‰‡æ ‡ç­¾ä¸ºä¾‹ï¼Œä½¿ç”¨ç©ºæ ¼åˆ†éš”å¼€ä¹‹åå¾—åˆ°ä¸€ä¸ªæ•°ç»„ï¼Œå¦‚æœå›¾ç‰‡æè¿°æ–‡å­—ä¸­æœ‰ç©ºæ ¼ï¼Œå¤šåˆ†å‡ºæ¥çš„è¿™äº›ã€Œå‚æ•°ã€è¢«åˆå¹¶åˆ°æœ€åä¸€ä¸ªã€Œéé”®å€¼å¯¹å‚æ•°ã€ä¸­ï¼Œä»€ä¹ˆæ˜¯ã€Œéé”®å€¼å¯¹å‚æ•°ã€å‘¢ï¼Ÿä¸¾ä¸ªä¾‹å­æ‚¨å°±æ˜ç™½äº†ï¼š&#123;% image /assets/wiki/stellar/photos/183e71e0ad995.jpg æ¥è‡ªå°åº¦çš„ Rohit Vohra ä½¿ç”¨ iPhone 12 Pro Max æ‹æ‘„ã€‚ download:https://www.apple.com.cn/newsroom/images/product/iphone/lifestyle/Apple_ShotoniPhone-rohit_vohra_12172020.zip %&#125;è¿™ä¸ªä¾‹å­ä¸­ï¼Œdownload:https://xxxx æ˜¯æœ‰å†’å·åˆ†éš”å¼€çš„ï¼Œdownload ä¸ºé”®ï¼Œåé¢çš„ç½‘å€ä¸ºå€¼ï¼Œæ‰€ä»¥å«åšã€Œé”®å€¼å¯¹å‚æ•°ã€ï¼›ä¸æ­¤ç›¸å¯¹çš„ï¼Œæ²¡æœ‰å†’å·åˆ†éš”çš„å°±å«åšã€Œéé”®å€¼å¯¹å‚æ•°ã€ã€‚é”®å€¼å¯¹å‚æ•°å¯ä»¥æ”¾åœ¨ä»»ä½•ä½ç½®ï¼Œæˆ‘å¯ä»¥é€šè¿‡åŒ¹é…é”®æ¥è§£æï¼Œè€Œéé”®å€¼å¯¹å‚æ•°åˆ™åªèƒ½é€šè¿‡é¡ºåºè§£æï¼Œæ‰€ä»¥å®ƒä»¬å¿…é¡»å’Œæ–‡æ¡£ä¸­è¦æ±‚çš„å‰åé¡ºåºä¸€è‡´ã€‚ä¸€èˆ¬æ ¸å¿ƒçš„ã€é‡è¦çš„å‚æ•°ä¼šè®¾ç½®æˆéé”®å€¼å¯¹å‚æ•°ï¼Œè€Œå¯é€‰å‚æ•°è®¾ç½®æˆé”®å€¼å¯¹å‚æ•°ã€‚"},{"title":"å¦‚ä½•ä½¿ç”¨åŠè‡ªåŠ¨åŒ–çš„æ–‡æ¡£ç³»ç»Ÿ","path":"/wiki/stellar/wiki-settings/index.html","content":"è‡ªåŠ¨æ„å‘³ç€ Stellar å¯ä»¥è‡ªåŠ¨æ‰¾åˆ°ä¸€ä¸ªé¡¹ç›®çš„æ‰€æœ‰æ–‡æ¡£åˆ†é¡µï¼Œç”Ÿæˆä¸€ä¸ªç›®å½•æ ‘ï¼ŒåŠè‡ªåŠ¨æ„å‘³ç€æ‚¨å¯ä»¥æ‰‹åŠ¨æŒ‡å®šé¡ºåºã€æ ‡é¢˜ã€åˆ†ç»„ï¼Œè€Œéä¾èµ–æ–‡ä»¶è·¯å¾„ã€æ–‡ä»¶åæ¥æ’åºå’Œæ˜¾ç¤ºã€‚ åˆ›å»ºä¸€ä¸ªé¡¹ç›®åœ¨ blog/source/ æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ª wiki æ–‡ä»¶å¤¹ï¼Œåœ¨å…¶ä¸­æ”¾å…¥å„ä¸ªé¡¹ç›®çš„æ–‡æ¡£ã€‚ä»¥ Stellar é¡¹ç›®ä¸ºä¾‹ï¼š blog/source/wiki/stellar/index.md è®¾ç½®å¸ƒå±€æ¨¡æ¿å’Œé¡¹ç›®åç§°ï¼š blog/source/wiki/stellar/index.md---layout: wiki # ä½¿ç”¨wikiå¸ƒå±€æ¨¡æ¿wiki: Stellar # è¿™æ˜¯é¡¹ç›®åtitle: è¿™æ˜¯åˆ†é¡µæ ‡é¢˜--- å»ºè®®ç”¨è¿™ä¸ªæ–‡ä»¶ä½œä¸ºé¡¹ç›®çš„ä¸»é¡µï¼Œå¹¶åœ¨æ–‡ä»¶å¤¹å†…åˆ›å»ºå…¶å®ƒåˆ†é¡µã€‚Stellar ä¼šæŠŠåŒä¸€ä¸ªé¡¹ç›®çš„æ‰€æœ‰åˆ†é¡µä¸­ order æœ€å°çš„ä¸€é¡µä½œä¸ºé¡¹ç›®çš„ä¸»é¡µï¼ˆå…¶é»˜è®¤å€¼ä¸º0ï¼‰ã€‚ å®Œå–„é¡¹ç›®ä¿¡æ¯åœ¨æ•°æ®æ–‡ä»¶ä¸­åˆ›å»ºé¡¹ç›®æ–‡ä»¶ï¼Œä»¥ Stellar ä¸ºä¾‹ï¼š blog/source/_data/projects.ymlStellar: title: Stellar subtitle: æ¯ä¸ªäººçš„ç‹¬ç«‹åšå®¢ tags: åšå®¢ä¸»é¢˜ cover: true logo: src: https://cdn.jsdelivr.net/gh/cdn-x/wiki@1.0.2/stellar/icon.svg small: 112px large: 240px description: Stellar æ˜¯ä¸€ä¸ªå†…ç½® wiki ç³»ç»Ÿçš„ hexo ä¸»é¢˜ï¼Œé€‚åˆç»¼åˆå‹ç«™ç‚¹ä½¿ç”¨ã€‚åŒæ—¶ä¹Ÿæ‹¥æœ‰ç®€çº¦è€Œç²¾ç¾çš„è§†è§‰è®¾è®¡å’Œä¸°å¯Œçš„æ ‡ç­¾æ’ä»¶ï¼Œå¸®åŠ©æ‚¨ç®€å•ä»å®¹åœ°åº”å¯¹å„ç§åœºåˆã€‚ repo: xaoxuu/hexo-theme-stellar comment_title: &#x27;è¯„è®ºåŒºä»…ä¾›äº¤æµï¼Œæœ‰é—®é¢˜è¯·æ [issue](https://github.com/xaoxuu/hexo-theme-stellar/issues) åé¦ˆã€‚&#x27; beaudar: repo: xaoxuu/hexo-theme-stellar &#x27;issue-term&#x27;: &#x27;Q &amp; A&#x27; æ˜¯å¦æ˜¾ç¤ºå°é¢é¡¹ç›®å¯ä»¥æ˜¾ç¤ºä¸€ä¸ªå…¨å±å°é¢ï¼Œå°é¢å æ®ä¸€ä¸ªå±å¹•çš„é«˜åº¦ï¼Œä¼šå±…ä¸­ä¾æ¬¡æ˜¾ç¤ºé¡¹ç›®çš„ logoã€æ ‡é¢˜ã€æè¿°ã€‚å¼€å¯é¡¹ç›®å°é¢æ–¹æ³•å¦‚ä¸‹ï¼š blog/source/_data/projects.ymlStellar: cover: true logo: src: https://cdn.jsdelivr.net/gh/cdn-x/wiki@1.0.2/stellar/icon.svg small: 120px large: 240px å¦‚æœ logo ä¸­å·²ç»åŒ…å«äº†é¡¹ç›®æ ‡é¢˜ï¼Œå¯ä»¥è¿™æ ·è®¾ç½®ä¸æ˜¾ç¤ºé¡¹ç›®æ ‡é¢˜ï¼š blog/source/_data/projects.ymlStellar: cover: [logo, description] é¡¹ç›®æ–‡æ¡£æ ‡ç­¾å¦‚æœæ‚¨æœ‰å¾ˆå¤šé¡¹ç›®ï¼Œæœ‰äº›é¡¹ç›®æ˜¯æœ‰ç›¸å…³æ€§çš„ï¼Œå¯ä»¥ç›¸åŒçš„ tags å€¼ï¼š blog/source/_data/projects.ymlStellar: tags: åšå®¢ä¸»é¢˜ ä¹Ÿå¯ä»¥è®¾ç½®å¤šä¸ª tags å€¼ï¼š blog/source/_data/projects.ymlStellar: tags: [åšå®¢ä¸»é¢˜, å¼€æºé¡¹ç›®] é¡¹ç›®çš„ GitHub ä»“åº“ä¿¡æ¯è®¾ç½®äº† repo å€¼å°±ä¼šåœ¨ä¾§è¾¹æ æ˜¾ç¤ºé¡¹ç›®ä»“åº“çš„ç›¸å…³é“¾æ¥ï¼š blog/source/_data/projects.ymlStellar: repo: xaoxuu/hexo-theme-stellar é¡¹ç›®è¯„è®ºè®¾ç½®å¦‚æœå¸Œæœ›é¡¹ç›®çš„æ‰€æœ‰åˆ†é¡µä½¿ç”¨ç›¸åŒçš„è¯„è®ºæ•°æ®ï¼Œå¯ä»¥åœ¨è¿™é‡Œè¦†ç›–è¯„è®ºé…ç½®ï¼š blog/source/_data/projects.ymlStellar: comment_title: &#x27;è¯„è®ºåŒºä»…ä¾›äº¤æµï¼Œæœ‰é—®é¢˜è¯·æ [issue](https://github.com/xaoxuu/hexo-theme-stellar/issues) åé¦ˆã€‚&#x27; beaudar: repo: xaoxuu/hexo-theme-stellar &#x27;issue-term&#x27;: &#x27;Q &amp; A&#x27; ç›®å‰æ”¯æŒè¦†ç›– beaudar&#x2F;utterancesï¼Œå…¶å®ƒè¯„è®ºç³»ç»Ÿå¯ä»¥é€šè¿‡è®¾ç½® comment_id æ¥å®ç°ã€‚ æ˜¯å¦ç´¢å¼•å¦‚æœæ‚¨æœ‰äº›é¡¹ç›®å¸Œæœ›åœ¨é¡¹ç›®åˆ—è¡¨ä¸­éšè—ï¼Œå¯ä»¥è®¾ç½® index å€¼ï¼š blog/source/_data/projects.ymlStellar: index: false æ–‡æ¡£æ’åºä¸€ä¸ªé¡¹ç›®æ–‡æ¡£çš„å¤šä¸ªåˆ†é¡µä¹‹é—´ä»¥ order çš„å€¼ä½œä¸ºæ’åºä¾æ®ï¼Œæ•°å­—è¶Šå°è¶Šé å‰ï¼Œæœ€å°çš„æ˜¯é¡¹ç›®ä¸»é¡µã€‚ ä¾§è¾¹æ è®¾ç½®ä¾§è¾¹æ ç»„ä»¶å¦‚æœæ‚¨å¸Œæœ›è‡ªå®šä¹‰æŸä¸ªé¡¹ç›®çš„ä¾§è¾¹æ ç»„ä»¶ï¼Œå¯ä»¥è®¾ç½® sidebar å€¼ï¼š blog/source/_data/projects.ymlNotes: sidebar: [toc] å¯¹ç›®å½•æ ‘è¿›è¡Œåˆ†ç»„å¦‚æœæ‚¨çš„é¡¹ç›®æ–‡æ¡£åˆ†é¡µè¾ƒå¤šï¼Œå¯ä»¥å¯¹ç›®å½•æ ‘è¿›è¡Œåˆ†ç»„ï¼š blog/source/_data/projects.ymlStellar: ... sections: &#x27;å¿«é€Ÿå¼€å§‹&#x27;: [0, 99] &#x27;åŸºæœ¬ä½¿ç”¨&#x27;: [100, 199] &#x27;æ–‡æ¡£ç³»ç»Ÿ&#x27;: [200, 299] &#x27;è¿›é˜¶è®¾å®š&#x27;: [900, 999] å·¦è¾¹æ˜¯æ˜¾ç¤ºçš„æ ‡é¢˜ï¼Œå³è¾¹æ˜¯ order çš„åŒºé—´ï¼Œä¾‹å¦‚æŸé¡µæ–‡æ¡£çš„ order æ˜¯ 150ï¼Œé‚£ä¹ˆè¿™é¡µæ–‡æ¡£å°†ä¼šæ˜¾ç¤ºåœ¨ã€Œæ—¥å¸¸é—®é¢˜è§£å†³æ–¹æ¡ˆã€è¿™ä¸ªç»„ä¸­ã€‚ ä¿®æ”¹ wiki è·¯å¾„åœ¨æ ¹ç›®å½•ä¸­æ·»åŠ  wiki_dir æŒ‡å®š Wiki ä¸»é¡µçš„è·¯å¾„ï¼š blog/_config.ymlwiki_dir: wiki ä¾‹å¦‚ä¹¦ç±ç±»çš„â€œé¡¹ç›®â€å¯ä»¥æ”¹ä¸ºï¼š blog/_config.ymlwiki_dir: books ä¾‹å¦‚å•†å“&#x2F;äº§å“ç±»çš„â€œé¡¹ç›®â€å¯ä»¥æ”¹ä¸ºï¼š blog/_config.ymlwiki_dir: products"},{"title":"å®¹å™¨ç±»æ ‡ç­¾ï¼ˆ7ä¸ªï¼‰","path":"/wiki/stellar/tag-plugins/container/index.html","content":"ablock æ™®é€šå—å®¹å™¨note æ ‡ç­¾å°±æ˜¯ä½¿ç”¨ ablock å®¹å™¨å®ç°çš„ï¼Œå®ƒä»¬æ ·å¼æ˜¯ç›¸åŒçš„ï¼š æ›´åè®°å½•ï¼ˆStellar 1.18.0ï¼‰å› ä¸ºåŸ noteblock æ ‡ç­¾åœ¨å‡çº§åˆ° hexo 6.0 ä¹‹åè·Ÿå®˜æ–¹åº“å†²çªäº†ï¼Œå®˜æ–¹ä¸€ç›´æ²¡æœ‰è§£é‡ŠåŸå› ï¼Œåä¸å¾—ä¸æ”¹åï¼šnoteblock -&gt; grid -&gt; border -&gt; ablockè¯¦æƒ…è§ï¼š#172 è¯­æ³•æ ¼å¼&#123;% ablock [title] [color:color] [child:codeblock/tabs] %&#125;...&#123;% endablock %&#125; å†™æ³•å¦‚ä¸‹&#123;% ablock Stellar v1.12.0 color:warning %&#125;å› ä¸ºåŸ noteblock æ ‡ç­¾åœ¨å‡çº§åˆ° hexo 6.0 ä¹‹åè·Ÿå®˜æ–¹åº“å†²çªäº†ï¼Œå®˜æ–¹ä¸€ç›´æ²¡æœ‰è§£é‡ŠåŸå› ï¼Œåä¸å¾—ä¸æ”¹åï¼šnoteblock -&gt; grid -&gt; borderè¯¦æƒ…è§ï¼š[#172](https://github.com/volantis-x/hexo-theme-volantis/issues/712)&#123;% endablock %&#125; å½©è‰²ä»£ç å—è®¾ç½® child:codeblock å¹¶è®¾ç½® color:é¢œè‰²æšä¸¾ å¯ä»¥å®ç° 10 ç§ä¸åŒé¢œè‰²çš„ä»£ç å—ï¼Œå½©è‰²ä»£ç å—ä¸€èˆ¬å¯ä»¥ç”¨åœ¨ä»£ç æ­£ç¡®ä¸é”™è¯¯çš„ç¤ºèŒƒå¯¹æ¯”åœºæ™¯ã€‚ æ¨èçš„å†™æ³•func test() &#123; // ...&#125;ä¸æ¨èçš„å†™æ³•func test() -&gt; () &#123; // ...&#125; åµŒå¥—å…¶å®ƒæ ‡ç­¾ä¾‹å¦‚åµŒå¥—ä¸€ä¸ª tabs æ ‡ç­¾ï¼š å›¾æ–‡æ··æ’ç¤ºä¾‹ä»£ç ä¸ªäººç”µè„‘ä½œä¸ºåŠå…¬è®¾å¤‡æ—¶ï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•ä¿æŠ¤éšç§ï¼Ÿå…¬å¸ä¸€èˆ¬éƒ½ä¼šå¼ºåˆ¶å®‰è£…å®‰é˜²è½¯ä»¶ï¼Œè¿™äº›è½¯ä»¶è¦æ±‚å¼€æœºè‡ªå¯åŠ¨ï¼Œè¦æ±‚æœ‰å±å¹•å½•åˆ¶æƒé™ã€å®Œå…¨çš„ç£ç›˜è®¿é—®æƒé™åŒ…æ‹¬ç›¸å†Œå›¾åº“ã€‚å› æ­¤å¦‚æœä½¿ç”¨è‡ªå·±çš„ MacBook ä½œä¸ºåŠå…¬è®¾å¤‡ï¼Œå¿…é¡»è¦æŠŠç”Ÿæ´»åŒºå’Œå·¥ä½œåŒºå®Œå…¨ç‹¬ç«‹å¼€ï¼Œå®‰è£…åœ¨ä¸¤ä¸ªç£ç›˜åˆ†åŒºï¼Œå¹¶ä¸”å¯¹ç£ç›˜åˆ†åŒºè¿›è¡ŒåŠ å¯†ã€‚ folding æŠ˜å å®¹å™¨æŠ˜å å—æ ‡ç­¾çš„è¯­æ³•æ ¼å¼ä¸ºï¼š &#123;% folding title [codeblock:bool] [open:bool] [color:color] %&#125;content&#123;% endfolding %&#125; å‚æ•°è¯´æ˜codeblock: true/falseopen: true/falsecolor: red/orange/yellow/green/cyan/blue/purple/light/dark å½©è‰²å¯æŠ˜å ä»£ç å—å¤‡æ³¨æ ‡ç­¾ç›¸è¾ƒäºæ—§ç‰ˆè¿›è¡Œäº†å¢å¼ºï¼Œå¯ä»¥å®ç°æ›´å¤šç§é¢œè‰²ï¼Œè¿˜å¯ä»¥é€šè¿‡è®¾ç½® child:codeblock æ¥å®ç°å¯æŠ˜å çš„ä»£ç å—ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªé»˜è®¤æ‰“å¼€çš„ä»£ç æŠ˜å æ¡†ï¼š é»˜è®¤æ‰“å¼€çš„ä»£ç æŠ˜å æ¡†func test() &#123; print(&quot;hello world&quot;)&#125; ä»£ç å¦‚ä¸‹ï¼š &#123;% folding child:codeblock open:true color:yellow é»˜è®¤æ‰“å¼€çš„ä»£ç æŠ˜å æ¡† %&#125;ä»£ç å—&#123;% endfolding %&#125; å±é™©ï¼Œè¯·ä¸è¦æ‰“å¼€è¿™ä¸ªé€šè¿‡è®¾ç½®é¢œè‰²ï¼Œä»¥å®ç°æ›´é†’ç›®çš„ä½œç”¨ï¼Œä½†ä¸è¦æ»¥ç”¨è‰²å½©å“¦ï½è­¦å‘Šï¼ŒçœŸçš„å¾ˆå±é™©é€šè¿‡è®¾ç½®é¢œè‰²ï¼Œä»¥å®ç°æ›´é†’ç›®çš„ä½œç”¨ï¼Œä½†ä¸è¦æ»¥ç”¨è‰²å½©å“¦ï½æœ€åä¸€æ¬¡è­¦å‘Šï¼Œåƒä¸‡ä¸è¦æ‰“å¼€è¿™ä¸ªä¸è¦è¯´æˆ‘ä»¬æ²¡æœ‰è­¦å‘Šè¿‡ä½ ï¼ŒWindows 10 ä¸æ˜¯ç‚ºæ‰€æœ‰äººè¨­è¨ˆï¼Œè€Œæ˜¯ç‚ºæ¯å€‹äººè¨­è¨ˆã€‚ folders å¤šä¸ªæŠ˜å å®¹å™¨èšåˆæ ·å¼ç›¸æ¯” folding ç®€å•ä¸€äº›ï¼Œé€‚ç”¨äºå¤šä¸ªæŠ˜å æ ‡ç­¾å¹³é“ºæ˜¾ç¤ºçš„åœºæ™¯ï¼Œä¾‹å¦‚é¢˜ç›®åˆ—è¡¨ï¼š é¢˜ç›®1è¿™æ˜¯ç­”æ¡ˆ1é¢˜ç›®2è¿™æ˜¯ç­”æ¡ˆ2é¢˜ç›®3è¿™æ˜¯ç­”æ¡ˆ3 ä»£ç å¦‚ä¸‹ï¼š &#123;% folders %&#125;&lt;!-- folder é¢˜ç›®1 --&gt;è¿™æ˜¯ç­”æ¡ˆ1&lt;!-- folder é¢˜ç›®2 --&gt;è¿™æ˜¯ç­”æ¡ˆ2&lt;!-- folder é¢˜ç›®3 --&gt;è¿™æ˜¯ç­”æ¡ˆ3&#123;% endfolders %&#125; tabs åˆ†æ å®¹å™¨è¿™ä¸ªæ ‡ç­¾ç§»æ¤è‡ª NexT ä¸»é¢˜ï¼Œä½†åšäº†ä»¥ä¸‹ä¿®æ”¹ï¼š æ”¯æŒè®¾ç½® align:center æ¥ä½¿å†…å®¹å±…ä¸­ è®¾ç½®é»˜è®¤æ¿€æ´»çš„æ ‡ç­¾æ–¹å¼ä¸º active:1 è€Œé , 1ï¼ˆä½¿ç”¨é»˜è®¤æ ¼å¼é™ä½å­¦ä¹ æˆæœ¬ï¼Œä¸”æ˜¾å¼å£°æ˜å¯è¯»æ€§æ›´å¼ºï¼‰ ä¸éœ€è¦ &lt;!-- endtab --&gt; æ¥ä½œä¸ºç»“æŸæ ‡è¯†ï¼ˆå› ä¸º Stellar ä¼šè‡ªåŠ¨åˆ¤æ–­ï¼‰ ä¸éœ€è¦ tabs id æ¥ä¿è¯å”¯ä¸€æ€§ï¼ˆå› ä¸º Stellar ä¼šè®¾ç½®å”¯ä¸€æ ‡è¯†ï¼‰ ä¸æ”¯æŒ @icon æ–¹å¼è®¾ç½®å›¾æ ‡ï¼ˆå› ä¸º Stellar ä¸å†å†…ç½® fontawesome å›¾æ ‡åº“ï¼‰ è½®å»“æ ·å¼ç®€åŒ–ï¼Œå¯ä»¥æ­é…å…¶å®ƒå®¹å™¨ç±»æ ‡ç­¾åµŒå¥—ä½¿ç”¨ã€‚ æ¼”ç¤ºæ•ˆæœç¤ºä¾‹ä»£ç å›¾ç‰‡ä»£ç å—è¡¨æ ¼let x = 123print(&quot;hello world&quot;) a b c a1 b1 c1 a2 b2 c2 grid ç½‘æ ¼åˆ†åŒºå®¹å™¨è¿™ä¸ªåŠŸèƒ½åœ¨ 1.12.0 ç‰ˆæœ¬åå¼€å§‹æ”¯æŒï¼Œç›®å‰åªæ”¯æŒæ˜¾ç¤ºä¸€è¡Œä¸¤åˆ—ï¼Œä¸”æ‰‹æœºç«¯å› å®½åº¦è¾ƒçª„ä¼šæ¢å¤ä¸ºå•åˆ—æ˜¾ç¤ºã€‚ Unsplash PhotoThe Galactic Center is the rotational center of the Milky Way galaxy. Its central massive object is a supermassive black hole of about 4 million solar masses, which is called Sagittarius A*. Its mass is equal to four million suns. The center is located 25,800 light years away from Earth.ÅŒwhiro Bay, Wellington, New ZealandPublished on May 31, 2022SONY, ILCE-6000Free to use under the Unsplash License æ™®é€šå—æ ·å¼ï¼š å·¦ä¾§å†…å®¹å³ä¾§å†…å®¹ å¡ç‰‡æ ·å¼ï¼š å·¦ä¾§å†…å®¹å³ä¾§å†…å®¹ ç¤ºä¾‹ä»£ç ï¼š &#123;% grid bg:block %&#125;&lt;!-- cell left --&gt;&lt;center&gt;å·¦ä¾§å†…å®¹&lt;/center&gt;&lt;!-- cell right --&gt;&lt;center&gt;å³ä¾§å†…å®¹&lt;/center&gt;&#123;% endgrid %&#125; bg ä¸ºå¯é€‰å‚æ•°ï¼Œé»˜è®¤æ²¡æœ‰èƒŒæ™¯ï¼Œå¯è®¾ç½®ä¸º block/card ä¸¤ç§æ ·å¼ about å…³äºå—å®¹å™¨æ–¹ä¾¿åœ¨å…³äºé¡µé¢æ˜¾ç¤ºä¸€æ®µå›¾æ–‡ä¿¡æ¯ï¼Œæ¯”æ™®é€šå—å®¹å™¨ç¨å¾®æœ‰ä¸€ç‚¹ç‚¹ä¸ä¸€æ ·ï¼š &#123;% about avatar:/assets/xaoxuu/avatar/rect-256@2x.png height:80px %&#125;&lt;img height=&quot;32px&quot; alt=&quot;XAOXUU&quot; src=&quot;/assets/xaoxuu/logo/180x30@2x.png&quot;&gt;**å¦‚æœå®‡å®™ä¸­çœŸæœ‰ä»€ä¹ˆç»ˆæçš„é€»è¾‘ï¼Œé‚£å°±æ˜¯æˆ‘ä»¬ç»ˆæœ‰ä¸€å¤©ä¼šåœ¨èˆ°æ¡¥ä¸Šé‡é€¢ï¼Œç›´åˆ°ç”Ÿå‘½ç»ˆç»“ã€‚**XAOXUU ç›®å‰æ˜¯ä¸€ä¸ª iOS å¼€å‘è€…ï¼Œä»£è¡¨ä½œå“æœ‰ï¼šProHUDã€ValueX ç­‰ã€‚åœ¨ä¸šä½™æ—¶é—´ä¹Ÿå¼€å‘äº† Stellar åšå®¢ä¸»é¢˜ï¼Œæ›´å¤šçš„ä½œå“å¯ä»¥å»é¡¹ç›®ä¸»é¡µæŸ¥çœ‹ï¼Œå¸Œæœ›å¤§å®¶å–œæ¬¢ï½&#123;% navbar [æ–‡ç« ](/) [é¡¹ç›®](/wiki/) [ç•™è¨€](#comments) [GitHub](https://github.com/xaoxuu/) %&#125;&#123;% endabout %&#125; è¿™ä¸ªæ ‡ç­¾æ­£åœ¨è€ƒè™‘é‡å‘½åè¯·å‘è¡¨æ‚¨çš„å»ºè®® #198 swiper è½®æ’­å®¹å™¨é»˜è®¤ä¸€å¼ å›¾ç‰‡æ˜¯ 50% å®½åº¦ï¼Œé€šè¿‡è®¾ç½® width:min è®¾ç½®ä¸º 25% å®½åº¦ï¼Œwidth:max è®¾ç½®ä¸º 100% å®½åº¦ã€‚ å†™æ³•å¦‚ä¸‹&#123;% swiper effect:cards %&#125;![](https://images.unsplash.com/photo-1625171515821-1870deb2743b?ixlib=rb-4.0.3&amp;ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;auto=format&amp;fit=crop&amp;w=774&amp;q=80)![](https://images.unsplash.com/photo-1528283648649-33347faa5d9e?ixlib=rb-4.0.3&amp;ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;auto=format&amp;fit=crop&amp;w=774&amp;q=80)![](https://images.unsplash.com/photo-1542272201-b1ca555f8505?ixlib=rb-4.0.3&amp;ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;auto=format&amp;fit=crop&amp;w=774&amp;q=80)![](https://images.unsplash.com/photo-1524797905120-92940d3a18d6?ixlib=rb-4.0.3&amp;ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;auto=format&amp;fit=crop&amp;w=774&amp;q=80)&#123;% endswiper %&#125; å®½åº¦åˆ‡æ¢æ•ˆæœå†™æ³•å¦‚ä¸‹&#123;% swiper width:min/max %&#125;...&#123;% endswiper %&#125;&#123;% swiper effect:cards/coverflow %&#125;...&#123;% endswiper %&#125; æ³¨æ„ä¸€ä¸ªé¡µé¢åªèƒ½è®¾ç½®ä¸€æ¬¡ï¼Œç¬¬ä¸€ä¸ª swiper å®¹å™¨çš„æ•ˆæœå…¨å±€ç”Ÿæ•ˆã€‚"},{"title":"æ•°æ®é›†åˆç±»æ ‡ç­¾ï¼ˆ5ä¸ªï¼‰","path":"/wiki/stellar/tag-plugins/data/index.html","content":"timeline æ—¶é—´çº¿æ”¯æŒé™æ€å’ŒåŠ¨æ€æ—¶é—´çº¿æ•°æ®æºï¼Œç”¨æ³•éå¸¸å¤šï¼Œè¯¦è§è¿™ç¯‡æ–‡ç« ï¼š https://xaoxuu.com/blog/20221029/https://xaoxuu.com/blog/20221029/ é™æ€æ—¶é—´çº¿é™æ€æ•°æ®æ˜¯å†™æ­»åœ¨ md æºæ–‡ä»¶ä¸­çš„ï¼Œåœ¨ deploy æ—¶å°±å·²ç»ç¡®å®šäº†ã€‚ 2021 å¹´ 2 æœˆ 16 æ—¥ä¸»è¦éƒ¨åˆ†åŠŸèƒ½å·²ç»å¼€å‘çš„å·®ä¸å¤šäº†ã€‚2021 å¹´ 2 æœˆ 11 æ—¥ä»Šå¤©é™¤å¤•ï¼Œä¹Ÿæ˜¯ç”Ÿæ—¥ï¼Œä¸€ä¸ªäººåœ¨å¤–åœ°è¿‡å¹´+è¿‡ç”Ÿæ—¥ï¼Œç†¬å¤œå¼€å‘æ–°ä¸»é¢˜ï¼Œå°½é‡åœ¨å‡æœŸç»“æŸå‰æ”¾å‡ºå…¬æµ‹ç‰ˆã€‚ å†™æ³•å¦‚ä¸‹&#123;% timeline %&#125;&lt;!-- node 2021 å¹´ 2 æœˆ 16 æ—¥ --&gt;ä¸»è¦éƒ¨åˆ†åŠŸèƒ½å·²ç»å¼€å‘çš„å·®ä¸å¤šäº†ã€‚&#123;% image /assets/wiki/stellar/photos/hello@1x.png width:300px %&#125;&lt;!-- node 2021 å¹´ 2 æœˆ 11 æ—¥ --&gt;ä»Šå¤©é™¤å¤•ï¼Œä¹Ÿæ˜¯ç”Ÿæ—¥ï¼Œä¸€ä¸ªäººåœ¨å¤–åœ°è¿‡å¹´+è¿‡ç”Ÿæ—¥ï¼Œç†¬å¤œå¼€å‘æ–°ä¸»é¢˜ï¼Œå°½é‡åœ¨å‡æœŸç»“æŸå‰æ”¾å‡ºå…¬æµ‹ç‰ˆã€‚&#123;% endtimeline %&#125; åŠ¨æ€æ—¶é—´çº¿åŠ¨æ€è¯´è¯´æœ‹å‹åœˆå¾®åšåŠ¨æ€åŠ¨æ€æ•°æ®æ˜¯ä» GitHub Issues ä¸­æ‹‰å–çš„ï¼Œä½¿ç”¨æ–¹æ³•ä¸ºï¼š å»ºä¸€ä¸ªä»“åº“ åˆ›å»ºä¸€ä¸ª issue å¹¶æ·»åŠ ä¸€ä¸ª label è¿›è¡Œæµ‹è¯• å†™ timeline æ ‡ç­¾æ—¶åŠ ä¸Š api:https://api.github.com/repos/your-name/your-repo/issues ä¾‹å¦‚ï¼š _posts/xxx.md&#123;% timeline api:https://api.github.com/repos/xaoxuu/blog-timeline/issues?direction=asc&amp;per_page=3 %&#125;&#123;% endtimeline %&#125; æ•ˆæœå¦‚ä¸‹ï¼š https://xaoxuu.com/wiki/stellar/fcircle/https://xaoxuu.com/wiki/stellar/fcircle/ _posts/xxx.md&#123;% timeline type:fcircle api:https://raw.githubusercontent.com/xaoxuu/friends-rss-generator/output/data.json %&#125;&#123;% endtimeline %&#125; fork çˆ¬è™« ä»“åº“ ï¼Œä¿®æ”¹è‡ªå·±çš„ä»“åº“å ä¿®æ”¹ .github/workflows/main.yml ä¸­çš„å¾®åšIDä¸ºä½ æƒ³çˆ¬å–çš„IDï¼Œä¿®æ”¹å®Œåæ¯å¤©ä¼šè‡ªåŠ¨çˆ¬å–ä½ çš„å¾®åšï¼Œå­˜å‚¨ä¸º json æ–‡ä»¶ï¼Œè¾“å‡ºæ–‡ä»¶åœ¨ output åˆ†æ”¯ _posts/xxx.md&#123;% timeline limit:20 type:weibo api:ä½ çš„jsonæ–‡ä»¶åœ°å€ %&#125;&#123;% endtimeline %&#125; é™æ€ + åŠ¨æ€ç”¨æ³•åŒé™æ€å’ŒåŠ¨æ€å•ç‹¬ä½¿ç”¨æ—¶ä¸€æ ·ï¼Œä¾‹å¦‚ï¼š &#123;% timeline reversed:true api:https://api.github.com/repos/xaoxuu/blog-timeline/issues?per_page=2 %&#125;&lt;!-- node è¿™æ¡å†…å®¹ä¸ºé™æ€æ•°æ® --&gt;è¿™æ¡å†…å®¹ä¸ºé™æ€æ•°æ®ï¼Œé™æ€æ•°æ®åœ¨ `deploy` æ—¶å°±å·²ç»ç¡®å®šäº†ã€‚&#123;% endtimeline %&#125; æ•°æ®ç­›é€‰åªæ˜¾ç¤ºæŸä¸ªäººçš„æ•°æ®ç­›é€‰æœ€è¿‘3æ¡todoç­›é€‰è¯„è®ºæœ€å¤šçš„3æ¡å»ºè®® ä¸Šè¿°ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š &#123;% folders %&#125;&lt;!-- åªæ˜¾ç¤ºæŸä¸ªäººçš„æ•°æ® --&gt;&#123;% timeline user:xaoxuu api:https://api.github.com/repos/volantis-x/hexo-theme-volantis/issues %&#125;&#123;% endtimeline %&#125;&lt;!-- ç­›é€‰æœ€è¿‘3æ¡todo --&gt;&#123;% timeline api:https://api.github.com/repos/xaoxuu/hexo-theme-stellar/issues?labels=todo&amp;per_page=3 %&#125;&#123;% endtimeline %&#125;&lt;!-- ç­›é€‰è¯„è®ºæœ€å¤šçš„3æ¡å»ºè®® --&gt;&#123;% timeline api:https://api.github.com/repos/volantis-x/hexo-theme-volantis/issues?labels=feature-request&amp;per_page=3&amp;sort=comments %&#125;&#123;% endtimeline %&#125;&#123;% endfolders %&#125; æ›´å¤šç”¨æ³•è¯¦è§ï¼š GitHub&nbsp;REST&nbsp;APIhttps://docs.github.com/en/rest/issues/issues#list-issues-assigned-to-the-authenticated-user friends å‹é“¾ æ‚¨å¯ä»¥åœ¨ä»»ä½•ä½ç½®æ’å…¥å‹é“¾ç»„ï¼Œæ”¯æŒé™æ€æ•°æ®å’ŒåŠ¨æ€æ•°æ®ï¼Œé™æ€æ•°æ®éœ€è¦å†™åœ¨æ•°æ®æ–‡ä»¶ä¸­ï¼š blog/source/_data/links.yml&#x27;å¼€æºå¤§ä½¬&#x27;: - title: æŸæŸæŸ url: https:// screenshot: avatar: description: åœ¨éœ€è¦çš„ä½ç½®è¿™æ ·å†™ï¼š &#123;% friends å¼€æºå¤§ä½¬ %&#125; å®ç°åŠ¨æ€å‹é“¾ä» xaoxuu&#x2F;issues-json-generator ä½œä¸ºæ¨¡æ¿å…‹éš†æˆ–è€… fork ä»“åº“ ä¿®æ”¹ config.yml å¹¶æ‰“å¼€ github action çš„è¿è¡Œæƒé™ config.yml# è¦æŠ“å–çš„ issues é…ç½®issues: repo: xaoxuu/friends # ä»“åº“æŒæœ‰è€…/ä»“åº“åï¼ˆæ”¹æˆè‡ªå·±çš„ï¼‰ label: active # ç­›é€‰å…·æœ‰ active æ ‡ç­¾çš„ issue ï¼Œå–æ¶ˆæ­¤é¡¹åˆ™ä¼šæå–æ‰€æœ‰ open çŠ¶æ€çš„ issue sort: # updated-desc # æ’åºï¼ŒæŒ‰æœ€è¿‘æ›´æ–°ï¼Œå–æ¶ˆæ­¤é¡¹åˆ™æŒ‰åˆ›å»ºæ—¶é—´æ’åº ä¸å‡ºæ„å¤–çš„è¯ï¼Œä»“åº“ä¸­å·²ç»é…ç½®å¥½äº† issue æ¨¡æ¿ï¼Œåªéœ€è¦åœ¨æ¨¡æ¿ä¸­æŒ‡å®šçš„ä½ç½®å¡«å†™ä¿¡æ¯å°±å¯ä»¥äº†ã€‚ç„¶ååœ¨è‡ªå·±çš„ä»“åº“é‡Œæäº¤ä¸€ä¸ª issue å¹¶å°† Label è®¾ç½®ä¸º active è¿›è¡Œæµ‹è¯•ã€‚ æäº¤å®Œ issue ä¸€åˆ†é’Ÿå·¦å³ï¼Œå¦‚æœä»“åº“ä¸­å‡ºç°äº† output åˆ†æ”¯æäº¤ï¼Œå¯ä»¥ç‚¹å‡»æŸ¥çœ‹ä¸€ä¸‹æ–‡ä»¶å†…å®¹æ˜¯å¦å·²ç»åŒ…å«äº†åˆšåˆšæäº¤çš„ issue ä¸­çš„æ•°æ®ï¼Œå¦‚æœåŒ…å«ï¼Œé‚£ä¹ˆå‰ç«¯é¡µé¢å°±å¯ä»¥ä½¿ç”¨å‹é“¾æ•°æ®äº†ï¼š &#123;% friends api:https://raw.githubusercontent.com/xaoxuu/friends/output/v2/data.json %&#125; æ•°æ®æ‰˜ç®¡ä¸åŠ é€Ÿç‰¹åˆ«æ„Ÿè°¢ç‰¹åˆ«æ„Ÿè°¢å°å†°åšå®¢çš„åŠ é€Ÿè®¿é—®æ–¹æ¡ˆï¼Œè§£å†³äº†ç›´æ¥è¯·æ±‚ GitHub API é€Ÿåº¦è¿‡æ…¢çš„é—®é¢˜ï¼Œè¯¦è§ å°å†°åšå®¢ çš„æ•™ç¨‹ã€‚ æ”¯æŒæŠŠæ•°æ®æ‰˜ç®¡åˆ°ä»»ä½•å…¶ä»–åœ°æ–¹æ¥ä½¿ç”¨ï¼Œä¾‹å¦‚ï¼š &#123;% friends api:https://api.vlts.cc/output_data/v2/xaoxuu/friends %&#125; Stellar 1.13.0åŠ¨æ€æ•°æ® API å‡çº§è‡³ v2 ç‰ˆæœ¬ï¼ŒåŸä½¿ç”¨ issue-api ä»“åº“çš„éœ€è¦å°†å‹é“¾ä»“åº“åŒæ­¥æ›´æ–°ã€‚v1 ç‰ˆæœ¬å·²ç»åœæ­¢ç»´æŠ¤ã€‚ ä½ å¯ä»¥æœ‰ N ç§åŠæ³•åŠ é€Ÿè®¿é—® GitHub ä»“åº“é‡Œçš„æ–‡ä»¶ã€‚ sites ç½‘ç«™å¡ç‰‡ æ‚¨å¯ä»¥åœ¨ä»»ä½•ä½ç½®æ’å…¥ç½‘ç«™å¡ç‰‡ç»„ï¼Œæ”¯æŒé™æ€æ•°æ®å’ŒåŠ¨æ€æ•°æ®ï¼Œé™æ€æ•°æ®éœ€è¦å†™åœ¨æ•°æ®æ–‡ä»¶ä¸­ï¼š blog/source/_data/links.yml&#x27;åˆ†ç»„å&#x27;: - title: æŸæŸæŸ url: https:// screenshot: avatar: description: åœ¨éœ€è¦çš„ä½ç½®è¿™æ ·å†™ï¼š &#123;% sites åˆ†ç»„å %&#125; Stellar v1.13.0åŸ friends å’Œ sites æ ‡ç­¾æ•°æ®åˆå¹¶è‡³ links.yml æ–‡ä»¶ï¼ŒåŠ¨æ€æ•°æ®ä½¿ç”¨æ–¹æ³•åŒå‹é“¾ï¼Œæ•°æ®æºæ ¼å¼ç›¸åŒï¼Œä¸å‹é“¾å…±äº«æ•°æ®ï¼Œä»…æ ·å¼ä¸åŒï¼Œä¹Ÿå¯ä»¥ç”¨ sites æ ‡ç­¾åšå‹é“¾ã€‚ ghcard å¡ç‰‡ å†™æ³•å¦‚ä¸‹&#123;% ghcard xaoxuu %&#125;&#123;% ghcard xaoxuu/hexo-theme-stellar theme:dark %&#125; GitHub&nbsp;Card&nbsp;APIhttps://github.com/anuraghazra/github-readme-stats toc æ–‡æ¡£ç›®å½•æ ‘&#123;% toc wiki:xxx [open:true] [display:mobile] title %&#125;"},{"title":"è¡¨è¾¾ç±»æ ‡ç­¾ï¼ˆ14+ä¸ªï¼‰","path":"/wiki/stellar/tag-plugins/express/index.html","content":"emoji è¡¨æƒ…æ•ˆæœæ¼”ç¤ºè¯­æ³•æ ¼å¼å¼•å…¥è¡¨æƒ…åŒ…å†…ç½®äº†å¯é…ç½®çš„è¡¨æƒ…æ ‡ç­¾ ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š &#123;% emoji çˆ±ä½  %&#125;&#123;% emoji blobcat ablobcatrainbow %&#125;&#123;% emoji blobcat ablobcatattentionreverse %&#125;&#123;% emoji tieba æ»‘ç¨½ %&#125;&#123;% emoji [source] name [height:1.75em] %&#125; å…¶ä¸­ source å¯çœç•¥ï¼Œé»˜è®¤ä¸ºé…ç½®ä¸­çš„ç¬¬ä¸€ä¸ª sourceï¼ˆè¯¦è§ã€Œå¼•å…¥è¡¨æƒ…åŒ…ã€éƒ¨åˆ†ï¼‰ å¦‚æœå¯¹é«˜åº¦æœ‰ç‰¹åˆ«è¦æ±‚ï¼Œå¯ä»¥æŒ‡å®šé«˜åº¦ï¼Œä¾‹å¦‚ï¼š&#123;% emoji blobcat ablobcatrainbow height:4em %&#125; è¡¨æƒ…é€ŸæŸ¥è¡¨1ï¼šstellarè¡¨æƒ…æ ‡ç­¾ç´¢å¼•è¡¨æƒ…é€ŸæŸ¥è¡¨2ï¼šStellarå†…åµŒblobcatå°è¡¨æƒ… blog/_config.stellar.ymltag_plugins: ... emoji: default: https://fastly.jsdelivr.net/gh/cdn-x/emoji/qq/%s.gif twemoji: https://fastly.jsdelivr.net/gh/twitter/twemoji/assets/svg/%s.svg qq: https://fastly.jsdelivr.net/gh/cdn-x/emoji/qq/%s.gif aru: https://fastly.jsdelivr.net/gh/cdn-x/emoji/aru-l/%s.gif tieba: https://fastly.jsdelivr.net/gh/cdn-x/emoji/tieba/%s.png åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œæ–‡ä»¶åç”¨ %s ä»£æ›¿ã€‚ mark è¡Œå†…æ–‡æœ¬æ ‡è®°æ”¯æŒå¤šå½©æ ‡è®°ï¼ŒåŒ…æ‹¬ï¼šé»˜è®¤ çº¢ æ©™ é»„ ç»¿ é’ è“ ç´« æµ… æ·± è­¦å‘Š é”™è¯¯ ä¸€å…± 12 ç§é¢œè‰²ã€‚ æ”¯æŒå¤šå½©æ ‡è®°ï¼ŒåŒ…æ‹¬ï¼š&#123;% mark é»˜è®¤ %&#125; &#123;% mark çº¢ color:red %&#125; &#123;% mark æ©™ color:orange %&#125; &#123;% mark é»„ color:yellow %&#125; &#123;% mark ç»¿ color:green %&#125; &#123;% mark é’ color:cyan %&#125; &#123;% mark è“ color:blue %&#125; &#123;% mark ç´« color:purple %&#125; &#123;% mark æµ… color:light %&#125; &#123;% mark æ·± color:dark %&#125; &#123;% mark è­¦å‘Š color:warning %&#125; &#123;% mark é”™è¯¯ color:error %&#125; ä¸€å…± 12 ç§é¢œè‰²ã€‚ tag æ ‡ç­¾è¿™ä¸ªæ•ˆæœç±»ä¼¼äº mark æ ‡ç­¾ï¼Œä½†æ˜¯æ›´é€‚åˆä¸€æ‰¹æ ‡ç­¾ç‹¬å ä¸€è¡Œæ¥ä½¿ç”¨ï¼Œæ”¯æŒé“¾æ¥ï¼š Stellar Hexo GitHub Gitea å¦‚æœæ²¡æœ‰æŒ‡å®šé¢œè‰²ï¼Œä¸”æ²¡æœ‰è®¾ç½®é»˜è®¤é¢œè‰²ï¼Œåˆ™éšæœºå–ä¸€ä¸ªé¢œè‰²ï¼Œå¿«æ¥è¯•è¯•å§ï½ &#123;% tag Stellar https://xaoxuu.com/wiki/stellar/ %&#125;&#123;% tag Hexo https://hexo.io/ %&#125;&#123;% tag GitHub https://github.com/xaoxuu/ %&#125;&#123;% tag Gitea https://gitea.xaox.cc/ color:green %&#125; image å›¾ç‰‡æ ‡ç­¾å›¾ç‰‡æ ‡ç­¾æ˜¯ä¸€ä¸ªç²¾å¿ƒè®¾è®¡çš„åº”å¯¹å„ç§å°ºå¯¸æ’å›¾çš„æ ‡ç­¾ï¼Œå¯¹äºå¤§å›¾ï¼Œå¯ä»¥æ”¾ç½®ä¸€ä¸ªã€Œä¸‹è½½ã€æŒ‰é’®ï¼Œè¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š &#123;% image src [description] [download:bool/string] [width:px] [padding:px] [bg:hex] %&#125; å‚æ•°è¯´æ˜src: å›¾ç‰‡åœ°å€description: å›¾ç‰‡æè¿°download: href # ä¸‹è½½åœ°å€ï¼Œè®¾ç½®æ­¤å€¼åé¼ æ ‡æ”¾åœ¨å›¾ç‰‡ä¸Šä¼šæ˜¾ç¤ºä¸‹è½½åœ°å€ï¼Œå¦‚æœä¸‹è½½åœ°å€ä¸ºå›¾ç‰‡åœ°å€ï¼Œå¯ä»¥è®¾ç½®ä¸º truewidth: 200px # å›¾ç‰‡å®½åº¦padding: 16px # å›¾ç‰‡å››å‘¨å¡«å……å®½åº¦bg: &#x27;#ffffff&#x27; # å›¾ç‰‡åŒºåŸŸèƒŒæ™¯é¢œè‰²ï¼Œ16è¿›åˆ¶ å¤§å°ºå¯¸å›¾ç‰‡æ— è®ºåœ¨ä»€ä¹ˆå®½åº¦çš„è®¾å¤‡ä¸Šéƒ½å¸Œæœ›æ¨ªå‘é“ºæ»¡çš„å›¾ç‰‡ï¼Œä¸€èˆ¬ä¸éœ€è¦é¢å¤–æ“ä½œã€‚å¯ä»¥åœ¨é“¾æ¥åé¢å†™ä¸Šå›¾ç‰‡æè¿°ï¼Œå¦‚æœ‰å¿…è¦ï¼Œå¯ä»¥é€šè¿‡è®¾ç½® download:true ä½¿å…¶æ˜¾ç¤ºä¸€ä¸ªã€Œä¸‹è½½ã€æŒ‰é’®é“¾æ¥æŒ‡å‘å›¾ç‰‡åœ°å€ï¼Œå¦‚æœä¸‹è½½é“¾æ¥ä¸æ˜¾ç¤ºçš„å›¾ç‰‡åœ°å€ä¸åŒï¼Œå¯ä»¥ download:ä¸‹è½½é“¾æ¥ æ¥ä½¿å…¶èƒ½å¤Ÿä¸‹è½½åŸå›¾ã€‚ æ¥è‡ªå°åº¦çš„ Rohit Vohra ä½¿ç”¨ iPhone 12 Pro Max æ‹æ‘„ã€‚ æ¥è‡ªæ¾³å¤§åˆ©äºšçš„ Pieter de Vries ä½¿ç”¨ iPhone 12 Pro Max æ‹æ‘„ã€‚ å†™æ³•å¦‚ä¸‹&#123;% image /assets/wiki/stellar/photos/183e71e0ad995.jpg æ¥è‡ªå°åº¦çš„ Rohit Vohra ä½¿ç”¨ iPhone 12 Pro Max æ‹æ‘„ã€‚ download:https://www.apple.com.cn/newsroom/images/product/iphone/lifestyle/Apple_ShotoniPhone-rohit_vohra_12172020.zip %&#125;&#123;% image /assets/wiki/stellar/photos/bc7bda18328da.jpg æ¥è‡ªæ¾³å¤§åˆ©äºšçš„ Pieter de Vries ä½¿ç”¨ iPhone 12 Pro Max æ‹æ‘„ã€‚ download:https://www.apple.com.cn/newsroom/images/product/iphone/lifestyle/Apple_ShotoniPhone_pieter_de_vries_011221.zip %&#125; å°å°ºå¯¸å›¾ç‰‡ä¼˜åŒ–å®½åº¦è¾ƒå°è€Œé«˜åº¦è¾ƒå¤§çš„å›¾ç‰‡ï¼Œå¯ä»¥è®¾ç½®å®½ã€é«˜ã€å¡«å……é—´è·ã€èƒŒæ™¯è‰²ç­‰å¯¹å…¶å¸ƒå±€è¿›è¡Œä¼˜åŒ–ï¼Œä½¿å¾—å®ƒåœ¨ä¸åŒå®½åº¦çš„å±å¹•ä¸‹éƒ½èƒ½è·å¾—ä¸é”™çš„è§†è§‰ä½“éªŒï¼š æœ‰åº•è‰²çš„å›¾ç‰‡æ²¡æœ‰åº•è‰²çš„å›¾ç‰‡æœ‰åº•è‰²çš„å›¾ç‰‡ï¼Œå¯ä»¥å¡«å……å›¾ç‰‡åº•è‰²ï¼š &#123;% image /assets/xaoxuu/mirror/apple/documentation/watchkit/06d45110-1dd7-49a4-a413-9f5159ecdd0e.png width:200px padding:16px bg:white %&#125; æç¤ºé¼ æ ‡æ‹–æ‹½ä¸€ä¸‹å›¾ç‰‡å¯ä»¥çœ‹çœ‹åŸå›¾ å¦‚æœä¸è¿›è¡Œçº¦æŸï¼Œåœ¨å®½å±è®¾å¤‡ä¸Šé˜…è¯»ä½“éªŒå¾ˆç³Ÿç³•æ²¡æœ‰åº•è‰²çš„å›¾ç‰‡ï¼Œå¯ä»¥å¡«å…… bg:var(--card) åŠ¨æ€é¢œè‰²ï¼Œèƒ½å¤Ÿé€‚é…æš—é»‘æ¨¡å¼ï¼š &#123;% image /assets/wiki/stellar/icon.svg bg:var(--card) padding:16px %&#125; æ”¯æŒ Fancybox æ’ä»¶ç‚¹å‡»æ”¾å¤§ç”±äº Stellar ä¸»é¢˜çš„æ’ä»¶å…·æœ‰æŒ‰éœ€åŠ è½½çš„ç‰¹æ€§ï¼Œæ‰€ä»¥ Fancybox æ’ä»¶é»˜è®¤ä¹Ÿæ˜¯å·²ç»é…ç½®å¥½äº†çš„ï¼Œåœ¨ä»»æ„ image æ ‡ç­¾ä¸­å¢åŠ  fancybox:true å‚æ•°å³å¯ä¸ºç‰¹å®šå›¾ç‰‡å¼€å¯ç¼©æ”¾åŠŸèƒ½ã€‚å¦‚æœä¸€ä¸ªé¡µé¢æ²¡æœ‰ä»»ä½•åœ°æ–¹ä½¿ç”¨ï¼Œåˆ™ä¸ä¼šåŠ è½½ Fancybox æ’ä»¶ã€‚ å›¾ç‰‡æ¥è‡ª Apple å®˜ç½‘ å¦‚æœæ‚¨å¸Œæœ›å…¨ç«™æ‰€æœ‰çš„ image æ ‡ç­¾éƒ½å¼€å¯æ­¤åŠŸèƒ½ï¼Œå¯åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹ä»¥ä¸‹å‚æ•°ï¼š ######## Tag Plugins ########tag_plugins: # &#123;% image %&#125; image: fancybox: true quot å¼•ç”¨é€‚åˆå±…ä¸­ä¸”é†’ç›®çš„å¼•ç”¨ï¼šStellar æ˜¯æœ€å¥½ç”¨çš„ä¸»é¢˜ æ”¯æŒè‡ªå®šä¹‰å¼•å·ï¼šçƒ­é—¨è¯é¢˜ å…¶ä¸­è‡ªå®šä¹‰å¼•å·ç´ æåœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶çš„ tag_plugins.quot ä¸­é…ç½®ï¼š tag_plugins: ... # &#123;% quot %&#125; quot: default: # å¯ä»¥è‡ªè¡Œé…ç½®å¤šç§å›¾æ ‡æ–¹æ¡ˆ prefix: https://bu.dusays.com/2022/10/24/63567d3e092ff.png suffix: https://bu.dusays.com/2022/10/24/63567d3e0ab55.png hashtag: prefix: https://bu.dusays.com/2022/10/24/63567d3e07da3.png å†™æ³•å¦‚ä¸‹é€‚åˆå±…ä¸­ä¸”é†’ç›®çš„å¼•ç”¨ï¼š&#123;% quot Stellar æ˜¯æœ€å¥½ç”¨çš„ä¸»é¢˜ %&#125;æ”¯æŒè‡ªå®šä¹‰å¼•å·ï¼š&#123;% quot çƒ­é—¨è¯é¢˜ icon:hashtag %&#125; ç‰¹åˆ«å¼•ç”¨ æ­¤å¤–ï¼ŒåŠ ä¸Š el:h2/h3/h4/h5/h6 å¯ä»¥ä½œä¸ºæ ‡é¢˜ä½¿ç”¨ poetry è¯—è¯ç¤ºä¾‹å†™æ³•æ¸¸å±±è¥¿æ‘é™†æ¸¸è«ç¬‘å†œå®¶è…Šé…’æµ‘ï¼Œä¸°å¹´ç•™å®¢è¶³é¸¡è±šã€‚å±±é‡æ°´å¤ç–‘æ— è·¯ï¼ŒæŸ³æš—èŠ±æ˜åˆä¸€æ‘ã€‚ç®«é¼“è¿½éšæ˜¥ç¤¾è¿‘ï¼Œè¡£å† ç®€æœ´å¤é£å­˜ã€‚ä»ä»Šè‹¥è®¸é—²ä¹˜æœˆï¼Œæ‹„æ–æ— æ—¶å¤œå©é—¨ã€‚è¯—è¯èŠ‚é€‰&#123;% poetry æ¸¸å±±è¥¿æ‘ author:é™†æ¸¸ footer:è¯—è¯èŠ‚é€‰ %&#125;è«ç¬‘å†œå®¶è…Šé…’æµ‘ï¼Œä¸°å¹´ç•™å®¢è¶³é¸¡è±šã€‚**å±±é‡æ°´å¤ç–‘æ— è·¯ï¼ŒæŸ³æš—èŠ±æ˜åˆä¸€æ‘ã€‚**ç®«é¼“è¿½éšæ˜¥ç¤¾è¿‘ï¼Œè¡£å† ç®€æœ´å¤é£å­˜ã€‚ä»ä»Šè‹¥è®¸é—²ä¹˜æœˆï¼Œæ‹„æ–æ— æ—¶å¤œå©é—¨ã€‚&#123;% endpoetry %&#125; note å¤‡æ³¨å—ç¤ºä¾‹å†™æ³•&#123;% note [title] content [color:color] %&#125;title: æ ‡é¢˜ï¼ˆå¯é€‰ï¼‰content: å†…å®¹color: red/orange/yellow/green/cyan/blue/purple/light/dark/warning/error å…·æœ‰æ ‡é¢˜çš„å¤‡æ³¨å—ç›´æ¥å†™å¤‡æ³¨å†…å®¹ï¼Œé»˜è®¤æ˜¯å’Œä»£ç å—ä¸€æ ·çš„æ ·å¼ï¼Œç¬¬ä¸€ä¸ªç©ºæ ¼å‰é¢çš„æ˜¯æ ‡é¢˜ï¼Œåé¢çš„æ˜¯æ­£æ–‡ï¼Œå¦‚æœæ ‡é¢˜ä¸­éœ€è¦æ˜¾ç¤ºç©ºæ ¼ï¼Œè¯·ä½¿ç”¨ &amp;nbsp; ä»£æ›¿ã€‚ ç¤ºä¾‹å†™æ³•è¿™&nbsp;æ˜¯æ ‡é¢˜è¿™æ˜¯æ­£æ–‡ å“ˆå“ˆã€‚&#123;% note è¿™&amp;nbsp;æ˜¯æ ‡é¢˜ è¿™æ˜¯æ­£æ–‡ å“ˆå“ˆã€‚ %&#125; å½©è‰²å¤‡æ³¨å—ç¤ºä¾‹å†™æ³•ä¸€å…±æ”¯æŒ12ç§é¢œè‰²ï¼Œå¯ä»¥æ»¡è¶³å‡ ä¹æ‰€æœ‰çš„éœ€æ±‚äº†ã€‚color å¯è®¾ç½® redã€orangeã€yellowã€greenã€cyanã€blueã€purpleã€lightã€darkã€warningã€error å‡ ç§å–å€¼ã€‚ ä¸€å…±æ”¯æŒ12ç§é¢œè‰²ï¼Œå¯ä»¥æ»¡è¶³å‡ ä¹æ‰€æœ‰çš„éœ€æ±‚äº†ã€‚color å¯è®¾ç½® redã€orangeã€yellowã€greenã€cyanã€blueã€purpleã€lightã€darkã€warningã€error å‡ ç§å–å€¼ã€‚ ä¸€å…±æ”¯æŒ12ç§é¢œè‰²ï¼Œå¯ä»¥æ»¡è¶³å‡ ä¹æ‰€æœ‰çš„éœ€æ±‚äº†ã€‚color å¯è®¾ç½® redã€orangeã€yellowã€greenã€cyanã€blueã€purpleã€lightã€darkã€warningã€error å‡ ç§å–å€¼ã€‚ ä¸€å…±æ”¯æŒ12ç§é¢œè‰²ï¼Œå¯ä»¥æ»¡è¶³å‡ ä¹æ‰€æœ‰çš„éœ€æ±‚äº†ã€‚color å¯è®¾ç½® redã€orangeã€yellowã€greenã€cyanã€blueã€purpleã€lightã€darkã€warningã€error å‡ ç§å–å€¼ã€‚ ä¸€å…±æ”¯æŒ12ç§é¢œè‰²ï¼Œå¯ä»¥æ»¡è¶³å‡ ä¹æ‰€æœ‰çš„éœ€æ±‚äº†ã€‚color å¯è®¾ç½® redã€orangeã€yellowã€greenã€cyanã€blueã€purpleã€lightã€darkã€warningã€error å‡ ç§å–å€¼ã€‚ ä¸€å…±æ”¯æŒ12ç§é¢œè‰²ï¼Œå¯ä»¥æ»¡è¶³å‡ ä¹æ‰€æœ‰çš„éœ€æ±‚äº†ã€‚color å¯è®¾ç½® redã€orangeã€yellowã€greenã€cyanã€blueã€purpleã€lightã€darkã€warningã€error å‡ ç§å–å€¼ã€‚ ä¸€å…±æ”¯æŒ12ç§é¢œè‰²ï¼Œå¯ä»¥æ»¡è¶³å‡ ä¹æ‰€æœ‰çš„éœ€æ±‚äº†ã€‚color å¯è®¾ç½® redã€orangeã€yellowã€greenã€cyanã€blueã€purpleã€lightã€darkã€warningã€error å‡ ç§å–å€¼ã€‚ ä¸€å…±æ”¯æŒ12ç§é¢œè‰²ï¼Œå¯ä»¥æ»¡è¶³å‡ ä¹æ‰€æœ‰çš„éœ€æ±‚äº†ã€‚color å¯è®¾ç½® redã€orangeã€yellowã€greenã€cyanã€blueã€purpleã€lightã€darkã€warningã€error å‡ ç§å–å€¼ã€‚ ä¸€å…±æ”¯æŒ12ç§é¢œè‰²ï¼Œå¯ä»¥æ»¡è¶³å‡ ä¹æ‰€æœ‰çš„éœ€æ±‚äº†ã€‚color å¯è®¾ç½® redã€orangeã€yellowã€greenã€cyanã€blueã€purpleã€lightã€darkã€warningã€error å‡ ç§å–å€¼ã€‚ ä¸€å…±æ”¯æŒ12ç§é¢œè‰²ï¼Œå¯ä»¥æ»¡è¶³å‡ ä¹æ‰€æœ‰çš„éœ€æ±‚äº†ã€‚color å¯è®¾ç½® redã€orangeã€yellowã€greenã€cyanã€blueã€purpleã€lightã€darkã€warningã€error å‡ ç§å–å€¼ã€‚ ä¸€å…±æ”¯æŒ12ç§é¢œè‰²ï¼Œå¯ä»¥æ»¡è¶³å‡ ä¹æ‰€æœ‰çš„éœ€æ±‚äº†ã€‚color å¯è®¾ç½® redã€orangeã€yellowã€greenã€cyanã€blueã€purpleã€lightã€darkã€warningã€error å‡ ç§å–å€¼ã€‚ ä¸€å…±æ”¯æŒ12ç§é¢œè‰²ï¼Œå¯ä»¥æ»¡è¶³å‡ ä¹æ‰€æœ‰çš„éœ€æ±‚äº†ã€‚color å¯è®¾ç½® redã€orangeã€yellowã€greenã€cyanã€blueã€purpleã€lightã€darkã€warningã€error å‡ ç§å–å€¼ã€‚&#123;% note ä¸€å…±æ”¯æŒ12ç§é¢œè‰²ï¼Œå¯ä»¥æ»¡è¶³å‡ ä¹æ‰€æœ‰çš„éœ€æ±‚äº†ã€‚ color å¯è®¾ç½® redã€orangeã€yellowã€greenã€cyanã€blueã€purpleã€lightã€darkã€warningã€error å‡ ç§å–å€¼ã€‚ %&#125;&#123;% note color:cyan ä¸€å…±æ”¯æŒ12ç§é¢œè‰²ï¼Œå¯ä»¥æ»¡è¶³å‡ ä¹æ‰€æœ‰çš„éœ€æ±‚äº†ã€‚ color å¯è®¾ç½® redã€orangeã€yellowã€greenã€cyanã€blueã€purpleã€lightã€darkã€warningã€error å‡ ç§å–å€¼ã€‚ %&#125; link é“¾æ¥å¡ç‰‡æ•ˆæœæ¼”ç¤ºè¯­æ³•æ ¼å¼å†™æ³•ç¤ºä¾‹https://xaoxuu.com/blog/20221029/https://xaoxuu.com/blog/20221029/ https://xaoxuu.com/blog/20221029/https://xaoxuu.com/blog/20221029/å¤–é“¾å¡ç‰‡æ ‡ç­¾çš„è¯­æ³•æ ¼å¼ä¸ºï¼š &#123;% link href [title] [icon:src] [desc:true/false] %&#125; å‚æ•°å«ä¹‰ï¼š href: é“¾æ¥title: å¯é€‰ï¼Œæ‰‹åŠ¨è®¾ç½®æ ‡é¢˜ï¼ˆä¸ºç©ºæ—¶ä¼šè‡ªåŠ¨æŠ“å–é¡µé¢æ ‡é¢˜ï¼‰icon: å¯é€‰ï¼Œæ‰‹åŠ¨è®¾ç½®å›¾æ ‡ï¼ˆä¸ºç©ºæ—¶ä¼šè‡ªåŠ¨æŠ“å–é¡µé¢å›¾æ ‡ï¼‰desc: å¯é€‰ï¼Œæ˜¯å¦æ˜¾ç¤ºæ‘˜è¦æè¿°ï¼Œä¸ºtrueæ—¶å°†ä¼šæ˜¾ç¤ºé¡µé¢æè¿°ä¸å¸¦æ‘˜è¦çš„æ ·å¼ï¼š&#123;% link https://xaoxuu.com/blog/20221029/ %&#125;å¸¦æ‘˜è¦çš„æ ·å¼ï¼š&#123;% link https://xaoxuu.com/blog/20221029/ desc:true %&#125; copy å¤åˆ¶è¡Œç¤ºä¾‹å†™æ³•å¯¹äºå•è¡Œå†…å®¹ï¼Œå¯ä»¥ä½¿ç”¨ copy æ ‡ç­¾æ¥å®ç°å¤åˆ¶åŠŸèƒ½ï¼š æ‚¨å¯ä»¥è®¾ç½® git:https æˆ–è€… git:ssh æˆ–è€… git:gh æ¥å¿«é€Ÿæ”¾ç½®ä¸€ä¸ª git ä»“åº“é“¾æ¥ï¼š &#123;% copy curl -s https://sh.xaox.cc/install | sh %&#125;&#123;% copy width:max curl -s https://sh.xaox.cc/install | sh %&#125;&#123;% copy git:https xaoxuu.com/hexo-theme-stellar %&#125;&#123;% copy git:ssh xaoxuu.com/hexo-theme-stellar %&#125;&#123;% copy git:gh xaoxuu.com/hexo-theme-stellar %&#125; radio å•é€‰ç¤ºä¾‹å†™æ³•æ²¡æœ‰å‹¾é€‰çš„å•é€‰æ¡† å·²å‹¾é€‰çš„å•é€‰æ¡†&#123;% radio æ²¡æœ‰å‹¾é€‰çš„å•é€‰æ¡† %&#125;&#123;% radio checked:true å·²å‹¾é€‰çš„å•é€‰æ¡† %&#125; æ”¯æŒçš„å‚æ•°checked: true/falsecolor: red/orange/yellow/green/cyan/blue/purple checkbox å¤é€‰ç¤ºä¾‹å†™æ³•æ™®é€šçš„æ²¡æœ‰å‹¾é€‰çš„å¤é€‰æ¡† æ™®é€šçš„å·²å‹¾é€‰çš„å¤é€‰æ¡† æ˜¾ç¤ºä¸ºåŠ å·çš„ç»¿è‰²çš„å·²å‹¾é€‰çš„å¤é€‰æ¡† æ˜¾ç¤ºä¸ºå‡å·çš„é»„è‰²çš„å·²å‹¾é€‰çš„å¤é€‰æ¡† æ˜¾ç¤ºä¸ºä¹˜å·çš„çº¢è‰²çš„å·²å‹¾é€‰çš„å¤é€‰æ¡†&#123;% checkbox æ™®é€šçš„æ²¡æœ‰å‹¾é€‰çš„å¤é€‰æ¡† %&#125;&#123;% checkbox checked:true æ™®é€šçš„å·²å‹¾é€‰çš„å¤é€‰æ¡† %&#125;&#123;% checkbox symbol:plus color:green checked:true æ˜¾ç¤ºä¸ºåŠ å·çš„ç»¿è‰²çš„å·²å‹¾é€‰çš„å¤é€‰æ¡† %&#125;&#123;% checkbox symbol:minus color:yellow checked:true æ˜¾ç¤ºä¸ºå‡å·çš„é»„è‰²çš„å·²å‹¾é€‰çš„å¤é€‰æ¡† %&#125;&#123;% checkbox symbol:times color:red checked:true æ˜¾ç¤ºä¸ºä¹˜å·çš„çº¢è‰²çš„å·²å‹¾é€‰çš„å¤é€‰æ¡† %&#125; æ”¯æŒçš„å‚æ•°checked: true/falsecolor: red/orange/yellow/green/cyan/blue/purplesymbol: plus/minus/times navbar å¯¼èˆªæ æ–‡ç« å†…ä¹Ÿå¯ä»¥æ’å…¥ä¸€ä¸ªå¯¼èˆªæ ï¼š &#123;% navbar active:1 [æ–‡ç« ](/) [é¡¹ç›®](/wiki/) [ç•™è¨€](#comments) [GitHub](https://github.com/xaoxuu/) %&#125; æ–‡ç« é¡¹ç›®ç•™è¨€GitHub frame è®¾å¤‡æ¡†æ¶ç¤ºä¾‹å†™æ³•&#123;% frame iphone11 img:/assets/wiki/prohud/toast/demo-loading.png video:/assets/wiki/prohud/toast/demo-loading.mp4 focus:top %&#125; æ–‡æœ¬ä¿®é¥°æ ‡ç­¾é›† è¿™æ˜¯ å¯†ç  æ ‡ç­¾ è¿™æ˜¯ ä¸‹åˆ’çº¿ æ ‡ç­¾ è¿™æ˜¯ ç€é‡å· æ ‡ç­¾ è¿™æ˜¯ æ³¢æµªçº¿ æ ‡ç­¾ è¿™æ˜¯ åˆ é™¤çº¿ æ ‡ç­¾ è¿™æ˜¯ ä¸Šè§’æ ‡ æ ‡ç­¾ è¿™æ˜¯ ä¸‹è§’æ ‡ æ ‡ç­¾ è¿™æ˜¯ é”®ç›˜æ ·å¼ æ ‡ç­¾ï¼Œè¯•ä¸€è¯•ï¼šâŒ˜ + D å†™æ³•å¦‚ä¸‹- è¿™æ˜¯ &#123;% psw å¯†ç  %&#125; æ ‡ç­¾- è¿™æ˜¯ &#123;% u ä¸‹åˆ’çº¿ %&#125; æ ‡ç­¾- è¿™æ˜¯ &#123;% emp ç€é‡å· %&#125; æ ‡ç­¾- è¿™æ˜¯ &#123;% wavy æ³¢æµªçº¿ %&#125; æ ‡ç­¾- è¿™æ˜¯ &#123;% del åˆ é™¤çº¿ %&#125; æ ‡ç­¾- è¿™æ˜¯ &#123;% sup ä¸Šè§’æ ‡ color:red %&#125; æ ‡ç­¾- è¿™æ˜¯ &#123;% sub ä¸‹è§’æ ‡ %&#125; æ ‡ç­¾- è¿™æ˜¯ &#123;% kbd é”®ç›˜æ ·å¼ %&#125; æ ‡ç­¾ï¼Œè¯•ä¸€è¯•ï¼š&#123;% kbd âŒ˜ %&#125; + &#123;% kbd D %&#125;"}]